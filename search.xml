<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>è§£å†³ Github å›¾ç‰‡ä¸æ˜¾ç¤ºé—®é¢˜</title>
    <url>/posts/fb621aaa.html</url>
    <content><![CDATA[<p>ä¿®æ”¹ C:\Windows\System32\drivers\etc\hosts æ–‡ä»¶</p>
<p>æ·»åŠ å¦‚ä¸‹ ip åœ°å€</p>
<a id="more"></a>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># GitHub Start </span><br><span class="line">140.82.113.3      github.com</span><br><span class="line">140.82.114.20     gist.github.com</span><br><span class="line"></span><br><span class="line">151.101.184.133    assets-cdn.github.com</span><br><span class="line">151.101.184.133    raw.githubusercontent.com</span><br><span class="line">151.101.184.133    gist.githubusercontent.com</span><br><span class="line">151.101.184.133    cloud.githubusercontent.com</span><br><span class="line">151.101.184.133    camo.githubusercontent.com</span><br><span class="line">151.101.184.133    avatars0.githubusercontent.com</span><br><span class="line">199.232.68.133     avatars0.githubusercontent.com</span><br><span class="line">199.232.28.133     avatars1.githubusercontent.com</span><br><span class="line">151.101.184.133    avatars1.githubusercontent.com</span><br><span class="line">151.101.184.133    avatars2.githubusercontent.com</span><br><span class="line">199.232.28.133     avatars2.githubusercontent.com</span><br><span class="line">151.101.184.133    avatars3.githubusercontent.com</span><br><span class="line">199.232.68.133     avatars3.githubusercontent.com</span><br><span class="line">151.101.184.133    avatars4.githubusercontent.com</span><br><span class="line">199.232.68.133     avatars4.githubusercontent.com</span><br><span class="line">151.101.184.133    avatars5.githubusercontent.com</span><br><span class="line">199.232.68.133     avatars5.githubusercontent.com</span><br><span class="line">151.101.184.133    avatars6.githubusercontent.com</span><br><span class="line">199.232.68.133     avatars6.githubusercontent.com</span><br><span class="line">151.101.184.133    avatars7.githubusercontent.com</span><br><span class="line">199.232.68.133     avatars7.githubusercontent.com</span><br><span class="line">151.101.184.133    avatars8.githubusercontent.com</span><br><span class="line">199.232.68.133     avatars8.githubusercontent.com</span><br><span class="line"># GitHub End</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Hexo &amp; NexT</category>
      </categories>
      <tags>
        <tag>Github</tag>
        <tag>é—®é¢˜</tag>
      </tags>
  </entry>
  <entry>
    <title>è§£å†³ Hexo å›¾ç‰‡ä¸æ˜¾ç¤ºé—®é¢˜</title>
    <url>/posts/a0ec3378.html</url>
    <content><![CDATA[<h3 id="1-å®‰è£…å›¾ç‰‡æ’ä»¶"><a href="#1-å®‰è£…å›¾ç‰‡æ’ä»¶" class="headerlink" title="1. å®‰è£…å›¾ç‰‡æ’ä»¶"></a>1. å®‰è£…å›¾ç‰‡æ’ä»¶</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-asset-image --save</span><br></pre></td></tr></table></figure>



<h3 id="2-ä¿®æ”¹-config-xml-é…ç½®æ–‡ä»¶"><a href="#2-ä¿®æ”¹-config-xml-é…ç½®æ–‡ä»¶" class="headerlink" title="2. ä¿®æ”¹ _config.xml é…ç½®æ–‡ä»¶"></a>2. ä¿®æ”¹ _config.xml é…ç½®æ–‡ä»¶</h3><p>ä¿®æ”¹ post_asset_folder å€¼ä¸º true</p>
<a id="more"></a>



<h3 id="3-æ–°å»ºä¸€ç¯‡æ–‡ç« "><a href="#3-æ–°å»ºä¸€ç¯‡æ–‡ç« " class="headerlink" title="3. æ–°å»ºä¸€ç¯‡æ–‡ç« "></a>3. æ–°å»ºä¸€ç¯‡æ–‡ç« </h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo new post title</span><br></pre></td></tr></table></figure>



<h3 id="4-åœ¨è‡ªåŠ¨ç”Ÿæˆçš„èµ„æºæ–‡ä»¶å¤¹ä¸‹æ”¾å…¥å›¾ç‰‡"><a href="#4-åœ¨è‡ªåŠ¨ç”Ÿæˆçš„èµ„æºæ–‡ä»¶å¤¹ä¸‹æ”¾å…¥å›¾ç‰‡" class="headerlink" title="4. åœ¨è‡ªåŠ¨ç”Ÿæˆçš„èµ„æºæ–‡ä»¶å¤¹ä¸‹æ”¾å…¥å›¾ç‰‡"></a>4. åœ¨è‡ªåŠ¨ç”Ÿæˆçš„èµ„æºæ–‡ä»¶å¤¹ä¸‹æ”¾å…¥å›¾ç‰‡</h3><h3 id="5-ä¿®æ”¹-md-æ–‡æ¡£"><a href="#5-ä¿®æ”¹-md-æ–‡æ¡£" class="headerlink" title="5. ä¿®æ”¹ md æ–‡æ¡£"></a>5. ä¿®æ”¹ md æ–‡æ¡£</h3><p>å°†å›¾ç‰‡çš„ markdown æ ¼å¼ä¿®æ”¹ä¸º </p>
<p><em>è¯¦ç»†å‚ç…§å®˜æ–¹æ–‡æ¡£ <a href="https://hexo.bootcss.com/docs/asset-folders.html">https://hexo.bootcss.com/docs/asset-folders.html</a></em></p>
<h3 id="6-å¦‚æœæœ‰å¿…è¦-ç¦æ­¢ç½‘é¡µç¼“å­˜"><a href="#6-å¦‚æœæœ‰å¿…è¦-ç¦æ­¢ç½‘é¡µç¼“å­˜" class="headerlink" title="6. å¦‚æœæœ‰å¿…è¦ ç¦æ­¢ç½‘é¡µç¼“å­˜"></a>6. å¦‚æœæœ‰å¿…è¦ ç¦æ­¢ç½‘é¡µç¼“å­˜</h3>]]></content>
      <categories>
        <category>Hexo &amp; NexT</category>
      </categories>
      <tags>
        <tag>é—®é¢˜</tag>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>19-20-2 å­¦æœŸæ€»ç»“</title>
    <url>/posts/5b335135.html</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>å­¦æœŸæ€»ç»“</category>
      </categories>
      <tags>
        <tag>å­¦æœŸæ€»ç»“</tag>
      </tags>
  </entry>
  <entry>
    <title>è§£å†³ NexT ç¿»é¡µæŒ‰é’®å›¾æ ‡é—®é¢˜</title>
    <url>/posts/eb5b45e3.html</url>
    <content><![CDATA[<p>è§ä¸‹å›¾</p>
<a id="more"></a>

<img src="/posts/eb5b45e3/image-20200722154007256.png" class>

]]></content>
      <categories>
        <category>Hexo &amp; NexT</category>
      </categories>
      <tags>
        <tag>é—®é¢˜</tag>
        <tag>NexT</tag>
      </tags>
  </entry>
  <entry>
    <title>è§£å†³ NexT é¦–é¡µæ–‡ç« é¢„è§ˆé—®é¢˜</title>
    <url>/posts/63dfd085.html</url>
    <content><![CDATA[<p>è§ä¸‹å›¾</p>
<a id="more"></a>

<img src="/posts/63dfd085/pic.png" class>]]></content>
      <categories>
        <category>Hexo &amp; NexT</category>
      </categories>
      <tags>
        <tag>é—®é¢˜</tag>
        <tag>NexT</tag>
      </tags>
  </entry>
  <entry>
    <title>01_å®‰è£… MySQL</title>
    <url>/posts/16b0a39b.html</url>
    <content><![CDATA[<blockquote>
<p>å‚ç…§ç‹‚ç¥è¯´çš„åšå®¢ï¼š<a href="https://blog.csdn.net/qq_33369905/article/details/105828923">https://blog.csdn.net/qq_33369905/article/details/105828923</a></p>
</blockquote>
<h3 id="1-ä¸‹è½½-zip-æ ¼å¼çš„å®‰è£…æ–‡ä»¶"><a href="#1-ä¸‹è½½-zip-æ ¼å¼çš„å®‰è£…æ–‡ä»¶" class="headerlink" title="1. ä¸‹è½½ zip æ ¼å¼çš„å®‰è£…æ–‡ä»¶"></a>1. ä¸‹è½½ zip æ ¼å¼çš„å®‰è£…æ–‡ä»¶</h3><p>MySQL v5.7.31</p>
<p><a href="https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.31-winx64.zip">https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.31-winx64.zip</a></p>
<h3 id="2-è§£å‹åˆ°å®‰è£…ç›®å½•"><a href="#2-è§£å‹åˆ°å®‰è£…ç›®å½•" class="headerlink" title="2. è§£å‹åˆ°å®‰è£…ç›®å½•"></a>2. è§£å‹åˆ°å®‰è£…ç›®å½•</h3><h3 id="3-é…ç½®ç¯å¢ƒå˜é‡"><a href="#3-é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="3. é…ç½®ç¯å¢ƒå˜é‡"></a>3. é…ç½®ç¯å¢ƒå˜é‡</h3><p>Path å˜é‡æ·»åŠ  D:\Environment\mysql-5.7.31\bin</p>
<a id="more"></a>



<h3 id="4-æ–°å»ºé…ç½®æ–‡ä»¶-my-ini"><a href="#4-æ–°å»ºé…ç½®æ–‡ä»¶-my-ini" class="headerlink" title="4. æ–°å»ºé…ç½®æ–‡ä»¶ my.ini"></a>4. æ–°å»ºé…ç½®æ–‡ä»¶ my.ini</h3><p><em>æ³¨æ„ï¼šä¿®æ”¹è·¯å¾„</em></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="attr">basedir</span>=D:\Environment\mysql-<span class="number">5.7</span>.<span class="number">31</span>\</span><br><span class="line"><span class="attr">datadir</span>=D:\Environment\mysql-<span class="number">5.7</span>.<span class="number">31</span>\data\</span><br><span class="line"><span class="attr">port</span>=<span class="number">3306</span></span><br><span class="line">skip-grant-tables</span><br></pre></td></tr></table></figure>



<h3 id="5-å¯åŠ¨ç®¡ç†å‘˜æ¨¡å¼çš„-cmd"><a href="#5-å¯åŠ¨ç®¡ç†å‘˜æ¨¡å¼çš„-cmd" class="headerlink" title="5. å¯åŠ¨ç®¡ç†å‘˜æ¨¡å¼çš„ cmd"></a>5. å¯åŠ¨ç®¡ç†å‘˜æ¨¡å¼çš„ cmd</h3><ol>
<li><p>åˆ‡æ¢åˆ° bin ç›®å½•</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">d:</span><br><span class="line">cd Environment\mysql-5.7.31\bin</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®‰è£… mysqld æœåŠ¡ï¼Œåˆå§‹åŒ– mysql</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mysqld â€“install</span><br><span class="line">mysqld --initialize-insecure --user=mysql</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿®æ”¹ç®¡ç†å‘˜å¯†ç </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">net start mysql</span><br><span class="line">mysql â€“u root â€“p</span><br><span class="line">update mysql.user set authentication_string=password(&#x27;123456&#x27;) where user=&#x27;root&#x27; and Host = &#x27;localhost&#x27;;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="6-æ³¨é‡Š-my-ini-æ–‡ä»¶çš„æœ€åä¸€å¥è¯"><a href="#6-æ³¨é‡Š-my-ini-æ–‡ä»¶çš„æœ€åä¸€å¥è¯" class="headerlink" title="6. æ³¨é‡Š my.ini æ–‡ä»¶çš„æœ€åä¸€å¥è¯"></a>6. æ³¨é‡Š my.ini æ–‡ä»¶çš„æœ€åä¸€å¥è¯</h3><h3 id="7-é‡å¯-MySQL"><a href="#7-é‡å¯-MySQL" class="headerlink" title="7. é‡å¯ MySQL"></a>7. é‡å¯ MySQL</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">exit</span><br><span class="line">net stop mysql</span><br><span class="line">net start mysql</span><br></pre></td></tr></table></figure>



<h3 id="8-æµ‹è¯•è¿æ¥"><a href="#8-æµ‹è¯•è¿æ¥" class="headerlink" title="8. æµ‹è¯•è¿æ¥"></a>8. æµ‹è¯•è¿æ¥</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mysql -uroot -p123456</span><br></pre></td></tr></table></figure>



<h3 id="9-ä½¿ç”¨-SQLyog-ç®¡ç†æ•°æ®åº“"><a href="#9-ä½¿ç”¨-SQLyog-ç®¡ç†æ•°æ®åº“" class="headerlink" title="9. ä½¿ç”¨ SQLyog ç®¡ç†æ•°æ®åº“"></a>9. ä½¿ç”¨ SQLyog ç®¡ç†æ•°æ®åº“</h3><h4 id="9-0-SQLyog-æ³¨å†Œç "><a href="#9-0-SQLyog-æ³¨å†Œç " class="headerlink" title="9.0 SQLyog æ³¨å†Œç "></a>9.0 SQLyog æ³¨å†Œç </h4><p>kuangshen</p>
<p>8d8120df-a5c3-4989-8f47-5afc79c56e7c</p>
<h4 id="9-1-æ–°å»ºæ•°æ®åº“"><a href="#9-1-æ–°å»ºæ•°æ®åº“" class="headerlink" title="9.1 æ–°å»ºæ•°æ®åº“"></a>9.1 æ–°å»ºæ•°æ®åº“</h4><ul>
<li><p>å·¦ä¾§è¾¹æ å³é”® -&gt; ç‚¹å‡»ã€æ–°å»ºæ•°æ®åº“ã€‘</p>
</li>
<li><p>å­—ç¬¦é›†ï¼šutf8</p>
</li>
<li><p>æ’åºè§„åˆ™ï¼šutf8_general_ci</p>
</li>
</ul>
<h4 id="9-2-æ–°å»ºè¡¨"><a href="#9-2-æ–°å»ºè¡¨" class="headerlink" title="9.2 æ–°å»ºè¡¨"></a>9.2 æ–°å»ºè¡¨</h4><ul>
<li>å¼•æ“ï¼šInnoDB</li>
<li>å­—ç¬¦é›†ï¼šutf8</li>
<li>æ ¸å¯¹ï¼šutf8_general_ci</li>
</ul>
<h4 id="9-3-æ·»åŠ è®°å½•"><a href="#9-3-æ·»åŠ è®°å½•" class="headerlink" title="9.3 æ·»åŠ è®°å½•"></a>9.3 æ·»åŠ è®°å½•</h4><ul>
<li>å³é”®è¡¨ -&gt; ã€æ‰“å¼€è¡¨ã€‘</li>
<li>è¾“å…¥</li>
<li>å³ä¸Šè§’åˆ·æ–° ä¿å­˜</li>
</ul>
]]></content>
      <categories>
        <category>MySQL å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>02_æ•°æ®åº“æ“ä½œ</title>
    <url>/posts/5dfb91cd.html</url>
    <content><![CDATA[<h3 id="1-å‘½ä»¤è¡Œæ“ä½œ"><a href="#1-å‘½ä»¤è¡Œæ“ä½œ" class="headerlink" title="1. å‘½ä»¤è¡Œæ“ä½œ"></a>1. å‘½ä»¤è¡Œæ“ä½œ</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- è¿æ¥æ•°æ®åº“</span></span><br><span class="line">mysql -uroot -p123456</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">databases</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ‡æ¢æ•°æ®åº“</span></span><br><span class="line"><span class="keyword">use</span> school;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥çœ‹æ•°æ®åº“ä¸­æ‰€æœ‰çš„è¡¨</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">tables</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥çœ‹è¡¨ç»“æ„</span></span><br><span class="line"><span class="keyword">describe</span> studentï¼›</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ–°å»ºæ•°æ®åº“</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> newdb;</span><br></pre></td></tr></table></figure>

<a id="more"></a>



<h3 id="2-ç»“æ„åŒ–æŸ¥è¯¢è¯­å¥åˆ†ç±»"><a href="#2-ç»“æ„åŒ–æŸ¥è¯¢è¯­å¥åˆ†ç±»" class="headerlink" title="2. ç»“æ„åŒ–æŸ¥è¯¢è¯­å¥åˆ†ç±»"></a>2. ç»“æ„åŒ–æŸ¥è¯¢è¯­å¥åˆ†ç±»</h3><table>
<thead>
<tr>
<th>åç§°</th>
<th>è§£é‡Š</th>
<th>å‘½ä»¤</th>
</tr>
</thead>
<tbody><tr>
<td>DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰</td>
<td>å®šä¹‰å’Œç®¡ç†æ•°æ®å¯¹è±¡ï¼Œå¦‚æ•°æ®åº“ã€æ•°æ®è¡¨ç­‰</td>
<td>createã€dropã€alter</td>
</tr>
<tr>
<td>DMLï¼ˆæ•°æ®æ“ä½œè¯­è¨€ï¼‰</td>
<td>æ“ä½œæ•°æ®åº“å¯¹è±¡ä¸­æ‰€åŒ…å«çš„æ•°æ®</td>
<td>insertã€updateã€delete</td>
</tr>
<tr>
<td>DQLï¼ˆæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼‰</td>
<td>æŸ¥è¯¢æ•°æ®åº“æ•°æ®</td>
<td>select</td>
</tr>
<tr>
<td>DCLï¼ˆæ•°æ®æ§åˆ¶è¯­è¨€ï¼‰</td>
<td>ç®¡ç†æ•°æ®åº“çš„è¯­è¨€ï¼ŒåŒ…æ‹¬ç®¡ç†æƒé™åŠæ•°æ®æ›´æ”¹</td>
<td>grantã€commitã€rollback</td>
</tr>
</tbody></table>
<h3 id="3-æ“ä½œæ•°æ®åº“"><a href="#3-æ“ä½œæ•°æ®åº“" class="headerlink" title="3. æ“ä½œæ•°æ®åº“"></a>3. æ“ä½œæ•°æ®åº“</h3><ol>
<li><p>åˆ›å»ºæ•°æ®åº“</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> [<span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exists</span>] xxx;</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹æ•°æ®åº“çš„å®šä¹‰è¯­å¥ï¼ˆé€†å‘ï¼‰</p>
<p><code>show create database xxx</code></p>
</li>
<li><p>åˆ é™¤æ•°æ®åº“</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">database</span> [<span class="keyword">if</span> <span class="keyword">exists</span>] xxx;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨æ•°æ®åº“</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="string">`xxx`</span>;</span><br><span class="line"><span class="comment">-- å¦‚æœè¡¨æ˜æˆ–å­—æ®µåä¸ºå…³é”®å­— åˆ™éœ€è¦åŠ ``</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥çœ‹æ•°æ®åº“</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">database</span>;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="4-æ“ä½œæ•°æ®åº“ä¸­çš„è¡¨"><a href="#4-æ“ä½œæ•°æ®åº“ä¸­çš„è¡¨" class="headerlink" title="4. æ“ä½œæ•°æ®åº“ä¸­çš„è¡¨"></a>4. æ“ä½œæ•°æ®åº“ä¸­çš„è¡¨</h3><ol start="0">
<li><p>æ•°æ®åº“è¡¨çš„å­—æ®µå±æ€§</p>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td>Unsigned</td>
<td>æ— ç¬¦å·æ•´æ•°ï¼ˆè¡¨ç¤ºä¸èƒ½ä¸ºè´Ÿæ•°ï¼‰</td>
</tr>
<tr>
<td>Zerofill</td>
<td>0å¡«å……ï¼ˆä¸è¶³ä½æ•°è‡ªåŠ¨è¡¥0ï¼‰</td>
</tr>
<tr>
<td>è‡ªå¢</td>
<td>é€šå¸¸ç”¨æ¥è®¾è®¡å”¯ä¸€ä¸»é”®ï¼ˆå¿…é¡»æ˜¯æ•´æ•°ç±»å‹ï¼‰</td>
</tr>
<tr>
<td>éç©º</td>
<td>not nullï¼šä¸èµ‹å€¼æŠ¥é”™    nullï¼šé»˜è®¤å€¼ä¸ºnull</td>
</tr>
<tr>
<td>é»˜è®¤</td>
<td>é»˜è®¤å€¼</td>
</tr>
</tbody></table>
</li>
<li><p>åˆ›å»ºæ•°æ®åº“è¡¨</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> [<span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exists</span>] <span class="string">`student`</span>(</span><br><span class="line">    <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="literal">null</span> auto_increment <span class="keyword">comment</span> <span class="string">&#x27;å­¦å·&#x27;</span>,</span><br><span class="line">    <span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">30</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="string">&#x27;åŒ¿å&#x27;</span> <span class="keyword">comment</span> <span class="string">&#x27;å§“å&#x27;</span>,</span><br><span class="line">    <span class="string">`pwd`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="string">&#x27;123456&#x27;</span> <span class="keyword">comment</span> <span class="string">&#x27;å¯†ç &#x27;</span>,</span><br><span class="line">    <span class="string">`sex`</span> <span class="built_in">varchar</span>(<span class="number">2</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="string">&#x27;ç”·&#x27;</span> <span class="keyword">comment</span> <span class="string">&#x27;æ€§åˆ«&#x27;</span>,</span><br><span class="line">    <span class="string">`birthday`</span> datetime <span class="keyword">default</span> <span class="literal">null</span> <span class="keyword">comment</span> <span class="string">&#x27;å‡ºç”Ÿæ—¥æœŸ&#x27;</span>,</span><br><span class="line">    <span class="string">`address`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">default</span> <span class="literal">null</span> <span class="keyword">comment</span> <span class="string">&#x27;å®¶åº­ä½å€&#x27;</span>,</span><br><span class="line">    <span class="string">`email`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">default</span> <span class="literal">null</span> <span class="keyword">comment</span> <span class="string">&#x27;é‚®ç®±&#x27;</span>,</span><br><span class="line">    primary <span class="keyword">key</span> (<span class="string">`id`</span>)</span><br><span class="line">)<span class="keyword">engine</span>=<span class="keyword">innodb</span> <span class="keyword">default</span> <span class="keyword">charset</span>=utf8</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹æ•°æ®åº“è¡¨çš„å®šä¹‰è¯­å¥ï¼ˆé€†å‘ï¼‰</p>
<p><code>show create table xxx</code></p>
</li>
<li><p>æ˜¾ç¤ºè¡¨çš„ç»“æ„</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">desc xxx</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿®æ”¹æ•°æ®åº“è¡¨</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- ä¿®æ”¹è¡¨å</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> oldName <span class="keyword">rename</span> <span class="keyword">as</span> newName</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¢åŠ è¡¨çš„å­—æ®µ</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> teacher <span class="keyword">add</span> age <span class="built_in">int</span>(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¿®æ”¹è¡¨çš„å­—æ®µ</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> teacher <span class="keyword">modify</span> age <span class="built_in">varchar</span>(<span class="number">11</span>) <span class="comment">-- ä¿®æ”¹çº¦æŸ</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> teacher <span class="keyword">change</span> age age1 <span class="built_in">int</span>(<span class="number">3</span>) <span class="comment">-- å­—æ®µé‡å‘½å</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ é™¤è¡¨çš„å­—æ®µ</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> teacher <span class="keyword">drop</span> age1</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ é™¤æ•°æ®åº“è¡¨</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> [<span class="keyword">if</span> <span class="keyword">exists</span>] teacher</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="5-æ“ä½œè¡¨çš„æ•°æ®"><a href="#5-æ“ä½œè¡¨çš„æ•°æ®" class="headerlink" title="5. æ“ä½œè¡¨çš„æ•°æ®"></a>5. æ“ä½œè¡¨çš„æ•°æ®</h3><h4 id="5-1-æ·»åŠ å¤–é”®ï¼ˆäº†è§£ï¼‰"><a href="#5-1-æ·»åŠ å¤–é”®ï¼ˆäº†è§£ï¼‰" class="headerlink" title="5.1 æ·»åŠ å¤–é”®ï¼ˆäº†è§£ï¼‰"></a>5.1 æ·»åŠ å¤–é”®ï¼ˆäº†è§£ï¼‰</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="string">`student`</span> </span><br><span class="line"><span class="keyword">add</span> <span class="keyword">constraint</span> <span class="string">`FK_gradeId`</span> <span class="keyword">foreign</span> <span class="keyword">key</span>(<span class="string">`gradeId`</span>) <span class="keyword">references</span> <span class="string">`grade`</span>(<span class="string">`gradeId`</span>)</span><br></pre></td></tr></table></figure>



<h4 id="5-2-æ·»åŠ "><a href="#5-2-æ·»åŠ " class="headerlink" title="5.2 æ·»åŠ "></a>5.2 æ·»åŠ </h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="string">`grade`</span>(<span class="string">`gradeName`</span>) <span class="keyword">values</span>(<span class="string">&#x27;å¤§å››&#x27;</span>)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="string">`grade`</span>(<span class="string">`gradeName`</span>) <span class="keyword">values</span>(<span class="string">&#x27;å¤§ä¸€&#x27;</span>),(<span class="string">&#x27;å¤§äºŒ&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="string">`student`</span>(<span class="string">`name`</span>,<span class="string">`pwd`</span>,<span class="string">`sex`</span>) <span class="keyword">values</span>(<span class="string">&#x27;å¼ ä¸‰&#x27;</span>,<span class="string">&#x27;aaaa&#x27;</span>,<span class="string">&#x27;å¥³&#x27;</span>)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="string">`student`</span>(<span class="string">`name`</span>,<span class="string">`pwd`</span>,<span class="string">`sex`</span>) <span class="keyword">values</span>(<span class="string">&#x27;ç‹äº”&#x27;</span>,<span class="string">&#x27;cccc&#x27;</span>,<span class="string">&#x27;å¥³&#x27;</span>),(<span class="string">&#x27;æå››&#x27;</span>,<span class="string">&#x27;bbbb&#x27;</span>,<span class="string">&#x27;ç”·&#x27;</span>)</span><br></pre></td></tr></table></figure>



<h4 id="5-3-ä¿®æ”¹"><a href="#5-3-ä¿®æ”¹" class="headerlink" title="5.3 ä¿®æ”¹"></a>5.3 ä¿®æ”¹</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">update</span> <span class="string">`student`</span> <span class="keyword">set</span> <span class="string">`name`</span>=<span class="string">&#x27;lhx&#x27;</span> <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">1</span></span><br><span class="line"><span class="keyword">update</span> <span class="string">`student`</span> <span class="keyword">set</span> <span class="string">`name`</span>=<span class="string">&#x27;lhx1&#x27;</span>,<span class="string">`email`</span>=<span class="string">&#x27;horsenliu@qq.com&#x27;</span> <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">1</span></span><br></pre></td></tr></table></figure>



<h4 id="5-4-åˆ é™¤"><a href="#5-4-åˆ é™¤" class="headerlink" title="5.4 åˆ é™¤"></a>5.4 åˆ é™¤</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> <span class="string">`student`</span> <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ¸…ç©ºä¸€ä¸ªæ•°æ®åº“è¡¨</span></span><br><span class="line"><span class="keyword">truncate</span> <span class="string">`student`</span></span><br></pre></td></tr></table></figure>



<h3 id="6-æŸ¥è¯¢æ•°æ®ï¼ˆé‡ç‚¹ï¼‰"><a href="#6-æŸ¥è¯¢æ•°æ®ï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="6. æŸ¥è¯¢æ•°æ®ï¼ˆé‡ç‚¹ï¼‰"></a>6. æŸ¥è¯¢æ•°æ®ï¼ˆé‡ç‚¹ï¼‰</h3><h4 id="6-1-ç®€å•æŸ¥è¯¢"><a href="#6-1-ç®€å•æŸ¥è¯¢" class="headerlink" title="6.1 ç®€å•æŸ¥è¯¢"></a>6.1 ç®€å•æŸ¥è¯¢</h4><ol>
<li><p>åˆ«å</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="string">`studentNo`</span> <span class="keyword">as</span> å­¦å·,<span class="string">`studentName`</span> <span class="keyword">as</span> å­¦ç”Ÿå§“å <span class="keyword">from</span> <span class="string">`student`</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æ‹¼æ¥å­—ç¬¦ä¸²</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">concat</span>(<span class="string">&#x27;å§“å:&#x27;</span>,<span class="string">`studentName`</span>) <span class="keyword">as</span> æ–°åå­— <span class="keyword">from</span> <span class="string">`student`</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å»é‡</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> <span class="string">`studentNo`</span> <span class="keyword">from</span> <span class="string">`result`</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æ’é™¤</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="string">`studentNo`</span>,<span class="string">`studentResult`</span> <span class="keyword">from</span> <span class="string">`result`</span></span><br><span class="line"><span class="keyword">where</span> <span class="keyword">not</span> <span class="string">`studentNo`</span>=<span class="number">1000</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æ¨¡ç³ŠæŸ¥è¯¢</p>
<table>
<thead>
<tr>
<th>è¿ç®—ç¬¦</th>
<th>è¯­æ³•</th>
</tr>
</thead>
<tbody><tr>
<td>is null</td>
<td>xxx is null</td>
</tr>
<tr>
<td>is not null</td>
<td>xxx is not null</td>
</tr>
<tr>
<td>between</td>
<td>xxx between 90 and 100</td>
</tr>
<tr>
<td>like</td>
<td>a like b</td>
</tr>
<tr>
<td>in</td>
<td>xxx in (a, b, c)</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥è¯¢å§“åˆ˜çš„åŒå­¦</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">`studentNo`</span>,<span class="string">`studentResult`</span> <span class="keyword">from</span> <span class="string">`result`</span></span><br><span class="line"><span class="keyword">where</span> <span class="string">`studentName`</span> <span class="keyword">like</span> <span class="string">&#x27;åˆ˜%&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢å§“åˆ˜çš„åå­—åé¢åªæœ‰ä¸€ä¸ªå­—çš„åŒå­¦</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">`studentNo`</span>,<span class="string">`studentResult`</span> <span class="keyword">from</span> <span class="string">`result`</span></span><br><span class="line"><span class="keyword">where</span> <span class="string">`studentName`</span> <span class="keyword">like</span> <span class="string">&#x27;åˆ˜_&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢å§“åˆ˜çš„åå­—åé¢åªæœ‰ä¸¤ä¸ªå­—çš„åŒå­¦</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">`studentNo`</span>,<span class="string">`studentResult`</span> <span class="keyword">from</span> <span class="string">`result`</span></span><br><span class="line"><span class="keyword">where</span> <span class="string">`studentName`</span> <span class="keyword">like</span> <span class="string">&#x27;åˆ˜__&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢åå­—ä¸­æœ‰å˜‰å­—çš„åŒå­¦</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">`studentNo`</span>,<span class="string">`studentResult`</span> <span class="keyword">from</span> <span class="string">`result`</span></span><br><span class="line"><span class="keyword">where</span> <span class="string">`studentName`</span> <span class="keyword">like</span> <span class="string">&#x27;%å˜‰%&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢1001,1002,1003å­¦å‘˜</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">`studentNo`</span>,<span class="string">`studentResult`</span> <span class="keyword">from</span> <span class="string">`result`</span></span><br><span class="line"><span class="keyword">where</span> <span class="string">`studentNo`</span> <span class="keyword">in</span> (<span class="number">1001</span>,<span class="number">1002</span>,<span class="number">1003</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢åœ°å€ä¸ºç©ºçš„å­¦ç”Ÿ</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">`studentNo`</span>,<span class="string">`studentResult`</span> <span class="keyword">from</span> <span class="string">`result`</span></span><br><span class="line"><span class="keyword">where</span> <span class="string">`address`</span>=<span class="string">&#x27;&#x27;</span> <span class="keyword">or</span> <span class="string">`address`</span> <span class="keyword">is</span> <span class="literal">null</span></span><br></pre></td></tr></table></figure>



</li>
</ol>
<h4 id="6-2-è”è¡¨æŸ¥è¯¢"><a href="#6-2-è”è¡¨æŸ¥è¯¢" class="headerlink" title="6.2 è”è¡¨æŸ¥è¯¢"></a>6.2 è”è¡¨æŸ¥è¯¢</h4><img src="/posts/5dfb91cd/sql_joins.jpg" class>

<table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>inner join</td>
<td>äº¤é›†</td>
</tr>
<tr>
<td>left join</td>
<td>è¿”å›å·¦è¡¨ä¸­æ‰€æœ‰çš„å€¼ï¼Œå³ä½¿å³è¡¨ä¸­æ²¡æœ‰åŒ¹é…</td>
</tr>
<tr>
<td>right join</td>
<td>è¿”å›å³è¡¨ä¸­æ‰€æœ‰çš„å€¼ï¼Œå³ä½¿å·¦è¡¨ä¸­æ²¡æœ‰åŒ¹é…</td>
</tr>
</tbody></table>
<p>   <strong>SQL è¯­å¥ç¼–å†™æ€è·¯ï¼š</strong></p>
<ol>
<li><p><strong>åˆ†æéœ€æ±‚ï¼Œåˆ†ææŸ¥è¯¢çš„å­—æ®µæ¥è‡ªå“ªäº›è¡¨</strong></p>
</li>
<li><p><strong>ç¡®å®šä½¿ç”¨å“ªç§è¿æ¥æŸ¥è¯¢</strong></p>
</li>
<li><p><strong>ç¡®å®šäº¤å‰ç‚¹ï¼ˆä¸¤å¼ è¡¨ä¸­çš„ç›¸åŒæ•°æ®ï¼‰</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥è¯¢å‚åŠ äº†è€ƒè¯•çš„åŒå­¦</span></span><br><span class="line"><span class="keyword">select</span> s.studentNo,studentName,subjectNo,subjectResult</span><br><span class="line"><span class="keyword">from</span> student <span class="keyword">as</span> s</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> <span class="keyword">result</span> <span class="keyword">as</span> r</span><br><span class="line"><span class="keyword">on</span> s.studentNo = r.studentNo</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> s.studentNo,studentName,subjectNo,subjectResult</span><br><span class="line"><span class="keyword">from</span> student <span class="keyword">as</span> s</span><br><span class="line"><span class="keyword">right</span> <span class="keyword">join</span> <span class="keyword">result</span> <span class="keyword">as</span> r</span><br><span class="line"><span class="keyword">on</span> s.studentNo = r.studentNo</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢æ²¡æœ‰è€ƒè¯•çš„åŒå­¦</span></span><br><span class="line"><span class="keyword">select</span> s.studentNo,studentName,subjectNo,subjectResult</span><br><span class="line"><span class="keyword">from</span> student <span class="keyword">as</span> s</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> <span class="keyword">result</span> <span class="keyword">as</span> r</span><br><span class="line"><span class="keyword">on</span> s.studentNo = r.studentNo</span><br><span class="line"><span class="keyword">where</span> subjectResult <span class="keyword">is</span> <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢å‚åŠ äº†è€ƒè¯•çš„åŒå­¦ä¿¡æ¯ï¼ˆå­¦å·ã€å­¦ç”Ÿå§“åã€ç§‘ç›®åã€åˆ†æ•°ï¼‰</span></span><br><span class="line"><span class="keyword">select</span> s.studentNo,studentName,subjectName,studentResult</span><br><span class="line"><span class="keyword">from</span> student s</span><br><span class="line"><span class="keyword">right</span> <span class="keyword">join</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">on</span> r.studentNo = s.studentNo</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> subject sub</span><br><span class="line"><span class="keyword">on</span> sub.subjectNo = r.subjectNo</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢å­¦å‘˜æ‰€å±çš„å¹´çº§ï¼ˆå­¦å·ã€å­¦ç”Ÿå§“åã€å¹´çº§åç§°ï¼‰</span></span><br><span class="line"><span class="keyword">select</span> studentNo,studentName,gradeName</span><br><span class="line"><span class="keyword">from</span> student s</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> grade g</span><br><span class="line"><span class="keyword">on</span> s.gradeId = g.gradeId</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢ç§‘ç›®æ‰€å±çš„å¹´çº§ï¼ˆç§‘ç›®åç§°ã€å¹´çº§åç§°ï¼‰</span></span><br><span class="line"><span class="keyword">select</span> subjectNameï¼ŒgradeName</span><br><span class="line"><span class="keyword">from</span> subject sub</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> grade g</span><br><span class="line"><span class="keyword">on</span> sub.gradeId = g.gradeId</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢å‚åŠ äº† æ•°æ®åº“ç»“æ„-1 è€ƒè¯•çš„åŒå­¦ä¿¡æ¯ï¼ˆå­¦å·ã€å­¦ç”Ÿå§“åã€ç§‘ç›®åã€åˆ†æ•°ï¼‰</span></span><br><span class="line"><span class="keyword">select</span> s.studentNo,studentName,subjectName,studentResult</span><br><span class="line"><span class="keyword">from</span> student s</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">on</span> s.studentNo = r.studentNo</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> subject sub</span><br><span class="line"><span class="keyword">on</span> r.subjectNo = sub.subjectNo</span><br><span class="line"><span class="keyword">where</span> subjectName = <span class="string">&#x27;æ•°æ®åº“ç»“æ„-1&#x27;</span></span><br></pre></td></tr></table></figure>



</li>
</ol>
<h4 id="6-3-è‡ªè¿æ¥"><a href="#6-3-è‡ªè¿æ¥" class="headerlink" title="6.3 è‡ªè¿æ¥"></a>6.3 è‡ªè¿æ¥</h4><p>ä¸¾ä¸€ä¸ªä¾‹å­ï¼š</p>
<p>category è¡¨å¦‚ä¸‹æ‰€ç¤º</p>
<img src="/posts/5dfb91cd/image-20200725152825843.png" class>

<p>æƒ³è¦å°†è¿™ä¸€å¼ è¡¨æ‹†å¼€ï¼Œä½¿çˆ¶æ ç›®å’Œå­æ ç›®çš„å¯¹åº”å…³ç³»æ¸…æ™°å¯è§</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> a.<span class="string">`categoryName`</span> <span class="keyword">AS</span> <span class="string">&#x27;çˆ¶æ ç›®&#x27;</span>,b.<span class="string">`categoryName`</span> <span class="keyword">AS</span> <span class="string">&#x27;å­æ ç›®&#x27;</span> </span><br><span class="line"><span class="keyword">FROM</span> <span class="string">`category`</span> <span class="keyword">AS</span> a,<span class="string">`category`</span> <span class="keyword">AS</span> b </span><br><span class="line"><span class="keyword">WHERE</span> a.<span class="string">`categoryId`</span> = b.<span class="string">`pid`</span></span><br></pre></td></tr></table></figure>

<img src="/posts/5dfb91cd/image-20200725153113879.png" class>



<h4 id="6-4-åˆ†é¡µå’Œæ’åº"><a href="#6-4-åˆ†é¡µå’Œæ’åº" class="headerlink" title="6.4 åˆ†é¡µå’Œæ’åº"></a>6.4 åˆ†é¡µå’Œæ’åº</h4><ul>
<li>å‡åº â€“&gt; ASC</li>
<li>é™åº â€“&gt; DESC</li>
<li>åˆ†é¡µå…¬å¼ï¼š<ul>
<li>å½“å‰é¡µ n</li>
<li>é¡µé¢å¤§å° m</li>
<li>èµ·å§‹ä¸‹æ ‡ (n-1)*m</li>
<li>æ€»é¡µæ•° = âŒˆæ•°æ®æ€»æ•°/é¡µé¢å¤§å°âŒ‰</li>
<li><strong>limit (èµ·å§‹ä¸‹æ ‡, é¡µé¢å¤§å°)</strong></li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥è¯¢å‚åŠ äº† æ•°æ®åº“ç»“æ„-1 è€ƒè¯•çš„åŒå­¦ä¿¡æ¯</span></span><br><span class="line"><span class="comment">-- æŒ‰æˆç»©é™åºæ’åº</span></span><br><span class="line"><span class="comment">-- æ¯é¡µåªæ˜¾ç¤º5æ¡æ•°æ®</span></span><br><span class="line"><span class="comment">-- limit 0,5 0-èµ·å§‹ä¸‹æ ‡ 5-æ˜¾ç¤ºæ•°ç›®</span></span><br><span class="line"><span class="keyword">select</span> s.studentNo,studentName,subjectName,studentResult</span><br><span class="line"><span class="keyword">from</span> student s</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">on</span> s.studentNo = r.studentNo</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> subject sub</span><br><span class="line"><span class="keyword">on</span> r.subjectNo = sub.subjectNo</span><br><span class="line"><span class="keyword">where</span> subjectName = <span class="string">&#x27;æ•°æ®åº“ç»“æ„-1&#x27;</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> studentResult <span class="keyword">desc</span></span><br><span class="line"><span class="keyword">limit</span> <span class="number">0</span>,<span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢ JAVAç¬¬ä¸€å­¦å¹´ è¯¾ç¨‹æˆç»©æ’åå‰åå¹¶ä¸”åˆ†æ•°å¤§äº80çš„å­¦ç”Ÿä¿¡æ¯ï¼ˆå­¦å·ã€å§“åã€è¯¾ç¨‹åç§°ã€åˆ†æ•°ï¼‰</span></span><br><span class="line"><span class="keyword">select</span> s.studentNo,studentName,subjectName,studentResult</span><br><span class="line"><span class="keyword">from</span> student s</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">on</span> s.studentNo = r.studentNo</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> subject sub</span><br><span class="line"><span class="keyword">on</span> sub.subjectNo = r.subjectNo</span><br><span class="line"><span class="keyword">where</span> studentName = <span class="string">&#x27;JAVAç¬¬ä¸€å­¦å¹´&#x27;</span> <span class="keyword">and</span> studentResult &gt;= <span class="number">80</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> studentResult <span class="keyword">desc</span></span><br><span class="line"><span class="keyword">limit</span> <span class="number">0</span>,<span class="number">10</span></span><br></pre></td></tr></table></figure>



<h4 id="6-5-å­æŸ¥è¯¢å’ŒåµŒå¥—æŸ¥è¯¢"><a href="#6-5-å­æŸ¥è¯¢å’ŒåµŒå¥—æŸ¥è¯¢" class="headerlink" title="6.5 å­æŸ¥è¯¢å’ŒåµŒå¥—æŸ¥è¯¢"></a>6.5 å­æŸ¥è¯¢å’ŒåµŒå¥—æŸ¥è¯¢</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥è¯¢ æ•°æ®åº“ç»“æ„-1 çš„æ‰€æœ‰è€ƒè¯•ç»“æœï¼ˆå­¦å·ã€ç§‘ç›®ç¼–å·ã€æˆç»©ï¼‰é™åº</span></span><br><span class="line"><span class="comment">-- æ–¹å¼ä¸€ï¼šä½¿ç”¨è¿æ¥æŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">select</span> s.studentNo,r.subjectNo,studentResult</span><br><span class="line"><span class="keyword">from</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> subject sub</span><br><span class="line"><span class="keyword">on</span> r.subjectNo = sub.subjectNo</span><br><span class="line"><span class="keyword">where</span> subjectName = <span class="string">&#x27;æ•°æ®åº“ç»“æ„-1&#x27;</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> studentResult <span class="keyword">desc</span></span><br><span class="line"><span class="comment">-- æ–¹å¼äºŒï¼šä½¿ç”¨å­æŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">select</span> s.studentNo,r.subjectNo,studentResult</span><br><span class="line"><span class="keyword">from</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">where</span> subjectNo = (</span><br><span class="line">    <span class="keyword">select</span> subjectNo <span class="keyword">from</span> subject</span><br><span class="line">    <span class="keyword">where</span> subjectName = <span class="string">&#x27;æ•°æ®åº“ç»“æ„-1&#x27;</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> studentResult <span class="keyword">desc</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢ é«˜ç­‰æ•°å­¦-2 åˆ†æ•°ä¸å°äº80çš„å­¦ç”Ÿçš„å­¦å·ã€å§“å</span></span><br><span class="line"><span class="comment">-- æ–¹å¼ä¸€ï¼šè¿æ¥æŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">select</span> s.studentNo,studentName</span><br><span class="line"><span class="keyword">from</span> student s</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">on</span> s.studentNo = r.studentNo</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> subject sub</span><br><span class="line"><span class="keyword">on</span> r.subjectNo = sub.subjectNo</span><br><span class="line"><span class="keyword">where</span> subjectName = <span class="string">&#x27;é«˜ç­‰æ•°å­¦-2&#x27;</span> <span class="keyword">and</span> studentResult &gt;= <span class="number">80</span></span><br><span class="line"><span class="comment">-- æ–¹å¼äºŒï¼šå­æŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> s.studentNo,studentName</span><br><span class="line"><span class="keyword">from</span> student s</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">on</span> r.studentNo = s.studentNo</span><br><span class="line"><span class="keyword">where</span> studentResult &gt;= <span class="number">80</span> <span class="keyword">and</span> stubjectNo = (</span><br><span class="line">    <span class="keyword">select</span> subjectNo <span class="keyword">from</span> subject <span class="keyword">where</span> subjectName=<span class="string">&#x27;é«˜ç­‰æ•°å­¦-2&#x27;</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">-- æ–¹å¼ä¸‰ï¼šåµŒå¥—æŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">select</span> studentNo,studentName <span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">where</span> studentNo <span class="keyword">in</span> (</span><br><span class="line">    <span class="keyword">select</span> studentNo <span class="keyword">from</span> <span class="keyword">result</span></span><br><span class="line">    <span class="keyword">where</span> studentResult &gt;= <span class="number">80</span> <span class="keyword">and</span> subjectNo = (</span><br><span class="line">        <span class="keyword">select</span> subjectNo <span class="keyword">from</span> subject</span><br><span class="line">        <span class="keyword">where</span> subjectName = <span class="string">&#x27;é«˜ç­‰æ•°å­¦&#x27;</span></span><br><span class="line">    )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>MySQL å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>CRUD</tag>
        <tag>select æŸ¥è¯¢è¯­å¥</tag>
      </tags>
  </entry>
  <entry>
    <title>03_å…³äºæ•°æ®åº“è¡¨çš„å¼•æ“</title>
    <url>/posts/1ab39822.html</url>
    <content><![CDATA[<h3 id="1-å¯¹æ¯”"><a href="#1-å¯¹æ¯”" class="headerlink" title="1. å¯¹æ¯”"></a>1. å¯¹æ¯”</h3><table>
<thead>
<tr>
<th></th>
<th>MYISAM</th>
<th>INNODB</th>
</tr>
</thead>
<tbody><tr>
<td>äº‹åŠ¡æ”¯æŒ</td>
<td>ğŸ™…â€â™‚ï¸</td>
<td>ğŸ‘Œ</td>
</tr>
<tr>
<td>æ•°æ®è¡Œé”å®š</td>
<td>ğŸ™…â€â™‚ï¸</td>
<td>ğŸ‘Œ</td>
</tr>
<tr>
<td>å¤–é”®çº¦æŸ</td>
<td>ğŸ™…â€â™‚ï¸</td>
<td>ğŸ‘Œ</td>
</tr>
<tr>
<td>å…¨æ–‡ç´¢å¼•</td>
<td>ğŸ‘Œ</td>
<td>ğŸ™…â€â™‚ï¸</td>
</tr>
<tr>
<td>è¡¨ç©ºé—´çš„å¤§å°</td>
<td>ğŸ‘è¾ƒå°</td>
<td>ğŸ‘è¾ƒå¤§ ï¼Œçº¦2å€</td>
</tr>
</tbody></table>
<a id="more"></a>

<p>å¸¸è§„ä½¿ç”¨æ“ä½œ</p>
<ul>
<li>MYISAM    èŠ‚çº¦ç©ºé—´ï¼Œé€Ÿåº¦è¾ƒå¿«</li>
<li>INNODB    å®‰å…¨æ€§æï¼Œäº‹åŠ¡çš„å¤„ç†ï¼Œå¤šè¡¨å¤šç”¨æˆ·æ“ä½œ</li>
</ul>
<h3 id="2-MySQL-å¼•æ“åœ¨ç‰©ç†æ–‡ä»¶ä¸Šçš„åŒºåˆ«"><a href="#2-MySQL-å¼•æ“åœ¨ç‰©ç†æ–‡ä»¶ä¸Šçš„åŒºåˆ«" class="headerlink" title="2. MySQL å¼•æ“åœ¨ç‰©ç†æ–‡ä»¶ä¸Šçš„åŒºåˆ«"></a>2. MySQL å¼•æ“åœ¨ç‰©ç†æ–‡ä»¶ä¸Šçš„åŒºåˆ«</h3><ul>
<li><p>InnoDB åœ¨æ•°æ®åº“è¡¨ä¸­åªæœ‰ä¸€ä¸ª *.frmï¼Œä»¥åŠä¸Šçº§ç›®å½•ä¸‹çš„ ibdata1 æ–‡ä»¶</p>
</li>
<li><p>MyISAM å¯¹åº”æ–‡ä»¶</p>
<ul>
<li>*.frm â€“&gt; è¡¨ç»“æ„å¯¹åº”æ–‡ä»¶</li>
<li>*.myd â€“&gt; æ•°æ®æ–‡ä»¶ï¼ˆdataï¼‰</li>
<li>*.MYI â€“&gt; ç´¢å¼•æ–‡ä»¶ï¼ˆindexï¼‰</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>MySQL å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>æ•°æ®åº“å¼•æ“</tag>
      </tags>
  </entry>
  <entry>
    <title>04_MySQL å‡½æ•°</title>
    <url>/posts/eabdc6c0.html</url>
    <content><![CDATA[<blockquote>
<p>å®˜ç½‘ï¼š<a href="https://dev.mysql.com/doc/refman/5.7/en/function-reference.html">https://dev.mysql.com/doc/refman/5.7/en/function-reference.html</a></p>
</blockquote>
<h3 id="1-å¸¸ç”¨å‡½æ•°"><a href="#1-å¸¸ç”¨å‡½æ•°" class="headerlink" title="1. å¸¸ç”¨å‡½æ•°"></a>1. å¸¸ç”¨å‡½æ•°</h3><h4 id="1-1-æ•°å­¦è¿ç®—"><a href="#1-1-æ•°å­¦è¿ç®—" class="headerlink" title="1.1 æ•°å­¦è¿ç®—"></a>1.1 æ•°å­¦è¿ç®—</h4><table>
<thead>
<tr>
<th>åç§°</th>
<th>æè¿°</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td>ABS()</td>
<td>è¿”å›ç»å¯¹å€¼</td>
<td>select ABS(-8)</td>
</tr>
<tr>
<td>CEILING()</td>
<td>å‘ä¸Šå–æ•´</td>
<td>select CEILING(9.4)</td>
</tr>
<tr>
<td>FLOOR()</td>
<td>å‘ä¸‹å–æ•´</td>
<td>select FLOOR(9.4)</td>
</tr>
<tr>
<td>RAND()</td>
<td>è¿”å›ä¸€ä¸ª0~1ä¹‹é—´çš„éšæœºæ•°</td>
<td>select RAND()</td>
</tr>
<tr>
<td>SIGN()</td>
<td>è¿”å›å‚æ•°çš„ç¬¦å·ï¼ˆè´Ÿæ•°è¿”å›-1ï¼Œæ­£æ•°è¿”å›1ï¼Œ0è¿”å›0ï¼‰</td>
<td>select SIGN(-10)</td>
</tr>
</tbody></table>
<a id="more"></a>



<h4 id="1-2-å­—ç¬¦ä¸²å‡½æ•°"><a href="#1-2-å­—ç¬¦ä¸²å‡½æ•°" class="headerlink" title="1.2 å­—ç¬¦ä¸²å‡½æ•°"></a>1.2 å­—ç¬¦ä¸²å‡½æ•°</h4><table>
<thead>
<tr>
<th>åç§°</th>
<th>æè¿°</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td>CHAR_LENGTH()</td>
<td>è¿”å›å­—ç¬¦ä¸²é•¿åº¦</td>
<td>select CHAR_LENGTH(â€˜lhxâ€™)</td>
</tr>
<tr>
<td>CONCAT()</td>
<td>åˆå¹¶å­—ç¬¦ä¸²</td>
<td>select CONCAT(â€˜lâ€™, â€˜hâ€™, â€˜xâ€™)</td>
</tr>
<tr>
<td>INSERT()</td>
<td>ä»æŸä¸ªä½ç½®å¼€å§‹æ›¿æ¢æŸä¸ªé•¿åº¦</td>
<td>select INSERT(â€˜æˆ‘çˆ±ç¼–ç¨‹â€™, 1, 2, â€˜è¶…çº§çƒ­çˆ±â€™)</td>
</tr>
<tr>
<td>LOWER()</td>
<td>è½¬æ¢ä¸ºå°å†™</td>
<td>select LOWER(â€˜HELLOâ€™)</td>
</tr>
<tr>
<td>UPPER()</td>
<td>è½¬æ¢ä¸ºå¤§å†™</td>
<td>select LOWER(â€˜helloâ€™)</td>
</tr>
<tr>
<td>INSTR()</td>
<td>è¿”å›ç¬¬ä¸€æ¬¡å‡ºç°çš„å­ä¸²çš„ç´¢å¼•</td>
<td>select INSTR(â€˜lhxhelloâ€™, â€˜hâ€™)</td>
</tr>
<tr>
<td>REPLACE()</td>
<td>æ›¿æ¢å‡ºç°çš„æŒ‡å®šå­—ç¬¦ä¸²</td>
<td>select REPLACE(â€˜åšæŒå°±èƒ½æˆåŠŸâ€™, â€˜åšæŒâ€™, â€˜åŠªåŠ›â€™)</td>
</tr>
<tr>
<td>SUBSTR()</td>
<td>æˆªå–å­—ç¬¦ä¸²</td>
<td>select SUBSTR(â€˜åšæŒå°±èƒ½æˆåŠŸâ€™, 1, 2)</td>
</tr>
<tr>
<td>REVERSE()</td>
<td>åè½¬å­—ç¬¦ä¸²</td>
<td>select REVERSE(â€˜åšæŒå°±èƒ½æˆåŠŸâ€™)</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥è¯¢å§“å‘¨çš„åŒå­¦ï¼Œæ”¹ä¸ºé‚¹</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">replace</span>(studentName, <span class="string">&#x27;å‘¨&#x27;</span>, <span class="string">&#x27;é‚¹&#x27;</span>) <span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">where</span> studentName <span class="keyword">like</span> <span class="string">&#x27;å‘¨%&#x27;</span></span><br></pre></td></tr></table></figure>



<h4 id="1-3-æ—¶é—´å’Œæ—¥æœŸå‡½æ•°ï¼ˆè®°ä½ï¼‰"><a href="#1-3-æ—¶é—´å’Œæ—¥æœŸå‡½æ•°ï¼ˆè®°ä½ï¼‰" class="headerlink" title="1.3 æ—¶é—´å’Œæ—¥æœŸå‡½æ•°ï¼ˆè®°ä½ï¼‰"></a>1.3 æ—¶é—´å’Œæ—¥æœŸå‡½æ•°ï¼ˆè®°ä½ï¼‰</h4><table>
<thead>
<tr>
<th>åç§°</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>CURRENT_DATE()</td>
<td>è·å–å½“å‰æ—¥æœŸ</td>
</tr>
<tr>
<td>CURDATE()</td>
<td>è·å–å½“å‰æ—¥æœŸ</td>
</tr>
<tr>
<td>NOW()</td>
<td>è·å–å½“å‰æ—¶é—´</td>
</tr>
<tr>
<td>LOCALTIME()</td>
<td>è·å–æœ¬åœ°æ—¶é—´</td>
</tr>
<tr>
<td>SYSDATE()</td>
<td>è·å–ç³»ç»Ÿæ—¶é—´</td>
</tr>
<tr>
<td>YEAR(NOW())</td>
<td>è·å–å½“å‰å¹´</td>
</tr>
<tr>
<td>MONTH(NOW())</td>
<td>è·å–å½“å‰æœˆ</td>
</tr>
<tr>
<td>DAY(NOW())</td>
<td>è·å–å½“å‰æ—¥</td>
</tr>
<tr>
<td>HOUR(NOW())</td>
<td>è·å–å½“å‰æ—¶</td>
</tr>
<tr>
<td>MINUTE(NOW())</td>
<td>è·å–å½“å‰åˆ†</td>
</tr>
<tr>
<td>SECOND(NOW())</td>
<td>è·å–å½“å‰ç§’</td>
</tr>
</tbody></table>
<h4 id="1-4-ç³»ç»Ÿå‡½æ•°"><a href="#1-4-ç³»ç»Ÿå‡½æ•°" class="headerlink" title="1.4 ç³»ç»Ÿå‡½æ•°"></a>1.4 ç³»ç»Ÿå‡½æ•°</h4><table>
<thead>
<tr>
<th>åç§°</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>SYSTEM_USER()</td>
<td>è·å–å½“å‰ç”¨æˆ·</td>
</tr>
<tr>
<td>USER()</td>
<td>è·å–å½“å‰ç”¨æˆ·</td>
</tr>
<tr>
<td>VERSION()</td>
<td>è·å–ç‰ˆæœ¬</td>
</tr>
</tbody></table>
<h3 id="2-èšåˆå‡½æ•°"><a href="#2-èšåˆå‡½æ•°" class="headerlink" title="2. èšåˆå‡½æ•°"></a>2. èšåˆå‡½æ•°</h3><table>
<thead>
<tr>
<th>åç§°</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>COUNT()</td>
<td>è®¡æ•°</td>
</tr>
<tr>
<td>SUM()</td>
<td>æ±‚å’Œ</td>
</tr>
<tr>
<td>AVG()</td>
<td>å¹³å‡å€¼</td>
</tr>
<tr>
<td>MAX()</td>
<td>æœ€å¤§å€¼</td>
</tr>
<tr>
<td>MIN()</td>
<td>æœ€å°å€¼</td>
</tr>
<tr>
<td>â€¦</td>
<td></td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥è¯¢å­¦ç”Ÿäººæ•°</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(studentName) <span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(<span class="number">1</span>) <span class="keyword">from</span> student</span><br></pre></td></tr></table></figure>

<ul>
<li>count(å­—æ®µ) ä¼šå¿½ç•¥æ‰€æœ‰çš„ null å€¼</li>
<li>count(*) ä¸ä¼šå¿½ç•¥ null å€¼</li>
<li>count(1) ä¸ä¼šå¿½ç•¥ null å€¼</li>
</ul>
<h3 id="3-åˆ†ç»„å’Œè¿‡æ»¤"><a href="#3-åˆ†ç»„å’Œè¿‡æ»¤" class="headerlink" title="3. åˆ†ç»„å’Œè¿‡æ»¤"></a>3. åˆ†ç»„å’Œè¿‡æ»¤</h3><ul>
<li>having â€“&gt; è¿‡æ»¤<strong>åˆ†ç»„</strong>çš„è®°å½•å¿…é¡»æ»¡è¶³çš„<strong>æ¬¡è¦æ¡ä»¶</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥è¯¢ä¸åŒè¯¾ç¨‹çš„å¹³å‡åˆ† æœ€é«˜åˆ† æœ€ä½åˆ† å¹³å‡åˆ†å¤§äº80</span></span><br><span class="line"><span class="keyword">select</span> subjectName,<span class="keyword">avg</span>(StudentResult) <span class="keyword">as</span> å¹³å‡åˆ†,<span class="keyword">max</span>(StudentResult) <span class="keyword">as</span> æœ€é«˜åˆ†,<span class="keyword">min</span>(StudentResult) <span class="keyword">as</span> æœ€ä½åˆ†</span><br><span class="line"><span class="keyword">from</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> subject sub</span><br><span class="line"><span class="keyword">on</span> r.subjectNo = sub.subjectNo</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> r.subjectNo</span><br><span class="line"><span class="keyword">having</span> å¹³å‡åˆ†&gt;<span class="number">80</span></span><br></pre></td></tr></table></figure>



<h3 id="4-æ•°æ®åº“çº§åˆ«çš„-MD5-åŠ å¯†"><a href="#4-æ•°æ®åº“çº§åˆ«çš„-MD5-åŠ å¯†" class="headerlink" title="4. æ•°æ®åº“çº§åˆ«çš„ MD5 åŠ å¯†"></a>4. æ•°æ®åº“çº§åˆ«çš„ MD5 åŠ å¯†</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- åŠ å¯†å…¨éƒ¨çš„å¯†ç </span></span><br><span class="line"><span class="keyword">update</span> testmd5 <span class="keyword">set</span> pwd = <span class="keyword">md5</span>(pwd)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ’å…¥çš„æ—¶å€™åŠ å¯†</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> testmd5 <span class="keyword">values</span>(<span class="number">4</span>,<span class="string">&#x27;lhx&#x27;</span>,<span class="keyword">md5</span>(<span class="string">&#x27;123456&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ ¡éªŒç”¨æˆ·ä¼ é€’è¿›æ¥çš„å¯†ç </span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> testmd5 <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">&#x27;lhx&#x27;</span> <span class="keyword">and</span> pwd=<span class="keyword">md5</span>(<span class="string">&#x27;123456&#x27;</span>)</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>MySQL å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>select æŸ¥è¯¢è¯­å¥</tag>
        <tag>MD5 åŠ å¯†</tag>
      </tags>
  </entry>
  <entry>
    <title>05_äº‹åŠ¡</title>
    <url>/posts/f2e699d4.html</url>
    <content><![CDATA[<h3 id="1-ä»€ä¹ˆæ˜¯äº‹åŠ¡"><a href="#1-ä»€ä¹ˆæ˜¯äº‹åŠ¡" class="headerlink" title="1. ä»€ä¹ˆæ˜¯äº‹åŠ¡"></a>1. ä»€ä¹ˆæ˜¯äº‹åŠ¡</h3><p><strong>äº‹åŠ¡åŸåˆ™ï¼šACID åŸåˆ™ï¼ˆåŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§ï¼‰</strong></p>
<blockquote>
<p>å‚è€ƒåšå®¢ï¼š<a href="https://blog.csdn.net/dengjili/article/details/82468576">https://blog.csdn.net/dengjili/article/details/82468576</a></p>
</blockquote>
<ul>
<li><strong>åŸå­æ€§ï¼ˆAtomicityï¼‰</strong>ï¼šè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥</li>
<li><strong>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰</strong>ï¼šäº‹åŠ¡å‰åçš„æ•°æ®å®Œæ•´æ€§è¦ä¿æŒä¸€è‡´</li>
<li><strong>éš”ç¦»æ€§ï¼ˆIsolationï¼‰</strong>ï¼šå¤šä¸ªç”¨æˆ·åŒæ—¶æ“ä½œæ•°æ®åº“äº’ä¸å¹²æ‰°</li>
<li><strong>æŒä¹…æ€§ï¼ˆDurabilityï¼‰</strong>ï¼šäº‹åŠ¡ä¸€æ—¦æäº¤åˆ™ä¸å¯é€†ï¼Œè¢«æŒä¹…åŒ–åˆ°æ•°æ®åº“ä¸­</li>
</ul>
<p>åšä¸åˆ°éš”ç¦»æ€§æ‰€å¯¼è‡´çš„é—®é¢˜ï¼š</p>
<ul>
<li><strong>è„è¯»</strong>ï¼šä¸€ä¸ªäº‹åŠ¡è¯»å–äº†å¦å¤–ä¸€ä¸ªäº‹åŠ¡æœªæäº¤çš„æ•°æ®</li>
<li><strong>ä¸å¯é‡å¤è¯»</strong>ï¼šåœ¨ä¸€ä¸ªäº‹åŠ¡å†…è¯»å–è¡¨ä¸­çš„æŸä¸€è¡Œæ•°æ®ï¼Œå¤šæ¬¡è¯»å–ç»“æœä¸åŒ</li>
<li><strong>è™šè¯»ï¼ˆå¹»è¯»ï¼‰</strong>ï¼šåœ¨ä¸€ä¸ªäº‹åŠ¡å†…è¯»å–åˆ°äº†åˆ«çš„äº‹åŠ¡æ’å…¥çš„æ•°æ®ï¼Œå¯¼è‡´å‰åè¯»å–ä¸ä¸€è‡´</li>
</ul>
<a id="more"></a>



<h3 id="2-æ‰§è¡Œäº‹åŠ¡"><a href="#2-æ‰§è¡Œäº‹åŠ¡" class="headerlink" title="2. æ‰§è¡Œäº‹åŠ¡"></a>2. æ‰§è¡Œäº‹åŠ¡</h3><p><em>æ³¨æ„ï¼šMySQL æ˜¯é»˜è®¤å¼€å¯äº‹åŠ¡è‡ªåŠ¨æäº¤çš„</em></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- å…³é—­è‡ªåŠ¨æäº¤</span></span><br><span class="line"><span class="keyword">set</span> autocommit = <span class="number">0</span>;</span><br><span class="line"><span class="comment">-- äº‹åŠ¡å¼€å¯</span></span><br><span class="line"><span class="keyword">start</span> <span class="keyword">transaction</span>;</span><br><span class="line"><span class="comment">-- æäº¤</span></span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"><span class="comment">-- å›æ»š</span></span><br><span class="line"><span class="keyword">rollback</span>;</span><br><span class="line"><span class="comment">-- äº‹åŠ¡ç»“æŸ å¼€å¯è‡ªåŠ¨æäº¤</span></span><br><span class="line"><span class="keyword">set</span> autocommit = <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<p>æ¨¡æ‹Ÿåœºæ™¯ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- è½¬è´¦å®ç°ï¼ˆä¸€è¡Œä¸€è¡Œæ‰§è¡Œï¼‰</span></span><br><span class="line"><span class="keyword">SET</span> autocommit = <span class="number">0</span>; <span class="comment">-- å…³é—­è‡ªåŠ¨æäº¤</span></span><br><span class="line"><span class="keyword">START</span> <span class="keyword">TRANSACTION</span>; Â <span class="comment">-- å¼€å§‹ä¸€ä¸ªäº‹åŠ¡,æ ‡è®°äº‹åŠ¡çš„èµ·å§‹ç‚¹</span></span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">account</span> <span class="keyword">SET</span> cash=cash<span class="number">-500</span> <span class="keyword">WHERE</span> <span class="string">`name`</span>=<span class="string">&#x27;A&#x27;</span>;</span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">account</span> <span class="keyword">SET</span> cash=cash+<span class="number">500</span> <span class="keyword">WHERE</span> <span class="string">`name`</span>=<span class="string">&#x27;B&#x27;</span>;</span><br><span class="line"><span class="keyword">COMMIT</span>; <span class="comment">-- æäº¤äº‹åŠ¡</span></span><br><span class="line"><span class="comment">-- ROLLBACK;</span></span><br><span class="line"><span class="keyword">SET</span> autocommit = <span class="number">1</span>; <span class="comment">-- æ¢å¤è‡ªåŠ¨æäº¤</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>MySQL å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>äº‹åŠ¡</tag>
      </tags>
  </entry>
  <entry>
    <title>06_ç´¢å¼•</title>
    <url>/posts/305fd78c.html</url>
    <content><![CDATA[<blockquote>
<p>åšå®¢ï¼š<a href="https://blog.codinglabs.org/articles/theory-of-mysql-index.html">https://blog.codinglabs.org/articles/theory-of-mysql-index.html</a></p>
</blockquote>
<h3 id="1-åˆ†ç±»"><a href="#1-åˆ†ç±»" class="headerlink" title="1. åˆ†ç±»"></a>1. åˆ†ç±»</h3><ul>
<li>ä¸»é”®ç´¢å¼•ï¼ˆPrimary Keyï¼‰<ul>
<li>å”¯ä¸€çš„æ ‡è¯†ï¼Œä¸»é”®ä¸å¯é‡å¤</li>
</ul>
</li>
<li>å”¯ä¸€ç´¢å¼•ï¼ˆUnique Keyï¼‰<ul>
<li>é¿å…é‡å¤çš„åˆ—å‡ºç°ï¼Œå”¯ä¸€ç´¢å¼•å¯ä»¥é‡å¤ï¼Œå¤šä¸ªåˆ—éƒ½å¯ä»¥æ ‡è¯†ä¸ºå”¯ä¸€ç´¢å¼•</li>
</ul>
</li>
<li>å¸¸è§„ç´¢å¼•ï¼ˆKey/Indexï¼‰<ul>
<li>é»˜è®¤çš„</li>
</ul>
</li>
<li>å…¨æ–‡ç´¢å¼• ï¼ˆFullTextï¼‰<ul>
<li>åœ¨ç‰¹å®šçš„æ•°æ®åº“å¼•æ“ä¸‹æ‰æœ‰</li>
<li>å¿«é€Ÿå®šä½æ•°æ®</li>
</ul>
</li>
</ul>
<a id="more"></a>



<h3 id="2-ä½¿ç”¨"><a href="#2-ä½¿ç”¨" class="headerlink" title="2. ä½¿ç”¨"></a>2. ä½¿ç”¨</h3><ul>
<li><p>æ˜¾ç¤ºæ‰€æœ‰ç´¢å¼•ä¿¡æ¯</p>
  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">index</span> <span class="keyword">from</span> student</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ·»åŠ ä¸€ä¸ªå…¨æ–‡ç´¢å¼•</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> school.student <span class="keyword">add</span> fulltext <span class="keyword">index</span> studentName(studentName)</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ†æ SQL æ‰§è¡Œçš„çŠ¶å†µ</p>
<blockquote>
<p>åšå®¢ï¼š<a href="https://blog.csdn.net/jiadajing267/article/details/81269067">https://blog.csdn.net/jiadajing267/article/details/81269067</a></p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- éå…¨æ–‡ç´¢å¼•</span></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> student</span><br><span class="line"><span class="comment">-- å…¨æ–‡ç´¢å¼•</span></span><br><span class="line"><span class="keyword">explain</span> <span class="keyword">select</span> * <span class="keyword">from</span> student <span class="keyword">where</span> <span class="keyword">match</span>(studentName) against(<span class="string">&#x27;åˆ˜&#x27;</span>)</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h3 id="3-æµ‹è¯•ç´¢å¼•"><a href="#3-æµ‹è¯•ç´¢å¼•" class="headerlink" title="3. æµ‹è¯•ç´¢å¼•"></a>3. æµ‹è¯•ç´¢å¼•</h3><ol>
<li><p>æ•´100ä¸‡æ¡æ•°æ®</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æ’å…¥100ä¸‡æ•°æ®.</span></span><br><span class="line">DELIMITER $$</span><br><span class="line"><span class="comment">-- å†™å‡½æ•°ä¹‹å‰å¿…é¡»è¦å†™ï¼Œæ ‡å¿—</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> mock_data ()</span><br><span class="line"><span class="keyword">RETURNS</span> <span class="built_in">INT</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">DECLARE</span> <span class="keyword">num</span> <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="number">1000000</span>;</span><br><span class="line">    <span class="keyword">DECLARE</span> i <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line">    WHILE i&lt;num DO</span><br><span class="line">        <span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`app_user`</span>(<span class="string">`name`</span>,<span class="string">`email`</span>,<span class="string">`phone`</span>,<span class="string">`gender`</span>,<span class="string">`password`</span>,<span class="string">`age`</span>) <span class="keyword">VALUES</span>(<span class="keyword">CONCAT</span>(<span class="string">&#x27;ç”¨æˆ·&#x27;</span>,i),<span class="string">&#x27;horsenliu@qq.com&#x27;</span>,<span class="keyword">CONCAT</span>(<span class="string">&#x27;18&#x27;</span>,<span class="keyword">FLOOR</span>(<span class="keyword">RAND</span>()*((<span class="number">999999999</span><span class="number">-100000000</span>)+<span class="number">100000000</span>))),<span class="keyword">FLOOR</span>(<span class="keyword">RAND</span>()*<span class="number">2</span>),<span class="keyword">UUID</span>(),<span class="keyword">FLOOR</span>(<span class="keyword">RAND</span>()*<span class="number">100</span>));</span><br><span class="line">        <span class="keyword">SET</span> i=i+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">WHILE</span>;</span><br><span class="line">    RETURN i;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> mock_data(); <span class="comment">-- æ‰§è¡Œæ­¤å‡½æ•° ç”Ÿæˆä¸€ç™¾ä¸‡æ¡æ•°æ®</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">FUNCTION</span> mock_data;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç»™è¡¨å­—æ®µæ·»åŠ ç´¢å¼•ï¼ˆç´¢å¼•åï¼šid_è¡¨å_å­—æ®µåï¼‰</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> id_app_user_name <span class="keyword">ON</span> app_user(<span class="string">`name`</span>);</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="4-ç´¢å¼•åŸåˆ™"><a href="#4-ç´¢å¼•åŸåˆ™" class="headerlink" title="4. ç´¢å¼•åŸåˆ™"></a>4. ç´¢å¼•åŸåˆ™</h3><ul>
<li>ç´¢å¼•ä¸æ˜¯è¶Šå¤šè¶Šå¥½</li>
<li>ä¸è¦å¯¹ç»å¸¸å˜åŠ¨çš„æ•°æ®åŠ ç´¢å¼•</li>
<li>å°æ•°æ®é‡çš„è¡¨ä¸éœ€è¦åŠ ç´¢å¼•</li>
<li>ç´¢å¼•ä¸€èˆ¬åŠ è½½å¸¸ç”¨æ¥æŸ¥è¯¢çš„å­—æ®µä¸Š</li>
</ul>
]]></content>
      <categories>
        <category>MySQL å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>ç´¢å¼•</tag>
      </tags>
  </entry>
  <entry>
    <title>01_Mybatis ç®€ä»‹</title>
    <url>/posts/f3d2b7ed.html</url>
    <content><![CDATA[<h3 id="1-ä»€ä¹ˆæ˜¯-Mybatis"><a href="#1-ä»€ä¹ˆæ˜¯-Mybatis" class="headerlink" title="1. ä»€ä¹ˆæ˜¯ Mybatis"></a>1. ä»€ä¹ˆæ˜¯ Mybatis</h3><img src="/posts/f3d2b7ed/1569633932712.png" class>

<ul>
<li>MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„<strong>æŒä¹…å±‚æ¡†æ¶</strong></li>
<li>å®ƒæ”¯æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„</li>
<li>MyBatis é¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç å’Œæ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†</li>
<li>MyBatis å¯ä»¥ä½¿ç”¨ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸç”Ÿç±»å‹ã€æ¥å£å’Œ Java çš„ POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä¸ºæ•°æ®åº“ä¸­çš„è®°å½•</li>
<li>MyBatis æœ¬æ˜¯<a href="https://baike.baidu.com/item/apache/6265">apache</a>çš„ä¸€ä¸ªå¼€æºé¡¹ç›®<a href="https://baike.baidu.com/item/iBatis">iBatis</a>ï¼Œ2010å¹´è¿™ä¸ªé¡¹ç›®ç”± apache software foundation è¿ç§»åˆ°äº† google codeï¼Œå¹¶ä¸”æ”¹åä¸º MyBatis </li>
<li>2013å¹´11æœˆè¿ç§»åˆ° Github</li>
</ul>
<a id="more"></a>



<h3 id="2-å¦‚ä½•è·å¾—-Mybatis"><a href="#2-å¦‚ä½•è·å¾—-Mybatis" class="headerlink" title="2. å¦‚ä½•è·å¾— Mybatis"></a>2. å¦‚ä½•è·å¾— Mybatis</h3><ul>
<li><p>maven ä»“åº“ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Github ï¼š <a href="https://github.com/mybatis/mybatis-3/releases">https://github.com/mybatis/mybatis-3/releases</a></p>
</li>
<li><p>ä¸­æ–‡æ–‡æ¡£ï¼š<a href="https://mybatis.org/mybatis-3/zh/index.html">https://mybatis.org/mybatis-3/zh/index.html</a></p>
</li>
</ul>
<h3 id="3-æ•°æ®æŒä¹…åŒ–"><a href="#3-æ•°æ®æŒä¹…åŒ–" class="headerlink" title="3. æ•°æ®æŒä¹…åŒ–"></a>3. æ•°æ®æŒä¹…åŒ–</h3><ul>
<li>æŒä¹…åŒ–å°±æ˜¯å°†ç¨‹åºçš„æ•°æ®åœ¨æŒä¹…çŠ¶æ€å’Œç¬æ—¶çŠ¶æ€è½¬åŒ–çš„è¿‡ç¨‹</li>
<li>å†…å­˜ï¼š<strong>æ–­ç”µå³å¤±</strong></li>
<li>æ•°æ®åº“ï¼ˆJDBCï¼‰ï¼Œio æ–‡ä»¶æŒä¹…åŒ–</li>
<li>ç”Ÿæ´»ï¼šå†·è—ã€ç½å¤´</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦æŒä¹…åŒ–ï¼Ÿ</strong></p>
<ul>
<li><p>æœ‰ä¸€äº›å¯¹è±¡ï¼Œä¸èƒ½è®©ä»–ä¸¢æ‰</p>
</li>
<li><p>å†…å­˜å¤ªè´µäº†</p>
</li>
</ul>
<h3 id="4-æŒä¹…å±‚"><a href="#4-æŒä¹…å±‚" class="headerlink" title="4. æŒä¹…å±‚"></a>4. æŒä¹…å±‚</h3><p>Dao å±‚ï¼ŒService å±‚ï¼ŒController å±‚â€¦.</p>
<ul>
<li>å®ŒæˆæŒä¹…åŒ–å·¥ä½œçš„ä»£ç å—</li>
<li>å±‚ç•Œé™ååˆ†æ˜æ˜¾</li>
</ul>
<h3 id="5-ä¸ºä»€ä¹ˆéœ€è¦-Mybatisï¼Ÿ"><a href="#5-ä¸ºä»€ä¹ˆéœ€è¦-Mybatisï¼Ÿ" class="headerlink" title="5. ä¸ºä»€ä¹ˆéœ€è¦ Mybatisï¼Ÿ"></a>5. ä¸ºä»€ä¹ˆéœ€è¦ Mybatisï¼Ÿ</h3><ul>
<li>å¸®åŠ©ç¨‹åºçŒ¿å°†æ•°æ®å­˜å…¥åˆ°æ•°æ®åº“ä¸­</li>
<li>æ–¹ä¾¿</li>
<li>ä¼ ç»Ÿçš„ JDBC ä»£ç å¤ªå¤æ‚äº†ï¼Œä½¿ç”¨æ¡†æ¶ç®€åŒ–æ“ä½œï¼Œè¾¾åˆ°è‡ªåŠ¨åŒ–çš„æ•ˆæœ</li>
<li>ä¼˜ç‚¹ï¼š<ul>
<li>ç®€å•æ˜“å­¦</li>
<li>çµæ´»</li>
<li>SQL å’Œä»£ç çš„åˆ†ç¦»ï¼Œæé«˜äº†å¯ç»´æŠ¤æ€§ã€‚</li>
<li>æä¾›æ˜ å°„æ ‡ç­¾ï¼Œæ”¯æŒå¯¹è±¡ä¸æ•°æ®åº“çš„ orm å­—æ®µå…³ç³»æ˜ å°„</li>
<li>æä¾›å¯¹è±¡å…³ç³»æ˜ å°„æ ‡ç­¾ï¼Œæ”¯æŒå¯¹è±¡å…³ç³»ç»„å»ºç»´æŠ¤</li>
<li>æä¾› xml æ ‡ç­¾ï¼Œæ”¯æŒç¼–å†™åŠ¨æ€ SQL</li>
</ul>
</li>
</ul>
<p><strong>æœ€é‡è¦çš„ä¸€ç‚¹ï¼šä½¿ç”¨çš„äººå¤šï¼</strong></p>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Mybatis</category>
      </categories>
      <tags>
        <tag>Mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title>02_ç¬¬ä¸€ä¸ª Mybatis ç¨‹åº</title>
    <url>/posts/420fd3f9.html</url>
    <content><![CDATA[<h3 id="1-æ­å»ºç¯å¢ƒ"><a href="#1-æ­å»ºç¯å¢ƒ" class="headerlink" title="1. æ­å»ºç¯å¢ƒ"></a>1. æ­å»ºç¯å¢ƒ</h3><h4 id="1-1-åˆ›å»ºæ•°æ®åº“"><a href="#1-1-åˆ›å»ºæ•°æ®åº“" class="headerlink" title="1.1 åˆ›å»ºæ•°æ®åº“"></a>1.1 åˆ›å»ºæ•°æ®åº“</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> <span class="string">`mybatis`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">USE</span> <span class="string">`mybatis`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`user`</span>(</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">INT</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`pwd`</span> <span class="built_in">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span></span><br><span class="line">)<span class="keyword">ENGINE</span>=<span class="keyword">INNODB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`user`</span>(<span class="string">`id`</span>,<span class="string">`name`</span>,<span class="string">`pwd`</span>) <span class="keyword">VALUES</span> </span><br><span class="line">(<span class="number">1</span>,<span class="string">&#x27;ç‹‚ç¥&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>),</span><br><span class="line">(<span class="number">2</span>,<span class="string">&#x27;å¼ ä¸‰&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>),</span><br><span class="line">(<span class="number">3</span>,<span class="string">&#x27;æå››&#x27;</span>,<span class="string">&#x27;123890&#x27;</span>)</span><br></pre></td></tr></table></figure>

<a id="more"></a>



<h4 id="1-2-æ–°å»ºé¡¹ç›®"><a href="#1-2-æ–°å»ºé¡¹ç›®" class="headerlink" title="1.2 æ–°å»ºé¡¹ç›®"></a>1.2 æ–°å»ºé¡¹ç›®</h4><ol>
<li><p>æ–°å»ºä¸€ä¸ªæ™®é€šçš„ maven é¡¹ç›®</p>
</li>
<li><p>åˆ é™¤ src ç›®å½•</p>
</li>
<li><p>å¯¼å…¥ maven ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¯¼å…¥ä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mysqlé©±åŠ¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mybatis--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--junit--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>




</li>
</ol>
<h3 id="2-åˆ›å»ºä¸€ä¸ªæ¨¡å—"><a href="#2-åˆ›å»ºä¸€ä¸ªæ¨¡å—" class="headerlink" title="2. åˆ›å»ºä¸€ä¸ªæ¨¡å—"></a>2. åˆ›å»ºä¸€ä¸ªæ¨¡å—</h3><ol>
<li><p>ç¼–å†™ mybatis çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œåœ¨ resources æ–‡ä»¶å¤¹ä¸‹åˆ›å»º mybatis-config.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">          <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">          <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--configurationæ ¸å¿ƒé…ç½®æ–‡ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=false<span class="symbol">&amp;amp;</span>useUnicode=false<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™ mybatis å·¥å…·ç±»ï¼Œåœ¨ utils åŒ…ä¸­æ–°å»º MybatisUtils ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//sqlSessionFactory --&gt; sqlSession</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisUtils</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//ä½¿ç”¨Mybatisç¬¬ä¸€æ­¥ï¼šè·å–sqlSessionFactoryå¯¹è±¡</span></span><br><span class="line">            String resource = <span class="string">&quot;mybatis-config.xml&quot;</span>;</span><br><span class="line">            InputStream inputStream = Resources.getResourceAsStream(resource);</span><br><span class="line">            sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ—¢ç„¶æœ‰äº† SqlSessionFactoryï¼Œé¡¾åæ€ä¹‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä»ä¸­è·å¾— SqlSession çš„å®ä¾‹äº†ã€‚</span></span><br><span class="line">    <span class="comment">// SqlSession å®Œå…¨åŒ…å«äº†é¢å‘æ•°æ®åº“æ‰§è¡Œ SQL å‘½ä»¤æ‰€éœ€çš„æ‰€æœ‰æ–¹æ³•ã€‚</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SqlSession  <span class="title">getSqlSession</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sqlSessionFactory.openSession(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="3-ç¼–å†™ä»£ç "><a href="#3-ç¼–å†™ä»£ç " class="headerlink" title="3. ç¼–å†™ä»£ç "></a>3. ç¼–å†™ä»£ç </h3><ol>
<li><p>å®ä½“ç±»ï¼Œåœ¨ pojo åŒ…ä¸‹æ–°å»º User ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.kuang.pojo;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®ä½“ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(<span class="keyword">int</span> id, String name, String pwd)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.pwd = pwd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPwd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> pwd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPwd</span><span class="params">(String pwd)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.pwd = pwd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, pwd=&#x27;&quot;</span> + pwd + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Daoæ¥å£ï¼Œåœ¨ mapper åŒ…ä¸‹æ–°å»º  UserMapper æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">getUserList</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ¥å£å®ç°ç±»ç”±åŸæ¥çš„ UserDaoImpl è½¬å˜ä¸ºä¸€ä¸ª Mapper é…ç½®æ–‡ä»¶ï¼ŒUserMapper.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- namespace=ç»‘å®šä¸€ä¸ªå¯¹åº”çš„Dao/Mapperæ¥å£ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.horsen.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- selectæŸ¥è¯¢è¯­å¥ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.horsen.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        select * from mybatis.user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨ Mybatis æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œè¿™ä¸ª Mapper.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">......</span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ¯ä¸€ä¸ªMapper.xmléƒ½éœ€è¦åœ¨Mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/horsen/mapper/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="4-æµ‹è¯•"><a href="#4-æµ‹è¯•" class="headerlink" title="4. æµ‹è¯•"></a>4. æµ‹è¯•</h3><p>åœ¨ test/java ä¸‹æ–°å»º mapper åŒ…ï¼Œç¼–å†™æµ‹è¯•ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserMapperTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è·å¾—sqlSessionå¯¹è±¡</span></span><br><span class="line">        SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">        <span class="comment">// æ–¹å¼ä¸€: getMapperè·å¾—æ¥å£</span></span><br><span class="line">        UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        List&lt;User&gt; userList = userMapper.getUserList();</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">        // æ–¹å¼äºŒ: ç›´æ¥è°ƒç”¨daoæ¥å£çš„getUserList()æ–¹æ³•</span></span><br><span class="line"><span class="comment">        List&lt;User&gt; userList = sqlSession.selectList(&quot;com.horsen.mapper.UserMapper.getUserList&quot;);</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å…³é—­sqlSession</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>é‡åˆ°çš„é—®é¢˜ï¼š</strong></p>
<ol>
<li><p>æŠ¥é”™ï¼š</p>
<blockquote>
<p>org.apache.ibatis.binding.BindingException: Type interface com.horsen.dao.UserDao is not known to the MapperRegistry.</p>
</blockquote>
<p> è§£å†³æ–¹æ³•ï¼šåœ¨ Mybatis æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ Mapper.xml</p>
</li>
<li><p>æŠ¥é”™ï¼š</p>
<blockquote>
<p># The error may exist in com/horsen/dao/UserMapper.xml</p>
</blockquote>
<p>è§£å†³æ–¹æ³•ï¼šå‚è€ƒ Maven é…ç½®ä¸­æœ€åä¸€éƒ¨åˆ†â€œèµ„æºå¯¼å‡ºå¤±è´¥çš„é—®é¢˜â€</p>
</li>
<li><p>æŠ¥é”™ï¼š</p>
<blockquote>
<p>Cause: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure</p>
</blockquote>
<p>è§£å†³æ–¹æ³•ï¼šuseSSL=true æ”¹ä¸º useSSL=false</p>
<p>ï¼ˆå¯èƒ½æ˜¯ç”±äº JDBC ç‰ˆæœ¬å’Œ MySQL ç‰ˆæœ¬ä¸å…¼å®¹çš„é—®é¢˜ï¼‰</p>
</li>
</ol>
<p><strong>è¿˜å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜ï¼š</strong></p>
<ol>
<li>ç»‘å®šæ¥å£é”™è¯¯</li>
<li>æ–¹æ³•åä¸å¯¹</li>
<li>è¿”å›ç±»å‹ä¸å¯¹</li>
</ol>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Mybatis</category>
      </categories>
      <tags>
        <tag>Mybatis</tag>
        <tag>ç¯å¢ƒæ­å»º</tag>
      </tags>
  </entry>
  <entry>
    <title>03_CRUD</title>
    <url>/posts/5d4676a0.html</url>
    <content><![CDATA[<p><strong>CRUD æ“ä½œéƒ½åœ¨ Mapper.xml ä¸­ç¼–å†™ï¼Œå³ Mapper æ¥å£çš„å®ç°ç±»ï¼ˆé€šè¿‡é…ç½®æ–‡ä»¶å®ç°ï¼‰</strong></p>
<p><em>æ³¨æ„ï¼šå¢åˆ æ”¹æ“ä½œéœ€è¦æäº¤äº‹åŠ¡</em></p>
<p><code>sqlSession.commit();</code></p>
<h3 id="1-namespace"><a href="#1-namespace" class="headerlink" title="1. namespace"></a>1. namespace</h3><p>namespace ä¸­çš„åŒ…åè¦å’Œ mapper æ¥å£çš„åŒ…åä¸€è‡´</p>
<a id="more"></a>



<h3 id="2-Select"><a href="#2-Select" class="headerlink" title="2. Select"></a>2. Select</h3><p>é€‰æ‹©ï¼ŒæŸ¥è¯¢è¯­å¥</p>
<ul>
<li>id : å°±æ˜¯å¯¹åº”çš„ namespace ä¸­çš„æ–¹æ³•å</li>
<li>resultTypeï¼šSql è¯­å¥æ‰§è¡Œçš„è¿”å›å€¼</li>
<li>parameterType ï¼š å‚æ•°ç±»å‹</li>
</ul>
<ol>
<li><p>ç¼–å†™æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> id ID</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> user</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">User <span class="title">getUserById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™å¯¹åº”çš„ mapper ä¸­çš„ sql è¯­å¥</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.horsen.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    select * from mybatis.user where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™æµ‹è¯•ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUserById</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">    UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    User user = mapper.getUserById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="3-Insert"><a href="#3-Insert" class="headerlink" title="3. Insert"></a>3. Insert</h3><ol>
<li><p>ç¼–å†™æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ’å…¥ä¸€ä¸ªç”¨æˆ·</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">addUser</span><span class="params">(User user)</span></span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™å¯¹åº”çš„ mapper ä¸­çš„ sql è¯­å¥</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¯¹è±¡ä¸­çš„å±æ€§å¯ä»¥ç›´æ¥å–å‡ºæ¥ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.horsen.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    insert into mybatis.user (id, name, pwd) values (#&#123;id&#125;,#&#123;name&#125;,#&#123;pwd&#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™æµ‹è¯•ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¢åˆ æ”¹éœ€è¦æäº¤äº‹åŠ¡</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">    UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    <span class="keyword">int</span> res = mapper.addUser(<span class="keyword">new</span> User(<span class="number">4</span>, <span class="string">&quot;haha&quot;</span>, <span class="string">&quot;123123&quot;</span>));</span><br><span class="line">    <span class="keyword">if</span> (res &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ’å…¥æˆåŠŸ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æäº¤äº‹åŠ¡</span></span><br><span class="line">    sqlSession.commit();</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="4-Update"><a href="#4-Update" class="headerlink" title="4. Update"></a>4. Update</h3><ol>
<li><p>ç¼–å†™æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¿®æ”¹ç”¨æˆ·</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> user ç”¨æˆ·</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">updateUser</span><span class="params">(User user)</span></span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™å¯¹åº”çš„ mapper ä¸­çš„ sql è¯­å¥</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.horsen.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    update mybatis.user set name=#&#123;name&#125;, pwd=#&#123;pwd&#125; where id=#&#123;id&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™æµ‹è¯•ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">    UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    mapper.updateUser(<span class="keyword">new</span> User(<span class="number">4</span>, <span class="string">&quot;heihei&quot;</span>, <span class="string">&quot;999999&quot;</span>));</span><br><span class="line">    <span class="comment">// æäº¤äº‹åŠ¡</span></span><br><span class="line">    sqlSession.commit();</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="5-Delete"><a href="#5-Delete" class="headerlink" title="5. Delete"></a>5. Delete</h3><ol>
<li><p>ç¼–å†™æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ é™¤ç”¨æˆ·</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> id ç”¨æˆ·id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">deleteUser</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™å¯¹åº”çš„ mapper ä¸­çš„ sql è¯­å¥</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">    delete from mybatis.user where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™æµ‹è¯•ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">    UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    mapper.deleteUser(<span class="number">4</span>);</span><br><span class="line">    sqlSession.commit();</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="6-ä¸‡èƒ½-Map"><a href="#6-ä¸‡èƒ½-Map" class="headerlink" title="6. ä¸‡èƒ½ Map"></a>6. ä¸‡èƒ½ Map</h3><p>å¦‚æœå®ä½“ç±»æˆ–è€…æ•°æ®åº“ä¸­çš„è¡¨çš„å­—æ®µï¼Œæˆ–è€…å‚æ•°è¿‡å¤šï¼Œåº”å½“è€ƒè™‘ä½¿ç”¨ Map</p>
<ol>
<li><p>ç¼–å†™æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">addUser2</span><span class="params">(Map&lt;String, Object&gt; map)</span></span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™å¯¹åº”çš„ mapper ä¸­çš„ sql è¯­å¥</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ä¼ é€’mapä¸­çš„key --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addUser2&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">    insert into mybatis.user (id, name, pwd) values (#&#123;userId&#125;,#&#123;userName&#125;,#&#123;pwd&#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™æµ‹è¯•ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addUser2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">    UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;userId&quot;</span>, <span class="number">5</span>);</span><br><span class="line">    map.put(<span class="string">&quot;userName&quot;</span>, <span class="string">&quot;hello&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;pwd&quot;</span>, <span class="string">&quot;22223333&quot;</span>);</span><br><span class="line">    mapper.addUser2(map);</span><br><span class="line">    sqlSession.commit();</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>Map ä¼ é€’å‚æ•°ï¼Œç›´æ¥åœ¨ sql ä¸­å–å‡º key å³å¯ <code>parameterType=&quot;map&quot;</code></p>
<p>å¯¹è±¡ä¼ é€’å‚æ•°ï¼Œç›´æ¥åœ¨ sql ä¸­å–å¯¹è±¡çš„å±æ€§å³å¯<code>parameterType=&quot;Object&quot;</code></p>
<p>åªæœ‰ä¸€ä¸ªåŸºæœ¬ç±»å‹å‚æ•°çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç›´æ¥åœ¨ sql ä¸­å–åˆ°</p>
<p>å¤šä¸ªå‚æ•°ç”¨Mapï¼Œ<strong>æˆ–è€…æ³¨è§£</strong></p>
<h3 id="7-æ¨¡ç³ŠæŸ¥è¯¢"><a href="#7-æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="7. æ¨¡ç³ŠæŸ¥è¯¢"></a>7. æ¨¡ç³ŠæŸ¥è¯¢</h3><ol>
<li><p>æ–¹å¼ä¸€ï¼šåœ¨ Java ä»£ç æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼ é€’é€šé…ç¬¦%</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;User&gt; userList = mapper.getUserLike(<span class="string">&quot;%æ%&quot;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–¹å¼äºŒï¼šåœ¨ sql è¯­å¥ä¸­æ·»åŠ é€šé…ç¬¦%</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> mybatis.user <span class="keyword">where</span> <span class="keyword">name</span> <span class="keyword">like</span> <span class="string">&quot;%&quot;</span><span class="comment">#&#123;value&#125;&quot;%&quot;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Mybatis</category>
      </categories>
      <tags>
        <tag>CRUD</tag>
        <tag>Mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title>04_é…ç½®è§£æ</title>
    <url>/posts/96d9daef.html</url>
    <content><![CDATA[<h3 id="1-æ ¸å¿ƒé…ç½®æ–‡ä»¶"><a href="#1-æ ¸å¿ƒé…ç½®æ–‡ä»¶" class="headerlink" title="1. æ ¸å¿ƒé…ç½®æ–‡ä»¶"></a>1. æ ¸å¿ƒé…ç½®æ–‡ä»¶</h3><ul>
<li><p>mybatis-config.xml</p>
</li>
<li><p>MyBatis çš„é…ç½®æ–‡ä»¶åŒ…å«äº†ä¼šæ·±æ·±å½±å“ MyBatis è¡Œä¸ºçš„è®¾ç½®å’Œå±æ€§ä¿¡æ¯ã€‚</p>
<ul>
<li><p>propertiesï¼ˆå±æ€§ï¼‰</p>
</li>
<li><p>settingsï¼ˆè®¾ç½®ï¼‰</p>
</li>
<li><p>typeAliasesï¼ˆç±»å‹åˆ«åï¼‰</p>
</li>
<li><p>typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰</p>
</li>
<li><p>objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰</p>
</li>
<li><p>pluginsï¼ˆæ’ä»¶ï¼‰</p>
</li>
<li><p>environmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰</p>
<ul>
<li>environmentï¼ˆç¯å¢ƒå˜é‡ï¼‰<ul>
<li>transactionManagerï¼ˆäº‹åŠ¡ç®¡ç†å™¨ï¼‰</li>
<li>dataSourceï¼ˆæ•°æ®æºï¼‰</li>
</ul>
</li>
</ul>
</li>
<li><p>databaseIdProviderï¼ˆæ•°æ®åº“å‚å•†æ ‡è¯†ï¼‰</p>
</li>
<li><p>mappersï¼ˆæ˜ å°„å™¨ï¼‰</p>
</li>
</ul>
</li>
</ul>
<a id="more"></a>



<h3 id="2-environmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰"><a href="#2-environmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰" class="headerlink" title="2. environmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰"></a>2. <strong>environmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰</strong></h3><ul>
<li><p>MyBatis å¯ä»¥é…ç½®æˆé€‚åº”å¤šç§ç¯å¢ƒ</p>
</li>
<li><p><strong>ä¸è¿‡è¦è®°ä½ï¼šå°½ç®¡å¯ä»¥é…ç½®å¤šä¸ªç¯å¢ƒï¼Œä½†æ¯ä¸ª SqlSessionFactory å®ä¾‹åªèƒ½é€‰æ‹©ä¸€ç§ç¯å¢ƒ</strong></p>
<p><code>&lt;environments default=&quot;development&quot;&gt;</code></p>
</li>
<li><p>Mybatis é»˜è®¤çš„äº‹åŠ¡ç®¡ç†å™¨æ˜¯ JDBC</p>
<p> <code>&lt;transactionManager type=&quot;JDBC&quot;/&gt;</code></p>
</li>
<li><p>é»˜è®¤çš„æ•°æ®æºæ˜¯è¿æ¥æ± ï¼šPOOLED</p>
<p><code>&lt;dataSource type=&quot;POOLED&quot;&gt;</code></p>
</li>
</ul>
<h3 id="3-å±æ€§ï¼ˆpropertiesï¼‰"><a href="#3-å±æ€§ï¼ˆpropertiesï¼‰" class="headerlink" title="3. å±æ€§ï¼ˆpropertiesï¼‰"></a>3. å±æ€§ï¼ˆpropertiesï¼‰</h3><ul>
<li><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ properties å±æ€§æ¥å®ç°å¼•ç”¨é…ç½®æ–‡ä»¶</p>
</li>
<li><p>è¿™äº›å±æ€§éƒ½æ˜¯å¯å¤–éƒ¨é…ç½®ä¸”å¯åŠ¨æ€æ›¿æ¢çš„ï¼Œæ—¢å¯ä»¥åœ¨å…¸å‹çš„ Java å±æ€§æ–‡ä»¶ï¼ˆdb.propertiesï¼‰ä¸­é…ç½®ï¼Œäº¦å¯é€šè¿‡ properties å…ƒç´ çš„å­å…ƒç´ æ¥ä¼ é€’</p>
</li>
</ul>
<ol>
<li><p>ç¼–å†™ä¸€ä¸ªé…ç½®æ–‡ä»¶ db.properties</p>
 <figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/mybatis?useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼•å…¥ï¼Œæ³¨æ„ xml æ ‡ç­¾çš„é¡ºåºæ˜¯æœ‰è¦æ±‚çš„</p>
 <img src="/posts/96d9daef/image-20200727143249703.png" class>

 <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;db.properties&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p> ä»£ç å°±è¦ä¿®æ”¹ä¸º</p>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>ç»“è®ºï¼š</strong></p>
<ul>
<li>å¯ä»¥ç›´æ¥å¼•å…¥å¤–éƒ¨æ–‡ä»¶</li>
<li>å¯ä»¥åœ¨å…¶ä¸­å¢åŠ ä¸€äº›å±æ€§é…ç½®</li>
<li>å¦‚æœä¸¤ä¸ªæ–‡ä»¶æœ‰åŒä¸€ä¸ªå­—æ®µï¼Œä¼˜å…ˆä½¿ç”¨å¤–éƒ¨é…ç½®æ–‡ä»¶çš„</li>
</ul>
<h3 id="4-ç±»å‹åˆ«åï¼ˆtypeAliasesï¼‰"><a href="#4-ç±»å‹åˆ«åï¼ˆtypeAliasesï¼‰" class="headerlink" title="4. ç±»å‹åˆ«åï¼ˆtypeAliasesï¼‰"></a>4. ç±»å‹åˆ«åï¼ˆtypeAliasesï¼‰</h3><ul>
<li><p>ç±»å‹åˆ«åæ˜¯ä¸º Java ç±»å‹è®¾ç½®ä¸€ä¸ªçŸ­çš„åå­—</p>
</li>
<li><p>å­˜åœ¨çš„æ„ä¹‰ä»…åœ¨äºç”¨æ¥å‡å°‘ç±»å®Œå…¨é™å®šåçš„å†—ä½™ã€‚</p>
  <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¯ä»¥ç»™å®ä½“ç±»èµ·åˆ«å--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;com.horsen.pojo.User&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;User&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªåŒ…åï¼ŒMyBatis ä¼šåœ¨åŒ…åä¸‹é¢æœç´¢éœ€è¦çš„ Java Beanï¼Œæ¯”å¦‚ï¼š</p>
  <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¯ä»¥ç»™å®ä½“ç±»èµ·åˆ«å--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.horsen.pojo&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>  æ‰«æå®ä½“ç±»çš„åŒ…ï¼Œå®ƒçš„é»˜è®¤åˆ«åå°±ä¸ºè¿™ä¸ªç±»çš„ç±»åï¼ˆé¦–å­—æ¯å°å†™ï¼‰</p>
</li>
</ul>
<p><strong>æ€»ç»“ï¼š</strong></p>
<ul>
<li><p>åœ¨å®ä½“ç±»æ¯”è¾ƒå°‘çš„æ—¶å€™ï¼Œä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼ã€‚</p>
</li>
<li><p>å¦‚æœå®ä½“ç±»ååˆ†å¤šï¼Œå»ºè®®ä½¿ç”¨ç¬¬äºŒç§ã€‚</p>
</li>
<li><p>ç¬¬ä¸€ç§å¯ä»¥è‡ªå®šä¹‰åˆ«åï¼Œç¬¬äºŒç§åˆ™ä¸è¡Œï¼Œå¦‚æœéè¦æ”¹ï¼Œéœ€è¦åœ¨å®ä½“ä¸Šå¢åŠ æ³¨è§£</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Alias(&quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h3 id="5-è®¾ç½®ï¼ˆsettingï¼‰"><a href="#5-è®¾ç½®ï¼ˆsettingï¼‰" class="headerlink" title="5. è®¾ç½®ï¼ˆsettingï¼‰"></a>5. è®¾ç½®ï¼ˆsettingï¼‰</h3><blockquote>
<p><a href="https://mybatis.org/mybatis-3/zh/configuration.html#settings">https://mybatis.org/mybatis-3/zh/configuration.html#settings</a></p>
</blockquote>
<h3 id="6-å…¶ä»–é…ç½®"><a href="#6-å…¶ä»–é…ç½®" class="headerlink" title="6. å…¶ä»–é…ç½®"></a>6. å…¶ä»–é…ç½®</h3><ul>
<li><a href="https://mybatis.org/mybatis-3/zh/configuration.html#typeHandlers">typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰</a></li>
<li><a href="https://mybatis.org/mybatis-3/zh/configuration.html#objectFactory">objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰</a></li>
<li>pluginsæ’ä»¶<ul>
<li>mybatis-generator-core</li>
<li>mybatis-plus</li>
<li>é€šç”¨ mapper</li>
</ul>
</li>
</ul>
<h3 id="7-æ˜ å°„å™¨ï¼ˆmappersï¼‰"><a href="#7-æ˜ å°„å™¨ï¼ˆmappersï¼‰" class="headerlink" title="7. æ˜ å°„å™¨ï¼ˆmappersï¼‰"></a>7. æ˜ å°„å™¨ï¼ˆmappersï¼‰</h3><p>MapperRegistryï¼šæ³¨å†Œç»‘å®š  Mapper æ–‡ä»¶ï¼›</p>
<p>æ–¹å¼ä¸€ï¼šã€æ¨èä½¿ç”¨ã€‘</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/horsen/mapper/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ–¹å¼äºŒï¼šä½¿ç”¨ class æ–‡ä»¶ç»‘å®šæ³¨å†Œ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.mapper.UserMapper&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ–¹å¼ä¸‰ï¼šä½¿ç”¨æ‰«æåŒ…è¿›è¡Œæ³¨å…¥ç»‘å®š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.horsen.mapper&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><em>æ³¨æ„ç‚¹ï¼š</em></p>
<ul>
<li><em>æ¥å£å’Œå…¶ Mapper é…ç½®æ–‡ä»¶å¿…é¡»åŒå</em></li>
<li><em>æ¥å£å’Œå…¶ Mapper é…ç½®æ–‡ä»¶å¿…é¡»åœ¨åŒä¸€ä¸ªåŒ…ä¸‹ï¼ˆåŒä¸€ä¸ªåŒ…åï¼‰</em></li>
</ul>
<h3 id="8-ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ"><a href="#8-ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ" class="headerlink" title="8. ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ"></a>8. ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ</h3><p>ç”Ÿå‘½å‘¨æœŸï¼Œå’Œä½œç”¨åŸŸï¼Œæ˜¯è‡³å…³é‡è¦çš„ï¼Œå› ä¸ºé”™è¯¯çš„ä½¿ç”¨ä¼šå¯¼è‡´éå¸¸ä¸¥é‡çš„<strong>å¹¶å‘é—®é¢˜</strong></p>
<ul>
<li><p><strong>SqlSessionFactoryBuilder</strong></p>
<ul>
<li>ä¸€æ—¦åˆ›å»ºäº† SqlSessionFactoryï¼Œå°±ä¸å†éœ€è¦å®ƒäº†</li>
<li>å±€éƒ¨å˜é‡</li>
</ul>
</li>
<li><p><strong>SqlSessionFactory</strong></p>
<ul>
<li><p>è¯´ç™½äº†å°±æ˜¯å¯ä»¥æƒ³è±¡ä¸ºæ•°æ®åº“è¿æ¥æ± </p>
</li>
<li><p>SqlSessionFactory ä¸€æ—¦è¢«åˆ›å»ºå°±åº”è¯¥åœ¨åº”ç”¨çš„è¿è¡ŒæœŸé—´ä¸€ç›´å­˜åœ¨ï¼Œ<strong>æ²¡æœ‰ä»»ä½•ç†ç”±ä¸¢å¼ƒå®ƒæˆ–é‡æ–°åˆ›å»ºå¦ä¸€ä¸ªå®ä¾‹</strong></p>
</li>
<li><p>å› æ­¤ SqlSessionFactory çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯åº”ç”¨ä½œç”¨åŸŸ </p>
</li>
<li><p>æœ€ç®€å•çš„å°±æ˜¯ä½¿ç”¨<strong>å•ä¾‹æ¨¡å¼</strong>æˆ–è€…é™æ€å•ä¾‹æ¨¡å¼</p>
</li>
</ul>
</li>
<li><p><strong>SqlSession</strong></p>
</li>
<li><p>è¿æ¥åˆ°è¿æ¥æ± çš„ä¸€ä¸ªè¯·æ±‚</p>
<ul>
<li>SqlSession çš„å®ä¾‹ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› æ­¤æ˜¯ä¸èƒ½è¢«å…±äº«çš„ï¼Œæ‰€ä»¥å®ƒçš„æœ€ä½³çš„ä½œç”¨åŸŸæ˜¯è¯·æ±‚æˆ–æ–¹æ³•ä½œç”¨åŸŸ</li>
<li>ç”¨å®Œä¹‹åéœ€è¦èµ¶ç´§å…³é—­ï¼Œå¦åˆ™èµ„æºè¢«å ç”¨</li>
<li>SqlSession å¾—åˆ°çš„æ¯ä¸€ä¸ª Mapper ï¼Œå°±ä»£è¡¨ä¸€ä¸ªå…·ä½“çš„ä¸šåŠ¡</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Mybatis</category>
      </categories>
      <tags>
        <tag>Mybatis</tag>
        <tag>ç¯å¢ƒæ­å»º</tag>
      </tags>
  </entry>
  <entry>
    <title>06_æ—¥å¿—</title>
    <url>/posts/25965bab.html</url>
    <content><![CDATA[<h3 id="1-æ—¥å¿—å·¥å‚"><a href="#1-æ—¥å¿—å·¥å‚" class="headerlink" title="1. æ—¥å¿—å·¥å‚"></a>1. æ—¥å¿—å·¥å‚</h3><p>å¦‚æœä¸€ä¸ªæ•°æ®åº“æ“ä½œå‡ºç°äº†å¼‚å¸¸ï¼Œæˆ‘ä»¬éœ€è¦æ’é”™ï¼Œé‚£æ—¥å¿—å°±æ˜¯æœ€å¥½çš„åŠ©æ‰‹</p>
<p>Mybatis å†…ç½®çš„æ—¥å¿—å·¥å‚</p>
<ul>
<li>SLF4J </li>
<li>[LOG4J ï¼ˆæŒæ¡ï¼‰](#3. Log4j)</li>
<li>LOG4J2</li>
<li>JDK_LOGGING</li>
<li>COMMONS_LOGGING</li>
<li>[STDOUT_LOGGING ï¼ˆæŒæ¡ï¼‰](#2. STDOUT_LOGGING)</li>
<li>NO_LOGGING</li>
</ul>
<p>å…·ä½“ä½¿ç”¨å“ªä¸€ä¸ªï¼Œè¦åœ¨è®¾ç½®ä¸­è®¾å®š</p>
<a id="more"></a>



<h3 id="2-STDOUT-LOGGING"><a href="#2-STDOUT-LOGGING" class="headerlink" title="2. STDOUT_LOGGING"></a>2. STDOUT_LOGGING</h3><p>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ·»åŠ </p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;STDOUT_LOGGING&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ—¥å¿—æ•ˆæœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Opening JDBC Connection</span><br><span class="line">Created connection 897074030.</span><br><span class="line">Setting autocommit to false on JDBC Connection [com.mysql.jdbc.JDBC4Connection@3578436e]</span><br><span class="line">&#x3D;&#x3D;&gt;  Preparing: select * from mybatis.user where id &#x3D; ? </span><br><span class="line">&#x3D;&#x3D;&gt; Parameters: 1(Integer)</span><br><span class="line">&lt;&#x3D;&#x3D;    Columns: id, name, pwd</span><br><span class="line">&lt;&#x3D;&#x3D;        Row: 1, åˆ˜æ˜Šé‘«, 123456</span><br><span class="line">&lt;&#x3D;&#x3D;      Total: 1</span><br><span class="line">User&#123;id&#x3D;1, name&#x3D;&#39;åˆ˜æ˜Šé‘«&#39;, pwd&#x3D;&#39;123456&#39;&#125;</span><br><span class="line">Resetting autocommit to true on JDBC Connection [com.mysql.jdbc.JDBC4Connection@3578436e]</span><br><span class="line">Closing JDBC Connection [com.mysql.jdbc.JDBC4Connection@3578436e]</span><br><span class="line">Returned connection 897074030 to pool.</span><br></pre></td></tr></table></figure>



<h3 id="3-Log4j"><a href="#3-Log4j" class="headerlink" title="3. Log4j"></a>3. Log4j</h3><ul>
<li>Log4j æ˜¯ Apache çš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œé€šè¿‡ä½¿ç”¨Log4jï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶æ—¥å¿—ä¿¡æ¯è¾“é€çš„ç›®çš„åœ°æ˜¯æ§åˆ¶å°ã€æ–‡ä»¶ã€GUIç»„ä»¶</li>
<li>æˆ‘ä»¬ä¹Ÿå¯ä»¥æ§åˆ¶æ¯ä¸€æ¡æ—¥å¿—çš„è¾“å‡ºæ ¼å¼</li>
<li>é€šè¿‡å®šä¹‰æ¯ä¸€æ¡æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ›´åŠ ç»†è‡´åœ°æ§åˆ¶æ—¥å¿—çš„ç”Ÿæˆè¿‡ç¨‹</li>
<li>é€šè¿‡ä¸€ä¸ªé…ç½®æ–‡ä»¶æ¥çµæ´»åœ°è¿›è¡Œé…ç½®ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹åº”ç”¨çš„ä»£ç </li>
</ul>
<ol>
<li><p>å¯¼å…¥ log4j çš„åŒ…</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™ log4j.properties</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å°†ç­‰çº§ä¸ºDEBUGçš„æ—¥å¿—ä¿¡æ¯è¾“å‡ºåˆ°consoleå’Œfileè¿™ä¸¤ä¸ªç›®çš„åœ°ï¼Œconsoleå’Œfileçš„å®šä¹‰åœ¨ä¸‹é¢çš„ä»£ç </span></span><br><span class="line"><span class="meta">log4j.rootLogger</span>=<span class="string">DEBUG,console,file</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ§åˆ¶å°è¾“å‡ºçš„ç›¸å…³è®¾ç½®</span></span><br><span class="line"><span class="meta">log4j.appender.console</span> = <span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="meta">log4j.appender.console.Target</span> = <span class="string">System.out</span></span><br><span class="line"><span class="meta">log4j.appender.console.Threshold</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="meta">log4j.appender.console.layout</span> = <span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.console.layout.ConversionPattern</span>=<span class="string">[%c]-%m%n</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ–‡ä»¶è¾“å‡ºçš„ç›¸å…³è®¾ç½®</span></span><br><span class="line"><span class="meta">log4j.appender.file</span> = <span class="string">org.apache.log4j.RollingFileAppender</span></span><br><span class="line"><span class="meta">log4j.appender.file.File</span>=<span class="string">./log/kuang.log</span></span><br><span class="line"><span class="meta">log4j.appender.file.MaxFileSize</span>=<span class="string">10mb</span></span><br><span class="line"><span class="meta">log4j.appender.file.Threshold</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="meta">log4j.appender.file.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.file.layout.ConversionPattern</span>=<span class="string">[%p][%d&#123;yy-MM-dd&#125;][%c]%m%n</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ—¥å¿—è¾“å‡ºçº§åˆ«</span></span><br><span class="line"><span class="meta">log4j.logger.org.mybatis</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="meta">log4j.logger.java.sql</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="meta">log4j.logger.java.sql.Statement</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="meta">log4j.logger.java.sql.ResultSet</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="meta">log4j.logger.java.sql.PreparedStatement</span>=<span class="string">DEBUG</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>é…ç½®log4jä¸ºæ—¥å¿—çš„å®ç°</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;LOG4J&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ol>
<p><strong>ç®€å•ä½¿ç”¨ï¼š</strong></p>
<ol>
<li><p>åœ¨è¦ä½¿ç”¨ Log4j çš„ç±»ä¸­ï¼Œå¯¼å…¥åŒ… </p>
<p><code>import org.apache.log4j.Logger;</code></p>
</li>
<li><p>å£°æ˜æ—¥å¿—å¯¹è±¡ï¼Œå‚æ•°ä¸ºå½“å‰ç±»çš„ class</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> Logger logger = Logger.getLogger(UserDaoTest.class);</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ—¥å¿—çº§åˆ«</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">logger.info(<span class="string">&quot;info:è¿›å…¥äº†testLog4j&quot;</span>);</span><br><span class="line">logger.debug(<span class="string">&quot;debug:è¿›å…¥äº†testLog4j&quot;</span>);</span><br><span class="line">logger.error(<span class="string">&quot;error:è¿›å…¥äº†testLog4j&quot;</span>);</span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Mybatis</category>
      </categories>
      <tags>
        <tag>Mybatis</tag>
        <tag>log4j</tag>
      </tags>
  </entry>
  <entry>
    <title>05_è§£å†³å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜</title>
    <url>/posts/fb52b402.html</url>
    <content><![CDATA[<h3 id="1-é—®é¢˜"><a href="#1-é—®é¢˜" class="headerlink" title="1. é—®é¢˜"></a>1. é—®é¢˜</h3><ul>
<li><p>å±æ€§å password</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å­—æ®µå pwd</p>
<img src="/posts/fb52b402/image-20200727195842355.png" class>

</li>
</ul>
<p>æµ‹è¯•ç»“æœï¼š</p>
<p><code>User&#123;id=1, name=&#39;åˆ˜æ˜Šé‘«&#39;, pwd=&#39;null&#39;&#125;</code></p>
<p>è§£å†³æ–¹æ³•ï¼š</p>
<ol>
<li><p>èµ·åˆ«å</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">    select id, name, pwd as password</span><br><span class="line">    from mybatis.user</span><br><span class="line">    where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨ resultMap</p>
</li>
</ol>
<a id="more"></a>



<h3 id="2-ç»“æœé›†æ˜ å°„-resultMap"><a href="#2-ç»“æœé›†æ˜ å°„-resultMap" class="headerlink" title="2. ç»“æœé›†æ˜ å°„ resultMap"></a>2. ç»“æœé›†æ˜ å°„ resultMap</h3><p>ç”¨ <code>resultMap</code> ä»£æ›¿ <code>resultType</code>ï¼Œç¼–å†™ <code>resultMap</code> ä½¿å±æ€§åå’Œå­—æ®µåå½¢æˆæ˜ å°„</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç»“æœé›†æ˜ å°„ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;UserMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- columnæ•°æ®åº“ä¸­çš„å­—æ®µï¼Œpropertyå®ä½“ç±»ä¸­çš„å±æ€§ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;UserMap&quot;</span>&gt;</span></span><br><span class="line">    select *</span><br><span class="line">    from mybatis.user</span><br><span class="line">    where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>resultMap</code> å…ƒç´ æ˜¯ MyBatis ä¸­æœ€é‡è¦æœ€å¼ºå¤§çš„å…ƒç´ </li>
<li>ResultMap çš„è®¾è®¡æ€æƒ³æ˜¯ï¼Œå¯¹äºç®€å•çš„è¯­å¥æ ¹æœ¬ä¸éœ€è¦é…ç½®æ˜¾å¼çš„ç»“æœæ˜ å°„ï¼Œè€Œå¯¹äºå¤æ‚ä¸€ç‚¹çš„è¯­å¥åªéœ€è¦æè¿°å®ƒä»¬çš„å…³ç³»å°±è¡Œäº†ã€‚</li>
<li>ResultMap æœ€ä¼˜ç§€çš„åœ°æ–¹åœ¨äºï¼Œè™½ç„¶ä½ å·²ç»å¯¹å®ƒç›¸å½“äº†è§£äº†ï¼Œä½†æ˜¯æ ¹æœ¬å°±ä¸éœ€è¦æ˜¾å¼åœ°ç”¨åˆ°ä»–ä»¬ã€‚</li>
<li>å¦‚æœä¸–ç•Œæ€»æ˜¯è¿™ä¹ˆç®€å•å°±å¥½äº†</li>
</ul>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Mybatis</category>
      </categories>
      <tags>
        <tag>é—®é¢˜</tag>
        <tag>Mybatis</tag>
        <tag>ResultMap</tag>
      </tags>
  </entry>
  <entry>
    <title>07_åˆ†é¡µ</title>
    <url>/posts/37a4ae47.html</url>
    <content><![CDATA[<h3 id="1-Limit-åˆ†é¡µ"><a href="#1-Limit-åˆ†é¡µ" class="headerlink" title="1. Limit åˆ†é¡µ"></a>1. Limit åˆ†é¡µ</h3><ol>
<li><p>æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ†é¡µ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">List&lt;User&gt; <span class="title">getUserByLimit</span><span class="params">(Map&lt;String,Integer&gt; map)</span></span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Mapper.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åˆ†é¡µ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserByLimit&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;UserMap&quot;</span>&gt;</span></span><br><span class="line">    select * from mybatis.user limit #&#123;startIndex&#125;,#&#123;pageSize&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUserByLimit</span><span class="params">()</span></span>&#123;</span><br><span class="line">    SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">    UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    HashMap&lt;String, Integer&gt; map=<span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;startIndex&quot;</span>,<span class="number">1</span>);</span><br><span class="line">    map.put(<span class="string">&quot;pageSize&quot;</span>,<span class="number">2</span>);</span><br><span class="line">    List&lt;User&gt; userList = mapper.getUserByLimit(map);</span><br><span class="line">    <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
</ol>
<a id="more"></a>



<h3 id="2-RowBounds-åˆ†é¡µ"><a href="#2-RowBounds-åˆ†é¡µ" class="headerlink" title="2. RowBounds åˆ†é¡µ"></a>2. RowBounds åˆ†é¡µ</h3><ol>
<li><p>æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function">List&lt;User&gt; <span class="title">getUserByRowBounds</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Mapper.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åˆ†é¡µ2 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserByRowBounds&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;UserMap&quot;</span>&gt;</span></span><br><span class="line">    select *</span><br><span class="line">    from mybatis.user</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUserByRowBounds</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">    <span class="comment">// è®¾å®šä¸€ä¸ªRowBoundsä½œä¸ºå‚æ•°ä¼ è¿›selectList()æ–¹æ³•</span></span><br><span class="line">    RowBounds rowBounds = <span class="keyword">new</span> RowBounds(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">    List&lt;User&gt; userList = sqlSession.selectList(<span class="string">&quot;com.horsen.mapper.UserMapper.getUserByRowBounds&quot;</span>, <span class="keyword">null</span>, rowBounds);</span><br><span class="line">    <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="3-åˆ†é¡µæ’ä»¶-PageHelper"><a href="#3-åˆ†é¡µæ’ä»¶-PageHelper" class="headerlink" title="3. åˆ†é¡µæ’ä»¶ PageHelper"></a>3. åˆ†é¡µæ’ä»¶ PageHelper</h3><blockquote>
<p><a href="https://pagehelper.github.io/">https://pagehelper.github.io/</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Mybatis</category>
      </categories>
      <tags>
        <tag>Mybatis</tag>
        <tag>PageHelper</tag>
      </tags>
  </entry>
  <entry>
    <title>08_ä½¿ç”¨æ³¨è§£</title>
    <url>/posts/53af2c28.html</url>
    <content><![CDATA[<h3 id="1-é¢å‘æ¥å£ç¼–ç¨‹"><a href="#1-é¢å‘æ¥å£ç¼–ç¨‹" class="headerlink" title="1. é¢å‘æ¥å£ç¼–ç¨‹"></a>1. é¢å‘æ¥å£ç¼–ç¨‹</h3><ul>
<li>å¤§å®¶ä¹‹å‰éƒ½å­¦è¿‡é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œä¹Ÿå­¦ä¹ è¿‡æ¥å£ï¼Œä½†åœ¨çœŸæ­£çš„å¼€å‘ä¸­ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä¼šé€‰æ‹©é¢å‘æ¥å£ç¼–ç¨‹ã€‚</li>
<li>æ ¹æœ¬åŸå›  :  ==è§£è€¦== ï¼Œå¯æ‹“å±• ï¼Œæé«˜å¤ç”¨ ã€‚åˆ†å±‚å¼€å‘ä¸­ ï¼Œä¸Šå±‚ä¸ç”¨ç®¡å…·ä½“çš„å®ç° ï¼Œå¤§å®¶éƒ½éµå®ˆå…±åŒçš„æ ‡å‡† ï¼Œä½¿å¾—å¼€å‘å˜å¾—å®¹æ˜“ï¼Œè§„èŒƒæ€§æ›´å¥½ã€‚</li>
<li>åœ¨ä¸€ä¸ªé¢å‘å¯¹è±¡çš„ç³»ç»Ÿä¸­ï¼Œç³»ç»Ÿçš„å„ç§åŠŸèƒ½æ˜¯ç”±è®¸è®¸å¤šå¤šçš„ä¸åŒå¯¹è±¡åä½œå®Œæˆçš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå„ä¸ªå¯¹è±¡å†…éƒ¨æ˜¯å¦‚ä½•å®ç°è‡ªå·±çš„ï¼Œå¯¹ç³»ç»Ÿè®¾è®¡äººå‘˜æ¥è®²å°±ä¸é‚£ä¹ˆé‡è¦äº†ã€‚</li>
<li>è€Œå„ä¸ªå¯¹è±¡ä¹‹é—´çš„åä½œå…³ç³»åˆ™æˆä¸ºç³»ç»Ÿè®¾è®¡çš„å…³é”®ã€‚å°åˆ°ä¸åŒç±»ä¹‹é—´çš„é€šä¿¡ï¼Œå¤§åˆ°å„æ¨¡å—ä¹‹é—´çš„äº¤äº’ï¼Œåœ¨ç³»ç»Ÿè®¾è®¡ä¹‹åˆéƒ½æ˜¯è¦ç€é‡è€ƒè™‘çš„ï¼Œè¿™ä¹Ÿæ˜¯ç³»ç»Ÿè®¾è®¡çš„ä¸»è¦å·¥ä½œå†…å®¹ã€‚é¢å‘æ¥å£ç¼–ç¨‹å°±æ˜¯æŒ‡æŒ‰ç…§è¿™ç§æ€æƒ³æ¥ç¼–ç¨‹ã€‚</li>
</ul>
<a id="more"></a>

<hr>
<p><strong>å…³äºæ¥å£çš„ç†è§£</strong></p>
<ul>
<li>æ¥å£ä»æ›´æ·±å±‚æ¬¡çš„ç†è§£ï¼Œåº”æ˜¯å®šä¹‰ï¼ˆè§„èŒƒï¼Œçº¦æŸï¼‰ä¸å®ç°ï¼ˆåå®åˆ†ç¦»çš„åŸåˆ™ï¼‰çš„åˆ†ç¦»</li>
<li>æ¥å£çš„æœ¬èº«åæ˜ äº†ç³»ç»Ÿè®¾è®¡äººå‘˜å¯¹ç³»ç»Ÿçš„æŠ½è±¡ç†è§£</li>
<li>æ¥å£åº”æœ‰ä¸¤ç±»ï¼š<ul>
<li>ç¬¬ä¸€ç±»æ˜¯å¯¹ä¸€ä¸ªä¸ªä½“çš„æŠ½è±¡ï¼Œå®ƒå¯å¯¹åº”ä¸ºä¸€ä¸ªæŠ½è±¡ä½“ï¼ˆabstract classï¼‰</li>
<li>ç¬¬äºŒç±»æ˜¯å¯¹ä¸€ä¸ªä¸ªä½“æŸä¸€æ–¹é¢çš„æŠ½è±¡ï¼Œå³å½¢æˆä¸€ä¸ªæŠ½è±¡é¢ï¼ˆinterfaceï¼‰</li>
</ul>
</li>
<li>ä¸€ä¸ªä½“æœ‰å¯èƒ½æœ‰å¤šä¸ªæŠ½è±¡é¢ã€‚æŠ½è±¡ä½“ä¸æŠ½è±¡é¢æ˜¯æœ‰åŒºåˆ«çš„ã€‚</li>
</ul>
<hr>
<p><strong>ä¸‰ä¸ªé¢å‘åŒºåˆ«</strong></p>
<ul>
<li>é¢å‘å¯¹è±¡æ˜¯æŒ‡ï¼Œæˆ‘ä»¬è€ƒè™‘é—®é¢˜æ—¶ï¼Œä»¥å¯¹è±¡ä¸ºå•ä½ï¼Œè€ƒè™‘å®ƒçš„å±æ€§åŠæ–¹æ³•</li>
<li>é¢å‘è¿‡ç¨‹æ˜¯æŒ‡ï¼Œæˆ‘ä»¬è€ƒè™‘é—®é¢˜æ—¶ï¼Œä»¥ä¸€ä¸ªå…·ä½“çš„æµç¨‹ï¼ˆäº‹åŠ¡è¿‡ç¨‹ï¼‰ä¸ºå•ä½ï¼Œè€ƒè™‘å®ƒçš„å®ç° </li>
<li>æ¥å£è®¾è®¡ä¸éæ¥å£è®¾è®¡æ˜¯é’ˆå¯¹å¤ç”¨æŠ€æœ¯è€Œè¨€çš„ï¼Œä¸é¢å‘å¯¹è±¡ï¼ˆè¿‡ç¨‹ï¼‰ä¸æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚æ›´å¤šçš„ä½“ç°å°±æ˜¯å¯¹ç³»ç»Ÿæ•´ä½“çš„æ¶æ„</li>
</ul>
<h3 id="2-ä½¿ç”¨æ³¨è§£å¼€å‘"><a href="#2-ä½¿ç”¨æ³¨è§£å¼€å‘" class="headerlink" title="2. ä½¿ç”¨æ³¨è§£å¼€å‘"></a>2. ä½¿ç”¨æ³¨è§£å¼€å‘</h3><ul>
<li><p>æœ¬è´¨æ˜¯é€šè¿‡åå°„æœºåˆ¶å®ç°</p>
</li>
<li><p>åº•å±‚æ˜¯åŠ¨æ€ä»£ç†</p>
</li>
</ul>
<ol>
<li><p>æ³¨è§£åœ¨æ¥å£ä¸Šå®ç°</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–å…¨éƒ¨ç”¨æˆ·</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Select(&quot;select * from user&quot;)</span></span><br><span class="line"><span class="function">List&lt;User&gt; <span class="title">getUsers</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ç»‘å®šæ¥å£</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç»‘å®šæ¥å£ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.mapper.UserMapper&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">    UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    List&lt;User&gt; users = mapper.getUsers();</span><br><span class="line">    <span class="keyword">for</span> (User user : users) &#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="3-Mybatis-è¯¦ç»†çš„æ‰§è¡Œæµç¨‹"><a href="#3-Mybatis-è¯¦ç»†çš„æ‰§è¡Œæµç¨‹" class="headerlink" title="3. Mybatis è¯¦ç»†çš„æ‰§è¡Œæµç¨‹"></a>3. Mybatis è¯¦ç»†çš„æ‰§è¡Œæµç¨‹</h3><img src="/posts/53af2c28/image-20200731222352481.png" class>



<h3 id="4-CRUD"><a href="#4-CRUD" class="headerlink" title="4. CRUD"></a>4. CRUD</h3><p>å¯ä»¥åœ¨å·¥å…·ç±»åˆ›å»ºçš„æ—¶å€™å®ç°è‡ªåŠ¨æäº¤äº‹åŠ¡</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SqlSession  <span class="title">getSqlSession</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> sqlSessionFactory.openSession(<span class="keyword">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¼–å†™æ¥å£ï¼Œå¢åŠ æ³¨é‡Š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;select * from user&quot;)</span></span><br><span class="line"><span class="function">List&lt;User&gt; <span class="title">getUsers</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹æ³•å­˜åœ¨å¤šä¸ªå‚æ•°ï¼Œæ‰€æœ‰çš„å‚æ•°å‰é¢å¿…é¡»åŠ ä¸Š @Param(&quot;id&quot;)æ³¨è§£</span></span><br><span class="line"><span class="meta">@Select(&quot;select * from user where id = #&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="function">User <span class="title">getUserByID</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> <span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Insert(&quot;insert into user(id,name,pwd) values (#&#123;id&#125;,#&#123;name&#125;,#&#123;password&#125;)&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">addUser</span><span class="params">(User user)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Update(&quot;update user set name=#&#123;name&#125;,pwd=#&#123;password&#125; where id = #&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">updateUser</span><span class="params">(User user)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Delete(&quot;delete from user where id = #&#123;uid&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">deleteUser</span><span class="params">(<span class="meta">@Param(&quot;uid&quot;)</span> <span class="keyword">int</span> id)</span></span>;</span><br></pre></td></tr></table></figure>

<p><strong>å…³äº@Param() æ³¨è§£</strong></p>
<ul>
<li>åŸºæœ¬ç±»å‹çš„å‚æ•°æˆ– String ç±»å‹ï¼Œéœ€è¦åŠ ä¸Š</li>
<li>å¼•ç”¨ç±»å‹ä¸éœ€è¦åŠ </li>
<li>å¦‚æœåªæœ‰ä¸€ä¸ªåŸºæœ¬ç±»å‹çš„è¯ï¼Œå¯ä»¥å¿½ç•¥ï¼Œä½†æ˜¯å»ºè®®åŠ ä¸Š</li>
<li>åœ¨SQLä¸­å¼•ç”¨çš„å°±æ˜¯è¿™é‡Œçš„ @Param() ä¸­è®¾å®šçš„å±æ€§å</li>
</ul>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Mybatis</category>
      </categories>
      <tags>
        <tag>Mybatis</tag>
        <tag>æ³¨è§£</tag>
      </tags>
  </entry>
  <entry>
    <title>09_å¤šå¯¹ä¸€å’Œä¸€å¯¹å¤š</title>
    <url>/posts/4690bb73.html</url>
    <content><![CDATA[<p>ä¸¾ä¸ªä¾‹å­ï¼Œå¤šä¸ªå­¦ç”Ÿå¯¹åº”ä¸€ä¸ªè€å¸ˆ</p>
<ul>
<li>å¯¹äºå­¦ç”Ÿè€Œè¨€ï¼Œå¤šä¸ªå­¦ç”Ÿ<strong>å…³è”</strong>ä¸€ä¸ªè€å¸ˆï¼Œä½†ä¸€ä¸ªå­¦ç”Ÿåªæœ‰ä¸€ä¸ªè€å¸ˆã€‚è¿™æ˜¯<strong>å¤šå¯¹ä¸€</strong></li>
<li>å¯¹äºè€å¸ˆè€Œè¨€ï¼Œå­¦ç”Ÿæ˜¯<strong>é›†åˆ</strong>ï¼Œå³ä¸€ä¸ªè€å¸ˆæœ‰å¾ˆå¤šå­¦ç”Ÿã€‚è¿™æ˜¯<strong>ä¸€å¯¹å¤š</strong></li>
</ul>
<img src="/posts/4690bb73/image-20200728164901431.png" class>



<h3 id="0-ç¯å¢ƒæ­å»º"><a href="#0-ç¯å¢ƒæ­å»º" class="headerlink" title="0. ç¯å¢ƒæ­å»º"></a>0. ç¯å¢ƒæ­å»º</h3><ol>
<li>å¯¼å…¥ Lombok</li>
<li>æ–°å»ºå®ä½“ç±» Teacherï¼ŒStudent</li>
<li>å»ºç«‹ Mapper æ¥å£</li>
<li>å»ºç«‹ Mapper.xml æ–‡ä»¶</li>
<li>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ç»‘å®šæ³¨å†Œ Mapper æ¥å£æˆ–è€…æ–‡ä»¶ï¼ˆæ–¹å¼å¾ˆå¤šï¼Œéšå¿ƒé€‰ï¼‰</li>
<li>æµ‹è¯•æŸ¥è¯¢æ˜¯å¦èƒ½å¤ŸæˆåŠŸ</li>
</ol>
<a id="more"></a>

<p><strong>ä»è¿™ä¸ªæ¨¡å—å¼€å§‹é‡‡ç”¨æ–°çš„é¡¹ç›®ç»“æ„ï¼Œä»¥åå°±æŒ‰ç…§è¿™ä¸ªè§„èŒƒäº†ï¼š</strong></p>
<ul>
<li><p>çˆ¶åŒ…åä¸º ==com.horsen==</p>
</li>
<li><p>å®ä½“ç±»åŒ…åä¸º ==model==</p>
</li>
<li><p>æ¥å£åŒ…åä¸º ==mapper==</p>
</li>
<li><p>å·¥å…·ç±»åŒ…åä¸º ==utils==</p>
</li>
<li><p>å®ç°æ¥å£çš„ xml æ”¾åœ¨ ==resources== ç›®å½•ä¸‹ï¼ŒåŒ…åä¸æ¥å£ä¸€è‡´</p>
</li>
<li><p>é…ç½®æ–‡ä»¶æ”¾åœ¨ ==resources== ç›®å½•ä¸‹</p>
</li>
<li><p>æµ‹è¯•ç±»åŒ…åä¹Ÿä¸æ¥å£ä¸€è‡´</p>
</li>
</ul>
<img src="/posts/4690bb73/image-20200728234043828.png" class>



<h3 id="1-å¤šå¯¹ä¸€"><a href="#1-å¤šå¯¹ä¸€" class="headerlink" title="1. å¤šå¯¹ä¸€"></a>1. å¤šå¯¹ä¸€</h3><h4 id="1-1-æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†ï¼ˆç›®çš„æ˜¯å®Œå–„-sql-è¯­å¥ï¼‰"><a href="#1-1-æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†ï¼ˆç›®çš„æ˜¯å®Œå–„-sql-è¯­å¥ï¼‰" class="headerlink" title="1.1 æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†ï¼ˆç›®çš„æ˜¯å®Œå–„ sql è¯­å¥ï¼‰"></a>1.1 æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†ï¼ˆç›®çš„æ˜¯å®Œå–„ sql è¯­å¥ï¼‰</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment"> æ€è·¯:</span></span><br><span class="line"><span class="comment"> 1. æŸ¥è¯¢æ‰€æœ‰çš„å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line"><span class="comment"> 2. æ ¹æ®æŸ¥è¯¢å‡ºæ¥çš„å­¦ç”Ÿçš„tid, å¯»æ‰¾å¯¹åº”çš„è€å¸ˆ</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudent&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;StudentTeacher&quot;</span>&gt;</span></span><br><span class="line">    select *</span><br><span class="line">    from student</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;StudentTeacher&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">     å¤æ‚çš„å±æ€§å°±ä¸èƒ½ç”¨&lt;result&gt;äº†</span></span><br><span class="line"><span class="comment">     éœ€è¦å•ç‹¬å¤„ç† ä½¿ç”¨</span></span><br><span class="line"><span class="comment">     å¯¹è±¡: association</span></span><br><span class="line"><span class="comment">     é›†åˆ: collection</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;teacher&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tid&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Teacher&quot;</span> <span class="attr">select</span>=<span class="string">&quot;getTeacher&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getTeacher&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Teacher&quot;</span>&gt;</span></span><br><span class="line">    select *</span><br><span class="line">    from teacher</span><br><span class="line">    where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="1-2-æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†-ï¼ˆç›®çš„æ˜¯å®Œå–„æŸ¥è¯¢ç»“æœï¼‰"><a href="#1-2-æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†-ï¼ˆç›®çš„æ˜¯å®Œå–„æŸ¥è¯¢ç»“æœï¼‰" class="headerlink" title="1.2 æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç† ï¼ˆç›®çš„æ˜¯å®Œå–„æŸ¥è¯¢ç»“æœï¼‰"></a>1.2 æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç† ï¼ˆç›®çš„æ˜¯å®Œå–„æŸ¥è¯¢ç»“æœï¼‰</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudent2&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;StudentTeacher2&quot;</span>&gt;</span></span><br><span class="line">    select s.id sid, s.name sname, t.name tname</span><br><span class="line">    from student s,</span><br><span class="line">         teacher t</span><br><span class="line">    where s.tid = t.id</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;StudentTeacher2&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;teacher&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Teacher&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tname&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="2-ä¸€å¯¹å¤š"><a href="#2-ä¸€å¯¹å¤š" class="headerlink" title="2. ä¸€å¯¹å¤š"></a>2. ä¸€å¯¹å¤š</h3><p>ä¿®æ”¹å®ä½“ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> tid;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">// ä¸€ä¸ªè€å¸ˆæ‹¥æœ‰å¤šä¸ªå­¦ç”Ÿ</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Student&gt; students;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="2-1-æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†"><a href="#2-1-æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†" class="headerlink" title="2.1 æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†"></a>2.1 æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">&lt;select id=&quot;getTeacher&quot; resultMap=&quot;TeacherStudent&quot;&gt;</span><br><span class="line">    <span class="keyword">select</span> *</span><br><span class="line">    <span class="keyword">from</span> teacher</span><br><span class="line">    <span class="keyword">where</span> <span class="keyword">id</span> = <span class="comment">#&#123;tid&#125;</span></span><br><span class="line">&lt;/<span class="keyword">select</span>&gt;</span><br><span class="line">&lt;resultMap <span class="keyword">id</span>=<span class="string">&quot;TeacherStudent&quot;</span> <span class="keyword">type</span>=<span class="string">&quot;Teacher&quot;</span>&gt;</span><br><span class="line">    &lt;!<span class="comment">--</span></span><br><span class="line">     æ³¨æ„:</span><br><span class="line">     è¿™é‡Œéœ€è¦å†™javaType=<span class="string">&quot;ArrayList&quot;</span>, è€Œä¸‹é¢çš„æ–¹æ³•ä¸­ä¸éœ€è¦</span><br><span class="line">     å› ä¸ºè¿™ä¸ªæ–¹æ³•æŸ¥è¯¢å‡ºæ¥çš„æ˜¯é›†åˆ, è€Œä¸‹é¢çš„æ–¹æ³•æŸ¥è¯¢å‡ºæ¥å†…å®¹å·²ç»å’Œ<span class="keyword">sql</span>è¯­å¥å¯¹åº”äº†</span><br><span class="line">     å¯ä»¥ç†è§£ä¸º, æˆ‘ä»¬éœ€è¦é€šè¿‡resultMapæ¥è¡¥å…¨<span class="keyword">sql</span>è¯­å¥</span><br><span class="line">    <span class="comment">--&gt;</span></span><br><span class="line">    &lt;<span class="keyword">result</span> property=<span class="string">&quot;id&quot;</span> <span class="keyword">column</span>=<span class="string">&quot;id&quot;</span>/&gt;</span><br><span class="line">    &lt;collection property=<span class="string">&quot;students&quot;</span> javaType=<span class="string">&quot;ArrayList&quot;</span> ofType=<span class="string">&quot;Student&quot;</span> <span class="keyword">select</span>=<span class="string">&quot;getStudentByTeacherId&quot;</span> <span class="keyword">column</span>=<span class="string">&quot;id&quot;</span>/&gt;</span><br><span class="line">&lt;/resultMap&gt;</span><br><span class="line">&lt;<span class="keyword">select</span> <span class="keyword">id</span>=<span class="string">&quot;getStudentByTeacherId&quot;</span> resultType=<span class="string">&quot;Student&quot;</span>&gt;</span><br><span class="line">    <span class="keyword">select</span> *</span><br><span class="line">    <span class="keyword">from</span> student s</span><br><span class="line">    <span class="keyword">where</span> tid = <span class="comment">#&#123;tid&#125;</span></span><br><span class="line">&lt;/<span class="keyword">select</span>&gt;</span><br></pre></td></tr></table></figure>



<h4 id="2-2-æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†"><a href="#2-2-æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†" class="headerlink" title="2.2 æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†"></a>2.2 æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getTeacher2&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;TeacherStudent2&quot;</span>&gt;</span></span><br><span class="line">    select t.id tid, t.name tname, s.id sid, s.name sname</span><br><span class="line">    from student s,</span><br><span class="line">         teacher t</span><br><span class="line">    where s.tid = t.id</span><br><span class="line">      and t.id = #&#123;tid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;TeacherStudent2&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Teacher&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tid&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tname&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">     å› ä¸ºå­¦ç”Ÿæ˜¯ä¸€ä¸ªé›†åˆ List&lt;Student&gt;</span></span><br><span class="line"><span class="comment">     æ‰€ä»¥ä¸èƒ½ç”¨associationäº†</span></span><br><span class="line"><span class="comment">     æ”¹ç”¨collection</span></span><br><span class="line"><span class="comment">     è€ŒjavaType=&quot;&quot;æŒ‡å®šä¸€ä¸ªå…·ä½“çš„ç±»å‹</span></span><br><span class="line"><span class="comment">     å¯¹äºé›†åˆList é‡‡ç”¨ofType=&quot;&quot;è·å–å…¶ä¸­çš„æ³›å‹ä¿¡æ¯</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;students&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;tid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tid&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="4-å°ç»“"><a href="#4-å°ç»“" class="headerlink" title="4. å°ç»“"></a>4. å°ç»“</h3><ul>
<li><p><strong>å¤šå¯¹ä¸€</strong>ï¼šå…³è”<code>&lt;association&gt;</code> </p>
</li>
<li><p><strong>ä¸€å¯¹å¤š</strong>ï¼šé›†åˆ<code>&lt;collection&gt;</code></p>
</li>
<li><p><strong>javaType</strong>ï¼šç”¨æ¥æŒ‡å®šå®ä½“ç±»ä¸­å±æ€§çš„ç±»å‹</p>
<p><code>private Teacher teacher;</code></p>
</li>
<li><p><strong>ofType</strong>ï¼šç”¨æ¥æŒ‡å®šæ˜ å°„åˆ° List æˆ–è€…é›†åˆä¸­çš„pojoç±»å‹ï¼Œå³æ³›å‹ä¸­çš„çº¦æŸç±»å‹</p>
<p><code>private List&lt;Student&gt; students;</code></p>
</li>
<li><p>æ³¨æ„ç‚¹ï¼š</p>
<ul>
<li>ä¿è¯ SQL çš„å¯è¯»æ€§ï¼Œå°½é‡ä¿è¯é€šä¿—æ˜“æ‡‚</li>
<li>æ³¨æ„ä¸€å¯¹å¤šå’Œå¤šå¯¹ä¸€ä¸­ï¼Œå±æ€§åå’Œå­—æ®µçš„é—®é¢˜</li>
<li>å¦‚æœé—®é¢˜ä¸å¥½æ’æŸ¥é”™è¯¯ï¼Œå¯ä»¥ä½¿ç”¨æ—¥å¿— ï¼Œ å»ºè®®ä½¿ç”¨ Log4j</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Mybatis</category>
      </categories>
      <tags>
        <tag>Mybatis</tag>
        <tag>ç¯å¢ƒæ­å»º</tag>
        <tag>ResultMap</tag>
      </tags>
  </entry>
  <entry>
    <title>10_åŠ¨æ€ SQL</title>
    <url>/posts/91a89dbd.html</url>
    <content><![CDATA[<p><strong>åŠ¨æ€ SQL å°±æ˜¯æŒ‡æ ¹æ®ä¸åŒçš„æ¡ä»¶ç”Ÿæˆä¸åŒçš„SQLè¯­å¥</strong></p>
<p>å®˜æ–¹æ˜¯è¿™æ ·ä»‹ç»çš„ï¼š</p>
<blockquote>
<p>åŠ¨æ€ SQL æ˜¯ MyBatis çš„å¼ºå¤§ç‰¹æ€§ä¹‹ä¸€ã€‚å¦‚æœä½ ä½¿ç”¨è¿‡ JDBC æˆ–å…¶å®ƒç±»ä¼¼çš„æ¡†æ¶ï¼Œä½ åº”è¯¥èƒ½ç†è§£æ ¹æ®ä¸åŒæ¡ä»¶æ‹¼æ¥ SQL è¯­å¥æœ‰å¤šç—›è‹¦ï¼Œä¾‹å¦‚æ‹¼æ¥æ—¶è¦ç¡®ä¿ä¸èƒ½å¿˜è®°æ·»åŠ å¿…è¦çš„ç©ºæ ¼ï¼Œè¿˜è¦æ³¨æ„å»æ‰åˆ—è¡¨æœ€åä¸€ä¸ªåˆ—åçš„é€—å·ã€‚åˆ©ç”¨åŠ¨æ€ SQLï¼Œå¯ä»¥å½»åº•æ‘†è„±è¿™ç§ç—›è‹¦ã€‚</p>
<p>åŠ¨æ€ SQL å…ƒç´ å’Œ JSTL æˆ–åŸºäºç±»ä¼¼ XML çš„æ–‡æœ¬å¤„ç†å™¨ç›¸ä¼¼ã€‚åœ¨ MyBatis ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œæœ‰å¾ˆå¤šå…ƒç´ éœ€è¦èŠ±æ—¶é—´äº†è§£ã€‚MyBatis 3 å¤§å¤§ç²¾ç®€äº†å…ƒç´ ç§ç±»ï¼Œç°åœ¨åªéœ€å­¦ä¹ åŸæ¥ä¸€åŠçš„å…ƒç´ ä¾¿å¯ã€‚MyBatis é‡‡ç”¨åŠŸèƒ½å¼ºå¤§çš„åŸºäº OGNL çš„è¡¨è¾¾å¼æ¥æ·˜æ±°å…¶å®ƒå¤§éƒ¨åˆ†å…ƒç´ ã€‚</p>
</blockquote>
<a id="more"></a>



<h3 id="0-ç¯å¢ƒæ­å»º"><a href="#0-ç¯å¢ƒæ­å»º" class="headerlink" title="0. ç¯å¢ƒæ­å»º"></a>0. ç¯å¢ƒæ­å»º</h3><ol>
<li><p>å‡†å¤‡æ•°æ®åº“è¡¨</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`blog`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;åšå®¢id&#x27;</span>,</span><br><span class="line">  <span class="string">`title`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;åšå®¢æ ‡é¢˜&#x27;</span>,</span><br><span class="line">  <span class="string">`author`</span> <span class="built_in">varchar</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;åšå®¢ä½œè€…&#x27;</span>,</span><br><span class="line">  <span class="string">`create_time`</span> datetime <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">  <span class="string">`views`</span> <span class="built_in">int</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;æµè§ˆé‡&#x27;</span></span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®ä½“ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Blog</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">    <span class="keyword">private</span> String author;</span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> views;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ©ç”¨ Java ä»£ç æ’å…¥æ•°æ®</p>
<p>3.1 æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ’å…¥æ•°æ®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> blog åšå®¢</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">addBlog</span><span class="params">(Blog blog)</span></span>;</span><br></pre></td></tr></table></figure>

<p>3.2 Mapper.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addBlog&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">    insert into blog (id, title, author, create_time, views)</span><br><span class="line">    values (#&#123;id&#125;, #&#123;title&#125;, #&#123;author&#125;, #&#123;createTime&#125;, #&#123;views&#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>3.3 æµ‹è¯•ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addBlog</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">    BlogMapper mapper = sqlSession.getMapper(BlogMapper.class);</span><br><span class="line">    Blog blog = <span class="keyword">new</span> Blog();</span><br><span class="line">    </span><br><span class="line">    blog.setId(IdUtils.getId());</span><br><span class="line">    blog.setTitle(<span class="string">&quot;Mybatiså¦‚æ­¤ç®€å•&quot;</span>);</span><br><span class="line">    blog.setAuthor(<span class="string">&quot;ç‹‚ç¥è¯´&quot;</span>);</span><br><span class="line">    blog.setCreateTime(<span class="keyword">new</span> Date());</span><br><span class="line">    blog.setViews(<span class="number">9999</span>);</span><br><span class="line">    mapper.addBlog(blog);</span><br><span class="line">    </span><br><span class="line">    blog.setId(IdUtils.getId());</span><br><span class="line">    blog.setTitle(<span class="string">&quot;Javaå¦‚æ­¤ç®€å•&quot;</span>);</span><br><span class="line">    mapper.addBlog(blog);</span><br><span class="line">    </span><br><span class="line">    blog.setId(IdUtils.getId());</span><br><span class="line">    blog.setTitle(<span class="string">&quot;Springå¦‚æ­¤ç®€å•&quot;</span>);</span><br><span class="line">    mapper.addBlog(blog);</span><br><span class="line">    </span><br><span class="line">    blog.setId(IdUtils.getId());</span><br><span class="line">    blog.setTitle(<span class="string">&quot;å¾®æœåŠ¡å¦‚æ­¤ç®€å•&quot;</span>);</span><br><span class="line">    mapper.addBlog(blog);</span><br><span class="line">    </span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="1-if"><a href="#1-if" class="headerlink" title="1. if"></a>1. if</h3><p><strong>éœ€æ±‚</strong>ï¼šå½“æ²¡æœ‰ä»»ä½•å‚æ•°ä¼ å…¥çš„æ—¶å€™ï¼ŒæŸ¥è¯¢æ‰€æœ‰åšå®¢ï¼Œå½“æœ‰æ ‡é¢˜æˆ–ä½œè€…ä½œä¸ºå‚æ•°ä¼ å…¥çš„æ—¶å€™ï¼Œå°±æ ¹æ®ä¼ å…¥çš„å‚æ•°æŸ¥æ‰¾ã€‚</p>
<p>ä¼ ç»Ÿçš„åšæ³•æ˜¯è®¾è®¡å¤šä¸ªæŸ¥è¯¢ç±»ï¼Œæ¯ä¸€ä¸ªç±»çš„å‚æ•°å¯¹åº”ä¸åŒçš„æŸ¥è¯¢æ¡ä»¶ã€‚</p>
<p>ä½†æ˜¯ï¼Œä½¿ç”¨<code>&lt;if&gt;</code>æ ‡ç­¾å¯ä»¥çœå»é‡è½½æ–¹æ³•ï¼Œç”¨ä¸€ä¸ªæ–¹æ³•è§£å†³é—®é¢˜ã€‚</p>
<ol>
<li><p>æ¥å£</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢åšå®¢</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> map</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">List&lt;Blog&gt; <span class="title">queryBlogIf</span><span class="params">(Map map)</span></span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Mapper.xml</p>
 <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBlogIf&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">    select *</span><br><span class="line">    from blog</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">            title = #&#123;title&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">            and author = #&#123;author&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p> <em>æ³¨æ„ï¼šè¿™é‡Œè¿˜ç”¨äº†ä¸€ä¸ª<code>&lt;where&gt;</code>æ ‡ç­¾</em></p>
<blockquote>
<p><em>where</em> å…ƒç´ åªä¼šåœ¨å­å…ƒç´ è¿”å›ä»»ä½•å†…å®¹çš„æƒ…å†µä¸‹æ‰æ’å…¥ â€œWHEREâ€ å­å¥ã€‚è€Œä¸”ï¼Œè‹¥å­å¥çš„å¼€å¤´ä¸º â€œANDâ€ æˆ– â€œORâ€ï¼Œ<em>where</em> å…ƒç´ ä¹Ÿä¼šå°†å®ƒä»¬å»é™¤ã€‚</p>
</blockquote>
</li>
<li><p>æµ‹è¯•ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">queryBlogIf</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">    BlogMapper mapper = sqlSession.getMapper(BlogMapper.class);</span><br><span class="line">    HashMap map = <span class="keyword">new</span> HashMap();</span><br><span class="line">    <span class="comment">//map.put(&quot;title&quot;,&quot;Javaå¦‚æ­¤ç®€å•&quot;);</span></span><br><span class="line">    map.put(<span class="string">&quot;author&quot;</span>,<span class="string">&quot;ç‹‚ç¥è¯´&quot;</span>);</span><br><span class="line">    List&lt;Blog&gt; blogs = mapper.queryBlogIf(map);</span><br><span class="line">    <span class="keyword">for</span> (Blog blog : blogs) &#123;</span><br><span class="line">        System.out.println(blog);</span><br><span class="line">    &#125;</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="2-choose-when-otherwise"><a href="#2-choose-when-otherwise" class="headerlink" title="2. choose, when, otherwise"></a>2. choose, when, otherwise</h3><blockquote>
<p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¸æƒ³ä½¿ç”¨æ‰€æœ‰çš„æ¡ä»¶ï¼Œè€Œåªæ˜¯æƒ³ä»å¤šä¸ªæ¡ä»¶ä¸­é€‰æ‹©ä¸€ä¸ªä½¿ç”¨ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼ŒMyBatis æä¾›äº† choose å…ƒç´ ï¼Œå®ƒæœ‰ç‚¹åƒ Java ä¸­çš„ switch è¯­å¥ã€‚</p>
</blockquote>
<p>å¯ä»¥è¿™æ ·ç†è§£ï¼š==choose== ç›¸å½“äº <code>swich</code>ï¼›==when== ç›¸å½“äº<code> case</code>ï¼›==otherwise== ç›¸å½“äº <code>default</code>ã€‚</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBlogChoose&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">    select *</span><br><span class="line">    from blog</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">                title = #&#123;title&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">                author = #&#123;author&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">otherwise</span>&gt;</span></span><br><span class="line">                views = #&#123;views&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="3-trim-where-set"><a href="#3-trim-where-set" class="headerlink" title="3. trim, where, set"></a>3. trim, where, set</h3><p>å’Œä¹‹å‰çš„éœ€æ±‚ç±»ä¼¼ï¼Œä¸ºäº†åœ¨ä¿è¯ä¿®æ”¹æ•°æ®æ—¶ï¼Œæ»¡è¶³å„ç§å„æ ·çš„ä¼ å…¥çš„å‚æ•°ï¼ŒåŠ¨æ€çš„ä¿®æ”¹æŸä¸€è¡Œæ•°æ®çš„å¯¹åº”å­—æ®µï¼Œå°±å¯ä»¥ä½¿ç”¨<code>&lt;set&gt;</code>æ ‡ç­¾ï¼Œé¿å…é‡è½½å¤šä¸ªä¸åŒå‚æ•°çš„æ’å…¥æ–¹æ³•ã€‚ç±»ä¼¼<code>&lt;where&gt;</code>ï¼Œ<code>&lt;set&gt;</code>ä¼šåŠ¨æ€åœ°åœ¨è¡Œé¦–æ’å…¥ SET å…³é”®å­—ï¼Œå¹¶ä¼šåˆ æ‰é¢å¤–çš„é€—å·ã€‚</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateBlog&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">    update blog</span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">            title = #&#123;title&#125;,</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">            author = #&#123;author&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    where id =#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="4-SQL-ç‰‡æ®µ"><a href="#4-SQL-ç‰‡æ®µ" class="headerlink" title="4. SQL ç‰‡æ®µ"></a>4. SQL ç‰‡æ®µ</h3><p>æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå°†ä¸€äº›åŠŸèƒ½çš„éƒ¨åˆ†æŠ½å–å‡ºæ¥ï¼Œæ–¹ä¾¿å¤ç”¨</p>
<ol>
<li><p>ä½¿ç”¨<code>&lt;sql&gt;</code>æ ‡ç­¾æŠ½å–å…¬å…±çš„éƒ¨åˆ†</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;if-title-author&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">        title = #&#123;title&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">        and author = #&#123;author&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨éœ€è¦ä½¿ç”¨çš„åœ°æ–¹ä½¿ç”¨<code>&lt;include&gt;</code>æ ‡ç­¾å¼•ç”¨å³å¯</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBlogIF&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">    select * from mybatis.blog</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;if-title-author&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<p><strong>æ³¨æ„ï¼š</strong></p>
<ul>
<li>æœ€å¥½åŸºäºå•è¡¨æ¥å®šä¹‰ SQL ç‰‡æ®µ</li>
<li>ä¸è¦å­˜åœ¨whereæ ‡ç­¾</li>
</ul>
<h3 id="5-foreach"><a href="#5-foreach" class="headerlink" title="5. foreach"></a>5. foreach</h3><p>åŠ¨æ€ SQL çš„å¦ä¸€ä¸ªå¸¸è§ä½¿ç”¨åœºæ™¯æ˜¯å¯¹é›†åˆè¿›è¡Œéå†ï¼ˆå°¤å…¶æ˜¯åœ¨æ„å»º IN æ¡ä»¶è¯­å¥çš„æ—¶å€™ï¼‰ã€‚</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> blog</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">id</span> <span class="keyword">in</span> (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>ä¸ºäº†æ–¹ä¾¿ä¸¾ä¾‹ï¼Œä½¿ç”¨è¿™æ¡æœ‰åŒæ ·çš„æ•ˆæœ sql è¯­å¥ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> * </span><br><span class="line"><span class="keyword">from</span> blog</span><br><span class="line"><span class="keyword">where</span> <span class="number">1</span>=<span class="number">1</span> <span class="keyword">and</span> (<span class="keyword">id</span>=<span class="number">1</span> <span class="keyword">or</span> <span class="keyword">id</span> = <span class="number">2</span> <span class="keyword">or</span> <span class="keyword">id</span>=<span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<ol>
<li><p>Mapper.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBlogForeach&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">    select * from blog</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;ids&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">open</span>=<span class="string">&quot;and (&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;or&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span></span><br><span class="line">            id = #&#123;id&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æµ‹è¯•ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">queryBlogForeach</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">    BlogMapper mapper = sqlSession.getMapper(BlogMapper.class);</span><br><span class="line">    HashMap map = <span class="keyword">new</span> HashMap();</span><br><span class="line">    ArrayList&lt;String&gt; ids = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    ids.add(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">    ids.add(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">    ids.add(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;ids&quot;</span>,ids);</span><br><span class="line">    List&lt;Blog&gt; blogs = mapper.queryBlogForeach(map);</span><br><span class="line">    <span class="keyword">for</span> (Blog blog : blogs) &#123;</span><br><span class="line">        System.out.println(blog);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="6-æ€»ç»“"><a href="#6-æ€»ç»“" class="headerlink" title="6. æ€»ç»“"></a>6. æ€»ç»“</h3><ul>
<li>æ‰€è°“åŠ¨æ€ SQLï¼Œæœ¬è´¨è¿˜æ˜¯ SQL è¯­å¥ï¼Œ çŸ¥è¯†æˆ‘ä»¬å¯ä»¥åœ¨ SQL å±‚é¢å»æ‰§è¡Œä¸€ä¸ªé€»è¾‘ä»£ç ã€‚</li>
<li>åŠ¨æ€ SQL å°±æ˜¯åœ¨æ‹¼æ¥ SQL è¯­å¥ï¼Œåªè¦ä¿è¯ SQL çš„æ­£ç¡®æ€§ï¼ŒæŒ‰ç…§ SQL çš„æ ¼å¼å»æ’åˆ—ç»„åˆå°±å¯ä»¥äº†ã€‚</li>
<li>å»ºè®®å…ˆå†™å‡ºå®Œæ•´çš„ SQLï¼Œå†å¯¹åº”ç€ä¿®æ”¹ä¸ºåŠ¨æ€ SQL å®ç°é€šç”¨ã€‚</li>
</ul>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Mybatis</category>
      </categories>
      <tags>
        <tag>CRUD</tag>
        <tag>Mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title>01_Spring æ¦‚è¿°</title>
    <url>/posts/f403b3d5.html</url>
    <content><![CDATA[<h3 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1. ç®€ä»‹"></a>1. ç®€ä»‹</h3><p>Springï¼šæ˜¥å¤© â€”&gt; ç»™è½¯ä»¶è¡Œä¸šå¸¦æ¥äº†æ˜¥å¤©</p>
<p>2002å¹´ï¼ŒRod Jahnson é¦–æ¬¡æ¨å‡ºäº† Spring æ¡†æ¶é›å½¢ interface21 æ¡†æ¶ã€‚</p>
<p>2004å¹´3æœˆ24æ—¥ï¼ŒSpring æ¡†æ¶ä»¥ interface21 æ¡†æ¶ä¸ºåŸºç¡€ï¼Œç»è¿‡é‡æ–°è®¾è®¡ï¼Œå‘å¸ƒäº†1.0æ­£å¼ç‰ˆã€‚</p>
<p>å¾ˆéš¾æƒ³è±¡  Rod Johnson çš„å­¦å†ï¼Œä»–æ˜¯æ‚‰å°¼å¤§å­¦çš„åšå£«ï¼Œç„¶è€Œä»–çš„ä¸“ä¸šä¸æ˜¯è®¡ç®—æœºï¼Œè€Œæ˜¯éŸ³ä¹å­¦ã€‚</p>
<p><strong>Spring ç†å¿µï¼šä½¿ç°æœ‰æŠ€æœ¯æ›´åŠ å®ç”¨ã€‚æœ¬èº«å°±æ˜¯ä¸€ä¸ªå¤§æ‚çƒ©ï¼Œæ•´åˆç°æœ‰çš„æ¡†æ¶æŠ€æœ¯</strong></p>
<blockquote>
<p>å®˜ç½‘ï¼š<a href="http://spring.io/">http://spring.io/</a></p>
<p>å®˜æ–¹ä¸‹è½½åœ°å€ï¼š<a href="https://repo.spring.io/libs-release-local/org/springframework/spring/">https://repo.spring.io/libs-release-local/org/springframework/spring/</a></p>
<p>GitHubï¼š<a href="https://github.com/spring-projects">https://github.com/spring-projects</a></p>
</blockquote>
<a id="more"></a>

<hr>
<p><strong>éœ€è¦çš„ maven é…ç½®ï¼š</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-jdbc --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="2-ä¼˜ç‚¹"><a href="#2-ä¼˜ç‚¹" class="headerlink" title="2. ä¼˜ç‚¹"></a>2. ä¼˜ç‚¹</h3><ul>
<li>Spring æ˜¯ä¸€ä¸ªå¼€æºå…è´¹çš„æ¡†æ¶ï¼ˆå®¹å™¨ï¼‰</li>
<li>Spring æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ã€éä¾µå…¥å¼çš„æ¡†æ¶</li>
<li><strong>æ§åˆ¶åè½¬ï¼ˆIoCï¼‰ã€é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰</strong></li>
<li>æ”¯æŒäº‹åŠ¡çš„å¤„ç†ï¼Œæ”¯æŒå¯¹æ¡†æ¶æ•´åˆ</li>
</ul>
<blockquote>
<p> <strong>æ€»ç»“ï¼šSpring æ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ§åˆ¶åè½¬ï¼ˆIoCï¼‰å’Œé¢å‘åˆ‡é¢ï¼ˆAOPï¼‰çš„å®¹å™¨ï¼ˆæ¡†æ¶ï¼‰</strong></p>
</blockquote>
<h3 id="3-ç»„æˆ"><a href="#3-ç»„æˆ" class="headerlink" title="3. ç»„æˆ"></a>3. ç»„æˆ</h3><p>Spring æ¡†æ¶æ˜¯ä¸€ä¸ªåˆ†å±‚æ¶æ„ï¼Œç”± 7 ä¸ªå®šä¹‰è‰¯å¥½çš„æ¨¡å—ç»„æˆã€‚Spring æ¨¡å—æ„å»ºåœ¨æ ¸å¿ƒå®¹å™¨ä¹‹ä¸Šï¼Œæ ¸å¿ƒå®¹å™¨å®šä¹‰äº†åˆ›å»ºã€é…ç½®å’Œç®¡ç† bean çš„æ–¹å¼ </p>
<img src="/posts/f403b3d5/spring_7_parts.png" class>

<p>ç»„æˆ Spring æ¡†æ¶çš„æ¯ä¸ªæ¨¡å—ï¼ˆæˆ–ç»„ä»¶ï¼‰éƒ½å¯ä»¥å•ç‹¬å­˜åœ¨ï¼Œæˆ–è€…ä¸å…¶ä»–ä¸€ä¸ªæˆ–å¤šä¸ªæ¨¡å—è”åˆå®ç°ã€‚æ¯ä¸ªæ¨¡å—çš„åŠŸèƒ½å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>æ ¸å¿ƒå®¹å™¨</strong>ï¼šæ ¸å¿ƒå®¹å™¨æä¾› Spring æ¡†æ¶çš„åŸºæœ¬åŠŸèƒ½ã€‚æ ¸å¿ƒå®¹å™¨çš„ä¸»è¦ç»„ä»¶æ˜¯ BeanFactoryï¼Œå®ƒæ˜¯å·¥å‚æ¨¡å¼çš„å®ç°ã€‚BeanFactory ä½¿ç”¨æ§åˆ¶åè½¬ï¼ˆIoCï¼‰æ¨¡å¼å°†åº”ç”¨ç¨‹åºçš„é…ç½®å’Œä¾èµ–æ€§è§„èŒƒä¸å®é™…çš„åº”ç”¨ç¨‹åºä»£ç åˆ†å¼€ã€‚</li>
<li><strong>Spring ä¸Šä¸‹æ–‡</strong>ï¼šSpring ä¸Šä¸‹æ–‡æ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå‘ Spring æ¡†æ¶æä¾›ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚Spring ä¸Šä¸‹æ–‡åŒ…æ‹¬ä¼ä¸šæœåŠ¡ï¼Œä¾‹å¦‚ JNDIã€EJBã€ç”µå­é‚®ä»¶ã€å›½é™…åŒ–ã€æ ¡éªŒå’Œè°ƒåº¦åŠŸèƒ½ã€‚</li>
<li><strong>Spring AOP</strong> ï¼šé€šè¿‡é…ç½®ç®¡ç†ç‰¹æ€§ï¼ŒSpring AOP æ¨¡å—ç›´æ¥å°†é¢å‘åˆ‡é¢çš„ç¼–ç¨‹åŠŸèƒ½ , é›†æˆåˆ°äº† Spring æ¡†æ¶ä¸­ã€‚æ‰€ä»¥ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°ä½¿ Spring æ¡†æ¶ç®¡ç†ä»»ä½•æ”¯æŒ AOPçš„å¯¹è±¡ã€‚Spring AOP æ¨¡å—ä¸ºåŸºäº Spring çš„åº”ç”¨ç¨‹åºä¸­çš„å¯¹è±¡æä¾›äº†äº‹åŠ¡ç®¡ç†æœåŠ¡ã€‚é€šè¿‡ä½¿ç”¨ Spring AOPï¼Œä¸ç”¨ä¾èµ–ç»„ä»¶ï¼Œå°±å¯ä»¥å°†å£°æ˜æ€§äº‹åŠ¡ç®¡ç†é›†æˆåˆ°åº”ç”¨ç¨‹åºä¸­ã€‚</li>
<li><strong>Spring DAO</strong>ï¼šJDBC DAO æŠ½è±¡å±‚æä¾›äº†æœ‰æ„ä¹‰çš„å¼‚å¸¸å±‚æ¬¡ç»“æ„ï¼Œå¯ç”¨è¯¥ç»“æ„æ¥ç®¡ç†å¼‚å¸¸å¤„ç†å’Œä¸åŒæ•°æ®åº“ä¾›åº”å•†æŠ›å‡ºçš„é”™è¯¯æ¶ˆæ¯ã€‚å¼‚å¸¸å±‚æ¬¡ç»“æ„ç®€åŒ–äº†é”™è¯¯å¤„ç†ï¼Œå¹¶ä¸”æå¤§åœ°é™ä½äº†éœ€è¦ç¼–å†™çš„å¼‚å¸¸ä»£ç æ•°é‡ï¼ˆä¾‹å¦‚æ‰“å¼€å’Œå…³é—­è¿æ¥ï¼‰ã€‚Spring DAO çš„é¢å‘ JDBC çš„å¼‚å¸¸éµä»é€šç”¨çš„ DAO å¼‚å¸¸å±‚æ¬¡ç»“æ„ã€‚</li>
<li><strong>Spring ORM</strong>ï¼šSpring æ¡†æ¶æ’å…¥äº†è‹¥å¹²ä¸ª ORM æ¡†æ¶ï¼Œä»è€Œæä¾›äº† ORM çš„å¯¹è±¡å…³ç³»å·¥å…·ï¼Œå…¶ä¸­åŒ…æ‹¬ JDOã€Hibernate å’Œ iBatis SQL Mapã€‚æ‰€æœ‰è¿™äº›éƒ½éµä» Spring çš„é€šç”¨äº‹åŠ¡å’Œ DAO å¼‚å¸¸å±‚æ¬¡ç»“æ„ã€‚</li>
<li><strong>Spring  Web  æ¨¡å—</strong>ï¼šWeb ä¸Šä¸‹æ–‡æ¨¡å—å»ºç«‹åœ¨åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡æ¨¡å—ä¹‹ä¸Šï¼Œä¸ºåŸºäº Web çš„åº”ç”¨ç¨‹åºæä¾›äº†ä¸Šä¸‹æ–‡ã€‚æ‰€ä»¥ï¼ŒSpring æ¡†æ¶æ”¯æŒä¸ Jakarta Struts çš„é›†æˆã€‚Web æ¨¡å—è¿˜ç®€åŒ–äº†å¤„ç†å¤šéƒ¨åˆ†è¯·æ±‚ä»¥åŠå°†è¯·æ±‚å‚æ•°ç»‘å®šåˆ°åŸŸå¯¹è±¡çš„å·¥ä½œã€‚</li>
<li><strong>Spring MVC æ¡†æ¶</strong>ï¼šMVC æ¡†æ¶æ˜¯ä¸€ä¸ªå…¨åŠŸèƒ½çš„æ„å»º Web åº”ç”¨ç¨‹åºçš„ MVC å®ç°ã€‚é€šè¿‡ç­–ç•¥æ¥å£ï¼ŒMVC æ¡†æ¶å˜æˆä¸ºé«˜åº¦å¯é…ç½®çš„ï¼ŒMVC å®¹çº³äº†å¤§é‡è§†å›¾æŠ€æœ¯ï¼Œå…¶ä¸­åŒ…æ‹¬ JSPã€Velocityã€Tilesã€iText å’Œ POIã€‚</li>
</ul>
<h3 id="4-æ‹“å±•"><a href="#4-æ‹“å±•" class="headerlink" title="4. æ‹“å±•"></a>4. æ‹“å±•</h3><p><strong>Spring Boot ä¸ Spring Cloud</strong></p>
<ul>
<li>Spring Boot æ˜¯ Spring çš„ä¸€å¥—å¿«é€Ÿé…ç½®è„šæ‰‹æ¶ï¼Œå¯ä»¥åŸºäº Spring Boot å¿«é€Ÿå¼€å‘å•ä¸ªå¾®æœåŠ¡</li>
<li>Spring Cloud æ˜¯åŸºäºSpring Boot å®ç°çš„</li>
<li>Spring Boot ä¸“æ³¨äºå¿«é€Ÿã€æ–¹ä¾¿é›†æˆçš„å•ä¸ªå¾®æœåŠ¡ä¸ªä½“ï¼ŒSpring Cloud å…³æ³¨å…¨å±€çš„æœåŠ¡æ²»ç†æ¡†æ¶</li>
<li>Spring Boot ä½¿ç”¨äº†çº¦æŸä¼˜äºé…ç½®çš„ç†å¿µï¼Œå¾ˆå¤šé›†æˆæ–¹æ¡ˆå·²ç»å¸®ä½ é€‰æ‹©å¥½äº†ï¼Œèƒ½ä¸é…ç½®å°±ä¸é…ç½® , Spring Cloud å¾ˆå¤§çš„ä¸€éƒ¨åˆ†æ˜¯åŸºäº Spring Boot æ¥å®ç°ï¼ŒSpring Boot å¯ä»¥ç¦»å¼€ Spring Cloud ç‹¬ç«‹ä½¿ç”¨å¼€å‘é¡¹ç›®ï¼Œä½†æ˜¯ Spring Cloud ç¦»ä¸å¼€ Spring Bootï¼Œå±äºä¾èµ–çš„å…³ç³»</li>
<li>SpringBoot åœ¨ SpringClound ä¸­èµ·åˆ°äº†æ‰¿ä¸Šå¯ä¸‹çš„ä½œç”¨ï¼Œå¦‚æœä½ è¦å­¦ä¹  SpringCloud å¿…é¡»è¦å­¦ä¹  SpringBoot</li>
</ul>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>11_ç»ƒä¹ é¢˜</title>
    <url>/posts/20282767.html</url>
    <content><![CDATA[<h3 id="User"><a href="#User" class="headerlink" title="User"></a>User</h3><ol>
<li><p>æ¥å£</p>
 <a id="more"></a>

 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€šè¿‡userCodeè·å–User</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userCode</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getLoginUser</span><span class="params">(<span class="meta">@Param(&quot;userCode&quot;)</span> String userCode)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¢åŠ ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(User user)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€šè¿‡æ¡ä»¶æŸ¥è¯¢-userList</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userName</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userRole</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">getUserList</span><span class="params">(<span class="meta">@Param(&quot;userName&quot;)</span> String userName, <span class="meta">@Param(&quot;userRole&quot;)</span> Integer userRole,</span></span></span><br><span class="line"><span class="function"><span class="params">                                  <span class="meta">@Param(&quot;from&quot;)</span> Integer currentPageNo, <span class="meta">@Param(&quot;pageSize&quot;)</span> Integer pageSize)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€šè¿‡æ¡ä»¶æŸ¥è¯¢-ç”¨æˆ·è¡¨è®°å½•æ•°</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userName</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userRole</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getUserCount</span><span class="params">(<span class="meta">@Param(&quot;userName&quot;)</span> String userName, <span class="meta">@Param(&quot;userRole&quot;)</span> Integer userRole)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€šè¿‡userIdåˆ é™¤user</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> delId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">deleteUserById</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> Integer delId)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€šè¿‡userIdè·å–user</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUserById</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> Integer id)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">modify</span><span class="params">(User user)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¿®æ”¹å½“å‰ç”¨æˆ·å¯†ç </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pwd</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">updatePwd</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> Integer id, <span class="meta">@Param(&quot;pwd&quot;)</span> String pwd)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Mapper.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.horsen.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getLoginUser&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        select *</span><br><span class="line">        from smbms_user</span><br><span class="line">        where userCode = #&#123;userCode&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;add&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        insert into smbms_user</span><br><span class="line">        (userCode, userName, userPassword, gender, birthday,</span><br><span class="line">         phone, address, userRole, createdBy, creationDate, modifyBy, modifyDate)</span><br><span class="line">        values (#&#123;userCode&#125;, #&#123;userName&#125;, #&#123;userPassword&#125;, #&#123;gender&#125;, #&#123;birthday&#125;,</span><br><span class="line">                #&#123;phone&#125;, #&#123;address&#125;, #&#123;userRole&#125;, #&#123;createdBy&#125;, #&#123;creationDate&#125;, #&#123;modifyBy&#125;, #&#123;modifyDate&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserList&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;userList&quot;</span>&gt;</span></span><br><span class="line">        select u.*, r.roleName</span><br><span class="line">        from smbms_user u,</span><br><span class="line">        smbms_role r</span><br><span class="line">        where u.userRole = r.id</span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;userRole != null&quot;</span>&gt;</span></span><br><span class="line">            and u.userRole = #&#123;userRole&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;userName != null&quot;</span>&gt;</span></span><br><span class="line">            and userName like concat(&#x27;%&#x27;,#&#123;userName&#125;,&#x27;%&#x27;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        limit #&#123;from&#125;,#&#123;pageSize&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;userList&quot;</span> <span class="attr">type</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;userRoleName&quot;</span> <span class="attr">column</span>=<span class="string">&quot;roleName&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserCount&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Int&quot;</span>&gt;</span></span><br><span class="line">        select count(1) from smbms_user</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;userRole != null&quot;</span>&gt;</span></span><br><span class="line">                userRole = #&#123;userRole&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;userName != null&quot;</span>&gt;</span></span><br><span class="line">                and userName like concat(&#x27;%&#x27;,#&#123;userName&#125;,&#x27;%&#x27;)</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteUserById&quot;</span>&gt;</span></span><br><span class="line">        delete</span><br><span class="line">        from smbms_user</span><br><span class="line">        where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;userList&quot;</span>&gt;</span></span><br><span class="line">        select u.*, r.roleName</span><br><span class="line">        from smbms_user u,</span><br><span class="line">             smbms_role r</span><br><span class="line">        where u.id = #&#123;id&#125;</span><br><span class="line">          and u.userRole = r.id</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;modify&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        update smbms_user</span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;userName != null&quot;</span>&gt;</span>userName = #&#123;userName&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;userCode != null&quot;</span>&gt;</span>userCode = #&#123;userCode&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;userPassword != null&quot;</span>&gt;</span>userPassword = #&#123;userPassword&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;gender != null&quot;</span>&gt;</span>gender = #&#123;gender&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;birthday != null&quot;</span>&gt;</span>birthday = #&#123;birthday&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;phone != null&quot;</span>&gt;</span>phone = #&#123;phone&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;address != null&quot;</span>&gt;</span>address = #&#123;address&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;userRole != null&quot;</span>&gt;</span>userRole = #&#123;userRole&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;modifyBy != null&quot;</span>&gt;</span>modifyBy = #&#123;modifyBy&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;modifyDate != null&quot;</span>&gt;</span>modifyDate = #&#123;modifyDate&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updatePwd&quot;</span>&gt;</span></span><br><span class="line">        update smbms_user</span><br><span class="line">        set userPassword = #&#123;pwd&#125;</span><br><span class="line">        where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æµ‹è¯•ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.horsen.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.horsen.model.User;</span><br><span class="line"><span class="keyword">import</span> com.horsen.utils.MybatisUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Calendar;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserMapperTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getLoginUser</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        User user = mapper.getLoginUser(<span class="string">&quot;sunlei&quot;</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        Calendar calendar = Calendar.getInstance();</span><br><span class="line">        calendar.set(Calendar.YEAR, <span class="number">1999</span>);</span><br><span class="line">        calendar.set(Calendar.MONTH, <span class="number">4</span> - <span class="number">1</span>);</span><br><span class="line">        calendar.set(Calendar.DAY_OF_MONTH, <span class="number">3</span>);</span><br><span class="line">        Date birthday = calendar.getTime();</span><br><span class="line">        User user = <span class="keyword">new</span> User(<span class="keyword">null</span>, <span class="string">&quot;liuhorsen&quot;</span>, <span class="string">&quot;åˆ˜éœæ£®&quot;</span>, <span class="string">&quot;123456&quot;</span>, <span class="number">1</span>, birthday,</span><br><span class="line">                <span class="string">&quot;15252178585&quot;</span>, <span class="string">&quot;æ±Ÿè‹å¾å·æ³‰å±±åŒº&quot;</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="keyword">new</span> java.util.Date(), <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line">        mapper.add(user);</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUserList</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        List&lt;User&gt; userList = mapper.getUserList(<span class="string">&quot;&quot;</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUserCount</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="keyword">int</span> userCount = mapper.getUserCount(<span class="string">&quot;å­™&quot;</span>, <span class="number">3</span>);</span><br><span class="line">        System.out.println(userCount);</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteUserById</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        mapper.deleteUserById(<span class="number">17</span>);</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUserById</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        User user = mapper.getUserById(<span class="number">2</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">modify</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setId(<span class="number">1</span>);</span><br><span class="line">        user.setUserPassword(<span class="string">&quot;2222222&quot;</span>);</span><br><span class="line">        mapper.modify(user);</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updatePwd</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        mapper.updatePwd(<span class="number">1</span>,<span class="string">&quot;1122334&quot;</span>);</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="Role"><a href="#Role" class="headerlink" title="Role"></a>Role</h3><ol>
<li><p>æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®RoleCodeè¿›è¡Œè§’è‰²ç¼–ç çš„å”¯ä¸€æ€§éªŒè¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> roleCode</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">roleCodeIsExist</span><span class="params">(<span class="meta">@Param(&quot;roleCode&quot;)</span> String roleCode)</span><span class="keyword">throws</span> Exception</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Mapper.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.horsen.mapper.RoleMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;roleCodeIsExist&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Int&quot;</span>&gt;</span></span><br><span class="line">        select count(1)</span><br><span class="line">        from smbms_role</span><br><span class="line">        where roleCode = #&#123;roleCode&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æµ‹è¯•ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RoleMapperTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">roleCodeIsExist</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">        RoleMapper mapper = sqlSession.getMapper(RoleMapper.class);</span><br><span class="line">        <span class="keyword">int</span> count = mapper.roleCodeIsExist(<span class="string">&quot;SMBMS_ADMIN&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (count == <span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è§’è‰²ç¼–ç å”¯ä¸€&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (count == <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è§’è‰²ç¼–ç ä¸å­˜åœ¨&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è§’è‰²ç¼–ç ä¸å”¯ä¸€&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="Bill"><a href="#Bill" class="headerlink" title="Bill"></a>Bill</h3><ol>
<li><p>æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®ä¾›åº”å•†IDæŸ¥è¯¢è®¢å•æ•°é‡</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> providerId</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getBillCountByProviderId</span><span class="params">(<span class="meta">@Param(&quot;providerId&quot;)</span> Integer providerId)</span> <span class="keyword">throws</span> Exception</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Mapper.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.horsen.mapper.BillMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getBillCountByProviderId&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Int&quot;</span>&gt;</span></span><br><span class="line">        select count(1)</span><br><span class="line">        from smbms_bill</span><br><span class="line">        where providerId = #&#123;providerId&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æµ‹è¯•ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BillMapperTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">roleCodeIsExist</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">        BillMapper mapper = sqlSession.getMapper(BillMapper.class);</span><br><span class="line">        <span class="keyword">int</span> count = mapper.getBillCountByProviderId(<span class="number">14</span>);</span><br><span class="line">        System.out.println(count);</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Mybatis</category>
      </categories>
      <tags>
        <tag>CRUD</tag>
        <tag>Mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title>02_IoC ç†è®ºæ¨å¯¼</title>
    <url>/posts/c8270d99.html</url>
    <content><![CDATA[<p>ä¸æƒ³å†™äº†ï¼Œçœ‹ç‹‚ç¥è¯´çš„åšå®¢å§ï¼Œå†™çš„æŒºå¥½çš„</p>
<blockquote>
<p><a href="https://blog.csdn.net/qq_33369905/article/details/106647330">https://blog.csdn.net/qq_33369905/article/details/106647330</a></p>
</blockquote>
<a id="more"></a>

<p>è¿™é‡Œæ”¾å¼ å›¾ç‰‡æ–¹ä¾¿æŸ¥çœ‹ï¼ˆèŠ±å¼æ°´åšå®¢ï¼‰</p>
<img src="/posts/c8270d99/image-20200731001310978.png" class>]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Spring</tag>
        <tag>IoC</tag>
      </tags>
  </entry>
  <entry>
    <title>03_Hello Spring</title>
    <url>/posts/9f7f7750.html</url>
    <content><![CDATA[<h3 id="1-å¯¼å…¥-jar-åŒ…"><a href="#1-å¯¼å…¥-jar-åŒ…" class="headerlink" title="1. å¯¼å…¥ jar åŒ…"></a>1. å¯¼å…¥ jar åŒ…</h3><p><em>ä¹‹å‰çˆ¶å·¥ç¨‹å¯¼è¿‡äº†</em></p>
<h3 id="2-ç¼–å†™ä»£ç "><a href="#2-ç¼–å†™ä»£ç " class="headerlink" title="2. ç¼–å†™ä»£ç "></a>2. ç¼–å†™ä»£ç </h3><ol>
<li><p>ç¼–å†™ä¸€ä¸ªå®ä½“ç±»</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hello</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String str;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;str=&#x27;&quot;</span> + str + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getStr</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStr</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.str = str;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

 <a id="more"></a>
</li>
<li><p>ç¼–å†™ beans.xml</p>
 <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- beanå°±æ˜¯javaå¯¹è±¡, ç”±Springåˆ›å»ºå’Œç®¡ç† --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;hello&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.model.Hello&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;str&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Spring&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æµ‹è¯•</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è§£æbeans.xmlæ–‡ä»¶, ç”Ÿæˆç®¡ç†ç›¸åº”çš„Beanå¯¹è±¡</span></span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line">        <span class="comment">// getBean: å‚æ•°å³ä¸ºspringé…ç½®æ–‡ä»¶ä¸­beançš„id</span></span><br><span class="line">        Hello hello = (Hello) context.getBean(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        System.out.println(hello.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="3-æ€è€ƒ"><a href="#3-æ€è€ƒ" class="headerlink" title="3. æ€è€ƒ"></a>3. æ€è€ƒ</h3><ul>
<li><p>hello å¯¹è±¡æ˜¯è°åˆ›å»ºçš„ï¼Ÿ</p>
<ul>
<li><p>Spring åˆ›å»ºäº† hello å¯¹è±¡</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;hello&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.model.Hello&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Hello hello = new Hello(); --&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>hello å¯¹è±¡çš„å±æ€§æ˜¯æ€ä¹ˆè®¾ç½®çš„ï¼Ÿ</p>
<ul>
<li><p>Spring å®¹å™¨è®¾ç½®äº† hello çš„å±æ€§</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;str&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Spring&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- hello.setStr(&quot;Spring&quot;); --&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<p><strong>è¿™ä¸ªè¿‡ç¨‹å°±å«æ§åˆ¶åè½¬</strong></p>
<ul>
<li>æ§åˆ¶ï¼šä½¿ç”¨Springåï¼Œå¯¹è±¡æ˜¯ç”±Springæ¥åˆ›å»ºçš„</li>
<li>åè½¬ï¼šç¨‹åºæœ¬èº«ä¸åˆ›å»ºå¯¹è±¡ï¼Œè€Œå˜æˆè¢«åŠ¨çš„æ¥æ”¶å¯¹è±¡</li>
</ul>
<h3 id="4-IoC-åˆ›å»ºå¯¹è±¡çš„æ–¹å¼"><a href="#4-IoC-åˆ›å»ºå¯¹è±¡çš„æ–¹å¼" class="headerlink" title="4. IoC åˆ›å»ºå¯¹è±¡çš„æ–¹å¼"></a>4. IoC åˆ›å»ºå¯¹è±¡çš„æ–¹å¼</h3><h4 id="4-1-é€šè¿‡æ— å‚æ„é€ æ–¹æ³•åˆ›å»º"><a href="#4-1-é€šè¿‡æ— å‚æ„é€ æ–¹æ³•åˆ›å»º" class="headerlink" title="4.1 é€šè¿‡æ— å‚æ„é€ æ–¹æ³•åˆ›å»º"></a>4.1 é€šè¿‡æ— å‚æ„é€ æ–¹æ³•åˆ›å»º</h4><p>å°±æ˜¯ä¸Šé¢é‚£ä¸ªä¾‹å­</p>
<h4 id="4-2-é€šè¿‡æœ‰å‚æ„é€ æ–¹æ³•åˆ›å»º"><a href="#4-2-é€šè¿‡æœ‰å‚æ„é€ æ–¹æ³•åˆ›å»º" class="headerlink" title="4.2 é€šè¿‡æœ‰å‚æ„é€ æ–¹æ³•åˆ›å»º"></a>4.2 é€šè¿‡æœ‰å‚æ„é€ æ–¹æ³•åˆ›å»º</h4><ol>
<li><p>å®ä½“ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;name = &quot;</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>beans.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç¬¬ä¸€ç§ ä¸‹æ ‡èµ‹å€¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.model.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- User user; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Horsen&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- user = new User(&quot;Horsen&quot;); --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ç¬¬äºŒç§ æ ¹æ®å‚æ•°ç±»å‹è®¾ç½® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.model.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span> <span class="attr">value</span>=<span class="string">&quot;lhx&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ç¬¬ä¸‰ç§ æ ¹æ®å‚æ•°åå­—è®¾ç½® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user3&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.model.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- nameæŒ‡å‚æ•°å --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;liuhaoxin&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ol>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Spring</tag>
        <tag>IoC</tag>
      </tags>
  </entry>
  <entry>
    <title>04_Spring é…ç½®è¯´æ˜</title>
    <url>/posts/3b16e56b.html</url>
    <content><![CDATA[<h3 id="1-åˆ«å"><a href="#1-åˆ«å" class="headerlink" title="1. åˆ«å"></a>1. åˆ«å</h3><p><code>&lt;alias&gt;</code>è®¾ç½®åˆ«å ï¼Œä¸º bean è®¾ç½®åˆ«åï¼Œå¯ä»¥è®¾ç½®å¤šä¸ªåˆ«å</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--è®¾ç½®åˆ«åï¼šåœ¨è·å–Beançš„æ—¶å€™å¯ä»¥ä½¿ç”¨åˆ«åè·å–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&quot;userT&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;userNew&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="2-Bean-çš„é…ç½®"><a href="#2-Bean-çš„é…ç½®" class="headerlink" title="2. Bean çš„é…ç½®"></a>2. Bean çš„é…ç½®</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    id: beançš„æ ‡è¯†ç¬¦, è¦å”¯ä¸€, å¦‚æœæ²¡æœ‰é…ç½®id, nameå°±æ˜¯é»˜è®¤æ ‡è¯†ç¬¦</span></span><br><span class="line"><span class="comment">    class: beançš„å…¨é™å®šå=åŒ…å+ç±»å</span></span><br><span class="line"><span class="comment">    name: åˆ«å, å¯ä»¥è®¾ç½®å¤šä¸ªåˆ«å, å¯ä»¥ç”¨é€—å·, åˆ†å·, ç©ºæ ¼éš”å¼€</span></span><br><span class="line"><span class="comment">    å¦‚æœé…ç½®id, åˆé…ç½®äº†name, é‚£ä¹ˆnameæ˜¯åˆ«å</span></span><br><span class="line"><span class="comment">    å¦‚æœä¸é…ç½®idå’Œname, å¯ä»¥æ ¹æ®applicationContext.getBean(.class)è·å–å¯¹è±¡;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;hello&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hello2 h2,h3;h4&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.model.Hello&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Spring&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="3-Import"><a href="#3-Import" class="headerlink" title="3. Import"></a>3. Import</h3><p>å›¢é˜Ÿçš„åˆä½œé€šè¿‡<code>&lt;import&gt;</code>æ¥å®ç°</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;&#123;path&#125;/beans.xml&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>05_DI ä¾èµ–æ³¨å…¥</title>
    <url>/posts/3218da84.html</url>
    <content><![CDATA[<h3 id="1-æ„é€ å™¨æ³¨å…¥"><a href="#1-æ„é€ å™¨æ³¨å…¥" class="headerlink" title="1. æ„é€ å™¨æ³¨å…¥"></a>1. æ„é€ å™¨æ³¨å…¥</h3><p>å‰é¢è¯´è¿‡äº†</p>
<blockquote>
<p><a href="https://horsenliu.github.io/posts/9f7f7750.html">https://horsenliu.github.io/posts/9f7f7750.html</a></p>
<ol start="4">
<li>IoC åˆ›å»ºå¯¹è±¡çš„æ–¹å¼</li>
</ol>
</blockquote>
<h3 id="2-Setæ–¹å¼æ³¨å…¥ï¼ˆé‡ç‚¹ï¼‰"><a href="#2-Setæ–¹å¼æ³¨å…¥ï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="2.  Setæ–¹å¼æ³¨å…¥ï¼ˆé‡ç‚¹ï¼‰"></a>2.  Setæ–¹å¼æ³¨å…¥ï¼ˆé‡ç‚¹ï¼‰</h3><p>æ•´ä¸€ä¸ªå¤æ‚ä¸€ç‚¹çš„å®ä½“ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@Setter</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Address</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@Setter</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Address address;</span><br><span class="line">    <span class="keyword">private</span> String[] books;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; hobbies;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,String&gt; card;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; games;</span><br><span class="line">    <span class="keyword">private</span> String wife;</span><br><span class="line">    <span class="keyword">private</span> Properties info;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<a id="more"></a>



<h4 id="2-1-å¸¸é‡æ³¨å…¥"><a href="#2-1-å¸¸é‡æ³¨å…¥" class="headerlink" title="2.1 å¸¸é‡æ³¨å…¥"></a>2.1 å¸¸é‡æ³¨å…¥</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.model.Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;lhx&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h4 id="2-2-Bean-æ³¨å…¥"><a href="#2-2-Bean-æ³¨å…¥" class="headerlink" title="2.2  Bean æ³¨å…¥"></a>2.2  Bean æ³¨å…¥</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;address&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.model.Address&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.model.Student&quot;</span>&gt;</span></span><br><span class="line">    ......</span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;address&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h4 id="2-3-æ•°ç»„æ³¨å…¥"><a href="#2-3-æ•°ç»„æ³¨å…¥" class="headerlink" title="2.3 æ•°ç»„æ³¨å…¥"></a>2.3 æ•°ç»„æ³¨å…¥</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;books&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>çº¢æ¥¼æ¢¦<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>æ°´æµ’ä¼ <span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>è¥¿æ¸¸è®°<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>ä¸‰å›½æ¼”ä¹‰<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="2-4-List-æ³¨å…¥"><a href="#2-4-List-æ³¨å…¥" class="headerlink" title="2.4 List æ³¨å…¥"></a>2.4 List æ³¨å…¥</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;hobbies&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>å¬æ­Œ<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>æ•²ä»£ç <span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>çœ‹ç”µå½±<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="2-5-Map-æ³¨å…¥"><a href="#2-5-Map-æ³¨å…¥" class="headerlink" title="2.5 Map æ³¨å…¥"></a>2.5 Map æ³¨å…¥</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;èº«ä»½è¯&quot;</span> <span class="attr">value</span>=<span class="string">&quot;303030199904031234&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;é“¶è¡Œå¡&quot;</span> <span class="attr">value</span>=<span class="string">&quot;6217-0000-1111-2222-333&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="2-6-Set-æ³¨å…¥"><a href="#2-6-Set-æ³¨å…¥" class="headerlink" title="2.6 Set æ³¨å…¥"></a>2.6 Set æ³¨å…¥</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;games&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>LOL<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>OverWatch<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>PUBG<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="2-7-Null-æ³¨å…¥"><a href="#2-7-Null-æ³¨å…¥" class="headerlink" title="2.7 Null æ³¨å…¥"></a>2.7 Null æ³¨å…¥</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;wife&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">null</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="2-8-Properties-æ³¨å…¥"><a href="#2-8-Properties-æ³¨å…¥" class="headerlink" title="2.8 Properties æ³¨å…¥"></a>2.8 Properties æ³¨å…¥</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;userName&quot;</span>&gt;</span>lhx<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;pwd&quot;</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Spring</tag>
        <tag>ä¾èµ–æ³¨å…¥</tag>
      </tags>
  </entry>
  <entry>
    <title>06_Bean çš„ä½œç”¨åŸŸ</title>
    <url>/posts/8e797015.html</url>
    <content><![CDATA[<table>
<thead>
<tr>
<th>èŒƒå›´</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>singleton</td>
<td>ï¼ˆé»˜è®¤ï¼‰ä¸ºæ¯ä¸ªSpring IoC å®¹å™¨å°†å•ä¸ª bean å®šä¹‰çš„ä½œç”¨åŸŸé™å®šä¸ºå•ä¸ªå¯¹è±¡å®ä¾‹</td>
</tr>
<tr>
<td>prototype</td>
<td>å°†å•ä¸ª bean å®šä¹‰çš„ä½œç”¨åŸŸé™å®šä¸ºä»»æ„æ•°é‡çš„å¯¹è±¡å®ä¾‹</td>
</tr>
<tr>
<td>request</td>
<td>å°†å•ä¸ª bean å®šä¹‰çš„èŒƒå›´é™å®šä¸ºå•ä¸ªHTTPè¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªHTTPè¯·æ±‚éƒ½æœ‰ä¸€ä¸ªåœ¨å•ä¸ª bean å®šä¹‰åé¢åˆ›å»ºçš„ bean å®ä¾‹</td>
</tr>
<tr>
<td>session</td>
<td>å°†å•ä¸ª bean å®šä¹‰çš„èŒƒå›´é™å®šä¸º HTTP <code>Session</code>çš„ç”Ÿå‘½å‘¨æœŸ</td>
</tr>
<tr>
<td>application</td>
<td>å°†å•ä¸ª bean å®šä¹‰çš„ä½œç”¨åŸŸé™å®šä¸º<code>ServletContext</code>çš„ç”Ÿå‘½å‘¨æœŸ</td>
</tr>
<tr>
<td>websocket</td>
<td>å°†å•ä¸ª bean å®šä¹‰çš„ä½œç”¨åŸŸé™å®šä¸º<code>WebSocket</code>çš„ç”Ÿå‘½å‘¨æœŸ</td>
</tr>
</tbody></table>
<a id="more"></a>

<h3 id="1-å•ä¾‹æ¨¡å¼"><a href="#1-å•ä¾‹æ¨¡å¼" class="headerlink" title="1. å•ä¾‹æ¨¡å¼"></a>1. å•ä¾‹æ¨¡å¼</h3><p>å½“ä¸€ä¸ª bean çš„ä½œç”¨åŸŸä¸º Singletonï¼Œé‚£ä¹ˆ Spring IoC å®¹å™¨ä¸­åªä¼šå­˜åœ¨ä¸€ä¸ªå…±äº«çš„ bean å®ä¾‹ï¼Œå¹¶ä¸”æ‰€æœ‰å¯¹ bean çš„è¯·æ±‚ï¼Œåªè¦ id ä¸è¯¥ bean å®šä¹‰ç›¸åŒ¹é…ï¼Œåˆ™åªä¼šè¿”å› bean çš„åŒä¸€å®ä¾‹ã€‚Singleton æ˜¯å•ä¾‹ç±»å‹ï¼Œå°±æ˜¯åœ¨åˆ›å»ºèµ·å®¹å™¨æ—¶å°±åŒæ—¶è‡ªåŠ¨åˆ›å»ºäº†ä¸€ä¸ª bean çš„å¯¹è±¡ï¼Œä¸ç®¡ä½ æ˜¯å¦ä½¿ç”¨ï¼Œä»–éƒ½å­˜åœ¨äº†ï¼Œæ¯æ¬¡è·å–åˆ°çš„å¯¹è±¡éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚æ³¨æ„ï¼ŒSingleton ä½œç”¨åŸŸæ˜¯ Springä¸­çš„ç¼ºçœä½œç”¨åŸŸã€‚è¦åœ¨ XML ä¸­å°† bean å®šä¹‰æˆ singletonï¼Œå¯ä»¥è¿™æ ·é…ç½®ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;accountService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.something.DefaultAccountService&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;singleton&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="2-åŸå‹æ¨¡å¼"><a href="#2-åŸå‹æ¨¡å¼" class="headerlink" title="2. åŸå‹æ¨¡å¼"></a>2. åŸå‹æ¨¡å¼</h3><p>å½“ä¸€ä¸ª bean çš„ä½œç”¨åŸŸä¸º Prototypeï¼Œè¡¨ç¤ºä¸€ä¸ª bean å®šä¹‰å¯¹åº”å¤šä¸ªå¯¹è±¡å®ä¾‹ã€‚Prototype ä½œç”¨åŸŸçš„ bean ä¼šå¯¼è‡´åœ¨æ¯æ¬¡å¯¹è¯¥ bean è¯·æ±‚ï¼ˆå°†å…¶æ³¨å…¥åˆ°å¦ä¸€ä¸ª beanä¸­ï¼Œæˆ–è€…ä»¥ç¨‹åºçš„æ–¹å¼è°ƒç”¨å®¹å™¨çš„ getBean() æ–¹æ³•ï¼‰æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ bean å®ä¾‹ã€‚Prototype æ˜¯åŸå‹ç±»å‹ï¼Œå®ƒåœ¨æˆ‘ä»¬åˆ›å»ºå®¹å™¨çš„æ—¶å€™å¹¶æ²¡æœ‰å®ä¾‹åŒ–ï¼Œè€Œæ˜¯å½“æˆ‘ä»¬è·å– bean çš„æ—¶å€™æ‰ä¼šå»åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸”æˆ‘ä»¬æ¯æ¬¡è·å–åˆ°çš„å¯¹è±¡éƒ½ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚<strong>æ ¹æ®ç»éªŒï¼Œå¯¹æœ‰çŠ¶æ€çš„ bean åº”è¯¥ä½¿ç”¨ prototype ä½œç”¨åŸŸï¼Œè€Œå¯¹æ— çŠ¶æ€çš„ bean åˆ™åº”è¯¥ä½¿ç”¨ singleton ä½œç”¨åŸŸã€‚</strong>åœ¨ XML ä¸­å°† bean å®šä¹‰æˆprototypeï¼Œå¯ä»¥è¿™æ ·é…ç½®ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;accountService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.something.DefaultAccountService&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;prototype&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="3-å…¶ä»–çš„åªèƒ½åœ¨-web-å¼€å‘ä¸­ä½¿ç”¨"><a href="#3-å…¶ä»–çš„åªèƒ½åœ¨-web-å¼€å‘ä¸­ä½¿ç”¨" class="headerlink" title="3. å…¶ä»–çš„åªèƒ½åœ¨ web å¼€å‘ä¸­ä½¿ç”¨"></a>3. å…¶ä»–çš„åªèƒ½åœ¨ web å¼€å‘ä¸­ä½¿ç”¨</h3><p>å°±ä¸å¤šè¯´äº†</p>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>07_Bean çš„è‡ªåŠ¨è£…é…</title>
    <url>/posts/8da2424e.html</url>
    <content><![CDATA[<h3 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1. ç®€ä»‹"></a>1. ç®€ä»‹</h3><ul>
<li>è‡ªåŠ¨è£…é…æ˜¯ä½¿ç”¨ Spring æ»¡è¶³ bean ä¾èµ–çš„ä¸€ç§æ–¹æ³•</li>
<li>Spring ä¼šåœ¨åº”ç”¨ä¸Šä¸‹æ–‡ä¸­ä¸ºæŸä¸ª bean å¯»æ‰¾å…¶ä¾èµ–çš„ bean</li>
</ul>
<p>Springä¸­beanæœ‰ä¸‰ç§è£…é…æœºåˆ¶ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<ol>
<li>åœ¨ xml ä¸­æ˜¾å¼é…ç½®</li>
<li>åœ¨ java ä¸­æ˜¾å¼é…ç½®</li>
<li><strong>éšå¼çš„ bean å‘ç°æœºåˆ¶å’Œè‡ªåŠ¨è£…é…</strong></li>
</ol>
<hr>
<p>æµ‹è¯•ä¹‹å‰å…ˆæ•´å‡ ä¸ªå®ä½“ç±»ï¼š</p>
<p>æ¯”å¦‚ï¼Œä¸€ä¸ªäººæœ‰ä¸¤ä¸ªå® ç‰©</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shout</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;wang~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Cat</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shout</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;miao~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@Setter</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">People</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Cat cat;</span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<a id="more"></a>



<h3 id="2-ByName-è‡ªåŠ¨è£…é…"><a href="#2-ByName-è‡ªåŠ¨è£…é…" class="headerlink" title="2. ByName è‡ªåŠ¨è£…é…"></a>2. ByName è‡ªåŠ¨è£…é…</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.model.Cat&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.model.Dog&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;people&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.model.People&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;lhx&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å½“ä¸€ä¸ª bean èŠ‚ç‚¹å¸¦æœ‰<code>autowire=&quot;byName&quot;</code>çš„å±æ€§æ—¶</p>
<ol>
<li>å°†æŸ¥æ‰¾å…¶ç±»ä¸­æ‰€æœ‰çš„setæ–¹æ³•åï¼Œä¾‹å¦‚setCat()ï¼Œè·å¾—å°† set å»æ‰å¹¶ä¸”é¦–å­—æ¯å°å†™çš„å­—ç¬¦ä¸²ï¼Œå³cat</li>
<li>å» spring å®¹å™¨ä¸­å¯»æ‰¾æ˜¯å¦æœ‰æ­¤å­—ç¬¦ä¸²åç§° id çš„å¯¹è±¡</li>
<li>å¦‚æœæœ‰ï¼Œå°±å–å‡ºæ³¨å…¥ï¼›å¦‚æœæ²¡æœ‰ï¼Œå°±æŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸</li>
</ol>
<h3 id="3-ByType-è‡ªåŠ¨è£…é…"><a href="#3-ByType-è‡ªåŠ¨è£…é…" class="headerlink" title="3. ByType è‡ªåŠ¨è£…é…"></a>3. ByType è‡ªåŠ¨è£…é…</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.model.Cat&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.model.Dog&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;people&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.model.People&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byType&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;lhx&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä¸ ByName ç±»ä¼¼ï¼ŒByTypeæŸ¥æ‰¾çš„æ˜¯å¯¹è±¡çš„å±æ€§ç±»å‹è€Œä¸æ˜¯å±æ€§åï¼Œä½†æ˜¯è¦ä¿è¯<strong>åŒä¸€ç±»å‹çš„å¯¹è±¡ï¼Œåœ¨ spring å®¹å™¨ä¸­å”¯ä¸€</strong>ï¼Œå¦‚æœå¢åŠ ä¸€ä¸ª<code>&lt;bean id=&quot;dog2&quot; class=&quot;com.horsen.model.Dog&quot;/&gt;</code>å°±ä¼šæŠ¥é”™ã€‚</p>
<p><em>ä½¿ç”¨ ByType æ—¶ç”šè‡³å¯ä»¥çœç•¥ id</em></p>
<h3 id="4-ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…"><a href="#4-ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…" class="headerlink" title="4. ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…"></a>4. ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…</h3><h4 id="4-1-å‡†å¤‡å·¥ä½œ"><a href="#4-1-å‡†å¤‡å·¥ä½œ" class="headerlink" title="4.1 å‡†å¤‡å·¥ä½œ"></a>4.1 å‡†å¤‡å·¥ä½œ</h4><ol>
<li><p>åœ¨ beans.xml é…ç½®æ–‡ä»¶ä¸­è¿›å…¥ context æ–‡ä»¶å¤´ï¼ˆæ·»åŠ ç¬¬4ã€7ã€8è¡Œï¼‰</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        https://www.springframework.org/schema/beans/spring-beans.xsd </span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context </span></span></span><br><span class="line"><span class="tag"><span class="string">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><em>æˆ–è€…ç›´æ¥è¾“å…¥<code>&lt;context:annotation-config/&gt;</code>ï¼Œè®© IDEA å¸®ä½ è‡ªåŠ¨å¯¼å…¥è¿™äº›ä¸œè¥¿</em></p>
</li>
<li><p>å¼€å¯å±æ€§æ³¨è§£æ”¯æŒ</p>
<p><code>&lt;context:annotation-config/&gt;</code></p>
</li>
</ol>
<h4 id="4-2-æµ‹è¯•"><a href="#4-2-æµ‹è¯•" class="headerlink" title="4.2 æµ‹è¯•"></a>4.2 æµ‹è¯•</h4><ol>
<li><p>åœ¨å±æ€§ä¸Šæ·»åŠ <code>@Autowired</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@Setter</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">People</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Cat cat;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š@Autowired æ˜¯æŒ‰ç±»å‹è‡ªåŠ¨è½¬é…çš„ï¼Œä¸æ”¯æŒ id åŒ¹é…</strong></p>
</li>
<li><p>é…ç½®æ–‡ä»¶é‡Œå°±å¾ˆå¹²å‡€</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.model.Cat&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.model.Dog&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;people&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.model.People&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ol>
<h4 id="4-3-æ‹“å±•"><a href="#4-3-æ‹“å±•" class="headerlink" title="4.3 æ‹“å±•"></a>4.3 æ‹“å±•</h4><ol>
<li><p><code>@Autowired(required = false)</code> </p>
<ul>
<li>falseï¼Œå¯¹è±¡å¯ä»¥ä¸ºnull</li>
<li>trueï¼Œå¯¹è±¡å¿…é¡»å­˜å¯¹è±¡ï¼Œä¸èƒ½ä¸ºnull</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired(required = false)</span></span><br><span class="line"><span class="keyword">private</span> Cat cat;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>@Qualifier(value = &quot;cat2&quot;)</code></p>
<ul>
<li><p>@Autowired æ˜¯æ ¹æ®ç±»å‹è‡ªåŠ¨è£…é…çš„ï¼ŒåŠ ä¸Š @Qualifier åˆ™å¯ä»¥æ ¹æ® byName çš„æ–¹å¼è‡ªåŠ¨è£…é…</p>
</li>
<li><p>@Qualifier ä¸èƒ½å•ç‹¬ä½¿ç”¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="meta">@Qualifier(value = &quot;cat2&quot;)</span></span><br><span class="line"><span class="keyword">private</span> Cat cat;</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="meta">@Qualifier(value = &quot;dog2&quot;)</span></span><br><span class="line"><span class="keyword">private</span> Dog dog;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.Dog&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.Dog&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.Cat&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.Cat&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><code>@Resource</code></p>
<ul>
<li>@Resource å¦‚æœ‰æŒ‡å®šçš„ name å±æ€§ï¼Œå…ˆæŒ‰è¯¥å±æ€§è¿›è¡Œ byName æ–¹å¼æŸ¥æ‰¾è£…é…</li>
<li>å…¶æ¬¡å†è¿›è¡Œé»˜è®¤çš„ byName æ–¹å¼è¿›è¡Œè£…é…</li>
<li>å¦‚æœä»¥ä¸Šéƒ½ä¸æˆåŠŸï¼Œåˆ™æŒ‰ byType çš„æ–¹å¼è‡ªåŠ¨è£…é…</li>
<li>éƒ½ä¸æˆåŠŸï¼Œåˆ™æŠ¥å¼‚å¸¸</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Resource(name = &quot;cat2&quot;)</span></span><br><span class="line"><span class="keyword">private</span> Cat cat;</span><br><span class="line"><span class="meta">@Resource</span></span><br><span class="line"><span class="keyword">private</span> Dog dog;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.Dog&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.Cat&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.Cat&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="5-å°ç»“"><a href="#5-å°ç»“" class="headerlink" title="5. å°ç»“"></a>5. å°ç»“</h3><p><code>@Autowired</code>ä¸<code>@Resource</code>å¼‚åŒï¼š</p>
<ol>
<li><code>@Autowired</code>ä¸<code>@Resource</code>éƒ½å¯ä»¥ç”¨æ¥è£…é… beanã€‚éƒ½å¯ä»¥å†™åœ¨å­—æ®µä¸Šï¼Œæˆ–å†™åœ¨setteræ–¹æ³•ä¸Šã€‚</li>
<li><code>@Autowired</code>é»˜è®¤æŒ‰ç±»å‹è£…é…ï¼ˆå±äº spring è§„èŒƒï¼‰ï¼Œé»˜è®¤æƒ…å†µä¸‹å¿…é¡»è¦æ±‚ä¾èµ–å¯¹è±¡å¿…é¡»å­˜åœ¨ï¼Œå¦‚æœè¦å…è®¸null å€¼ï¼Œå¯ä»¥è®¾ç½®å®ƒçš„<code>required</code>å±æ€§ä¸º<code>false</code>ï¼Œå¦‚ï¼š<code>@Autowired(required=false) </code>ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä½¿ç”¨åç§°è£…é…å¯ä»¥ç»“åˆ<code>@Qualifier</code>æ³¨è§£è¿›è¡Œä½¿ç”¨</li>
<li><code>@Resource</code>ï¼ˆå±äºJ2EEå¤è¿”ï¼‰ï¼Œé»˜è®¤æŒ‰ç…§åç§°è¿›è¡Œè£…é…ï¼Œåç§°å¯ä»¥é€šè¿‡<code>name</code>å±æ€§è¿›è¡ŒæŒ‡å®šã€‚å¦‚æœæ²¡æœ‰æŒ‡å®š<code>name</code>å±æ€§ï¼Œå½“æ³¨è§£å†™åœ¨å­—æ®µä¸Šæ—¶ï¼Œé»˜è®¤å–å­—æ®µåè¿›è¡ŒæŒ‰ç…§åç§°æŸ¥æ‰¾ï¼Œå¦‚æœæ³¨è§£å†™åœ¨ setter æ–¹æ³•ä¸Šé»˜è®¤å–å±æ€§åè¿›è¡Œè£…é…ã€‚å½“æ‰¾ä¸åˆ°ä¸åç§°åŒ¹é…çš„ bean æ—¶æ‰æŒ‰ç…§ç±»å‹è¿›è¡Œè£…é…ã€‚<strong>ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœ<code>name</code>å±æ€§ä¸€æ—¦æŒ‡å®šï¼Œå°±åªä¼šæŒ‰ç…§åç§°è¿›è¡Œè£…é…ã€‚</strong></li>
<li>å®ƒä»¬çš„ä½œç”¨ç›¸åŒéƒ½æ˜¯ç”¨æ³¨è§£æ–¹å¼æ³¨å…¥å¯¹è±¡ï¼Œä½†æ‰§è¡Œé¡ºåºä¸åŒã€‚<code>@Autowired</code>å…ˆ byTypeï¼Œ<code>@Resource</code>å…ˆ byNameã€‚</li>
</ol>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>æ³¨è§£</tag>
        <tag>Spring</tag>
        <tag>è‡ªåŠ¨è£…é…</tag>
      </tags>
  </entry>
  <entry>
    <title>08_ä½¿ç”¨æ³¨è§£å¼€å‘</title>
    <url>/posts/53af2c28.html</url>
    <content><![CDATA[<h3 id="1-å¼•å…¥-AOP-çš„åŒ…"><a href="#1-å¼•å…¥-AOP-çš„åŒ…" class="headerlink" title="1. å¼•å…¥ AOP çš„åŒ…"></a>1. å¼•å…¥ AOP çš„åŒ…</h3><p>åœ¨ Spring4 ä¹‹åï¼Œæƒ³è¦ä½¿ç”¨æ³¨è§£å½¢å¼ï¼Œå¿…é¡»å¾—è¦å¼•å…¥ AOP çš„åŒ…</p>
<img src="/posts/53af2c28/image-20200731191506807.png" class>

<p>åœ¨é…ç½®æ–‡ä»¶å½“ä¸­ï¼Œè¿˜éœ€è¦å¼•å…¥ä¸€ä¸ª context çº¦æŸ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<a id="more"></a>



<h3 id="2-Bean-çš„å®ç°"><a href="#2-Bean-çš„å®ç°" class="headerlink" title="2. Bean çš„å®ç°"></a>2. Bean çš„å®ç°</h3><p>ä¹‹å‰éƒ½æ˜¯ä½¿ç”¨<code>&lt;bean&gt;</code>æ ‡ç­¾è¿›è¡Œ bean æ³¨å…¥ï¼Œä½†æ˜¯å®é™…å¼€å‘ä¸­ï¼Œä¸€èˆ¬éƒ½ä¼šä½¿ç”¨æ³¨è§£</p>
<ol>
<li><p>é…ç½®æ–‡ä»¶å¢åŠ </p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æŒ‡å®šæ³¨è§£æ‰«æåŒ… --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.horsen.model&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å®ä½“ç±»ä¸­ä½¿ç”¨<code>@Component(&quot;user&quot;)</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component(&quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String name=<span class="string">&quot;lhx&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç›¸å½“äº<code>&lt;bean id=&quot;user&quot; class=&quot;com.horsen.model.User&quot;/&gt;</code></p>
</li>
<li><p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">    User user = context.getBean(<span class="string">&quot;user&quot;</span>, User.class);</span><br><span class="line">    System.out.println(user.name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="3-å±æ€§æ³¨å…¥"><a href="#3-å±æ€§æ³¨å…¥" class="headerlink" title="3. å±æ€§æ³¨å…¥"></a>3. å±æ€§æ³¨å…¥</h3><ol>
<li><p>å¦‚æœæ²¡æœ‰ setter æ–¹æ³•ï¼Œåœ¨å±æ€§åä¸ŠåŠ <code>@Value(&quot;xxx&quot;)</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component(&quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Value(&quot;liuhaoxin&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¦‚æœæœ‰ setter æ–¹æ³•ï¼Œåœ¨setter æ–¹æ³•ä¸ŠåŠ <code>@Value(&quot;xxx&quot;)</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component(&quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;liuhaoxin&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
</ol>
<p>ç›¸å½“äº<code>&lt;property name=&quot;name&quot; value=&quot;liuhaoxin&quot;/&gt;</code></p>
<h3 id="4-è¡ç”Ÿæ³¨è§£"><a href="#4-è¡ç”Ÿæ³¨è§£" class="headerlink" title="4. è¡ç”Ÿæ³¨è§£"></a>4. è¡ç”Ÿæ³¨è§£</h3><p><strong>@Component ä¸‰ä¸ªè¡ç”Ÿæ³¨è§£</strong></p>
<p>ä¸ºäº†æ›´å¥½çš„è¿›è¡Œåˆ†å±‚ï¼ŒSpring å¯ä»¥ä½¿ç”¨å…¶å®ƒä¸‰ä¸ªæ³¨è§£ï¼ŒåŠŸèƒ½ä¸€æ ·ï¼Œç›®å‰ä½¿ç”¨å“ªä¸€ä¸ªåŠŸèƒ½éƒ½ä¸€æ ·</p>
<ul>
<li><code>@Controller</code>ï¼šweb å±‚</li>
<li><code>@Service</code>ï¼šservice å±‚</li>
<li><code>@Repository</code>ï¼šdao å±‚</li>
</ul>
<h3 id="5-è‡ªåŠ¨è£…é…æ³¨è§£"><a href="#5-è‡ªåŠ¨è£…é…æ³¨è§£" class="headerlink" title="5. è‡ªåŠ¨è£…é…æ³¨è§£"></a>5. è‡ªåŠ¨è£…é…æ³¨è§£</h3><p>å‰é¢è¯´è¿‡äº†</p>
<blockquote>
<p><a href="https://horsenliu.github.io/posts/8da2424e.html">https://horsenliu.github.io/posts/8da2424e.html</a></p>
</blockquote>
<h3 id="6-ä½œç”¨åŸŸ"><a href="#6-ä½œç”¨åŸŸ" class="headerlink" title="6. ä½œç”¨åŸŸ"></a>6. ä½œç”¨åŸŸ</h3><p><code>@scope</code></p>
<ul>
<li>singletonï¼šé»˜è®¤çš„ï¼ŒSpring ä¼šé‡‡ç”¨å•ä¾‹æ¨¡å¼åˆ›å»ºè¿™ä¸ªå¯¹è±¡ã€‚å…³é—­å·¥å‚ ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½ä¼šé”€æ¯</li>
<li>prototypeï¼šå¤šä¾‹æ¨¡å¼ã€‚å…³é—­å·¥å‚ï¼Œæ‰€æœ‰çš„å¯¹è±¡ä¸ä¼šé”€æ¯ã€‚å†…éƒ¨çš„åƒåœ¾å›æ”¶æœºåˆ¶ä¼šå›æ”¶</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller(&quot;user&quot;)</span></span><br><span class="line"><span class="meta">@Scope(&quot;prototype&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Value(&quot;liuhaoxin&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="7-å°ç»“"><a href="#7-å°ç»“" class="headerlink" title="7. å°ç»“"></a>7. å°ç»“</h3><p><strong>XML ä¸æ³¨è§£æ¯”è¾ƒ</strong></p>
<ul>
<li>XMLå¯ä»¥é€‚ç”¨ä»»ä½•åœºæ™¯ï¼Œç»“æ„æ¸…æ™°ï¼Œç»´æŠ¤æ–¹ä¾¿</li>
<li>æ³¨è§£ä¸æ˜¯è‡ªå·±æä¾›çš„ç±»ä½¿ç”¨ä¸äº†ï¼Œå¼€å‘ç®€å•æ–¹ä¾¿</li>
</ul>
<hr>
<p><strong>æ¨èæœ€ä½³å®è·µï¼šXML ä¸æ³¨è§£æ•´åˆå¼€å‘</strong> </p>
<ul>
<li>XML ç®¡ç† Bean</li>
<li>æ³¨è§£å®Œæˆå±æ€§æ³¨å…¥</li>
<li>ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œ å¯ä»¥ä¸ç”¨æ‰«æï¼Œæ‰«ææ˜¯ä¸ºäº†ç±»ä¸Šçš„æ³¨è§£</li>
</ul>
<h3 id="8-æ–°ç‰¹æ€§ï¼šJavaConfig"><a href="#8-æ–°ç‰¹æ€§ï¼šJavaConfig" class="headerlink" title="8. æ–°ç‰¹æ€§ï¼šJavaConfig"></a>8. æ–°ç‰¹æ€§ï¼šJavaConfig</h3><p><strong>å°±æ˜¯åŸºäº Java ç±»è¿›è¡Œé…ç½®ï¼Œå®Œå…¨ä¸éœ€è¦ xml æ–‡ä»¶</strong></p>
<p>JavaConfig åŸæ¥æ˜¯ Spring çš„ä¸€ä¸ªå­é¡¹ç›®ï¼Œå®ƒé€šè¿‡ Java ç±»çš„æ–¹å¼æä¾› Bean çš„å®šä¹‰ä¿¡æ¯ï¼Œåœ¨ Spring4 çš„ç‰ˆæœ¬ï¼Œ JavaConfig å·²æ­£å¼æˆä¸º Spring4 çš„æ ¸å¿ƒåŠŸèƒ½ ã€‚</p>
<ol>
<li><p>å®ä½“ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String name=<span class="string">&quot;lhx&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»ºä¸€ä¸ª config é…ç½®åŒ…ï¼Œç¼–å†™ä¸€ä¸ª MyConfig é…ç½®ç±»</p>
<p>ä½¿ç”¨<code>@Configuration</code>å’Œ<code>@Bean</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">user</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æµ‹è¯•ï¼ˆæ³¨æ„ç¬¬ä¸€å¥è¯å’Œä»¥å‰ä¸ä¸€æ ·äº†ï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ApplicationContext context = <span class="keyword">new</span> AnnotationConfigApplicationContext(MyConfig.class);</span><br><span class="line">    User user = context.getBean(<span class="string">&quot;user&quot;</span>, User.class);</span><br><span class="line">    System.out.println(user.name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<hr>
<p><strong>å¦‚ä½•å¯¼å…¥å…¶ä»–é…ç½®ï¼Ÿ</strong></p>
<ol>
<li><p>å†å†™ä¸€ä¸ªé…ç½®ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig2</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨ä¹‹å‰çš„é…ç½®ç±»ä¸­é€‰æ‹©å¯¼å…¥è¿™ä¸ªé…ç½®ç±»</p>
<p>ä½¿ç”¨<code>@Import()</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@Import(MyConfig2.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">user</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<hr>
<p>å…³äºè¿™ç§ Java ç±»çš„é…ç½®æ–¹å¼ï¼Œåœ¨ä¹‹åçš„ Spring Boot å’Œ Spring Cloud ä¸­è¿˜ä¼šå¤§é‡çœ‹åˆ°ã€‚</p>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>æ³¨è§£</tag>
        <tag>Spring</tag>
        <tag>JavaConfig</tag>
      </tags>
  </entry>
  <entry>
    <title>09_ä»£ç†æ¨¡å¼</title>
    <url>/posts/308a33f9.html</url>
    <content><![CDATA[<h3 id="1-é™æ€ä»£ç†"><a href="#1-é™æ€ä»£ç†" class="headerlink" title="1. é™æ€ä»£ç†"></a>1. é™æ€ä»£ç†</h3><p><strong>é™æ€ä»£ç†è§’è‰²åˆ†æ</strong></p>
<ul>
<li>æŠ½è±¡è§’è‰²ï¼šä¸€èˆ¬ä½¿ç”¨æ¥å£æˆ–è€…æŠ½è±¡ç±»æ¥å®ç°</li>
<li>çœŸå®è§’è‰²ï¼šè¢«ä»£ç†çš„è§’è‰²</li>
<li>ä»£ç†è§’è‰²ï¼šä»£ç†çœŸå®è§’è‰²ï¼Œä¸€èˆ¬ä¼šåšä¸€äº›é™„å±çš„æ“ä½œ</li>
<li>å®¢æˆ·ï¼šä½¿ç”¨ä»£ç†è§’è‰²æ¥è¿›è¡Œä¸€äº›æ“ä½œ</li>
</ul>
<a id="more"></a>

<hr>
<p><strong>ä»£ç å®ç°</strong></p>
<ol>
<li><p>æŠ½è±¡è§’è‰²ï¼šæ¯”å¦‚å¹³æ—¶çš„ç”¨æˆ·ä¸šåŠ¡ï¼ŒæŠ½è±¡ä¹‹åå°±æ˜¯å¢åˆ æ”¹æŸ¥</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">query</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>çœŸå®å¯¹è±¡ï¼šå®Œæˆå¢åˆ æ”¹æŸ¥æ“ä½œ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å¢åŠ ä¸€ä¸ªç”¨æˆ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ é™¤ä¸€ä¸ªç”¨æˆ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¿®æ”¹ä¸€ä¸ªç”¨æˆ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">query</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æŸ¥è¯¢ä¸€ä¸ªç”¨æˆ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä»£ç†è§’è‰²ï¼šè®¾ç½®ä¸€ä¸ªä»£ç†ç±»ï¼Œä¸æ”¹å˜åŸæ¥çš„ä¸šåŠ¡ï¼Œå¢åŠ æ—¥å¿—åŠŸèƒ½</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">USerServiceProxy</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    UserServiceImpl userService;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserService</span><span class="params">(UserServiceImpl userService)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userService = userService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        log(<span class="string">&quot;add&quot;</span>);</span><br><span class="line">        userService.add();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        log(<span class="string">&quot;delete&quot;</span>);</span><br><span class="line">        userService.delete();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        log(<span class="string">&quot;update&quot;</span>);</span><br><span class="line">        userService.update();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">query</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        log(<span class="string">&quot;query&quot;</span>);</span><br><span class="line">        userService.query();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”Ÿæˆæ—¥å¿—</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">log</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;[Debug] ä½¿ç”¨äº†&quot;</span> + msg + <span class="string">&quot;æ–¹æ³•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æµ‹è¯•ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        UserServiceImpl service = <span class="keyword">new</span> UserServiceImpl();</span><br><span class="line">        USerServiceProxy proxy = <span class="keyword">new</span> USerServiceProxy();</span><br><span class="line">        proxy.setUserService(service);</span><br><span class="line">        proxy.add();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<hr>
<p><strong>é™æ€ä»£ç†çš„ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>å¯ä»¥ä½¿å¾—çœŸå®è§’è‰²æ›´åŠ çº¯ç²¹ï¼Œä¸å†å»å…³æ³¨ä¸€äº›å…¬å…±çš„äº‹æƒ…</li>
<li>å…¬å…±çš„ä¸šåŠ¡ç”±ä»£ç†æ¥å®Œæˆï¼Œå®ç°äº†ä¸šåŠ¡çš„åˆ†å·¥</li>
<li>å…¬å…±ä¸šåŠ¡å‘ç”Ÿæ‰©å±•æ—¶å˜å¾—æ›´åŠ é›†ä¸­å’Œæ–¹ä¾¿</li>
</ul>
<p><strong>ç¼ºç‚¹ :</strong></p>
<ul>
<li>ç±»å¤šäº†ï¼Œå¤šäº†ä»£ç†ç±»ï¼Œå·¥ä½œé‡å˜å¤§äº†ï¼Œå¼€å‘æ•ˆç‡é™ä½</li>
</ul>
<p>==æƒ³è¦é™æ€ä»£ç†çš„å¥½å¤„ï¼Œåˆä¸æƒ³è¦é™æ€ä»£ç†çš„ç¼ºç‚¹ï¼Œæ‰€ä»¥ , å°±æœ‰äº†åŠ¨æ€ä»£ç†==</p>
<h3 id="2-åŠ¨æ€ä»£ç†ï¼ˆé‡éš¾ç‚¹ï¼‰"><a href="#2-åŠ¨æ€ä»£ç†ï¼ˆé‡éš¾ç‚¹ï¼‰" class="headerlink" title="2. åŠ¨æ€ä»£ç†ï¼ˆé‡éš¾ç‚¹ï¼‰"></a>2. åŠ¨æ€ä»£ç†ï¼ˆé‡éš¾ç‚¹ï¼‰</h3><ul>
<li>åŠ¨æ€ä»£ç†çš„è§’è‰²å’Œé™æ€ä»£ç†çš„ä¸€æ ·</li>
<li>åŠ¨æ€ä»£ç†çš„ä»£ç†ç±»æ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œé™æ€ä»£ç†çš„ä»£ç†ç±»æ˜¯æˆ‘ä»¬æå‰å†™å¥½çš„</li>
<li>åŠ¨æ€ä»£ç†åˆ†ä¸ºä¸¤ç±»ï¼šä¸€ç±»æ˜¯åŸºäº<strong>æ¥å£</strong>åŠ¨æ€ä»£ç† ï¼Œä¸€ç±»æ˜¯åŸºäº<strong>ç±»</strong>çš„åŠ¨æ€ä»£ç†<ul>
<li>åŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†ï¼šJDKåŠ¨æ€ä»£ç†</li>
<li>åŸºäºç±»çš„åŠ¨æ€ä»£ç†ï¼šCGLib</li>
<li>ç°åœ¨ç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯ JAVAsist æ¥ç”ŸæˆåŠ¨æ€ä»£ç†</li>
<li>æˆ‘ä»¬è¿™é‡Œä½¿ç”¨ JDK çš„åŸç”Ÿä»£ç æ¥å®ç°ï¼Œå…¶ä½™çš„é“ç†éƒ½æ˜¯ä¸€æ ·çš„</li>
</ul>
</li>
</ul>
<hr>
<p><strong>JDK çš„åŠ¨æ€ä»£ç†éœ€è¦äº†è§£ä¸¤ä¸ªç±»</strong><code>InvocationHandler</code>å’Œ<code>Proxy</code></p>
<ol>
<li><p><code>InvocationHandler</code>ï¼šè°ƒç”¨å¤„ç†ç¨‹åº</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¤„ç†ä»£ç†å®ä¾‹ä¸Šçš„æ–¹æ³•è°ƒç”¨å¹¶è¿”å›ç»“æœ</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> proxy  ä»£ç†ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> method ä»£ç†ç±»çš„è°ƒç”¨å¤„ç†ç¨‹åºçš„æ–¹æ³•å¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> Throwable</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">    <span class="comment">// åŠ¨æ€ä»£ç†çš„æœ¬è´¨, å°±æ˜¯ä½¿ç”¨åå°„æœºåˆ¶å®ç°</span></span><br><span class="line">    Object result = method.invoke(rent, args);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Proxy</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”Ÿæˆä»£ç†ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> ä»£ç†ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">getProxy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Proxy.newProxyInstance(<span class="keyword">this</span>.getClass().getClassLoader(), rent.getClass().getInterfaces(), <span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<hr>
<p><strong>ä»£ç å®ç°</strong></p>
<ol>
<li><p>æŠ½è±¡è§’è‰²</p>
<p>ä¸å˜</p>
</li>
<li><p>çœŸå®è§’è‰²</p>
<p>ä¸å˜</p>
</li>
<li><p>ä»£ç†è§’è‰²ï¼ˆä¸‡èƒ½çš„ï¼‰ï¼Œåé¢å¢åŠ æ—¥å¿—åŠŸèƒ½</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨äºè‡ªåŠ¨ç”Ÿæˆä»£ç†ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Horsen</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyInvocationHandler</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¢«ä»£ç†çš„æ¥å£</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Object target;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTarget</span><span class="params">(Object target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.target = target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆä»£ç†ç±»</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ä»£ç†ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getProxy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Proxy.newProxyInstance(<span class="keyword">this</span>.getClass().getClassLoader(), target.getClass().getInterfaces(), <span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤„ç†ä»£ç†å®ä¾‹ä¸Šçš„æ–¹æ³•è°ƒç”¨å¹¶è¿”å›ç»“æœ</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> proxy  ä»£ç†ç±»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> method ä»£ç†ç±»çš„è°ƒç”¨å¤„ç†ç¨‹åºçš„æ–¹æ³•å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Throwable</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        <span class="comment">// åŠ¨æ€ä»£ç†çš„æœ¬è´¨, å°±æ˜¯ä½¿ç”¨åå°„æœºåˆ¶å®ç°</span></span><br><span class="line">        log(method.getName());</span><br><span class="line">        Object result = method.invoke(target, args);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">log</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;[log] æ‰§è¡Œäº†&quot;</span> + msg + <span class="string">&quot;æ–¹æ³•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®¢æˆ·</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// çœŸå®è§’è‰²</span></span><br><span class="line">        UserServiceImpl userService = <span class="keyword">new</span> UserServiceImpl();</span><br><span class="line">        <span class="comment">// ä»£ç†å®ä¾‹çš„è°ƒç”¨å¤„ç†ç¨‹åº</span></span><br><span class="line">        ProxyInvocationHandler handler = <span class="keyword">new</span> ProxyInvocationHandler();</span><br><span class="line">        <span class="comment">// è®¾ç½®è¦ä»£ç†çš„å¯¹è±¡</span></span><br><span class="line">        handler.setTarget(userService);</span><br><span class="line">        <span class="comment">// åŠ¨æ€ç”Ÿæˆä»£ç†ç±»</span></span><br><span class="line">        UserService proxy = (UserService) handler.getProxy();</span><br><span class="line">        proxy.add();</span><br><span class="line">        proxy.delete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<hr>
<p><strong>åŠ¨æ€ä»£ç†çš„ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>å¯ä»¥ä½¿å¾—çœŸå®è§’è‰²æ›´åŠ çº¯ç²¹ï¼Œä¸å†å»å…³æ³¨ä¸€äº›å…¬å…±çš„äº‹æƒ…</li>
<li>å…¬å…±çš„ä¸šåŠ¡ç”±ä»£ç†æ¥å®Œæˆï¼Œå®ç°äº†ä¸šåŠ¡çš„åˆ†å·¥</li>
<li>å…¬å…±ä¸šåŠ¡å‘ç”Ÿæ‰©å±•æ—¶å˜å¾—æ›´åŠ é›†ä¸­å’Œæ–¹ä¾¿</li>
<li>ä¸€ä¸ªåŠ¨æ€ä»£ç†ï¼Œä¸€èˆ¬ä»£ç†æŸä¸€ç±»ä¸šåŠ¡</li>
<li>ä¸€ä¸ªåŠ¨æ€ä»£ç†å¯ä»¥ä»£ç†å¤šä¸ªç±»ï¼Œä»£ç†çš„æ˜¯æ¥å£</li>
</ul>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Spring</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>åŠ¨æ€ä»£ç†</tag>
      </tags>
  </entry>
  <entry>
    <title>10_AOP</title>
    <url>/posts/21793710.html</url>
    <content><![CDATA[<h3 id="1-ä»€ä¹ˆæ˜¯-AOP"><a href="#1-ä»€ä¹ˆæ˜¯-AOP" class="headerlink" title="1. ä»€ä¹ˆæ˜¯ AOP"></a>1. ä»€ä¹ˆæ˜¯ AOP</h3><p>AOPï¼ˆAspect Oriented Programmingï¼‰æ„ä¸ºï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œé€šè¿‡é¢„ç¼–è¯‘æ–¹å¼å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯ã€‚AOP æ˜¯ OOP çš„å»¶ç»­ï¼Œæ˜¯è½¯ä»¶å¼€å‘ä¸­çš„ä¸€ä¸ªçƒ­ç‚¹ï¼Œä¹Ÿæ˜¯ Spring æ¡†æ¶ä¸­çš„ä¸€ä¸ªé‡è¦å†…å®¹ï¼Œæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ç§è¡ç”ŸèŒƒå‹ã€‚åˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚</p>
<img src="/posts/21793710/AOP.jpg" class>

<a id="more"></a>



<h3 id="2-AOP-åœ¨-Spring-ä¸­çš„ä½œç”¨"><a href="#2-AOP-åœ¨-Spring-ä¸­çš„ä½œç”¨" class="headerlink" title="2. AOP åœ¨ Spring ä¸­çš„ä½œç”¨"></a>2. AOP åœ¨ Spring ä¸­çš„ä½œç”¨</h3><p><strong>æä¾›å£°æ˜å¼äº‹åŠ¡ï¼›å…è®¸ç”¨æˆ·è‡ªå®šä¹‰åˆ‡é¢</strong></p>
<p>ä»¥ä¸‹åè¯éœ€è¦äº†è§£</p>
<ul>
<li>æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼šè·¨è¶Šåº”ç”¨ç¨‹åºå¤šä¸ªæ¨¡å—çš„æ–¹æ³•æˆ–åŠŸèƒ½ã€‚å³æ˜¯ï¼Œä¸æˆ‘ä»¬ä¸šåŠ¡é€»è¾‘æ— å…³çš„ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦å…³æ³¨çš„éƒ¨åˆ†ï¼Œå°±æ˜¯æ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚å¦‚æ—¥å¿— , å®‰å…¨ , ç¼“å­˜ , äº‹åŠ¡ç­‰ç­‰ â€¦.</li>
<li>åˆ‡é¢ï¼ˆAspectï¼‰ï¼šæ¨ªåˆ‡å…³æ³¨ç‚¹è¢«æ¨¡å—åŒ–çš„ç‰¹æ®Šå¯¹è±¡ã€‚å³ä¸€ä¸ªç±»ã€‚</li>
<li>é€šçŸ¥ï¼ˆAdviceï¼‰ï¼šåˆ‡é¢å¿…é¡»è¦å®Œæˆçš„å·¥ä½œã€‚å³ç±»ä¸­çš„ä¸€ä¸ªæ–¹æ³•ã€‚</li>
<li>ç›®æ ‡ï¼ˆTargetï¼‰ï¼šè¢«é€šçŸ¥å¯¹è±¡ã€‚</li>
<li>ä»£ç†ï¼ˆProxyï¼‰ï¼šå‘ç›®æ ‡å¯¹è±¡åº”ç”¨é€šçŸ¥ä¹‹ååˆ›å»ºçš„å¯¹è±¡ã€‚</li>
<li>åˆ‡å…¥ç‚¹ï¼ˆPointCutï¼‰ï¼šåˆ‡é¢é€šçŸ¥æ‰§è¡Œçš„ â€œåœ°ç‚¹â€çš„å®šä¹‰ã€‚</li>
<li>è¿æ¥ç‚¹ï¼ˆJointPointï¼‰ï¼šä¸åˆ‡å…¥ç‚¹åŒ¹é…çš„æ‰§è¡Œç‚¹ã€‚</li>
</ul>
<hr>
<p>Spring AOP ä¸­ï¼Œé€šè¿‡ Advice å®šä¹‰æ¨ªåˆ‡é€»è¾‘ï¼ŒSpringä¸­æ”¯æŒ5ç§ç±»å‹çš„ Adviceï¼š</p>
<table>
<thead>
<tr>
<th>é€šçŸ¥ç±»å‹</th>
<th>è¿æ¥ç‚¹</th>
<th>å®ç°æ¥å£</th>
</tr>
</thead>
<tbody><tr>
<td>å‰ç½®é€šçŸ¥</td>
<td>æ–¹æ³•å‰</td>
<td><code>org.springframework.aop.MethodBeforeAdvice</code></td>
</tr>
<tr>
<td>åç½®é€šçŸ¥</td>
<td>æ–¹æ³•å</td>
<td><code>org.springframework .aop.AfterReturningAdvice</code></td>
</tr>
<tr>
<td>ç¯ç»•é€šçŸ¥</td>
<td>æ–¹æ³•å‰å</td>
<td><code>org.aopalliance.intercept.MethodInterceptor</code></td>
</tr>
<tr>
<td>å¼‚å¸¸æŠ›å‡ºé€šçŸ¥</td>
<td>æ–¹æ³•æŠ›å‡ºä¸€åœº</td>
<td><code>org.springframework.aop.ThrowsAdvice</code></td>
</tr>
<tr>
<td>å¼•ä»‹é€šçŸ¥</td>
<td>ç±»ä¸­å¢åŠ æ–°çš„æ–¹æ³•å±æ€§</td>
<td><code>org.springframework .aop.IntroductionInterceptor</code></td>
</tr>
</tbody></table>
<p>å³ AOP åœ¨ä¸æ”¹å˜åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹ï¼Œå»å¢åŠ æ–°çš„åŠŸèƒ½</p>
<h3 id="3-ä½¿ç”¨-Spring-å®ç°-AOP"><a href="#3-ä½¿ç”¨-Spring-å®ç°-AOP" class="headerlink" title="3. ä½¿ç”¨ Spring å®ç° AOP"></a>3. ä½¿ç”¨ Spring å®ç° AOP</h3><p>éœ€è¦å¯¼å…¥ä¸€ä¸ªä¾èµ–åŒ…</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="3-1-ä½¿ç”¨åŸç”Ÿçš„-Spring-API-æ¥å£"><a href="#3-1-ä½¿ç”¨åŸç”Ÿçš„-Spring-API-æ¥å£" class="headerlink" title="3.1 ä½¿ç”¨åŸç”Ÿçš„ Spring API æ¥å£"></a>3.1 ä½¿ç”¨åŸç”Ÿçš„ Spring API æ¥å£</h4><ol>
<li><p>ä¸šåŠ¡æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">select</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®ç°ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å¢åŠ äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ é™¤äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ›´æ–°äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">select</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æŸ¥è¯¢äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>å‰ç½®é€šçŸ¥</code>å’Œ<code>åç½®é€šçŸ¥</code>ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BeforeLog</span> <span class="keyword">implements</span> <span class="title">MethodBeforeAdvice</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¦æ‰§è¡Œçš„ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> method æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args   å‚æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> target ç›®æ ‡å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Throwable</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">(Method method, Object[] args, Object target)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;[Log] &quot;</span>+target.getClass().getName() + <span class="string">&quot;çš„&quot;</span> + method.getName() + <span class="string">&quot;æ–¹æ³•è¢«æ‰§è¡Œäº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AfterLog</span> <span class="keyword">implements</span> <span class="title">AfterReturningAdvice</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> returnValue è¿”å›å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> method æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args å‚æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> target ç›®æ ‡å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Throwable</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturning</span><span class="params">(Object returnValue, Method method, Object[] args, Object target)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;[Log] æ‰§è¡Œäº†&quot;</span>+ method.getName()+<span class="string">&quot;æ–¹æ³•, è¿”å›å€¼ä¸º&quot;</span>+returnValue);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨ Spring çš„é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œï¼Œå®ç° AOP åˆ‡å…¥ï¼Œæ³¨æ„å¯¼å…¥çº¦æŸ </p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ–¹å¼ä¸€: ä½¿ç”¨åŸç”Ÿçš„Spring APIæ¥å£ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ³¨å†Œbean --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.service.UserServiceImpl&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;beforeLog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.log.BeforeLog&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;afterLog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.log.AfterLog&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®aop --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åˆ‡å…¥ç‚¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.horsen.service.UserServiceImpl.*(..))&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ‰§è¡Œç¯ç»•å¢åŠ  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;beforeLog&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;afterLog&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æµ‹è¯•ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">    <span class="comment">// åŠ¨æ€ä»£ç† ä»£ç†çš„æ˜¯æ¥å£ è€Œä¸æ˜¯å®ç°ç±»</span></span><br><span class="line">    UserService userService = context.getBean(<span class="string">&quot;userService&quot;</span>, UserService.class);</span><br><span class="line">    userService.add();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h4 id="3-2-ä½¿ç”¨è‡ªå®šä¹‰ç±»å®ç°-AOP"><a href="#3-2-ä½¿ç”¨è‡ªå®šä¹‰ç±»å®ç°-AOP" class="headerlink" title="3.2 ä½¿ç”¨è‡ªå®šä¹‰ç±»å®ç° AOP"></a>3.2 ä½¿ç”¨è‡ªå®šä¹‰ç±»å®ç° AOP</h4><ol>
<li><p>ä¸šåŠ¡æ¥å£</p>
<p>ä¸å˜</p>
</li>
<li><p>è‡ªå®šä¹‰ä¸€ä¸ªç±»ï¼Œä½œä¸º<code>åˆ‡é¢</code>ã€‚ç±»ä¸­çš„æ–¹æ³•å°±æ˜¯<code>é€šçŸ¥</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DiyPointCut</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;========æ–¹æ³•æ‰§è¡Œå‰========&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;========æ–¹æ³•æ‰§è¡Œå========&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨ Spring çš„é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ–¹å¼äºŒ: è‡ªå®šä¹‰ä¸€ä¸ªç±»ä½œä¸ºåˆ‡é¢--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ³¨å†Œbean --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;diy&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.diy.DiyPointCut&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è‡ªå®šä¹‰åˆ‡é¢ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;diy&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åˆ‡å…¥ç‚¹ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;point&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.horsen.service.UserServiceImpl.*(..))&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é€šçŸ¥ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;before&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;point&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">&quot;after&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;point&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ol>
<h4 id="3-3-ä½¿ç”¨æ³¨è§£å®ç°-AOP"><a href="#3-3-ä½¿ç”¨æ³¨è§£å®ç°-AOP" class="headerlink" title="3.3 ä½¿ç”¨æ³¨è§£å®ç° AOP"></a>3.3 ä½¿ç”¨æ³¨è§£å®ç° AOP</h4><ol>
<li><p>ä¸šåŠ¡æ¥å£</p>
<p>ä¸å˜</p>
</li>
<li><p>è‡ªå®šä¹‰ä¸€ä¸ªç±»ï¼Œé€šè¿‡æ³¨è§£å®ç°</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnnotationPointCut</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Before(&quot;execution(* com.horsen.service.UserServiceImpl.*(..))&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;----------æ–¹æ³•æ‰§è¡Œå‰----------&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After(&quot;execution(* com.horsen.service.UserServiceImpl.*(..))&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;----------æ–¹æ³•æ‰§è¡Œå----------&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åœ¨ç¯ç»•å¢å¼ºä¸­, æˆ‘ä»¬å¯ä»¥ç»™å®šä¸€ä¸ªå‚æ•°, ä»£è¡¨æˆ‘ä»¬è¦è·å–å¤„ç†åˆ‡å…¥çš„ç‚¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Around(&quot;execution(* com.horsen.service.UserServiceImpl.*(..))&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">around</span><span class="params">(ProceedingJoinPoint joinPoint)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç¯ç»•å‰&quot;</span>);</span><br><span class="line">        <span class="comment">// è·å¾—ç­¾å</span></span><br><span class="line">        Signature signature = joinPoint.getSignature();</span><br><span class="line">        System.out.println(<span class="string">&quot;ç­¾å: &quot;</span>+signature);</span><br><span class="line">        <span class="comment">// æ‰§è¡Œæ–¹æ³•</span></span><br><span class="line">        Object proceed = joinPoint.proceed();</span><br><span class="line">        System.out.println(<span class="string">&quot;ç¯ç»•å&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨ Spring çš„é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ–¹å¼ä¸‰: ä½¿ç”¨æ³¨è§£å®ç° AOP --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;annotationPointCut&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.diy.AnnotationPointCut&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¼€å¯æ³¨è§£æ”¯æŒ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>/&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Spring</tag>
        <tag>AOP</tag>
      </tags>
  </entry>
  <entry>
    <title>11_æ•´åˆ Mybatis</title>
    <url>/posts/8f7c908e.html</url>
    <content><![CDATA[<h3 id="1-å›å¿†-Mybatis"><a href="#1-å›å¿†-Mybatis" class="headerlink" title="1. å›å¿† Mybatis"></a>1. å›å¿† Mybatis</h3><ol>
<li><p>ç¼–å†™å®ä½“ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<a id="more"></a>
</li>
<li><p>ç¼–å†™æ ¸å¿ƒé…ç½®æ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--configurationæ ¸å¿ƒé…ç½®æ–‡ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å…³è”æ‰€æœ‰å®ä½“ç±»(è®¾ç½®åˆ«å) --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.horsen.model&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- è¿™ä¸ªéƒ¨åˆ†åœ¨æ•´åˆä¹‹åå°±æ²¡æœ‰äº† --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span></span></span><br><span class="line"><span class="tag">                          <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=false<span class="symbol">&amp;amp;</span>useUnicode=false<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å…³è”æ‰€æœ‰mapperç±» --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è¿™ä¸ªéƒ¨åˆ†åœ¨æ•´åˆä¹‹åä¹Ÿå¯ä»¥ä¸è¦ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.horsen.mapper&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™æ¥å£</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">public interface UserMapper &#123;</span><br><span class="line">    public List<span class="tag">&lt;<span class="name">User</span>&gt;</span> selectUser();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™ Mapper.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.horsen.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectUser&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">        select *</span><br><span class="line">        from mybatis.user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">    UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    List&lt;User&gt; userList = mapper.selectUser();</span><br><span class="line">    <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="2-MyBatis-Spring-å­¦ä¹ "><a href="#2-MyBatis-Spring-å­¦ä¹ " class="headerlink" title="2. MyBatis-Spring å­¦ä¹ "></a>2. MyBatis-Spring å­¦ä¹ </h3><blockquote>
<p>å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<a href="http://mybatis.org/spring/zh/index.html">http://mybatis.org/spring/zh/index.html</a></p>
</blockquote>
<h3 id="3-æ•´åˆå®ç°"><a href="#3-æ•´åˆå®ç°" class="headerlink" title="3. æ•´åˆå®ç°"></a>3. æ•´åˆå®ç°</h3><ol>
<li><p>å¯¼å…¥ç›¸å…³ jar åŒ…</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- junit --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- mysql --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- mybatis --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- spring --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- springæ“ä½œæ•°æ®åº“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- aopç»‡å…¥å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- spring-mybatisæ•´åˆåŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- lombok --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>é…ç½® Maven é™æ€èµ„æºè¿‡æ»¤é—®é¢˜</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>




</li>
</ol>
<h4 id="3-1-æ–¹å¼ä¸€ï¼šä½¿ç”¨-SqlSessionTemplete"><a href="#3-1-æ–¹å¼ä¸€ï¼šä½¿ç”¨-SqlSessionTemplete" class="headerlink" title="3.1 æ–¹å¼ä¸€ï¼šä½¿ç”¨ SqlSessionTemplete"></a>3.1 æ–¹å¼ä¸€ï¼šä½¿ç”¨ SqlSessionTemplete</h4><ol>
<li><p>æ–°å»ºæ–‡ä»¶ spring-dao.xml ç”¨äºæ“ä½œæ•°æ®åº“å’Œç”Ÿæˆ<code>SqlSessionTemplate</code></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>é…ç½®<code>Datasource</code>æ•°æ®æºï¼Œæ›¿æ¢ Mybatis çš„æ•°æ®æº</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment"> DataSource: ä½¿ç”¨Springçš„æ•°æ®æºæ›¿æ¢Mybatisçš„é…ç½®</span></span><br><span class="line"><span class="comment"> è¿™é‡Œä½¿ç”¨Springæä¾›çš„JDBC</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=false<span class="symbol">&amp;amp;</span>useUnicode=false<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>é…ç½®<code>SqlSessionFactory</code>ï¼Œå¹¶å…³è” MyBatis</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- SqlSessionFactory --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç»‘å®šMybatisé…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:com/horsen/mapper/*.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æ³¨å†Œ<code>SqlSessionTemplate</code>ï¼Œå…³è”<code>SqlSessionFactory</code></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- SqlSessionTemplate --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionTemplate&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å› ä¸ºSqlSessionTemplateæ²¡æœ‰setæ–¹æ³•, æ‰€ä»¥åªèƒ½ç”¨æ„é€ å™¨æ³¨å…¥ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionFactory&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»ºä¸€ä¸ªæ¥å£çš„å®ç°ç±»ï¼Œç§æœ‰åŒ–<code>SqlSessionTemplate</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserMapperImpl</span> <span class="keyword">implements</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åŸæ¥æ‰€æœ‰çš„æ“ä½œéƒ½ä½¿ç”¨sqlSessionæ¥æ‰§è¡Œ ç°åœ¨éƒ½ä½¿ç”¨sqlSessionTemplate</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> SqlSessionTemplate sqlSessionTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSqlSessionTemplate</span><span class="params">(SqlSessionTemplate sqlSessionTemplate)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sqlSessionTemplate = sqlSessionTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">selectUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        UserMapper mapper = sqlSessionTemplate.getMapper(UserMapper.class);</span><br><span class="line">        <span class="keyword">return</span> mapper.selectUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨ applicationContext.xml æ³¨å†Œè¿™ä¸ª beanï¼Œå¹¶å¯¼å…¥ spring-dao.xml ä¸­çš„å†…å®¹</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;spring-dao.xml&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userMapper&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.mapper.UserMapperImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionTemplate&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionTemplate&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">    UserMapper userMapper = context.getBean(<span class="string">&quot;userMapper&quot;</span>, UserMapper.class);</span><br><span class="line">    <span class="keyword">for</span> (User user : userMapper.selectUser()) &#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<hr>
<p>æ­¤æ—¶æ­¤åˆ»ï¼Œmybatis.xml æ–‡ä»¶ä¸­å°±å¯ä»¥åªå†™è¿™äº›ä¸œè¥¿ï¼Œå‰©ä¸‹çš„äº‹æƒ…éƒ½äº¤ç»™ Spring æ¥åšäº†</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--configurationæ ¸å¿ƒé…ç½®æ–‡ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å…³è”æ‰€æœ‰å®ä½“ç±»(è®¾ç½®åˆ«å) --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.horsen.model&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä¹Ÿä¸å†éœ€è¦ Mybatis çš„å·¥å…·ç±»äº†</p>
<h4 id="3-2-æ–¹å¼äºŒï¼šä½¿ç”¨-SqlSessionDaoSupport"><a href="#3-2-æ–¹å¼äºŒï¼šä½¿ç”¨-SqlSessionDaoSupport" class="headerlink" title="3.2 æ–¹å¼äºŒï¼šä½¿ç”¨ SqlSessionDaoSupport"></a>3.2 æ–¹å¼äºŒï¼šä½¿ç”¨ SqlSessionDaoSupport</h4><ol>
<li><p>ä¿®æ”¹ä¸€ä¸‹æ¥å£çš„å®ç°ç±»ï¼Œç»§æ‰¿<code>SqlSessionDaoSupport</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserMapperImpl</span> <span class="keyword">extends</span> <span class="title">SqlSessionDaoSupport</span> <span class="keyword">implements</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">selectUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getSqlSession().getMapper(UserMapper.class).selectUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿®æ”¹ bean çš„é…ç½®</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userMapper&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.mapper.UserMapperImpl&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionFactory&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<hr>
<p>è¿™ç§æ–¹æ³•ä¸éœ€è¦æ‰‹åŠ¨æ³¨å…¥<code>SqlsessionTemplate</code>ï¼Œä¹Ÿå°±æ˜¯è¯´ spring-dao.xml ä¸­å…³äº<code>SqlsessionTemplete</code>å°±ä¸éœ€è¦å†™äº†</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- SqlSessionTemplate --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionTemplate&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å› ä¸ºSqlSessionTemplateæ²¡æœ‰setæ–¹æ³•, æ‰€ä»¥åªèƒ½ç”¨æ„é€ å™¨æ³¨å…¥ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionFactory&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="4-å°ç»“"><a href="#4-å°ç»“" class="headerlink" title="4. å°ç»“"></a>4. å°ç»“</h3><p>æ•´åˆä¹‹åçš„é¡¹ç›®å¼€å‘é€»è¾‘æ¢³ç†è¯¦è§è§†é¢‘ï¼š</p>
<blockquote>
<p>4:30 å¼€å§‹ <a href="https://www.bilibili.com/video/BV1WE411d7Dv?p=26">https://www.bilibili.com/video/BV1WE411d7Dv?p=26</a></p>
</blockquote>
<p>è¿™é‡Œç®€å•ç»™å‡ºæ­¥éª¤ï¼š</p>
<ol>
<li>pom.xml å¯¼å…¥ä¾èµ–</li>
<li>æ–°å»ºåŒ…ï¼Œæ–°å»ºå®ä½“ç±»ï¼Œæ–°å»ºæ¥å£ï¼Œè®¾è®¡ä¸šåŠ¡éœ€æ±‚</li>
<li>é…ç½® mybatis-config.xml</li>
<li>é…ç½® spring-dao.xml</li>
<li>Mapper.xml å®ç°æ¥å£</li>
<li>æ¥å£çš„å®ç°ç±»ï¼Œè´Ÿè´£ç§æœ‰åŒ–<code>SqlSessionTemplate</code>ï¼ˆæˆ–è€…ç”¨<code>SqlsessionDaoSupport</code>ï¼‰</li>
<li>applicationContext.xml ä¸­æ³¨å…¥è¿™ä¸ªç±»</li>
<li>æµ‹è¯•ç±»</li>
</ol>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Mybatis</tag>
        <tag>ç¯å¢ƒæ­å»º</tag>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>12_å£°æ˜å¼äº‹åŠ¡</title>
    <url>/posts/6bf2e383.html</url>
    <content><![CDATA[<h3 id="1-å›é¡¾äº‹åŠ¡"><a href="#1-å›é¡¾äº‹åŠ¡" class="headerlink" title="1. å›é¡¾äº‹åŠ¡"></a>1. å›é¡¾äº‹åŠ¡</h3><ul>
<li>äº‹åŠ¡åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹éå¸¸é‡è¦ï¼Œæ¶‰åŠåˆ°æ•°æ®çš„ä¸€è‡´æ€§çš„é—®é¢˜ï¼Œä¸å®¹é©¬è™</li>
<li>äº‹åŠ¡ç®¡ç†æ˜¯ä¼ä¸šçº§åº”ç”¨ç¨‹åºå¼€å‘ä¸­å¿…å¤‡æŠ€æœ¯ï¼Œç”¨æ¥ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§</li>
</ul>
<hr>
<p>äº‹åŠ¡çš„å››ä¸ªå±æ€§ <strong>ACID</strong></p>
<ul>
<li><p><strong>åŸå­æ€§ï¼ˆAtomicityï¼‰ï¼š</strong>äº‹åŠ¡æ˜¯åŸå­æ€§æ“ä½œï¼Œç”±ä¸€ç³»åˆ—åŠ¨ä½œç»„æˆï¼Œäº‹åŠ¡çš„åŸå­æ€§ç¡®ä¿åŠ¨ä½œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå®Œå…¨ä¸èµ·ä½œç”¨</p>
</li>
<li><p><strong>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼š</strong>ä¸€æ—¦æ‰€æœ‰äº‹åŠ¡åŠ¨ä½œå®Œæˆï¼Œäº‹åŠ¡å°±è¦è¢«æäº¤ã€‚æ•°æ®å’Œèµ„æºå¤„äºä¸€ç§æ»¡è¶³ä¸šåŠ¡è§„åˆ™çš„ä¸€è‡´æ€§çŠ¶æ€ä¸­</p>
</li>
<li><p><strong>éš”ç¦»æ€§ï¼ˆIsolationï¼‰ï¼š</strong>å¯èƒ½å¤šä¸ªäº‹åŠ¡ä¼šåŒæ—¶å¤„ç†ç›¸åŒçš„æ•°æ®ï¼Œå› æ­¤æ¯ä¸ªäº‹åŠ¡éƒ½åº”è¯¥ä¸å…¶ä»–äº‹åŠ¡éš”ç¦»å¼€æ¥ï¼Œé˜²æ­¢æ•°æ®æŸå</p>
</li>
<li><p><strong>æŒä¹…æ€§ï¼ˆDurabilityï¼‰ï¼š</strong>äº‹åŠ¡ä¸€æ—¦å®Œæˆï¼Œæ— è®ºç³»ç»Ÿå‘ç”Ÿä»€ä¹ˆé”™è¯¯ï¼Œç»“æœéƒ½ä¸ä¼šå—åˆ°å½±å“ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œäº‹åŠ¡çš„ç»“æœè¢«å†™åˆ°æŒä¹…åŒ–å­˜å‚¨å™¨ä¸­</p>
</li>
</ul>
<a id="more"></a>



<h3 id="2-Spring-ä¸­çš„äº‹åŠ¡ç®¡ç†"><a href="#2-Spring-ä¸­çš„äº‹åŠ¡ç®¡ç†" class="headerlink" title="2. Spring ä¸­çš„äº‹åŠ¡ç®¡ç†"></a>2. Spring ä¸­çš„äº‹åŠ¡ç®¡ç†</h3><h4 id="2-1-ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰"><a href="#2-1-ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰" class="headerlink" title="2.1 ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰"></a>2.1 ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰</h4><ul>
<li>å°†äº‹åŠ¡ç®¡ç†ä»£ç åµŒåˆ°ä¸šåŠ¡æ–¹æ³•ä¸­æ¥æ§åˆ¶äº‹åŠ¡çš„æäº¤å’Œå›æ»š</li>
<li>ç¼ºç‚¹ï¼šå¿…é¡»åœ¨æ¯ä¸ªäº‹åŠ¡æ“ä½œä¸šåŠ¡é€»è¾‘ä¸­åŒ…å«é¢å¤–çš„äº‹åŠ¡ç®¡ç†ä»£ç </li>
</ul>
<h4 id="2-2-å£°æ˜å¼äº‹åŠ¡ç®¡ç†"><a href="#2-2-å£°æ˜å¼äº‹åŠ¡ç®¡ç†" class="headerlink" title="2.2 å£°æ˜å¼äº‹åŠ¡ç®¡ç†"></a>2.2 å£°æ˜å¼äº‹åŠ¡ç®¡ç†</h4><ul>
<li>ä¸€èˆ¬æƒ…å†µä¸‹æ¯”ç¼–ç¨‹å¼äº‹åŠ¡å¥½ç”¨</li>
<li>å°†äº‹åŠ¡ç®¡ç†ä»£ç ä»ä¸šåŠ¡æ–¹æ³•ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œä»¥å£°æ˜çš„æ–¹å¼æ¥å®ç°äº‹åŠ¡ç®¡ç†</li>
<li>å°†äº‹åŠ¡ç®¡ç†ä½œä¸ºæ¨ªåˆ‡å…³æ³¨ç‚¹ï¼Œé€šè¿‡ AOP æ–¹æ³•æ¨¡å—åŒ–ã€‚Spring ä¸­é€šè¿‡ Spring AOPæ¡† æ¶æ”¯æŒå£°æ˜å¼äº‹åŠ¡ç®¡ç†</li>
</ul>
<hr>
<p><strong>Spring äº‹åŠ¡ä¼ æ’­ç‰¹æ€§ï¼š</strong></p>
<p>äº‹åŠ¡ä¼ æ’­è¡Œä¸ºå°±æ˜¯å¤šä¸ªäº‹åŠ¡æ–¹æ³•ç›¸äº’è°ƒç”¨æ—¶ï¼Œäº‹åŠ¡å¦‚ä½•åœ¨è¿™äº›æ–¹æ³•é—´ä¼ æ’­ã€‚Spring æ”¯æŒ7ç§äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼š</p>
<ul>
<li><strong>REQUIREDï¼ˆé»˜è®¤ï¼‰</strong>ï¼šå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œå°±æ–°å»ºä¸€ä¸ªäº‹åŠ¡ï¼Œå¦‚æœå·²å­˜åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼ŒåŠ å…¥åˆ°è¿™ä¸ªäº‹åŠ¡ä¸­ï¼Œè¿™æ˜¯æœ€å¸¸è§çš„é€‰æ‹©ã€‚</li>
<li><strong>SUPPORTS</strong>ï¼šæ”¯æŒå½“å‰äº‹åŠ¡ï¼Œå¦‚æœæ²¡æœ‰å½“å‰äº‹åŠ¡ï¼Œå°±ä»¥éäº‹åŠ¡æ–¹æ³•æ‰§è¡Œã€‚</li>
<li><strong>MANDATORY</strong>ï¼šä½¿ç”¨å½“å‰äº‹åŠ¡ï¼Œå¦‚æœæ²¡æœ‰å½“å‰äº‹åŠ¡ï¼Œå°±æŠ›å‡ºå¼‚å¸¸ã€‚</li>
<li><strong>REQUIRES_NEW</strong>ï¼šæ–°å»ºäº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼ŒæŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚</li>
<li><strong>NOT_SUPPORTED</strong>ï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œæ“ä½œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚</li>
<li><strong>NEVER</strong>ï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œæ“ä½œï¼Œå¦‚æœå½“å‰äº‹åŠ¡å­˜åœ¨åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</li>
<li><strong>NESTED</strong>ï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åœ¨åµŒå¥—äº‹åŠ¡å†…æ‰§è¡Œã€‚å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æ‰§è¡Œä¸propagation_requiredç±»ä¼¼çš„æ“ä½œã€‚</li>
</ul>
<p>å‡è®¾ ServiveX#methodX() éƒ½å·¥ä½œåœ¨äº‹åŠ¡ç¯å¢ƒä¸‹ï¼ˆå³éƒ½è¢« Spring äº‹åŠ¡å¢å¼ºäº†ï¼‰ï¼Œå‡è®¾ç¨‹åºä¸­å­˜åœ¨å¦‚ä¸‹çš„è°ƒç”¨é“¾ï¼šService1#method1() â€“&gt; Service2#method2() â€“&gt; Service3#method3()ï¼Œé‚£ä¹ˆè¿™ 3 ä¸ªæœåŠ¡ç±»çš„ 3 ä¸ªæ–¹æ³•é€šè¿‡ Spring çš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶éƒ½å·¥ä½œåœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ã€‚</p>
<p><em>å°±å¥½æ¯”ï¼Œæˆ‘ä»¬åˆšæ‰çš„å‡ ä¸ªæ–¹æ³•å­˜åœ¨è°ƒç”¨ï¼Œæ‰€ä»¥ä¼šè¢«æ”¾åœ¨ä¸€ç»„äº‹åŠ¡å½“ä¸­ï¼</em></p>
<hr>
<ol>
<li><p>spring-dao.xml ä¸­å¯¼å…¥çº¦æŸ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">xmlns:tx=&quot;http://www.springframework.org/schema/tx</span><br><span class="line"> </span><br><span class="line">http://www.springframework.org/schema/tx</span><br><span class="line">http://www.springframework.org/schema/tx/spring-tx.xsd</span><br></pre></td></tr></table></figure>
</li>
<li><p>é…ç½®å£°æ˜å¼äº‹åŠ¡</p>
 <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®å£°æ˜å¼äº‹åŠ¡ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ç»“åˆAOPå®ç°äº‹åŠ¡çš„ç»‡å…¥ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 1. é…ç½®äº‹åŠ¡é€šçŸ¥ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç»™å“ªäº›æ–¹æ³•é…ç½®äº‹åŠ¡ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è¿˜å¯ä»¥é…ç½®äº‹ç‰©çš„ä¼ æ’­ç‰¹æ€§(æ–°ä¸œè¥¿ é¢è¯•ä¼šè€ƒ) --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;add&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;delete&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;update&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;query&quot;</span> <span class="attr">read-only</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 2. é…ç½®äº‹åŠ¡åˆ‡å…¥ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åˆ‡å…¥ç‚¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointCut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.horsen.mapper.*.*(..))&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é€šçŸ¥ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointCut&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>äº‹åŠ¡</tag>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>æ§åˆ¶å™¨è§†å›¾</title>
    <url>/posts/94aef121.html</url>
    <content><![CDATA[<h3 id="1-æŸ¥è¯¢ä¹¦ç±åŠŸèƒ½"><a href="#1-æŸ¥è¯¢ä¹¦ç±åŠŸèƒ½" class="headerlink" title="1. æŸ¥è¯¢ä¹¦ç±åŠŸèƒ½"></a>1. æŸ¥è¯¢ä¹¦ç±åŠŸèƒ½</h3><ol>
<li><p>ç¼–å†™è§†å›¾ index.jsp</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span> pageEncoding=<span class="string">&quot;UTF-8&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;title&gt;é¦–é¡µ&lt;/title&gt;</span><br><span class="line">  &lt;style type=<span class="string">&quot;text/css&quot;</span>&gt;</span><br><span class="line">    a &#123;</span><br><span class="line">      text-decoration: none;</span><br><span class="line">      color: black;</span><br><span class="line">      font-size: <span class="number">18</span>px;</span><br><span class="line">    &#125;</span><br><span class="line">    h3 &#123;</span><br><span class="line">      width: <span class="number">180</span>px;</span><br><span class="line">      height: <span class="number">38</span>px;</span><br><span class="line">      margin: <span class="number">100</span>px auto;</span><br><span class="line">      text-align: center;</span><br><span class="line">      line-height: <span class="number">38</span>px;</span><br><span class="line">      background: deepskyblue;</span><br><span class="line">      border-radius: <span class="number">4</span>px;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;h3&gt;</span><br><span class="line">  &lt;a href=&quot;$&#123;pageContext.request.contextPath&#125;/book/allBook&quot;&gt;ç‚¹å‡»è¿›å…¥åˆ—è¡¨é¡µ&lt;/a&gt;</span><br><span class="line">&lt;/h3&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<a id="more"></a>
</li>
<li><p>ä¹¦ç±å±•ç¤ºé¡µé¢ allBook.jsp</p>
<p>æ³¨æ„ï¼š<code>&lt;c:forEach&gt;</code>æ ‡ç­¾ä¸­å±æ€§<code>item</code>è¡¨ç¤ºéå†çš„é›†åˆï¼Œè¿™ä¸ªé›†åˆå¯ä»¥æ˜¯æ”¹è¯·æ±‚å¯¹åº”çš„ Controller ä¸­çš„æ–¹æ³•åœ¨æ‰§è¡Œæ—¶æ”¾åœ¨ model é‡Œçš„å±æ€§ï¼›<code>var</code>å±æ€§è¡¨ç¤ºé›†åˆä¸­çš„æ¯ä¸€é¡¹ã€‚</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;ä¹¦ç±åˆ—è¡¨&lt;/title&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">    &lt;!-- å¼•å…¥ Bootstrap --&gt;</span><br><span class="line">    &lt;link href=<span class="string">&quot;https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css&quot;</span> rel=<span class="string">&quot;stylesheet&quot;</span>&gt;</span><br><span class="line">    &lt;style&gt;table thead th&#123;text-align: center;&#125;&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;container&quot;</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;row clearfix&quot;</span>&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;col-md-12 column&quot;</span>&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;page-header&quot;</span>&gt;</span><br><span class="line">                &lt;h1&gt;</span><br><span class="line">                    &lt;small&gt;ä¹¦ç±åˆ—è¡¨ â€”â€” æ˜¾ç¤ºæ‰€æœ‰ä¹¦ç±&lt;/small&gt;</span><br><span class="line">                &lt;/h1&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;row&quot;</span>&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;col-md-4 column&quot;</span>&gt;</span><br><span class="line">            &lt;a class=&quot;btn btn-primary&quot; href=&quot;$&#123;pageContext.request.contextPath&#125;/book/tooAddBook&quot;&gt;æ–°å¢&lt;/a&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;row clearfix&quot;</span>&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;col-md-12 column&quot;</span>&gt;</span><br><span class="line">            &lt;table <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;table table-hover table-striped&quot;</span>&gt;</span><br><span class="line">                &lt;thead&gt;</span><br><span class="line">                &lt;tr&gt;</span><br><span class="line">                    &lt;th&gt;ä¹¦ç±ç¼–å·&lt;/th&gt;</span><br><span class="line">                    &lt;th&gt;ä¹¦ç±åå­—&lt;/th&gt;</span><br><span class="line">                    &lt;th&gt;ä¹¦ç±æ•°é‡&lt;/th&gt;</span><br><span class="line">                    &lt;th&gt;ä¹¦ç±è¯¦æƒ…&lt;/th&gt;</span><br><span class="line">                    &lt;th&gt;æ“ä½œ&lt;/th&gt;</span><br><span class="line">                &lt;/tr&gt;</span><br><span class="line">                &lt;/thead&gt;</span><br><span class="line">                &lt;tbody&gt;</span><br><span class="line">                &lt;c:forEach <span class="keyword">var</span>=<span class="string">&quot;book&quot;</span> items=<span class="string">&quot;$&#123;list&#125;&quot;</span>&gt;</span><br><span class="line">                    &lt;tr&gt;</span><br><span class="line">                        &lt;td&gt;$&#123;book.bookID&#125;&lt;/td&gt;</span><br><span class="line">                        &lt;td&gt;$&#123;book.bookName&#125;&lt;/td&gt;</span><br><span class="line">                        &lt;td&gt;$&#123;book.bookCounts&#125;&lt;/td&gt;</span><br><span class="line">                        &lt;td&gt;$&#123;book.detail&#125;&lt;/td&gt;</span><br><span class="line">                        &lt;td&gt;</span><br><span class="line">                            &lt;%-- åœ¨ä¿®æ”¹ä¹‹å‰æŠŠå¯¹åº”çš„ä¹¦çš„IDä¼ ç»™åç«¯ --%&gt;</span><br><span class="line">                            &lt;a href=&quot;$&#123;pageContext.request.contextPath&#125;/book/toUpdateBook/$&#123;book.bookID&#125;&quot;&gt;æ›´æ”¹&lt;/a&gt; |</span><br><span class="line">                            &lt;a href=&quot;$&#123;pageContext.request.contextPath&#125;/book/del/$&#123;book.bookID&#125;&quot;&gt;åˆ é™¤&lt;/a&gt;</span><br><span class="line">                        &lt;/td&gt;</span><br><span class="line">                    &lt;/tr&gt;</span><br><span class="line">                &lt;/c:forEach&gt;</span><br><span class="line">                &lt;/tbody&gt;</span><br><span class="line">            &lt;/table&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™æ§åˆ¶å™¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/book&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookController</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Controllerå±‚è°ƒç”¨Serviceå±‚</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(&quot;bookService&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> BookService bookService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢å…¨éƒ¨ä¹¦ç±, å¹¶ä¸”è¿”å›åˆ°ä¸€ä¸ªä¹¦ç±å±•ç¤ºé¡µé¢</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/allBook&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">list</span><span class="params">(Model model)</span> </span>&#123;</span><br><span class="line">        List&lt;Books&gt; list = bookService.queryAllBooks();</span><br><span class="line">        model.addAttribute(<span class="string">&quot;list&quot;</span>,list);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;allBook&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="2-æ·»åŠ ä¹¦ç±åŠŸèƒ½"><a href="#2-æ·»åŠ ä¹¦ç±åŠŸèƒ½" class="headerlink" title="2. æ·»åŠ ä¹¦ç±åŠŸèƒ½"></a>2. æ·»åŠ ä¹¦ç±åŠŸèƒ½</h3><ol>
<li><p>åœ¨ allBook.jsp ä¸­å¢åŠ ã€æ–°å¢ã€‘æŒ‰é’®</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;row&quot;</span>&gt;</span><br><span class="line">       &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;col-md-4 column&quot;</span>&gt;</span><br><span class="line">           &lt;a class=&quot;btn btn-primary&quot; href=&quot;$&#123;pageContext.request.contextPath&#125;/book/tooAddBook&quot;&gt;æ–°å¢&lt;/a&gt;</span><br><span class="line">       &lt;/div&gt;</span><br><span class="line">   &lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™è§†å›¾ addBook.jsp</p>
<p>æ³¨æ„ï¼šè¡¨å•ä¸­è¾“å…¥æ¡†çš„<code>name</code>å±æ€§è¦å’Œå®ä½“ç±»å±æ€§ä¿æŒä¸€è‡´</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">   &lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br><span class="line">   &lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">   &lt;html&gt;</span><br><span class="line">   &lt;head&gt;</span><br><span class="line">       &lt;title&gt;æ–°å¢ä¹¦ç±&lt;/title&gt;</span><br><span class="line">       &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">       &lt;!-- å¼•å…¥ Bootstrap --&gt;</span><br><span class="line">       &lt;link href=<span class="string">&quot;https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css&quot;</span> rel=<span class="string">&quot;stylesheet&quot;</span>&gt;</span><br><span class="line">   &lt;/head&gt;</span><br><span class="line">   &lt;body&gt;</span><br><span class="line">   &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;container&quot;</span>&gt;</span><br><span class="line">       &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;row clearfix&quot;</span>&gt;</span><br><span class="line">           &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;col-md-12 column&quot;</span>&gt;</span><br><span class="line">               &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;page-header&quot;</span>&gt;</span><br><span class="line">                   &lt;h1&gt;</span><br><span class="line">                       &lt;small&gt;æ–°å¢ä¹¦ç±&lt;/small&gt;</span><br><span class="line">                   &lt;/h1&gt;</span><br><span class="line">               &lt;/div&gt;</span><br><span class="line">           &lt;/div&gt;</span><br><span class="line">       &lt;/div&gt;</span><br><span class="line">       &lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/book/addBook&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">           ä¹¦ç±åç§°ï¼š&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;bookName&quot;</span> required&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">           ä¹¦ç±æ•°é‡ï¼š&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;bookCounts&quot;</span> required&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">           ä¹¦ç±è¯¦æƒ…ï¼š&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;detail&quot;</span> required&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">           &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;æ·»åŠ &quot;</span>&gt;</span><br><span class="line">       &lt;/form&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™æ§åˆ¶å™¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·³è½¬åˆ°å¢åŠ ä¹¦ç±é¡µé¢</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/tooAddBook&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toAddBook</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;addBook&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ·»åŠ ä¸€æœ¬ä¹¦</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/addBook&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">addBook</span><span class="params">(Books book)</span> </span>&#123;</span><br><span class="line">    bookService.addBook(book);</span><br><span class="line">    <span class="comment">// é‡å®šå‘åˆ°ä¸€ä¸ªè¯·æ±‚</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/book/allBook&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="3-ä¿®æ”¹ä¸€æœ¬ä¹¦"><a href="#3-ä¿®æ”¹ä¸€æœ¬ä¹¦" class="headerlink" title="3. ä¿®æ”¹ä¸€æœ¬ä¹¦"></a>3. ä¿®æ”¹ä¸€æœ¬ä¹¦</h3><ol>
<li><p>åœ¨ allBook.jsp ä¸­å¢åŠ ã€ä¿®æ”¹ã€‘æŒ‰é’®</p>
<p>æ³¨æ„ï¼šä¸ºäº†åœ¨ä¿®æ”¹é¡µé¢å±•ç¤ºéœ€è¦ä¿®æ”¹çš„ä¹¦çš„åŸæ¥çš„æ•°æ®ï¼Œè¦åœ¨è¯·æ±‚æ—¶æŠŠå¯¹åº”çš„ä¹¦çš„ ID ä¼ ç»™åç«¯<code>$&#123;book.bookID&#125;</code></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;a href=&quot;$&#123;pageContext.request.contextPath&#125;/book/toUpdateBook/$&#123;book.bookID&#125;&quot;&gt;ä¿®æ”¹&lt;/a&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™è§†å›¾ updateBook.jsp</p>
<p>æ³¨æ„ï¼šåœ¨<code>update</code>è¯­å¥ä¸­éœ€è¦ä¼ å…¥ä¹¦çš„IDï¼Œå› æ­¤éœ€è¦å‰ç«¯é€šè¿‡éšè—åŸŸå°† ID æ”¾åœ¨è¯·æ±‚ä¸­ï¼Œä¼ ç»™åç«¯</p>
<p><code>&lt;input type=&quot;hidden&quot; name=&quot;bookID&quot; value=&quot;$&#123;book.bookID&#125;&quot;&gt;</code></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;ä¿®æ”¹ä¹¦ç±&lt;/title&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">    &lt;!-- å¼•å…¥ Bootstrap --&gt;</span><br><span class="line">    &lt;link href=<span class="string">&quot;https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css&quot;</span> rel=<span class="string">&quot;stylesheet&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;container&quot;</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;row clearfix&quot;</span>&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;col-md-12 column&quot;</span>&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;page-header&quot;</span>&gt;</span><br><span class="line">                &lt;h1&gt;</span><br><span class="line">                    &lt;small&gt;ä¿®æ”¹ä¹¦ç±&lt;/small&gt;</span><br><span class="line">                &lt;/h1&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/book/updateBook&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;bookID&quot;</span> value=<span class="string">&quot;$&#123;book.bookID&#125;&quot;</span>&gt;</span><br><span class="line">        ä¹¦ç±åç§°ï¼š&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;bookName&quot;</span> value=<span class="string">&quot;$&#123;book.bookName&#125;&quot;</span> required&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">        ä¹¦ç±æ•°é‡ï¼š&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;bookCounts&quot;</span> value=<span class="string">&quot;$&#123;book.bookCounts&#125;&quot;</span> required&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">        ä¹¦ç±è¯¦æƒ…ï¼š&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;detail&quot;</span> value=<span class="string">&quot;$&#123;book.detail&#125;&quot;</span> required&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;ä¿®æ”¹&quot;</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™æ§åˆ¶å™¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·³è½¬åˆ°ä¿®æ”¹é¡µé¢, åœ¨æ­¤ä¹‹å‰é€šè¿‡å‰ç«¯æä¾›çš„IDæŸ¥è¯¢åˆ°è¯¥ä¹¦çš„ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/toUpdateBook/&#123;bookID&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toUpdateBook</span><span class="params">(<span class="meta">@PathVariable</span> <span class="keyword">int</span> bookID, Model model)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ ¹æ®IDæŸ¥åˆ°è¿™æœ¬ä¹¦</span></span><br><span class="line">    Books book = bookService.queryBookById(bookID);</span><br><span class="line">    <span class="comment">// æŠŠè¿™æœ¬ä¹¦ä¼ å›å‰ç«¯</span></span><br><span class="line">    model.addAttribute(<span class="string">&quot;book&quot;</span>, book);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;updateBook&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¿®æ”¹ä¸€æœ¬ä¹¦</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/updateBook&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">updateBook</span><span class="params">(Books book,Model model)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;updateBook() =&gt; &quot;</span> + book);</span><br><span class="line">    bookService.updateBook(book);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/book/allBook&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="4-åˆ é™¤ä¸€æœ¬ä¹¦"><a href="#4-åˆ é™¤ä¸€æœ¬ä¹¦" class="headerlink" title="4.  åˆ é™¤ä¸€æœ¬ä¹¦"></a>4.  åˆ é™¤ä¸€æœ¬ä¹¦</h3><ol>
<li><p>åœ¨ allBook.jsp ä¸­å¢åŠ ã€åˆ é™¤ã€‘æŒ‰é’®</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;a href=&quot;$&#123;pageContext.request.contextPath&#125;/book/deleteBook/$&#123;book.bookID&#125;&quot;&gt;åˆ é™¤&lt;/a&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™æ§åˆ¶å™¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ é™¤ä¸€æœ¬ä¹¦</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/deleteBook/&#123;bookID&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">deleteBook</span><span class="params">(<span class="meta">@PathVariable</span> <span class="keyword">int</span> bookID)</span> </span>&#123;</span><br><span class="line">    bookService.deleteBookById(bookID);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/book/allBook&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="5-æ¨¡ç³ŠæŸ¥è¯¢ä¹¦ç±"><a href="#5-æ¨¡ç³ŠæŸ¥è¯¢ä¹¦ç±" class="headerlink" title="5. æ¨¡ç³ŠæŸ¥è¯¢ä¹¦ç±"></a>5. æ¨¡ç³ŠæŸ¥è¯¢ä¹¦ç±</h3><ol>
<li><p>åœ¨ allBook.jsp ä¸­å¢åŠ æœç´¢æ¡†</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;col-md-4 column col-md-offset-4&quot;</span>&gt;</span><br><span class="line">    &lt;a <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;btn btn-primary&quot;</span> href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/book/allBook&quot;</span></span><br><span class="line">       style=&quot;float:right;margin-left: 4px&quot;&gt;æ˜¾ç¤ºæ‰€æœ‰&lt;/a&gt;</span><br><span class="line">    &lt;form <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;form-inline&quot;</span> action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/book/queryBook&quot;</span> method=<span class="string">&quot;post&quot;</span> style=<span class="string">&quot;float:right&quot;</span>&gt;</span><br><span class="line">        &lt;input <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;form-control&quot;</span> name=<span class="string">&quot;queryBookName&quot;</span> type=<span class="string">&quot;text&quot;</span> placeholder=<span class="string">&quot;ä¹¦ç±åç§°&quot;</span> required/&gt;</span><br><span class="line">        &lt;input <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;btn btn-primary&quot;</span> type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;æŸ¥è¯¢&quot;</span>/&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿®æ”¹ Mapper æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¨¡ç³ŠæŸ¥è¯¢ä¹¦ç±</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">List&lt;Books&gt; <span class="title">queryBook</span><span class="params">(<span class="meta">@Param(&quot;bookName&quot;)</span> String name)</span></span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿®æ”¹ Mapper.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ¨¡ç³ŠæŸ¥è¯¢ä¹¦ç± --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBook&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Books&quot;</span>&gt;</span></span><br><span class="line">    select *</span><br><span class="line">    from ssmbuild.books</span><br><span class="line">    where bookName like CONCAT(&#x27;%&#x27;, #&#123;bookName&#125;, &#x27;%&#x27;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿®æ”¹ Service å±‚</p>
<p>æ‡’å¾—å†™äº†ï¼Œæ‡‚å¾—éƒ½æ‡‚</p>
</li>
<li><p>ç¼–å†™æ§åˆ¶å™¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢ä¹¦ç±</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/queryBook&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">queryBook</span><span class="params">(String queryBookName, Model model)</span> </span>&#123;</span><br><span class="line">    List&lt;Books&gt; list = bookService.queryBook(queryBookName);</span><br><span class="line">    model.addAttribute(<span class="string">&quot;list&quot;</span>, list);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;/allBook&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>SSM æ¡†æ¶æ•´åˆ</category>
      </categories>
      <tags>
        <tag>Mybatis</tag>
        <tag>ç¯å¢ƒæ­å»º</tag>
        <tag>Spring</tag>
        <tag>Spring MVC</tag>
      </tags>
  </entry>
  <entry>
    <title>IO æµ</title>
    <url>/posts/4d66dff8.html</url>
    <content><![CDATA[<h3 id="1-å››å¤§å®¶æ—"><a href="#1-å››å¤§å®¶æ—" class="headerlink" title="1. å››å¤§å®¶æ—"></a>1. å››å¤§å®¶æ—</h3><table>
<thead>
<tr>
<th>ç±»å</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>java.io.InputStream</td>
<td>å­—èŠ‚è¾“å…¥æµ</td>
</tr>
<tr>
<td>java.io.OutputStream</td>
<td>å­—èŠ‚è¾“å‡ºæµ</td>
</tr>
<tr>
<td>java.io.Reader</td>
<td>å­—ç¬¦è¾“å…¥æµ</td>
</tr>
<tr>
<td>java.io.Writer</td>
<td>å­—ç¬¦è¾“å‡ºæµ</td>
</tr>
</tbody></table>
<p><em>æ³¨ï¼šç±»åä»¥ Stream ç»“å°¾éƒ½æ˜¯å­—èŠ‚æµï¼Œä»¥ Reader/Writer ç»“å°¾éƒ½æ˜¯å­—ç¬¦æµ</em></p>
<a id="more"></a>



<h3 id="2-cloth-å’Œ-flush"><a href="#2-cloth-å’Œ-flush" class="headerlink" title="2. cloth() å’Œ flush()"></a>2. cloth() å’Œ flush()</h3><ul>
<li><p>æ‰€æœ‰æµç”¨å®Œåè®°å¾—è°ƒç”¨ close() æ–¹æ³•å…³é—­</p>
</li>
<li><p>æ‰€æœ‰è¾“å‡ºæµç”¨å®Œåè®°å¾—è°ƒç”¨ flush() æ–¹æ³•æ¸…ç©ºç®¡é“</p>
</li>
</ul>
<h3 id="3-åˆ†ç±»"><a href="#3-åˆ†ç±»" class="headerlink" title="3. åˆ†ç±»"></a>3. åˆ†ç±»</h3><ul>
<li><p>æ–‡ä»¶ä¸“å±</p>
<ul>
<li>java.io.FileInputStreamï¼ˆæŒæ¡ï¼‰</li>
<li>java.io.FileOutputStreamï¼ˆæŒæ¡ï¼‰</li>
<li>java.io.FileReader</li>
<li>java.io.FileWriter</li>
</ul>
</li>
<li><p>è½¬æ¢æµï¼šå°†å­—èŠ‚æµè½¬æ¢æˆå­—ç¬¦æµ</p>
<ul>
<li>java.io.InputStreamReader</li>
<li>java.io.OutputStreamWriter</li>
</ul>
</li>
<li><p>ç¼“å†²æµä¸“å±</p>
<ul>
<li>java.io.BufferedReader</li>
<li>java.io.BufferedWriter</li>
<li>java.io.BufferedInputStrea</li>
<li>java.io.BufferedOutputStream</li>
</ul>
</li>
<li><p>æ•°æ®æµä¸“å±</p>
<ul>
<li>java.io.DataInputStrea</li>
<li>java.io.DataOutputStream</li>
</ul>
</li>
<li><p>æ ‡å‡†è¾“å‡ºæµ</p>
<ul>
<li>java.io.PrintWrite</li>
<li>java.io.PrintStreamï¼ˆæŒæ¡ï¼‰</li>
</ul>
</li>
<li><p>å¯¹è±¡ä¸“å±</p>
<ul>
<li>java.io.ObjectInputStreaï¼ˆæŒæ¡ï¼‰</li>
<li>java.io.ObjectOutputStreamï¼ˆæŒæ¡ï¼‰</li>
</ul>
</li>
</ul>
<h3 id="4-FileInputStream"><a href="#4-FileInputStream" class="headerlink" title="4. FileInputStream"></a>4. FileInputStream</h3><p>å¯ä»¥è¯»å–ä»»ä½•å½¢å¼çš„æ–‡ä»¶</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileInputStreamTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        FileInputStream fis = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// ç›¸å¯¹è·¯å¾„ æ ¹ç›®å½•ä¸ºå·¥ç¨‹ç›®å½•</span></span><br><span class="line">            fis = <span class="keyword">new</span> FileInputStream(<span class="string">&quot;src\\temp.txt&quot;</span>);</span><br><span class="line">            <span class="comment">// available()è·å–æ–‡ä»¶æ€»å­—èŠ‚æ•°é‡</span></span><br><span class="line">            <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[fis.available()];</span><br><span class="line">            <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> ((len = fis.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                System.out.println(<span class="keyword">new</span> String(buffer, <span class="number">0</span>, len));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// åœ¨finallyè¯­å¥ä¸­ç¡®ä¿æµä¸€å®šå…³é—­</span></span><br><span class="line">            <span class="keyword">if</span> (fis != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="comment">// å…³é—­æµçš„å‰ææ˜¯æµä¸ä¸ºç©º å¦‚æœä¸ºç©ºå°±æ²¡å¿…è¦å…³é—­</span></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    fis.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="5-FileOutputStream"><a href="#5-FileOutputStream" class="headerlink" title="5. FileOutputStream"></a>5. FileOutputStream</h3><p>å¯ä»¥å†™å…¥ä»»ä½•å½¢å¼çš„æ–‡ä»¶</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileOutputStreamTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        FileOutputStream fos = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// ä»¥è¿½åŠ çš„æ–¹å¼åœ¨æ–‡ä»¶æœ«å°¾å†™å…¥</span></span><br><span class="line">            fos = <span class="keyword">new</span> FileOutputStream(<span class="string">&quot;src\\output.txt&quot;</span>,<span class="keyword">true</span>);</span><br><span class="line">            String str=<span class="string">&quot;å­—ç¬¦ä¸²&quot;</span>;</span><br><span class="line">            <span class="comment">// å­—ç¬¦ä¸²è½¬æ¢æˆbyteæ•°ç»„</span></span><br><span class="line">            <span class="keyword">byte</span>[] buffer = str.getBytes();</span><br><span class="line">            fos.write(buffer);</span><br><span class="line">            fos.flush();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// åœ¨finallyè¯­å¥ä¸­ç¡®ä¿æµä¸€å®šå…³é—­</span></span><br><span class="line">            <span class="keyword">if</span> (fos != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="comment">// å…³é—­æµçš„å‰ææ˜¯æµä¸ä¸ºç©º å¦‚æœä¸ºç©ºå°±æ²¡å¿…è¦å…³é—­</span></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    fos.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="6-æ–‡ä»¶å¤åˆ¶"><a href="#6-æ–‡ä»¶å¤åˆ¶" class="headerlink" title="6. æ–‡ä»¶å¤åˆ¶"></a>6. æ–‡ä»¶å¤åˆ¶</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileCopy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        FileInputStream fis = <span class="keyword">null</span>;</span><br><span class="line">        FileOutputStream fos = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            fis = <span class="keyword">new</span> FileInputStream(<span class="string">&quot;src\\output.txt&quot;</span>);</span><br><span class="line">            fos = <span class="keyword">new</span> FileOutputStream(<span class="string">&quot;src\\output_copy.txt&quot;</span>);</span><br><span class="line">            <span class="comment">// ä¸€æ¬¡æœ€å¤šæ‹·è´1M</span></span><br><span class="line">            <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span> * <span class="number">1024</span>];</span><br><span class="line">            <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> ((len = fis.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                fos.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line">            fos.flush();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// åˆ†å¼€try catch å¦åˆ™å…¶ä¸­ä¸€ä¸ªå‡ºç°å·²æˆ å¯èƒ½ä¼šå½±å“åˆ°å¦ä¸€ä¸ªæµçš„å…³é—­</span></span><br><span class="line">            <span class="keyword">if</span> (fos != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    fos.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (fis != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    fis.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="7-FileReader"><a href="#7-FileReader" class="headerlink" title="7. FileReader"></a>7. FileReader</h3><p>åªèƒ½è¯»å–æ™®é€šæ–‡æœ¬</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileReaderTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        FileReader reader = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            reader = <span class="keyword">new</span> FileReader(<span class="string">&quot;src\\temp.txt&quot;</span>);</span><br><span class="line">            <span class="keyword">char</span>[] cbuf = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">2014</span>];</span><br><span class="line">            <span class="keyword">int</span> length = <span class="number">0</span>;</span><br><span class="line">            <span class="comment">// ä¸€æ¬¡è¯»ä¸€ä¸ªå­—ç¬¦ åªèƒ½è¯»æ™®é€šæ–‡æœ¬</span></span><br><span class="line">            <span class="keyword">while</span> ((length = reader.read(cbuf)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                System.out.println(<span class="keyword">new</span> String(cbuf, <span class="number">0</span>, length));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (reader != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    reader.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="8-FileWriter"><a href="#8-FileWriter" class="headerlink" title="8. FileWriter"></a>8. FileWriter</h3><p>åªèƒ½å†™å…¥æ™®é€šæ–‡æœ¬</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileWriterTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        FileWriter writer = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// åªèƒ½å†™æ™®é€šæ–‡æœ¬</span></span><br><span class="line">            writer = <span class="keyword">new</span> FileWriter(<span class="string">&quot;src\\out.txt&quot;</span>);</span><br><span class="line">            <span class="keyword">char</span>[] cbuf = &#123;<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;4&#x27;</span>,<span class="string">&#x27;5&#x27;</span>&#125;;</span><br><span class="line">            writer.write(cbuf,<span class="number">3</span>,<span class="number">2</span>);</span><br><span class="line">            writer.write(<span class="string">&quot;æˆ‘æ˜¯è°&quot;</span>);</span><br><span class="line">            writer.flush();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (writer != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    writer.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="9-BufferedReader"><a href="#9-BufferedReader" class="headerlink" title="9. BufferedReader"></a>9. BufferedReader</h3><ul>
<li><p>è‡ªå¸¦ç¼“å†²ï¼Œä¸éœ€è¦è‡ªå®šä¹‰ byte æˆ– char æ•°ç»„</p>
</li>
<li><p>å½“ä¸€ä¸ªæµçš„æ„é€ æ–¹æ³•ä¸­éœ€è¦å¦ä¸€ä¸ªæµçš„æ—¶å€™ï¼Œè¿™ä¸ªä½œä¸ºå‚æ•°çš„æµå«åšï¼šèŠ‚ç‚¹æµ<br>å¤–éƒ¨å¤æ‚åŒ…è£…çš„æµå«åš: åŒ…è£…æµï¼Œæˆ–è€…å«å¤„ç†æµ<br>ä¾‹å¦‚ï¼šFileReaderæ˜¯èŠ‚ç‚¹æµï¼ŒBufferedReaderå«åšåŒ…è£…æµ/å¤„ç†æµ</p>
</li>
</ul>
<p><em>æ³¨æ„ï¼šèŠ‚ç‚¹æµåœ¨åŒ…è£…æµå…³é—­æ—¶ä¼šè‡ªåŠ¨å…³é—­</em></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BufferedReaderTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        BufferedReader reader = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(<span class="string">&quot;src\\temp.txt&quot;</span>));</span><br><span class="line">            String str = <span class="keyword">null</span>;</span><br><span class="line">            <span class="comment">// è¯»å–ä¸€è¡Œ ä½†ä¸åŒ…æ‹¬æ¢è¡Œç¬¦</span></span><br><span class="line">            <span class="keyword">while</span> ((str = reader.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                System.out.println(str);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (reader != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    reader.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="10-BufferedWriter"><a href="#10-BufferedWriter" class="headerlink" title="10. BufferedWriter"></a>10. BufferedWriter</h3><p>è‡ªå¸¦ç¼“å†²ï¼Œä¸éœ€è¦è‡ªå®šä¹‰ byte æˆ– char æ•°ç»„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BufferedWriterTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        BufferedWriter writer = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            writer = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> FileWriter(<span class="string">&quot;src\\buffer.txt&quot;</span>));</span><br><span class="line">            String str = <span class="string">&quot;Hello world!&quot;</span>;</span><br><span class="line">            writer.write(str);</span><br><span class="line">            writer.flush();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (writer != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    writer.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="11-InputStreamReader"><a href="#11-InputStreamReader" class="headerlink" title="11. InputStreamReader"></a>11. InputStreamReader</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InputStreamReaderTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        BufferedReader reader = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// å­—èŠ‚æµ</span></span><br><span class="line">            FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">&quot;src\ã€temp.txt&quot;</span>);</span><br><span class="line">            <span class="comment">// é€šè¿‡è½¬æ¢æµè½¬æ¢ å°†å­—èŠ‚æµè½¬æ¢æˆå­—ç¬¦æµ</span></span><br><span class="line">            InputStreamReader isr = <span class="keyword">new</span> InputStreamReader(fis);</span><br><span class="line">            reader = <span class="keyword">new</span> BufferedReader(isr);</span><br><span class="line">            String str = <span class="keyword">null</span>;</span><br><span class="line">            <span class="comment">// è¯»å–ä¸€è¡Œ ä½†ä¸åŒ…æ‹¬æ¢è¡Œç¬¦</span></span><br><span class="line">            <span class="keyword">while</span> ((str = reader.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                System.out.println(str);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (reader != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    reader.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="12-OutputStreamWriter"><a href="#12-OutputStreamWriter" class="headerlink" title="12. OutputStreamWriter"></a>12. OutputStreamWriter</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OutputStreamWriterTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        BufferedWriter writer = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// å­—èŠ‚æµ</span></span><br><span class="line">            FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">&quot;src\\buffer.txt&quot;</span>);</span><br><span class="line">            <span class="comment">// é€šè¿‡è½¬æ¢æµè½¬æ¢ å°†å­—èŠ‚æµè½¬æ¢æˆå­—ç¬¦æµ</span></span><br><span class="line">            OutputStreamWriter osw = <span class="keyword">new</span> OutputStreamWriter(fos);</span><br><span class="line">            writer = <span class="keyword">new</span> BufferedWriter(osw);</span><br><span class="line">            String str = <span class="string">&quot;JavaçœŸå¥½&quot;</span>;</span><br><span class="line">            writer.write(str);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (writer != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    writer.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="13-DataInputStream"><a href="#13-DataInputStream" class="headerlink" title="13. DataInputStream"></a>13. DataInputStream</h3><p>DataOutputStream å†™çš„æ–‡ä»¶ï¼Œåªèƒ½ç”¨ DataInputStream æ¥è¯»ï¼Œå¹¶ä¸”è¯»çš„æ—¶å€™éœ€è¦çŸ¥é“å†™å…¥çš„é¡ºåºã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataInputStreamTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        DataInputStream dis = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// åˆ›å»ºæ•°æ®ä¸“å±çš„å­—èŠ‚è¾“å…¥ æµ</span></span><br><span class="line">            dis = <span class="keyword">new</span> DataInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">&quot;src\\data&quot;</span>));</span><br><span class="line"></span><br><span class="line">            <span class="keyword">byte</span> b = dis.readByte();</span><br><span class="line">            <span class="keyword">short</span> s = dis.readShort();</span><br><span class="line">            <span class="keyword">int</span> i = dis.readInt();</span><br><span class="line">            <span class="keyword">long</span> l = dis.readLong();</span><br><span class="line">            <span class="keyword">float</span> f = dis.readFloat();</span><br><span class="line">            <span class="keyword">double</span> d = dis.readDouble();</span><br><span class="line">            <span class="keyword">boolean</span> bol = dis.readBoolean();</span><br><span class="line">            <span class="keyword">char</span> c = dis.readChar();</span><br><span class="line"></span><br><span class="line">            System.out.println(b);</span><br><span class="line">            System.out.println(s);</span><br><span class="line">            System.out.println(i);</span><br><span class="line">            System.out.println(l);</span><br><span class="line">            System.out.println(f);</span><br><span class="line">            System.out.println(d);</span><br><span class="line">            System.out.println(bol);</span><br><span class="line">            System.out.println(c);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (dis != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    dis.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="14-DataOutputStream"><a href="#14-DataOutputStream" class="headerlink" title="14. DataOutputStream"></a>14. DataOutputStream</h3><p>å¯ä»¥å°†æ•°æ®è¿åŒæ•°æ®ç±»å‹ä¸€å¹¶å†™å…¥æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸æ˜¯æ™®é€šæ–‡æœ¬æ–‡æ¡£ï¼Œè®°äº‹æœ¬æ‰“ä¸å¼€</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataOutputStreamTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        DataOutputStream dos = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// åˆ›å»ºæ•°æ®ä¸“å±çš„å­—èŠ‚è¾“å‡ºæµ</span></span><br><span class="line">            dos = <span class="keyword">new</span> DataOutputStream(<span class="keyword">new</span> FileOutputStream(<span class="string">&quot;src\\data&quot;</span>));</span><br><span class="line"></span><br><span class="line">            <span class="keyword">byte</span> b = <span class="number">100</span>;</span><br><span class="line">            <span class="keyword">short</span> s = <span class="number">200</span>;</span><br><span class="line">            <span class="keyword">int</span> i = <span class="number">300</span>;</span><br><span class="line">            <span class="keyword">long</span> l = <span class="number">400L</span>;</span><br><span class="line">            <span class="keyword">float</span> f = <span class="number">3.0F</span>;</span><br><span class="line">            <span class="keyword">double</span> d = <span class="number">3.14</span>;</span><br><span class="line">            <span class="keyword">boolean</span> bol = <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">char</span> c = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">            <span class="comment">// å°†æ•°æ®ç±»å‹å’Œæ•°æ®ä¸€èµ·å†™åˆ°æ–‡ä»¶ä¸­</span></span><br><span class="line">            dos.writeByte(b);</span><br><span class="line">            dos.writeShort(s);</span><br><span class="line">            dos.writeInt(i);</span><br><span class="line">            dos.writeLong(l);</span><br><span class="line">            dos.writeFloat(f);</span><br><span class="line">            dos.writeDouble(d);</span><br><span class="line">            dos.writeBoolean(bol);</span><br><span class="line">            dos.writeChar(c);</span><br><span class="line"></span><br><span class="line">            dos.flush();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (dos != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    dos.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="15-PrintStream"><a href="#15-PrintStream" class="headerlink" title="15. PrintStream"></a>15. PrintStream</h3><p>æ ‡å‡†çš„å­—èŠ‚è¾“å‡ºæµï¼Œé»˜è®¤è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œä¸éœ€è¦æ‰‹åŠ¨å…³é—­</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PrintStreamTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        PrintStream printStream = System.out;</span><br><span class="line">        printStream.println(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line">        PrintStream ps = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// æ ‡å‡†è¾“å‡ºæµä¸å†æŒ‡å‘æ§åˆ¶å°, æŒ‡å‘logæ–‡ä»¶</span></span><br><span class="line">            ps = <span class="keyword">new</span> PrintStream(<span class="keyword">new</span> FileOutputStream(<span class="string">&quot;src\\log&quot;</span>));</span><br><span class="line">            System.setOut(ps);</span><br><span class="line">            System.out.println(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;hello lhx&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;hello someone&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Java åŸºç¡€</category>
      </categories>
      <tags>
        <tag>Java åŸºç¡€</tag>
        <tag>IO</tag>
      </tags>
  </entry>
  <entry>
    <title>Lambda è¡¨è¾¾å¼</title>
    <url>/posts/9fa75fc1.html</url>
    <content><![CDATA[<p>å½“éœ€è¦å®šä¹‰ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»æ¥ä¸ºå®ç°ä¸€ä¸ªå‡½æ•°å¼æ¥å£çš„å¯¹è±¡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ Lambda è¡¨è¾¾å¼ç®€åŒ–ä»£ç </p>
<p><em>å‡½æ•°å¼æ¥å£ï¼šåªæœ‰ä¸€ä¸ªæ–¹æ³•çš„æ¥å£</em></p>
<p>Lambda è¡¨è¾¾å¼å¯ä»¥é€šè¿‡ä»¥ä¸‹è¿™æ ·ä¸€æ­¥ä¸€æ­¥ç®€åŒ–æ¥ç†è§£</p>
<a id="more"></a>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LambdaTest01</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 3. é™æ€å†…éƒ¨ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Like2</span> <span class="keyword">implements</span> <span class="title">ILike</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lambda</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;this is lambda, too&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ILike iLike = <span class="keyword">new</span> Like();</span><br><span class="line">        iLike.lambda();</span><br><span class="line"></span><br><span class="line">        iLike = <span class="keyword">new</span> Like2();</span><br><span class="line">        iLike.lambda();</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 4. å±€éƒ¨å†…éƒ¨ç±»</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="class"><span class="keyword">class</span> <span class="title">Like3</span> <span class="keyword">implements</span> <span class="title">ILike</span> </span>&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lambda</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;this is lambda, three&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        iLike = <span class="keyword">new</span> Like3();</span><br><span class="line">        iLike.lambda();</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 5. åŒ¿åå†…éƒ¨ç±» æ²¡æœ‰ç±»çš„åç§°, å¿…é¡»å€ŸåŠ©æ¥å£æˆ–è€…çˆ¶ç±»</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        iLike = <span class="keyword">new</span> ILike() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lambda</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;this is lambda, four&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        iLike.lambda();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6. lambdaè¡¨è¾¾å¼</span></span><br><span class="line">        iLike = () -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;this is lambda, five&quot;</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">        iLike.lambda();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1. å‡½æ•°å¼æ¥å£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">ILike</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">lambda</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 2. å®ç°ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Like</span> <span class="keyword">implements</span> <span class="title">ILike</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lambda</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;this is lambda&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ˜¯æœ‰å‚æ–¹æ³•ï¼Œä¹Ÿæ²¡é—®é¢˜</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LambdaTest02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ILove iLove = (<span class="keyword">int</span> a) -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;i love you &quot;</span> + a);</span><br><span class="line">        &#125;;</span><br><span class="line">        iLove.love(<span class="number">520</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">ILove</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">love</span><span class="params">(<span class="keyword">int</span> a)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è€Œä¸”å¯ä»¥ç®€åŒ–æˆè¿™ä¸ªæ ·å­ã€‚ç®€åŒ–äº†æ‹¬å·ï¼Œå‚æ•°ç±»å‹ï¼ŒèŠ±æ‹¬å·</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ILove iLove = <span class="keyword">null</span>;</span><br><span class="line">iLove = a -&gt; System.out.println(<span class="string">&quot;i love you &quot;</span> + a);</span><br><span class="line">iLove.love(<span class="number">520</span>);</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯å¦‚æœæ–¹æ³•ä¸­ä¸æ­¢ä¸€è¡Œä»£ç ï¼Œå°±ä¸èƒ½ç®€åŒ–æ‰èŠ±æ‹¬å·</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ILove iLove = a -&gt; &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;i love you &quot;</span> + a);</span><br><span class="line">    System.out.println(<span class="string">&quot;i love you, too &quot;</span> + a);</span><br><span class="line">&#125;;</span><br><span class="line">iLove.love(<span class="number">520</span>);</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯å¦‚æœæ–¹æ³•ä¸æ­¢ä¸€ä¸ªå‚æ•°ï¼Œè¿˜æ˜¯å¯ä»¥ç®€åŒ–æ‰å‚æ•°ç±»å‹çš„ï¼Œä½†æ˜¯æ‹¬å·å°±å¾—å†™ä¸Šäº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ILove iLove = (a, b) -&gt; &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;i love you &quot;</span> + a);</span><br><span class="line">    System.out.println(<span class="string">&quot;i love you, too &quot;</span> + b) ;</span><br><span class="line">&#125;;</span><br><span class="line">iLove.love(<span class="number">520</span>, <span class="number">521</span>);</span><br></pre></td></tr></table></figure>

<p>å¸¸ç”¨çš„åœ°æ–¹æ˜¯çº¿ç¨‹ä¸­</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadState</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            Date date = <span class="keyword">new</span> Date(System.currentTimeMillis());</span><br><span class="line">            <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                    System.out.println(<span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;HH:mm:ss&quot;</span>).format(date));</span><br><span class="line">                    date = <span class="keyword">new</span> Date(System.currentTimeMillis());</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        thread.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Java åŸºç¡€</category>
      </categories>
      <tags>
        <tag>Java åŸºç¡€</tag>
        <tag>Lambda</tag>
      </tags>
  </entry>
  <entry>
    <title>IDEA å¿«æ·é”®</title>
    <url>/posts/25ed82e.html</url>
    <content><![CDATA[<table>
<thead>
<tr>
<th>å¿«æ·é”®</th>
<th>æ“ä½œ</th>
</tr>
</thead>
<tbody><tr>
<td>Ctrl + Shift + Alt</td>
<td>å¤šè¡Œæ“ä½œ</td>
</tr>
<tr>
<td>psvm</td>
<td>ç”Ÿæˆmain()æ–¹æ³•</td>
</tr>
<tr>
<td>fori</td>
<td>ç”Ÿæˆforå¾ªç¯</td>
</tr>
<tr>
<td>Ctrl + Alt + V</td>
<td>è‡ªåŠ¨è¡¥é½è¿”å›å€¼ç±»å‹</td>
</tr>
<tr>
<td>Ctrl + O</td>
<td>è¦†å†™æ–¹æ³•</td>
</tr>
<tr>
<td>Ctrl + I</td>
<td>å®ç°æ¥å£ä¸­çš„æ–¹æ³•</td>
</tr>
<tr>
<td>Ctrl + Shift + U</td>
<td>å¤§å°å†™è½¬æ¢</td>
</tr>
<tr>
<td>Ctrl + Shift + Z</td>
<td>å–æ¶ˆæ’¤é”€</td>
</tr>
<tr>
<td>Altï¼‹Insert</td>
<td>ç”Ÿæˆæ„é€ æ–¹æ³•ã€getterã€setter</td>
</tr>
<tr>
<td>Ctrl + Y</td>
<td>åˆ é™¤å½“å‰è¡Œ</td>
</tr>
<tr>
<td>Ctrl + Shift + J</td>
<td>å°†é€‰ä¸­çš„è¡Œåˆå¹¶æˆä¸€è¡Œ</td>
</tr>
<tr>
<td>Ctrl + G</td>
<td>å®šä½åˆ°æŸä¸€è¡Œ</td>
</tr>
<tr>
<td>Ctrl + Shitft + å‘ä¸‹ç®­å¤´</td>
<td>å°†å…‰æ ‡æ‰€åœ¨çš„ä»£ç å—å‘ä¸‹æ•´ä½“ç§»åŠ¨</td>
</tr>
<tr>
<td>Ctrl + Shift + å‘ä¸Šç®­å¤´</td>
<td>å°†å…‰æ ‡æ‰€åœ¨çš„ä»£ç å—å‘ä¸Šæ•´ä½“ç§»åŠ¨</td>
</tr>
<tr>
<td>Alt + Shift + å‘ä¸‹ç®­å¤´</td>
<td>å°†è¡Œå‘ä¸‹ç§»åŠ¨</td>
</tr>
<tr>
<td>Alt + Shift + å‘ä¸Šç®­å¤´</td>
<td>å°†è¡Œå‘ä¸Šç§»åŠ¨</td>
</tr>
<tr>
<td>Ctrl + F</td>
<td>åœ¨å½“å‰æ–‡ä»¶ä¸­æŸ¥æ‰¾</td>
</tr>
<tr>
<td>Ctrl + R</td>
<td>æ›¿æ¢å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>Ctrl + Shift + F</td>
<td>åœ¨å…¨å±€æ–‡ä»¶ä¸­æŸ¥æ‰¾å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>Ctrl + Shift + R</td>
<td>åœ¨å…¨å±€ä¸­æ›¿æ¢å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>Ctrl + Shift + Enter</td>
<td>è‡ªåŠ¨è¡¥é½{}æˆ–è€…åˆ†å·</td>
</tr>
<tr>
<td>Shift + Enter</td>
<td>åœ¨å½“å‰è¡Œçš„ä¸‹æ–¹å¼€å§‹æ–°è¡Œ</td>
</tr>
<tr>
<td>Ctrl + Alt + Enter</td>
<td>åœ¨å½“å‰è¡Œçš„ä¸Šæ–¹æ’å…¥æ–°è¡Œ</td>
</tr>
<tr>
<td>Ctrl + Delete</td>
<td>åˆ é™¤å…‰æ ‡æ‰€åœ¨è‡³å•è¯ç»“å°¾å¤„çš„æ‰€æœ‰å­—ç¬¦</td>
</tr>
<tr>
<td>Ctrl + Shift + Alt + J</td>
<td>é€‰ä¸­æ‰€æœ‰ç›¸åŒå•è¯</td>
</tr>
<tr>
<td>Ctrl + P</td>
<td>æ–¹æ³•å‚æ•°æç¤º</td>
</tr>
<tr>
<td>Ctrl + W</td>
<td>åŒºåŸŸé€‰ä¸­</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>å…¶ä»–</category>
      </categories>
      <tags>
        <tag>IDEA</tag>
        <tag>å¿«æ·é”®</tag>
      </tags>
  </entry>
  <entry>
    <title>è§£å†³ 1099 ç«¯å£è¢«å ç”¨çš„é—®é¢˜</title>
    <url>/posts/bfbe6a21.html</url>
    <content><![CDATA[<h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p>åœ¨ IDEA é—ªé€€çš„æ—¶å€™ï¼Œå¦‚æœ Tomcat ç¨‹åºæ²¡æœ‰ç»ˆæ­¢ï¼Œå†æ¬¡å¯åŠ¨å°±ä¼šæŠ¥é”™ï¼Œå°±ç®—å…³äº†ç½‘é¡µä¹Ÿæ²¡ç”¨ï¼Œå…³äº†æµè§ˆå™¨ä¹Ÿæ²¡ç”¨ã€‚</p>
<img src="/posts/bfbe6a21/image-1.png" class>

<a id="more"></a>



<h3 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h3><ol>
<li><p>æ‰“å¼€ cmd</p>
</li>
<li><p>è¾“å…¥<code>netstat -aon|findstr 1099</code>å›è½¦</p>
</li>
<li><p>è®°ä½ pidï¼Œæ¯”å¦‚è¯´æ˜¯ 33500</p>
</li>
<li><p>è¾“å…¥<code>taskkill -f -pid 33500</code></p>
</li>
<li><p>å†æ¬¡å¯åŠ¨ Tomcat</p>
</li>
</ol>
<img src="/posts/bfbe6a21/image-2.png" class>]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>å…¶ä»–</category>
      </categories>
      <tags>
        <tag>é—®é¢˜</tag>
        <tag>Tomcat</tag>
      </tags>
  </entry>
  <entry>
    <title>Lombok</title>
    <url>/posts/68207400.html</url>
    <content><![CDATA[<ol>
<li><p>IDEA ä¸­å®‰è£…æ’ä»¶</p>
</li>
<li><p>é¡¹ç›®ä¸­å¯¼å…¥ jar åŒ…</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.projectlombok/lombok --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<a id="more"></a>
</li>
<li><p>å¸¸ç”¨æ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Getter</span> and <span class="meta">@Setter</span></span><br><span class="line"><span class="meta">@FieldNameConstants</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="meta">@EqualsAndHashCode</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span>, <span class="meta">@RequiredArgsConstructor</span> and <span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@Log</span>, <span class="meta">@Log4j</span>, <span class="meta">@Log4j2</span>, <span class="meta">@Slf4j</span>, <span class="meta">@XSlf4j</span>, <span class="meta">@CommonsLog</span>, <span class="meta">@JBossLog</span>, <span class="meta">@Flogger</span></span><br><span class="line"><span class="meta">@Data</span> <span class="comment">//æœ€å¸¸ç”¨ ç”Ÿæˆæ— å‚æ„é€ ã€getterã€setterã€ toStringã€hashCodeã€equals</span></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="meta">@Singular</span></span><br><span class="line"><span class="meta">@Delegate</span></span><br><span class="line"><span class="meta">@Value</span></span><br><span class="line"><span class="meta">@Accessors</span></span><br><span class="line"><span class="meta">@Wither</span></span><br><span class="line"><span class="meta">@SneakyThrows</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¤ºä¾‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>å…¶ä»–</category>
      </categories>
      <tags>
        <tag>æ³¨è§£</tag>
        <tag>æ’ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title>01_å›é¡¾ MVC</title>
    <url>/posts/ff0d889e.html</url>
    <content><![CDATA[<h3 id="1-ä»€ä¹ˆæ˜¯-MVC"><a href="#1-ä»€ä¹ˆæ˜¯-MVC" class="headerlink" title="1. ä»€ä¹ˆæ˜¯ MVC"></a>1. ä»€ä¹ˆæ˜¯ MVC</h3><ul>
<li>MVCæ˜¯æ¨¡å‹ï¼ˆModelï¼‰ã€è§†å›¾ï¼ˆViewï¼‰ã€æ§åˆ¶å™¨(Controller)çš„ç®€å†™ï¼Œæ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡è§„èŒƒã€‚</li>
<li>æ˜¯å°†ä¸šåŠ¡é€»è¾‘ã€æ•°æ®ã€æ˜¾ç¤ºåˆ†ç¦»çš„æ–¹æ³•æ¥ç»„ç»‡ä»£ç ã€‚</li>
<li>MVCä¸»è¦ä½œç”¨æ˜¯<strong>é™ä½äº†è§†å›¾ä¸ä¸šåŠ¡é€»è¾‘é—´çš„åŒå‘å¶åˆ</strong>ã€‚</li>
<li>MVCä¸æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œ<strong>MVCæ˜¯ä¸€ç§æ¶æ„æ¨¡å¼</strong>ã€‚å½“ç„¶ä¸åŒçš„MVCå­˜åœ¨å·®å¼‚ã€‚</li>
</ul>
<p><strong>Modelï¼ˆæ¨¡å‹ï¼‰ï¼š</strong>æ•°æ®æ¨¡å‹ï¼Œæä¾›è¦å±•ç¤ºçš„æ•°æ®ï¼Œå› æ­¤åŒ…å«æ•°æ®å’Œè¡Œä¸ºï¼Œå¯ä»¥è®¤ä¸ºæ˜¯é¢†åŸŸæ¨¡å‹æˆ–JavaBeanç»„ä»¶ï¼ˆåŒ…å«æ•°æ®å’Œè¡Œä¸ºï¼‰ï¼Œä¸è¿‡ç°åœ¨ä¸€èˆ¬éƒ½åˆ†ç¦»å¼€æ¥ï¼šValue Objectï¼ˆæ•°æ®Daoï¼‰ å’Œ æœåŠ¡å±‚ï¼ˆè¡Œä¸ºServiceï¼‰ã€‚ä¹Ÿå°±æ˜¯æ¨¡å‹æä¾›äº†æ¨¡å‹æ•°æ®æŸ¥è¯¢å’Œæ¨¡å‹æ•°æ®çš„çŠ¶æ€æ›´æ–°ç­‰åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ•°æ®å’Œä¸šåŠ¡ã€‚</p>
<p><strong>Viewï¼ˆè§†å›¾ï¼‰ï¼š</strong>è´Ÿè´£è¿›è¡Œæ¨¡å‹çš„å±•ç¤ºï¼Œä¸€èˆ¬å°±æ˜¯æˆ‘ä»¬è§åˆ°çš„ç”¨æˆ·ç•Œé¢ï¼Œå®¢æˆ·æƒ³çœ‹åˆ°çš„ä¸œè¥¿ã€‚</p>
<p><strong>Controllerï¼ˆæ§åˆ¶å™¨ï¼‰ï¼š</strong>æ¥æ”¶ç”¨æˆ·è¯·æ±‚ï¼Œå§”æ‰˜ç»™æ¨¡å‹è¿›è¡Œå¤„ç†ï¼ˆçŠ¶æ€æ”¹å˜ï¼‰ï¼Œå¤„ç†å®Œæ¯•åæŠŠè¿”å›çš„æ¨¡å‹æ•°æ®è¿”å›ç»™è§†å›¾ï¼Œç”±è§†å›¾è´Ÿè´£å±•ç¤ºã€‚ä¹Ÿå°±æ˜¯è¯´æ§åˆ¶å™¨åšäº†ä¸ªè°ƒåº¦å‘˜çš„å·¥ä½œã€‚</p>
<img src="/posts/ff0d889e/mvc.jpg" class>

<a id="more"></a>



<h3 id="2-Model1-æ—¶ä»£"><a href="#2-Model1-æ—¶ä»£" class="headerlink" title="2. Model1 æ—¶ä»£"></a>2. Model1 æ—¶ä»£</h3><ul>
<li>åœ¨ web æ—©æœŸçš„å¼€å‘ä¸­ï¼Œé€šå¸¸é‡‡ç”¨çš„éƒ½æ˜¯ Model1</li>
<li>Model1 ä¸­ï¼Œä¸»è¦åˆ†ä¸ºä¸¤å±‚ï¼Œè§†å›¾å±‚å’Œæ¨¡å‹å±‚</li>
</ul>
<img src="/posts/ff0d889e/image-20200804114856394.png" class>

<ul>
<li><p>Model1ä¼˜ç‚¹ï¼šæ¶æ„ç®€å•ï¼Œæ¯”è¾ƒé€‚åˆå°å‹é¡¹ç›®å¼€å‘</p>
</li>
<li><p>Model1ç¼ºç‚¹ï¼šJSPèŒè´£ä¸å•ä¸€ï¼ŒèŒè´£è¿‡é‡ï¼Œä¸ä¾¿äºç»´æŠ¤</p>
</li>
</ul>
<h3 id="3-Model2-æ—¶ä»£"><a href="#3-Model2-æ—¶ä»£" class="headerlink" title="3. Model2 æ—¶ä»£"></a>3. Model2 æ—¶ä»£</h3><p>Model2 æŠŠä¸€ä¸ªé¡¹ç›®åˆ†æˆä¸‰éƒ¨åˆ†ï¼ŒåŒ…æ‹¬<strong>è§†å›¾ã€æ§åˆ¶ã€æ¨¡å‹ã€‚</strong></p>
<img src="/posts/ff0d889e/image-20200804115306901.png" class>

<ol>
<li>ç”¨æˆ·å‘è¯·æ±‚</li>
<li>Servlet æ¥æ”¶è¯·æ±‚æ•°æ®ï¼Œå¹¶è°ƒç”¨å¯¹åº”çš„ä¸šåŠ¡é€»è¾‘æ–¹æ³•</li>
<li>ä¸šåŠ¡å¤„ç†å®Œæ¯•ï¼Œè¿”å›æ›´æ–°åçš„æ•°æ®ç»™ Servlet</li>
<li>Servlet è½¬å‘åˆ° JSPï¼Œç”± JSP æ¥æ¸²æŸ“é¡µé¢</li>
<li>å“åº”ç»™å‰ç«¯æ›´æ–°åçš„é¡µé¢</li>
</ol>
<hr>
<p><strong>èŒè´£åˆ†æï¼š</strong></p>
<p><strong>Controllerï¼šæ§åˆ¶å™¨</strong></p>
<ul>
<li><p>å–å¾—è¡¨å•æ•°æ®</p>
</li>
<li><p>è°ƒç”¨ä¸šåŠ¡é€»è¾‘</p>
</li>
<li><p>è½¬å‘æŒ‡å®šçš„é¡µé¢</p>
</li>
</ul>
<p><strong>Modelï¼šæ¨¡å‹</strong></p>
<ul>
<li><p>ä¸šåŠ¡é€»è¾‘</p>
</li>
<li><p>ä¿å­˜æ•°æ®çš„çŠ¶æ€</p>
</li>
</ul>
<p><strong>Viewï¼šè§†å›¾</strong></p>
<ul>
<li>æ˜¾ç¤ºé¡µé¢</li>
</ul>
<p>Model2 è¿™æ ·ä¸ä»…æé«˜çš„ä»£ç çš„å¤ç”¨ç‡ä¸é¡¹ç›®çš„æ‰©å±•æ€§ï¼Œä¸”å¤§å¤§é™ä½äº†é¡¹ç›®çš„ç»´æŠ¤æˆæœ¬ã€‚Model1 æ¨¡å¼çš„å®ç°æ¯”è¾ƒç®€å•ï¼Œé€‚ç”¨äºå¿«é€Ÿå¼€å‘å°è§„æ¨¡é¡¹ç›®ï¼ŒModel1 ä¸­ JSP é¡µé¢èº«å…¼ View å’ŒController ä¸¤ç§è§’è‰²ï¼Œå°†æ§åˆ¶é€»è¾‘å’Œè¡¨ç°é€»è¾‘æ··æ‚åœ¨ä¸€èµ·ï¼Œä»è€Œå¯¼è‡´ä»£ç çš„é‡ç”¨æ€§éå¸¸ä½ï¼Œå¢åŠ äº†åº”ç”¨çš„æ‰©å±•æ€§å’Œç»´æŠ¤çš„éš¾åº¦ã€‚Model2 æ¶ˆé™¤äº† Model1 çš„ç¼ºç‚¹ã€‚</p>
<h3 id="4-å›é¡¾-Servlet"><a href="#4-å›é¡¾-Servlet" class="headerlink" title="4. å›é¡¾ Servlet"></a>4. å›é¡¾ Servlet</h3><ol>
<li><p>å»ºç«‹ä¸€ä¸ªæ™®é€š Maven é¡¹ç›®ä½œä¸ºçˆ¶å·¥ç¨‹ï¼Œpom.xml ä¸­å¯¼å…¥ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å»ºç«‹ä¸€ä¸ªæ™®é€š Moudleï¼Œ ç„¶åæ·»åŠ  Web app çš„æ”¯æŒ</p>
<img src="/posts/ff0d889e/image-20200804121132756.png" class>

<p>!<img src="/posts/ff0d889e/image-20200804121040538.png" class></p>
</li>
<li><p>å¯¼å…¥Servlet å’Œ jsp çš„ä¾èµ–ï¼ˆå¯ä»¥ä¸å¯¼å…¥ï¼‰</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™ä¸€ä¸ª Servlet ç±»ï¼Œç”¨æ¥å¤„ç†ç”¨æˆ·çš„è¯·æ±‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 1. è·å–å‰ç«¯å‚æ•°</span></span><br><span class="line">        String method = req.getParameter(<span class="string">&quot;method&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (method.equals(<span class="string">&quot;add&quot;</span>))&#123;</span><br><span class="line">            req.getSession().setAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;æ‰§è¡Œäº†addæ–¹æ³•&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (method.equals(<span class="string">&quot;delete&quot;</span>))&#123;</span><br><span class="line">            req.getSession().setAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;æ‰§è¡Œäº†deleteæ–¹æ³•&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 2. è°ƒç”¨ä¸šåŠ¡å±‚</span></span><br><span class="line">        <span class="comment">// æ— </span></span><br><span class="line">        <span class="comment">// 3. è¯•å›¾è½¬å‘æˆ–è€…é‡å®šå‘</span></span><br><span class="line">        req.getRequestDispatcher(<span class="string">&quot;/WEB-INF/jsp/hello.jsp&quot;</span>).forward(req,resp);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><em>æ³¨æ„ï¼š\</em>.jsp çš„ä½ç½®ï¼šå¦‚æœé¡µé¢æ˜¯å…¬å…±çš„ï¼Œæ”¾åœ¨ web ç›®å½•ä¸‹ï¼›å¦‚æœä¿è¯å®‰å…¨ï¼Œç”¨æˆ·ä¸å¯è§ï¼Œæ”¾åœ¨ WEB-INF ç›®å½•ä¸‹*</p>
</li>
<li><p>åœ¨ WEB-INF ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª jsp çš„æ–‡ä»¶å¤¹ï¼Œæ–°å»º hello.jsp</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">$&#123;msg&#125;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨ web.xml ä¸­æ³¨å†Œ Servlet</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.horsen.servlet.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>é…ç½® Tomcatï¼Œå¯åŠ¨æµ‹è¯•ï¼Œåœ°å€æ è¾“å…¥</p>
<ul>
<li>localhost:8080/user?method=add</li>
<li>localhost:8080/user?method=delete</li>
</ul>
</li>
</ol>
<hr>
<p><strong>MVCæ¡†æ¶è¦åšå“ªäº›äº‹æƒ…</strong></p>
<ol>
<li>å°†urlæ˜ å°„åˆ°javaç±»æˆ–javaç±»çš„æ–¹æ³•</li>
<li>å°è£…ç”¨æˆ·æäº¤çš„æ•°æ®</li>
<li>å¤„ç†è¯·æ±‚ â€“&gt; è°ƒç”¨ç›¸å…³çš„ä¸šåŠ¡å¤„ç† â€“&gt; å°è£…å“åº”æ•°æ®</li>
<li>å°†å“åº”çš„æ•°æ®è¿›è¡Œæ¸²æŸ“ . jsp / html ç­‰è¡¨ç¤ºå±‚æ•°æ®</li>
</ol>
<p><strong>è¯´æ˜ï¼š</strong></p>
<ul>
<li><p>å¸¸è§çš„æœåŠ¡å™¨ç«¯ MVC æ¡†æ¶æœ‰ï¼šStrutsã€Spring MVCã€ASP.NET MVCã€Zend Frameworkã€JSFï¼›</p>
</li>
<li><p>å¸¸è§å‰ç«¯MVCæ¡†æ¶ï¼švueã€angularjsã€reactã€backboneï¼›ç”± MVC æ¼”åŒ–å‡ºäº†å¦å¤–ä¸€äº›æ¨¡å¼å¦‚ï¼šMVPã€MVVM ç­‰ç­‰ã€‚</p>
</li>
</ul>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Spring MVC</category>
      </categories>
      <tags>
        <tag>Spring MVC</tag>
      </tags>
  </entry>
  <entry>
    <title>02_Spring MVC æ¦‚è¿°</title>
    <url>/posts/c7715426.html</url>
    <content><![CDATA[<h3 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1. ç®€ä»‹"></a>1. ç®€ä»‹</h3><blockquote>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://docs.spring.io/spring/docs/5.2.0.RELEASE/spring-framework-reference/web.html#spring-web">https://docs.spring.io/spring/docs/5.2.0.RELEASE/spring-framework-reference/web.html#spring-web</a></p>
</blockquote>
<p><strong>Spring MVC çš„ä¼˜ç‚¹ï¼š</strong></p>
<ol>
<li>è½»é‡çº§ï¼Œç®€å•æ˜“å­¦</li>
<li>é«˜æ•ˆï¼ŒåŸºäºè¯·æ±‚å“åº”çš„MVCæ¡†æ¶</li>
<li>ä¸Springå…¼å®¹æ€§å¥½ï¼Œæ— ç¼ç»“åˆ</li>
<li>çº¦å®šä¼˜äºé…ç½®</li>
<li>åŠŸèƒ½å¼ºå¤§ï¼šRESTfulã€æ•°æ®éªŒè¯ã€æ ¼å¼åŒ–ã€æœ¬åœ°åŒ–ã€ä¸»é¢˜ç­‰</li>
<li>ç®€æ´çµæ´»</li>
</ol>
<a id="more"></a>



<h3 id="2-ä¸­å¿ƒæ§åˆ¶å™¨"><a href="#2-ä¸­å¿ƒæ§åˆ¶å™¨" class="headerlink" title="2. ä¸­å¿ƒæ§åˆ¶å™¨"></a>2. ä¸­å¿ƒæ§åˆ¶å™¨</h3><p>Spring çš„ web æ¡†æ¶å›´ç»•<code>DispatcherServlet</code>è®¾è®¡ã€‚<code>DispatcherServlet</code>çš„ä½œç”¨æ˜¯å°†è¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„å¤„ç†å™¨ã€‚ä» Spring 2.5 å¼€å§‹ï¼Œä½¿ç”¨ Java 5 æˆ–è€…ä»¥ä¸Šç‰ˆæœ¬çš„ç”¨æˆ·å¯ä»¥é‡‡ç”¨åŸºäºæ³¨è§£çš„ controller å£°æ˜æ–¹å¼ã€‚</p>
<p>Spring MVC æ¡†æ¶åƒè®¸å¤šå…¶ä»– MVC æ¡†æ¶ä¸€æ ·, <strong>ä»¥è¯·æ±‚ä¸ºé©±åŠ¨ï¼Œå›´ç»•ä¸€ä¸ªä¸­å¿ƒ Servlet åˆ†æ´¾è¯·æ±‚åŠæä¾›å…¶ä»–åŠŸèƒ½ï¼ŒDispatcherServlet æ˜¯ä¸€ä¸ªå®é™…çš„ Servletï¼ˆå®ƒç»§æ‰¿è‡ª HttpServlet åŸºç±»ï¼‰ã€‚</strong></p>
<hr>
<p>å½“å‘èµ·è¯·æ±‚æ—¶è¢«å‰ç½®çš„æ§åˆ¶å™¨æ‹¦æˆªåˆ°è¯·æ±‚ï¼ˆå³ DispatcherServletï¼‰ï¼Œæ ¹æ®è¯·æ±‚å‚æ•°ç”Ÿæˆä»£ç†è¯·æ±‚ï¼Œæ‰¾åˆ°è¯·æ±‚å¯¹åº”çš„å®é™…æ§åˆ¶å™¨ï¼Œæ§åˆ¶å™¨å¤„ç†è¯·æ±‚ï¼Œåˆ›å»ºæ•°æ®æ¨¡å‹ï¼Œè®¿é—®æ•°æ®åº“ï¼Œå°†æ¨¡å‹å“åº”ç»™ä¸­å¿ƒæ§åˆ¶å™¨ï¼Œæ§åˆ¶å™¨ä½¿ç”¨æ¨¡å‹ä¸è§†å›¾æ¸²æŸ“è§†å›¾ç»“æœï¼Œå°†ç»“æœè¿”å›ç»™ä¸­å¿ƒæ§åˆ¶å™¨ï¼Œå†å°†ç»“æœè¿”å›ç»™è¯·æ±‚è€…ã€‚</p>
<img src="/posts/c7715426/SpringMVC%E5%8E%9F%E7%90%86.jpg" class>



<h3 id="3-Spring-MVC-æ‰§è¡ŒåŸç†"><a href="#3-Spring-MVC-æ‰§è¡ŒåŸç†" class="headerlink" title="3. Spring MVC æ‰§è¡ŒåŸç†"></a>3. Spring MVC æ‰§è¡ŒåŸç†</h3><p>å›¾ä¸º Spring MVC çš„ä¸€ä¸ªè¾ƒå®Œæ•´çš„æµç¨‹å›¾ï¼Œå®çº¿è¡¨ç¤º Spring MVC æ¡†æ¶æä¾›çš„æŠ€æœ¯ï¼Œä¸éœ€è¦å¼€å‘è€…å®ç°ï¼Œè™šçº¿è¡¨ç¤ºéœ€è¦å¼€å‘è€…å®ç°ã€‚</p>
<img src="/posts/c7715426/spring_mvc.png" class>

<p><strong>ç®€è¦åˆ†ææ‰§è¡Œæµç¨‹</strong></p>
<ol>
<li><p>DispatcherServlet è¡¨ç¤ºå‰ç½®æ§åˆ¶å™¨ï¼Œæ˜¯æ•´ä¸ª Spring MVC çš„æ§åˆ¶ä¸­å¿ƒã€‚ç”¨æˆ·å‘å‡ºè¯·æ±‚ï¼ŒDispatcherServlet æ¥æ”¶è¯·æ±‚å¹¶æ‹¦æˆªè¯·æ±‚ã€‚</p>
<p>å‡è®¾è¯·æ±‚çš„urlä¸º : <code>http://localhost:8080/SpringMVC/hello</code></p>
<p>è¯¥ url å¯ä»¥æ‹†åˆ†æˆä¸‰éƒ¨åˆ†ï¼š</p>
<ul>
<li><p><code>http://localhost:8080</code>è¡¨ç¤ºæœåŠ¡å™¨åŸŸå</p>
</li>
<li><p><code>/SpringMVC</code>è¡¨ç¤ºéƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šçš„ web ç«™ç‚¹</p>
</li>
<li><p><code>/hello</code>è¡¨ç¤ºæ§åˆ¶å™¨</p>
</li>
</ul>
<p>é€šè¿‡åˆ†æï¼Œå¦‚ä¸Š url è¡¨ç¤ºä¸ºï¼š==è¯·æ±‚ä½äºæœåŠ¡å™¨ localhost:8080 ä¸Šçš„ SpringMVC ç«™ç‚¹çš„ hello æ§åˆ¶å™¨ã€‚==</p>
</li>
<li><p>HandlerMapping ä¸ºå¤„ç†å™¨æ˜ å°„ã€‚DispatcherServlet è°ƒç”¨ HandlerMappingï¼ŒHandlerMapping æ ¹æ®è¯·æ±‚ url æŸ¥æ‰¾ Handlerã€‚</p>
</li>
<li><p>HandlerExecution è¡¨ç¤ºå…·ä½“çš„ Handlerï¼Œå…¶ä¸»è¦ä½œç”¨æ˜¯æ ¹æ® url æŸ¥æ‰¾æ§åˆ¶å™¨ã€‚</p>
</li>
<li><p>HandlerExecution å°†è§£æåçš„ä¿¡æ¯ä¼ é€’ç»™ DispatcherServletï¼Œå¦‚è§£ææ§åˆ¶å™¨æ˜ å°„ç­‰ã€‚</p>
</li>
<li><p>HandlerAdapter è¡¨ç¤ºå¤„ç†å™¨é€‚é…å™¨ï¼Œå…¶æŒ‰ç…§ç‰¹å®šçš„è§„åˆ™å»æ‰§è¡Œ Handlerã€‚</p>
</li>
<li><p>Handler è®©å…·ä½“çš„ Controller æ‰§è¡Œã€‚</p>
</li>
<li><p>Controller å°†å…·ä½“çš„æ‰§è¡Œä¿¡æ¯è¿”å›ç»™ HandlerAdapterï¼Œå¦‚ ModelAndViewã€‚</p>
</li>
<li><p>HandlerAdapter å°†è§†å›¾é€»è¾‘åæˆ–æ¨¡å‹ä¼ é€’ç»™ DispatcherServletã€‚</p>
</li>
<li><p>DispatcherServlet è°ƒç”¨è§†å›¾è§£æå™¨ï¼ˆViewResolverï¼‰æ¥è§£æ HandlerAdapter ä¼ é€’çš„é€»è¾‘è§†å›¾åã€‚</p>
</li>
<li><p>è§†å›¾è§£æå™¨å°†è§£æçš„é€»è¾‘è§†å›¾åä¼ ç»™ DispatcherServletã€‚</p>
</li>
<li><p>DispatcherServlet æ ¹æ®è§†å›¾è§£æå™¨è§£æçš„è§†å›¾ç»“æœï¼Œè°ƒç”¨å…·ä½“çš„è§†å›¾ã€‚</p>
</li>
<li><p>æœ€ç»ˆè§†å›¾å‘ˆç°ç»™ç”¨æˆ·ã€‚</p>
</li>
</ol>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Spring MVC</category>
      </categories>
      <tags>
        <tag>Spring MVC</tag>
      </tags>
  </entry>
  <entry>
    <title>04_Controller å’Œ RESTful é£æ ¼</title>
    <url>/posts/10418adb.html</url>
    <content><![CDATA[<h3 id="1-æ§åˆ¶å™¨-Controller"><a href="#1-æ§åˆ¶å™¨-Controller" class="headerlink" title="1. æ§åˆ¶å™¨ Controller"></a>1. æ§åˆ¶å™¨ Controller</h3><ul>
<li>æ§åˆ¶å™¨è´Ÿè´£æä¾›è®¿é—®åº”ç”¨ç¨‹åºçš„è¡Œä¸ºï¼Œé€šå¸¸é€šè¿‡æ¥å£å®šä¹‰æˆ–æ³¨è§£å®šä¹‰ä¸¤ç§æ–¹æ³•å®ç°ã€‚</li>
<li>æ§åˆ¶å™¨è´Ÿè´£è§£æç”¨æˆ·çš„è¯·æ±‚å¹¶å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªæ¨¡å‹ã€‚</li>
<li>åœ¨ Spring MVC ä¸­ä¸€ä¸ªæ§åˆ¶å™¨ç±»å¯ä»¥åŒ…å«å¤šä¸ªæ–¹æ³•ã€‚</li>
<li>åœ¨ Spring MVC ä¸­ï¼Œå¯¹äº Controller çš„é…ç½®æ–¹å¼æœ‰å¾ˆå¤šç§ã€‚</li>
</ul>
<h3 id="2-å®ç°-Controller-æ¥å£"><a href="#2-å®ç°-Controller-æ¥å£" class="headerlink" title="2. å®ç° Controller æ¥å£"></a>2. å®ç° Controller æ¥å£</h3><p><em>è¯¦è§ä¸Šä¸€ç¯‡åšå®¢</em></p>
<p>è€Œä¸”å¤ªè€äº†ï¼Œä¸ç”¨äº†ã€‚</p>
<h3 id="3-ä½¿ç”¨æ³¨è§£-Controller"><a href="#3-ä½¿ç”¨æ³¨è§£-Controller" class="headerlink" title="3. ä½¿ç”¨æ³¨è§£@Controller"></a>3. ä½¿ç”¨æ³¨è§£<code>@Controller</code></h3><p><em>è¯¦è§ä¸Šä¸€ç¯‡åšå®¢</em></p>
<a id="more"></a>



<h3 id="4-RESTful-é£æ ¼"><a href="#4-RESTful-é£æ ¼" class="headerlink" title="4. RESTful é£æ ¼"></a>4. RESTful é£æ ¼</h3><h4 id="4-1-æ¦‚å¿µ"><a href="#4-1-æ¦‚å¿µ" class="headerlink" title="4.1 æ¦‚å¿µ"></a>4.1 æ¦‚å¿µ</h4><p>RESTful å°±æ˜¯ä¸€ä¸ªèµ„æºå®šä½åŠèµ„æºæ“ä½œçš„é£æ ¼ã€‚ä¸æ˜¯æ ‡å‡†ä¹Ÿä¸æ˜¯åè®®ï¼Œåªæ˜¯ä¸€ç§é£æ ¼ã€‚åŸºäºè¿™ä¸ªé£æ ¼è®¾è®¡çš„è½¯ä»¶å¯ä»¥æ›´ç®€æ´ï¼Œæ›´æœ‰å±‚æ¬¡ï¼Œæ›´æ˜“äºå®ç°ç¼“å­˜ç­‰æœºåˆ¶ã€‚</p>
<h4 id="4-2-åŠŸèƒ½"><a href="#4-2-åŠŸèƒ½" class="headerlink" title="4.2 åŠŸèƒ½"></a>4.2 åŠŸèƒ½</h4><p>èµ„æºï¼šäº’è”ç½‘æ‰€æœ‰çš„äº‹ç‰©éƒ½å¯ä»¥è¢«æŠ½è±¡ä¸ºèµ„æº</p>
<p>èµ„æºæ“ä½œï¼šä½¿ç”¨ POSTã€DELETEã€PUTã€GETï¼Œä½¿ç”¨ä¸åŒæ–¹æ³•å¯¹èµ„æºè¿›è¡Œæ“ä½œã€‚</p>
<p>åˆ†åˆ«å¯¹åº”æ·»åŠ ã€ åˆ é™¤ã€ä¿®æ”¹ã€æŸ¥è¯¢ã€‚</p>
<h4 id="4-3-ä¼ ç»Ÿæ–¹å¼æ“ä½œèµ„æº"><a href="#4-3-ä¼ ç»Ÿæ–¹å¼æ“ä½œèµ„æº" class="headerlink" title="4.3 ä¼ ç»Ÿæ–¹å¼æ“ä½œèµ„æº"></a>4.3 ä¼ ç»Ÿæ–¹å¼æ“ä½œèµ„æº</h4><p> é€šè¿‡ä¸åŒçš„å‚æ•°ï¼ˆpost å’Œ getï¼‰æ¥å®ç°ä¸åŒçš„æ•ˆæœï¼Œæ–¹æ³•å•ä¸€</p>
<ul>
<li><p><a href="http://127.0.0.1/item/queryItem.action?id=1">http://127.0.0.1/item/queryItem.action?id=1</a> æŸ¥è¯¢ GET</p>
</li>
<li><p><a href="http://127.0.0.1/item/saveItem.action">http://127.0.0.1/item/saveItem.action</a> æ–°å¢ POST</p>
</li>
<li><p><a href="http://127.0.0.1/item/updateItem.action">http://127.0.0.1/item/updateItem.action</a> æ›´æ–° POST</p>
</li>
<li><p><a href="http://127.0.0.1/item/deleteItem.action?id=1">http://127.0.0.1/item/deleteItem.action?id=1</a> åˆ é™¤ GETæˆ–POST</p>
</li>
</ul>
<h4 id="4-4-ä½¿ç”¨RESTfulæ“ä½œèµ„æº"><a href="#4-4-ä½¿ç”¨RESTfulæ“ä½œèµ„æº" class="headerlink" title="4.4 ä½¿ç”¨RESTfulæ“ä½œèµ„æº"></a>4.4 ä½¿ç”¨RESTfulæ“ä½œèµ„æº</h4><p>å¯ä»¥é€šè¿‡ä¸åŒçš„è¯·æ±‚æ–¹å¼æ¥å®ç°ä¸åŒçš„æ•ˆæœ</p>
<p>å¦‚ä¸‹ï¼šè¯·æ±‚åœ°å€ä¸€æ ·ï¼Œä½†æ˜¯åŠŸèƒ½å¯ä»¥ä¸åŒ</p>
<ul>
<li><p><a href="http://127.0.0.1/item/1">http://127.0.0.1/item/1</a> æŸ¥è¯¢ GET</p>
</li>
<li><p><a href="http://127.0.0.1/item">http://127.0.0.1/item</a> æ–°å¢ POST</p>
</li>
<li><p><a href="http://127.0.0.1/item">http://127.0.0.1/item</a> æ›´æ–° PUT</p>
</li>
<li><p><a href="http://127.0.0.1/item/1">http://127.0.0.1/item/1</a> åˆ é™¤ DELETE</p>
</li>
</ul>
<h4 id="4-5-æµ‹è¯•"><a href="#4-5-æµ‹è¯•" class="headerlink" title="4.5 æµ‹è¯•"></a>4.5 æµ‹è¯•</h4><ol>
<li><p>ä¼ ç»Ÿæ–¹å¼æ“ä½œèµ„æº</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/result&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, Model model)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> res = a + b;</span><br><span class="line">    model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;ç»“æœä¸º: &quot;</span> + res);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ°å€æ ä¸­ url æ˜¯è¿™æ ·çš„ï¼š<code>http://localhost:8080/result?a=1&amp;b=2</code></p>
</li>
<li><p>ä½¿ç”¨RESTfulæ“ä½œèµ„æº</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/rest/&#123;a&#125;/&#123;b&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">restfulTest</span><span class="params">(<span class="meta">@PathVariable</span> <span class="keyword">int</span> a, <span class="meta">@PathVariable</span> <span class="keyword">int</span> b, Model model)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> res = a + b;</span><br><span class="line">    model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;ç»“æœä¸º: &quot;</span> + res);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ°å€æ ä¸­ url æ˜¯è¿™æ ·çš„ï¼š<code>http://localhost:8080/rest/1/2</code></p>
</li>
<li><p>ä½¿ç”¨ method å±æ€§æŒ‡å®šè¯·æ±‚ç±»å‹ï¼ˆ<strong>é»˜è®¤ä¸º GET</strong>ï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/rest/&#123;a&#125;/&#123;b&#125;&quot;, method = RequestMethod.POST)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">restfulTest</span><span class="params">(<span class="meta">@PathVariable</span> <span class="keyword">int</span> a, <span class="meta">@PathVariable</span> <span class="keyword">int</span> b, Model model)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> res = a + b;</span><br><span class="line">    model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;ç»“æœä¸º: &quot;</span> + res);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ–è€…ä½¿ç”¨ç»„åˆæ³¨è§£</p>
<ul>
<li><code>@GetMapping</code></li>
<li><code>@PostMapping</code></li>
<li><code>@PutMapping</code></li>
<li><code>@DeleteMapping</code></li>
<li><code>@PatchMapping</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/rest/&#123;a&#125;/&#123;b&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">restfulTest</span><span class="params">(<span class="meta">@PathVariable</span> <span class="keyword">int</span> a, <span class="meta">@PathVariable</span> <span class="keyword">int</span> b, Model model)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> res = a + b;</span><br><span class="line">    model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;ç»“æœä¸º: &quot;</span> + res);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Spring MVC</category>
      </categories>
      <tags>
        <tag>Spring MVC</tag>
        <tag>RESTful</tag>
      </tags>
  </entry>
  <entry>
    <title>05_ç»“æœè·³è½¬æ–¹å¼</title>
    <url>/posts/a76a436a.html</url>
    <content><![CDATA[<h3 id="1-ModelAndView"><a href="#1-ModelAndView" class="headerlink" title="1. ModelAndView"></a>1. ModelAndView</h3><p>å‰é¢è¯´äº†å¾ˆå¤šæ¬¡äº†</p>
<h3 id="2-Servlet-API"><a href="#2-Servlet-API" class="headerlink" title="2. Servlet API"></a>2. Servlet API</h3><p>é€šè¿‡è®¾ç½® Servlet APIï¼Œä¸éœ€è¦è§†å›¾è§£æå™¨</p>
<ol>
<li><p>é€šè¿‡ HttpServletResponse è¿›è¡Œè¾“å‡º</p>
</li>
<li><p>é€šè¿‡ HttpServletResponse å®ç°é‡å®šå‘</p>
</li>
<li><p>é€šè¿‡ HttpServletResponse å®ç°è½¬å‘</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResultGo</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/result/t1&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">(HttpServletRequest req, HttpServletResponse rsp)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        rsp.getWriter().println(<span class="string">&quot;Hello,Spring BY servlet API&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/result/t2&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">(HttpServletRequest req, HttpServletResponse rsp)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        rsp.sendRedirect(<span class="string">&quot;/index.jsp&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/result/t3&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">(HttpServletRequest req, HttpServletResponse rsp)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//è½¬å‘</span></span><br><span class="line">        req.setAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;/result/t3&quot;</span>);</span><br><span class="line">        req.getRequestDispatcher(<span class="string">&quot;/WEB-INF/jsp/test.jsp&quot;</span>).forward(req,rsp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<a id="more"></a>



<h3 id="3-Spring-MVC"><a href="#3-Spring-MVC" class="headerlink" title="3. Spring  MVC"></a>3. Spring  MVC</h3><ol>
<li><p>é€šè¿‡ Spring MVC æ¥å®ç°è½¬å‘å’Œé‡å®šå‘ï¼Œ<strong>æ— éœ€è§†å›¾è§£æå™¨</strong></p>
<p>æµ‹è¯•å‰ï¼Œéœ€è¦å°†è§†å›¾è§£æå™¨æ³¨é‡Šæ‰</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResultSpringMVC</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/rsm/t1&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//è½¬å‘</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;/index.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/rsm/t2&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//è½¬å‘äºŒ</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;forward:/index.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/rsm/t3&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test3</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//é‡å®šå‘</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/index.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>é€šè¿‡ Spring MVC æ¥å®ç°è½¬å‘å’Œé‡å®šå‘ï¼Œ<strong>æœ‰è§†å›¾è§£æå™¨</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResultSpringMVC2</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/rsm2/t1&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//è½¬å‘</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/rsm2/t2&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//é‡å®šå‘</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/index.jsp&quot;</span>;</span><br><span class="line">        <span class="comment">//return &quot;redirect:hello.do&quot;; //hello.doä¸ºå¦ä¸€ä¸ªè¯·æ±‚/</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Spring MVC</category>
      </categories>
      <tags>
        <tag>Spring MVC</tag>
      </tags>
  </entry>
  <entry>
    <title>03_ç¬¬ä¸€ä¸ª Spring MVC ç¨‹åº</title>
    <url>/posts/92675826.html</url>
    <content><![CDATA[<h3 id="1-åºŸè¯å°‘è¯´"><a href="#1-åºŸè¯å°‘è¯´" class="headerlink" title="1. åºŸè¯å°‘è¯´"></a>1. åºŸè¯å°‘è¯´</h3><ol>
<li><p>æ–°å»ºä¸€ä¸ªæ™®é€šçš„ Maven é¡¹ç›®ï¼ˆå¦‚æœä½œä¸ºçˆ¶å·¥ç¨‹ï¼Œå°±æŠŠ src ç›®å½•åˆ æ‰ï¼Œå†æ·»åŠ æ¨¡å—ï¼‰</p>
</li>
<li><p>å³é”®é¡¹ç›®ï¼Œæ·»åŠ  Web æ¡†æ¶æ”¯æŒ</p>
</li>
<li><p>å¯¼å…¥ç›¸å…³ä¾èµ–ï¼ˆæ³¨æ„èµ„æºå¯¼å‡ºé—®é¢˜ï¼‰</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<a id="more"></a>
</li>
<li><p>ç¡®ä¿é¡¹ç›®ç»“æ„ä¸­ Artifacts ä¸­æœ‰è¿™äº›ä¾èµ–ï¼ˆå¦‚æœæ²¡æœ‰å°±æ–°å»º lib ç›®å½•ï¼Œæ·»åŠ  Library Filesï¼‰</p>
<img src="/posts/92675826/image-20200805232928692.png" class>
</li>
<li><p>åœ¨ web.xml ä¸­é…ç½®<code>DispatcherServlet</code>ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ª Servlet</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®DispatcherServlet(è¯·æ±‚åˆ†å‘å™¨, å‰ç«¯æ§åˆ¶å™¨), è¿™ä¸ªæ˜¯SpringMVCçš„æ ¸å¿ƒ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment"> åœ¨SpringMVCä¸­</span></span><br><span class="line"><span class="comment"> /  åªåŒ¹é…æ‰€æœ‰çš„è¯·æ±‚, ä¸ä¼šåŒ¹é…jspé¡µé¢</span></span><br><span class="line"><span class="comment"> /* åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚, åŒ…æ‹¬jspé¡µé¢</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™ Spring MVC çš„é…ç½®æ–‡ä»¶ springmvc-servlet.xmlï¼Œæ·»åŠ æ ¸å¿ƒä¸‰è¦ç´ </p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¤„ç†å™¨æ˜ å°„å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¤„ç†å™¨é€‚é…å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span> <span class="attr">id</span>=<span class="string">&quot;InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å‰ç¼€ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åç¼€ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨ web.xml ä¸­ç»‘å®šï¼Œå¹¶è®¾ç½®å¯åŠ¨çº§åˆ«</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>...<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>...<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- DispatcherServletéœ€è¦ç»‘å®šSpringçš„é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc-servlet.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯åŠ¨çº§åˆ«: 1 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™æ“ä½œä¸šåŠ¡çš„ Controllerï¼Œå®ç°<code>Controller</code>æ¥å£ï¼Œè¿”å›ä¸€ä¸ª<code>ModelAndView</code>ï¼Œè£…æ•°æ®ï¼Œå°è§†å›¾</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.mvc.Controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> <span class="keyword">implements</span> <span class="title">Controller</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">handleRequest</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">        <span class="comment">// ä¸šåŠ¡ä»£ç </span></span><br><span class="line">        String result = <span class="string">&quot;HelloSpringMVC&quot;</span>;</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;msg&quot;</span>, result);</span><br><span class="line">        <span class="comment">// è§†å›¾è·³è½¬</span></span><br><span class="line">        <span class="comment">// helloæŒ‡çš„æ˜¯hello.jsp</span></span><br><span class="line">        modelAndView.setViewName(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨ springmvc-servlet.xml ä¸­æ³¨å†Œè¿™ä¸ª bean</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">......</span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment"> BeanNameUrlHandlerMappingéœ€è¦bean</span></span><br><span class="line"><span class="comment"> è¿™é‡Œçš„/helloè¡¨ç¤ºè¯·æ±‚æ˜¯hello å¤„ç†è¯·æ±‚çš„æ˜¯HelloController</span></span><br><span class="line"><span class="comment"> HandlerMappingæ ¹æ®url(localhost:8080/SpringMVC/hello)ä¸­çš„/hello</span></span><br><span class="line"><span class="comment"> å»åŒ¹é…beançš„idå¯»æ‰¾å¯¹åº”çš„Controller</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;/hello&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.controller.HelloController&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™è§†å›¾ hello.jspï¼Œé‡Œé¢æ˜¾ç¤º Controller çš„ ModelAndView ä¸­åˆšåˆšæ·»åŠ çš„å€¼</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">$&#123;msg&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>è®¿é—®<code>localhost:8080/hello</code>è¯·æ±‚ï¼Œæµ‹è¯•ç»“æœ</p>
</li>
</ol>
<hr>
<p>è¿™ä¸ªæµç¨‹åªæ˜¯å¸®åŠ©ç†è§£ä¸Šä¸€ç¯‡åšå®¢ä¸­çš„ Spring æ‰§è¡ŒåŸç†ï¼Œåœ¨å®é™…å¼€å‘ä¸­ä¸ä¼šè¿™ä¹ˆå†™ï¼Œè€Œæ˜¯ç”¨æ³¨è§£æ¥å®ç°ï¼Œæ›´åŠ ç®€å•ã€‚</p>
<h3 id="2-é€šè¿‡æ³¨è§£å®ç°"><a href="#2-é€šè¿‡æ³¨è§£å®ç°" class="headerlink" title="2. é€šè¿‡æ³¨è§£å®ç°"></a>2. é€šè¿‡æ³¨è§£å®ç°</h3><ol>
<li><p>æ–°å»ºä¸€ä¸ª web é¡¹ç›®</p>
</li>
<li><p>å¯¼å…¥ç›¸å…³ jar åŒ…</p>
</li>
<li><p>ç¼–å†™ web.xmlï¼Œæ³¨å†Œ<code>DispatherServlet</code></p>
</li>
<li><p>ç¼–å†™ Spring MVC çš„é…ç½®æ–‡ä»¶ springmvc-servlet.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">       https://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="tag"><span class="string">       https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è‡ªåŠ¨æ‰«æåŒ…, è®©æŒ‡å®šåŒ…ä¸‹çš„æ³¨è§£ç”Ÿæ•ˆ, ç”±IoCå®¹å™¨ç»Ÿä¸€ç®¡ç† --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.horsen.controller&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è®©SpringMVCä¸å¤„ç†é™æ€èµ„æº --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        æ”¯æŒmvcæ³¨è§£é©±åŠ¨</span></span><br><span class="line"><span class="comment">        åœ¨springä¸­ä¸€èˆ¬é‡‡ç”¨@RequestMappingæ³¨è§£æ¥å®Œæˆæ˜ å°„å…³ç³»</span></span><br><span class="line"><span class="comment">        è¦æƒ³ä½¿@RequestMappingæ³¨è§£ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="comment">        å¿…é¡»å‘ä¸Šä¸‹æ–‡ä¸­æ³¨å†ŒDefaultAnnotationHandlerMapping</span></span><br><span class="line"><span class="comment">        å’Œä¸€ä¸ªAnnotationMethodHandlerAdapterå®ä¾‹</span></span><br><span class="line"><span class="comment">        è¿™ä¸¤ä¸ªå®ä¾‹åˆ†åˆ«åœ¨ç±»çº§åˆ«å’Œæ–¹æ³•çº§åˆ«å¤„ç†ã€‚</span></span><br><span class="line"><span class="comment">        è€Œannotation-drivené…ç½®å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨å®Œæˆä¸Šè¿°ä¸¤ä¸ªå®ä¾‹çš„æ³¨å…¥ã€‚</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">id</span>=<span class="string">&quot;internalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å‰ç¼€ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åç¼€ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ›å»º Controller</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/HelloController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è¡¨ç¤ºè¯·æ±‚æ˜¯hello, çœŸæ˜¯è®¿é—®åœ°å€æ˜¯localhost:8080/é¡¹ç›®å/HelloController/hello</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sayHello</span><span class="params">(Model model)</span></span>&#123;</span><br><span class="line">        <span class="comment">// å°è£…æ•°æ®, å‘æ¨¡å‹ä¸­æ·»åŠ å±æ€§msgä¸å€¼ï¼Œå¯ä»¥åœ¨JSPé¡µé¢ä¸­å–å‡ºå¹¶æ¸²æŸ“</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;HelloSpringMVC_withAnnotation&quot;</span>);</span><br><span class="line">        <span class="comment">// è¿™ä¸ªè¿”å›å€¼ä¼šè¢«è§†å›¾è§£æå™¨å¤„ç†, è§£æç»“æœæ˜¯WEB-INF/jsp/hello.jsp</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™è§†å›¾</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">$&#123;msg&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="3-å°ç»“"><a href="#3-å°ç»“" class="headerlink" title="3. å°ç»“"></a>3. å°ç»“</h3><p>å®ç°æ­¥éª¤å…¶å®éå¸¸çš„ç®€å•ï¼š</p>
<ol>
<li>æ–°å»ºä¸€ä¸ª web é¡¹ç›®</li>
<li>å¯¼å…¥ç›¸å…³ jar åŒ…ï¼ˆæ³¨æ„èµ„æºå¯¼å‡ºé—®é¢˜ï¼‰</li>
<li>ç¼–å†™ web.xmlï¼Œæ³¨å†Œ DispatcherServlet</li>
<li>ç¼–å†™ Spring MVC é…ç½®æ–‡ä»¶</li>
<li>åˆ›å»ºå¯¹åº”çš„ Controller æ§åˆ¶ç±»</li>
<li>æœ€åå®Œå–„å‰ç«¯è§†å›¾å’Œ Controller ä¹‹é—´çš„å¯¹åº”</li>
<li>æµ‹è¯•è¿è¡Œè°ƒè¯•</li>
</ol>
<hr>
<p>ä½¿ç”¨ Spring MVC å¿…é¡»é…ç½®çš„ä¸‰å¤§ä»¶ï¼š</p>
<p><strong>å¤„ç†å™¨æ˜ å°„å™¨ã€å¤„ç†å™¨é€‚é…å™¨ã€è§†å›¾è§£æå™¨</strong></p>
<p>é€šå¸¸ï¼Œåªéœ€è¦<strong>æ‰‹åŠ¨é…ç½®è§†å›¾è§£æå™¨</strong>ï¼Œè€Œ<strong>å¤„ç†å™¨æ˜ å°„å™¨</strong>å’Œ<strong>å¤„ç†å™¨é€‚é…å™¨</strong>åªéœ€è¦å¼€å¯<strong>æ³¨è§£é©±åŠ¨</strong>å³å¯ï¼Œè€Œçœå»äº†å¤§æ®µçš„ xml é…ç½®ã€‚</p>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Spring MVC</category>
      </categories>
      <tags>
        <tag>ç¯å¢ƒæ­å»º</tag>
        <tag>Spring MVC</tag>
      </tags>
  </entry>
  <entry>
    <title>06_æ•°æ®å¤„ç†</title>
    <url>/posts/920072f.html</url>
    <content><![CDATA[<h3 id="1-å¤„ç†æäº¤æ•°æ®"><a href="#1-å¤„ç†æäº¤æ•°æ®" class="headerlink" title="1. å¤„ç†æäº¤æ•°æ®"></a>1. å¤„ç†æäº¤æ•°æ®</h3><h4 id="1-1-æäº¤çš„åŸŸåç§°å’Œå¤„ç†æ–¹æ³•çš„å‚æ•°åä¸€è‡´"><a href="#1-1-æäº¤çš„åŸŸåç§°å’Œå¤„ç†æ–¹æ³•çš„å‚æ•°åä¸€è‡´" class="headerlink" title="1.1 æäº¤çš„åŸŸåç§°å’Œå¤„ç†æ–¹æ³•çš„å‚æ•°åä¸€è‡´"></a>1.1 æäº¤çš„åŸŸåç§°å’Œå¤„ç†æ–¹æ³•çš„å‚æ•°åä¸€è‡´</h4><p>æäº¤æ•°æ® : <a href="http://localhost:8080/hello?name=horsen">http://localhost:8080/hello?name=horsen</a></p>
<p>å¤„ç†æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">    System.out.println(name);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="1-2-æäº¤çš„åŸŸåç§°å’Œå¤„ç†æ–¹æ³•çš„å‚æ•°åä¸ä¸€è‡´"><a href="#1-2-æäº¤çš„åŸŸåç§°å’Œå¤„ç†æ–¹æ³•çš„å‚æ•°åä¸ä¸€è‡´" class="headerlink" title="1.2 æäº¤çš„åŸŸåç§°å’Œå¤„ç†æ–¹æ³•çš„å‚æ•°åä¸ä¸€è‡´"></a>1.2 æäº¤çš„åŸŸåç§°å’Œå¤„ç†æ–¹æ³•çš„å‚æ•°åä¸ä¸€è‡´</h4><p>æäº¤æ•°æ® : <a href="http://localhost:8080/hello?username=horsen">http://localhost:8080/hello?username=horsen</a></p>
<p>å¤„ç†æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">(<span class="meta">@RequestParam(&quot;username&quot;)</span> String name)</span></span>&#123;</span><br><span class="line">    System.out.println(name);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<a id="more"></a>



<h4 id="1-3-æäº¤çš„æ˜¯ä¸€ä¸ªå¯¹è±¡"><a href="#1-3-æäº¤çš„æ˜¯ä¸€ä¸ªå¯¹è±¡" class="headerlink" title="1.3 æäº¤çš„æ˜¯ä¸€ä¸ªå¯¹è±¡"></a>1.3 æäº¤çš„æ˜¯ä¸€ä¸ªå¯¹è±¡</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æäº¤æ•°æ®ï¼š<a href="http://localhost:8080/user/t2?name=horsen&amp;id=1&amp;age=12">http://localhost:8080/user/t2?name=horsen&amp;id=1&amp;age=12</a></p>
<p>å¤„ç†æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getUser</span><span class="params">(User user, Model model)</span> </span>&#123;</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="2-æ•°æ®æ˜¾ç¤ºåˆ°å‰ç«¯"><a href="#2-æ•°æ®æ˜¾ç¤ºåˆ°å‰ç«¯" class="headerlink" title="2. æ•°æ®æ˜¾ç¤ºåˆ°å‰ç«¯"></a>2. æ•°æ®æ˜¾ç¤ºåˆ°å‰ç«¯</h3><h4 id="2-1-é€šè¿‡-ModelAndView"><a href="#2-1-é€šè¿‡-ModelAndView" class="headerlink" title="2.1 é€šè¿‡ ModelAndView"></a>2.1 é€šè¿‡ ModelAndView</h4><p>å‰é¢éƒ½æ˜¯è¿™æ ·çš„ï¼Œä¸è¯´äº†</p>
<h4 id="2-2-é€šè¿‡-ModelMap"><a href="#2-2-é€šè¿‡-ModelMap" class="headerlink" title="2.2 é€šè¿‡ ModelMap"></a>2.2 é€šè¿‡ ModelMap</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">(String name, ModelMap modelMap)</span></span>&#123;</span><br><span class="line">    <span class="comment">// å°è£…è¦æ˜¾ç¤ºåˆ°è§†å›¾ä¸­çš„æ•°æ®</span></span><br><span class="line">    <span class="comment">// ç›¸å½“äºreq.setAttribute(&quot;name&quot;,name);</span></span><br><span class="line">    modelMap.addAttribute(<span class="string">&quot;name&quot;</span>,name);</span><br><span class="line">    System.out.println(name);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="2-3-é€šè¿‡-Model"><a href="#2-3-é€šè¿‡-Model" class="headerlink" title="2.3 é€šè¿‡ Model"></a>2.3 é€šè¿‡ Model</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">(String name, Model model)</span></span>&#123;</span><br><span class="line">    <span class="comment">// å°è£…è¦æ˜¾ç¤ºåˆ°è§†å›¾ä¸­çš„æ•°æ®</span></span><br><span class="line">    <span class="comment">// ç›¸å½“äºreq.setAttribute(&quot;name&quot;,name);</span></span><br><span class="line">    model.addAttribute(<span class="string">&quot;msg&quot;</span>,name);</span><br><span class="line">    System.out.println(name);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="å¯¹æ¯”"><a href="#å¯¹æ¯”" class="headerlink" title="å¯¹æ¯”"></a>å¯¹æ¯”</h4><ul>
<li><p>Model åªæœ‰å¯¥å¯¥å‡ ä¸ªæ–¹æ³•åªé€‚åˆç”¨äºå‚¨å­˜æ•°æ®ï¼Œç®€åŒ–äº†æ–°æ‰‹å¯¹äºModelå¯¹è±¡çš„æ“ä½œå’Œç†è§£ï¼›</p>
</li>
<li><p>ModelMap ç»§æ‰¿äº† LinkedMap ï¼Œé™¤äº†å®ç°äº†è‡ªèº«çš„ä¸€äº›æ–¹æ³•ï¼ŒåŒæ ·çš„ç»§æ‰¿ LinkedMap çš„æ–¹æ³•å’Œç‰¹æ€§ï¼›</p>
</li>
<li><p>ModelAndView å¯ä»¥åœ¨å‚¨å­˜æ•°æ®çš„åŒæ—¶ï¼Œå¯ä»¥è¿›è¡Œè®¾ç½®è¿”å›çš„é€»è¾‘è§†å›¾ï¼Œè¿›è¡Œæ§åˆ¶å±•ç¤ºå±‚çš„è·³è½¬ã€‚</p>
</li>
</ul>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Spring MVC</category>
      </categories>
      <tags>
        <tag>Spring MVC</tag>
      </tags>
  </entry>
  <entry>
    <title>07_ä¹±ç é—®é¢˜çš„è§£å†³</title>
    <url>/posts/a21859c6.html</url>
    <content><![CDATA[<ol>
<li><p>åœ¨ tomcat çš„é…ç½®æ–‡ä»¶ conf/server.xml ä¸­è®¾ç½®ç¼–ç </p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">URIEncoding</span>=<span class="string">&quot;utf-8&quot;</span> <span class="attr">port</span>=<span class="string">&quot;8080&quot;</span> <span class="attr">protocol</span>=<span class="string">&quot;HTTP/1.1&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">connectionTimeout</span>=<span class="string">&quot;20000&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">redirectPort</span>=<span class="string">&quot;8443&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨ web.xml ä¸­æ·»åŠ  Spring MVC æä¾›çš„è¿‡æ»¤å™¨</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<a id="more"></a>
</li>
<li><p>å¦‚æœä¸èƒ½è§£å†³é—®é¢˜ï¼Œå°±è‡ªå®šä¹‰ä¸€ä¸ªè¿‡æ»¤å™¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.kuang.filter;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequestWrapper;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è§£å†³getå’Œpostè¯·æ±‚ å…¨éƒ¨ä¹±ç çš„è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericEncodingFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        <span class="comment">//å¤„ç†responseçš„å­—ç¬¦ç¼–ç </span></span><br><span class="line">        HttpServletResponse myResponse=(HttpServletResponse) response;</span><br><span class="line">        myResponse.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// è½¬å‹ä¸ºä¸åè®®ç›¸å…³å¯¹è±¡</span></span><br><span class="line">        HttpServletRequest httpServletRequest = (HttpServletRequest) request;</span><br><span class="line">        <span class="comment">// å¯¹requeståŒ…è£…å¢å¼º</span></span><br><span class="line">        HttpServletRequest myrequest = <span class="keyword">new</span> MyRequest(httpServletRequest);</span><br><span class="line">        chain.doFilter(myrequest, response);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰requestå¯¹è±¡ï¼ŒHttpServletRequestçš„åŒ…è£…ç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyRequest</span> <span class="keyword">extends</span> <span class="title">HttpServletRequestWrapper</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> HttpServletRequest request;</span><br><span class="line">    <span class="comment">//æ˜¯å¦ç¼–ç çš„æ ‡è®°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> hasEncode;</span><br><span class="line">    <span class="comment">//å®šä¹‰ä¸€ä¸ªå¯ä»¥ä¼ å…¥HttpServletRequestå¯¹è±¡çš„æ„é€ å‡½æ•°ï¼Œä»¥ä¾¿å¯¹å…¶è¿›è¡Œè£…é¥°</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyRequest</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(request);<span class="comment">// superå¿…é¡»å†™</span></span><br><span class="line">        <span class="keyword">this</span>.request = request;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// å¯¹éœ€è¦å¢å¼ºæ–¹æ³• è¿›è¡Œè¦†ç›–</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map <span class="title">getParameterMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å…ˆè·å¾—è¯·æ±‚æ–¹å¼</span></span><br><span class="line">        String method = request.getMethod();</span><br><span class="line">        <span class="keyword">if</span> (method.equalsIgnoreCase(<span class="string">&quot;post&quot;</span>)) &#123;</span><br><span class="line">            <span class="comment">// postè¯·æ±‚</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">// å¤„ç†postä¹±ç </span></span><br><span class="line">                request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> request.getParameterMap();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (method.equalsIgnoreCase(<span class="string">&quot;get&quot;</span>)) &#123;</span><br><span class="line">            <span class="comment">// getè¯·æ±‚</span></span><br><span class="line">            Map&lt;String, String[]&gt; parameterMap = request.getParameterMap();</span><br><span class="line">            <span class="keyword">if</span> (!hasEncode) &#123; <span class="comment">// ç¡®ä¿getæ‰‹åŠ¨ç¼–ç é€»è¾‘åªè¿è¡Œä¸€æ¬¡</span></span><br><span class="line">                <span class="keyword">for</span> (String parameterName : parameterMap.keySet()) &#123;</span><br><span class="line">                    String[] values = parameterMap.get(parameterName);</span><br><span class="line">                    <span class="keyword">if</span> (values != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; values.length; i++) &#123;</span><br><span class="line">                            <span class="keyword">try</span> &#123;</span><br><span class="line">                                <span class="comment">// å¤„ç†getä¹±ç </span></span><br><span class="line">                                values[i] = <span class="keyword">new</span> String(values[i]</span><br><span class="line">                                        .getBytes(<span class="string">&quot;ISO-8859-1&quot;</span>), <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">                            &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">                                e.printStackTrace();</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                hasEncode = <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> parameterMap;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.getParameterMap();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//å–ä¸€ä¸ªå€¼</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getParameter</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        Map&lt;String, String[]&gt; parameterMap = getParameterMap();</span><br><span class="line">        String[] values = parameterMap.get(name);</span><br><span class="line">        <span class="keyword">if</span> (values == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> values[<span class="number">0</span>]; <span class="comment">// å–å›å‚æ•°çš„ç¬¬ä¸€ä¸ªå€¼</span></span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//å–æ‰€æœ‰å€¼</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String[] getParameterValues(String name) &#123;</span><br><span class="line">        Map&lt;String, String[]&gt; parameterMap = getParameterMap();</span><br><span class="line">        String[] values = parameterMap.get(name);</span><br><span class="line">        <span class="keyword">return</span> values;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.horsen.filter.GenericEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>


</li>
</ol>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Spring MVC</category>
      </categories>
      <tags>
        <tag>é—®é¢˜</tag>
        <tag>Spring MVC</tag>
        <tag>ä¹±ç </tag>
      </tags>
  </entry>
  <entry>
    <title>08_JSON äº¤äº’å¤„ç†</title>
    <url>/posts/f4901ef0.html</url>
    <content><![CDATA[<h3 id="1-ä»€ä¹ˆæ˜¯-JSON"><a href="#1-ä»€ä¹ˆæ˜¯-JSON" class="headerlink" title="1. ä»€ä¹ˆæ˜¯ JSON"></a>1. ä»€ä¹ˆæ˜¯ JSON</h3><ul>
<li>JSONï¼ˆJavaScript Object Notationï¼ŒJS å¯¹è±¡æ ‡è®°ï¼‰æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œç›®å‰ä½¿ç”¨ç‰¹åˆ«å¹¿æ³›ã€‚</li>
<li>é‡‡ç”¨å®Œå…¨ç‹¬ç«‹äºç¼–ç¨‹è¯­è¨€çš„<strong>æ–‡æœ¬æ ¼å¼</strong>æ¥å­˜å‚¨å’Œè¡¨ç¤ºæ•°æ®ã€‚</li>
<li>ç®€æ´å’Œæ¸…æ™°çš„å±‚æ¬¡ç»“æ„ä½¿å¾— JSON æˆä¸ºç†æƒ³çš„æ•°æ®äº¤æ¢è¯­è¨€ã€‚</li>
<li>æ˜“äºäººé˜…è¯»å’Œç¼–å†™ï¼ŒåŒæ—¶ä¹Ÿæ˜“äºæœºå™¨è§£æå’Œç”Ÿæˆï¼Œå¹¶æœ‰æ•ˆåœ°æå‡ç½‘ç»œä¼ è¾“æ•ˆç‡ã€‚</li>
</ul>
<hr>
<p>åœ¨ JavaScript è¯­è¨€ä¸­ï¼Œä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡ã€‚å› æ­¤ï¼Œä»»ä½•JavaScript æ”¯æŒçš„ç±»å‹éƒ½å¯ä»¥é€šè¿‡ JSON æ¥è¡¨ç¤ºï¼Œä¾‹å¦‚å­—ç¬¦ä¸²ã€æ•°å­—ã€å¯¹è±¡ã€æ•°ç»„ç­‰ã€‚çœ‹çœ‹ä»–çš„è¦æ±‚å’Œè¯­æ³•æ ¼å¼ï¼š</p>
<ul>
<li>å¯¹è±¡è¡¨ç¤ºä¸ºé”®å€¼å¯¹ï¼Œæ•°æ®ç”±é€—å·åˆ†éš”</li>
<li>èŠ±æ‹¬å·ä¿å­˜å¯¹è±¡</li>
<li>æ–¹æ‹¬å·ä¿å­˜æ•°ç»„</li>
</ul>
<p><strong>JSON é”®å€¼å¯¹</strong>æ˜¯ç”¨æ¥ä¿å­˜ JavaScript å¯¹è±¡çš„ä¸€ç§æ–¹å¼ï¼Œå’Œ JavaScript å¯¹è±¡çš„å†™æ³•ä¹Ÿå¤§åŒå°å¼‚ï¼Œé”®/å€¼å¯¹ç»„åˆä¸­çš„é”®åå†™åœ¨å‰é¢å¹¶ç”¨åŒå¼•å· â€œâ€ åŒ…è£¹ï¼Œä½¿ç”¨å†’å· : åˆ†éš”ï¼Œç„¶åç´§æ¥ç€å€¼ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;<span class="attr">&quot;name&quot;</span>: <span class="string">&quot;lhx&quot;</span>&#125;</span><br><span class="line">&#123;<span class="attr">&quot;age&quot;</span>: <span class="string">&quot;3&quot;</span>&#125;</span><br><span class="line">&#123;<span class="attr">&quot;sex&quot;</span>: <span class="string">&quot;ç”·&quot;</span>&#125;</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<p>å¾ˆå¤šäººæä¸æ¸…æ¥š JSON å’Œ JavaScript å¯¹è±¡çš„å…³ç³»ï¼Œç”šè‡³è¿è°æ˜¯è°éƒ½ä¸æ¸…æ¥šã€‚å…¶å®ï¼Œå¯ä»¥è¿™ä¹ˆç†è§£ï¼š</p>
<blockquote>
<p>JSON æ˜¯ JavaScript å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºæ³•ï¼Œå®ƒä½¿ç”¨æ–‡æœ¬è¡¨ç¤ºä¸€ä¸ª JS å¯¹è±¡çš„ä¿¡æ¯ï¼Œæœ¬è´¨æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p>
</blockquote>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¿™æ˜¯ä¸€ä¸ªå¯¹è±¡, æ³¨æ„é”®åä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨å¼•å·åŒ…è£¹çš„</span></span><br><span class="line">var obj = &#123;a: &#x27;Hello&#x27;, b: &#x27;World&#x27;&#125;; </span><br><span class="line"><span class="comment">// è¿™æ˜¯ä¸€ä¸ªJSONå­—ç¬¦ä¸², æœ¬è´¨æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line">var json = &#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;; </span><br></pre></td></tr></table></figure>

<hr>
<p><strong>JSON å’Œ JavaScript å¯¹è±¡äº’è½¬</strong></p>
<p>è¦å®ç°ä» JSON å­—ç¬¦ä¸²è½¬æ¢ä¸º JavaScript å¯¹è±¡ï¼Œä½¿ç”¨ JSON.parse() æ–¹æ³•ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = JSON.parse(<span class="string">&#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span>);</span><br><span class="line"><span class="comment">//ç»“æœæ˜¯ &#123;a: &#x27;Hello&#x27;, b: &#x27;World&#x27;&#125;</span></span><br></pre></td></tr></table></figure>

<p>è¦å®ç°ä» JavaScript å¯¹è±¡è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²ï¼Œä½¿ç”¨ JSON.stringify() æ–¹æ³•ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> json = JSON.stringify(&#123;a: <span class="string">&#x27;Hello&#x27;</span>, b: <span class="string">&#x27;World&#x27;</span>&#125;);</span><br><span class="line"><span class="comment">//ç»“æœæ˜¯ &#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span></span><br></pre></td></tr></table></figure>



<h3 id="2-ä»€ä¹ˆæ˜¯-Fastjson"><a href="#2-ä»€ä¹ˆæ˜¯-Fastjson" class="headerlink" title="2. ä»€ä¹ˆæ˜¯ Fastjson"></a>2. ä»€ä¹ˆæ˜¯ Fastjson</h3><blockquote>
<p><a href="https://www.runoob.com/w3cnote/fastjson-intro.html">https://www.runoob.com/w3cnote/fastjson-intro.html</a></p>
</blockquote>
<ol>
<li><p>å°† Java å¯¹è±¡è½¬æ¢ä¸º JSON æ ¼å¼</p>
<p> <code>String jsonStr= JSON.toJSONString(javaObject);</code></p>
</li>
<li><p>JSON å­—ç¬¦ä¸²è½¬æ¢ä¸º Java å¯¹è±¡</p>
<p><code>Object javaObject= JSON.parseObject(jsonStr, Object.class);</code></p>
</li>
</ol>
<h3 id="3-Controller-è¿”å›-JSON-æ•°æ®"><a href="#3-Controller-è¿”å›-JSON-æ•°æ®" class="headerlink" title="3. Controller è¿”å› JSON æ•°æ®"></a>3. Controller è¿”å› JSON æ•°æ®</h3><ol>
<li><p>ç¼–å†™ä¸€ä¸ªå®ä½“ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¯¼å…¥ Fastjson ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.73<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™ Controllerï¼Œæ³¨æ„<code>@ResponseBody</code>çš„ä½¿ç”¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"> <span class="comment">// åŠ äº†è¿™ä¸ªæ³¨é‡Šå°±ä¸ä¼šèµ°è§†å›¾è§£æå™¨, ç›´æ¥è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/j1&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">json1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User(<span class="string">&quot;lhx&quot;</span>,<span class="number">3</span>,<span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">        <span class="comment">// å°† Java å¯¹è±¡è½¬æ¢ä¸º JSON æ ¼å¼</span></span><br><span class="line">        String str = JSON.toJSONString(user);</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/j1&quot;,produces = &quot;application/json;charset=utf-8&quot;)</span></span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="4-ä»£ç ä¼˜åŒ–"><a href="#4-ä»£ç ä¼˜åŒ–" class="headerlink" title="4. ä»£ç ä¼˜åŒ–"></a>4. ä»£ç ä¼˜åŒ–</h3><h4 id="4-1-ä¹±ç é—®é¢˜ç»Ÿä¸€è§£å†³"><a href="#4-1-ä¹±ç é—®é¢˜ç»Ÿä¸€è§£å†³" class="headerlink" title="4.1 ä¹±ç é—®é¢˜ç»Ÿä¸€è§£å†³"></a>4.1 ä¹±ç é—®é¢˜ç»Ÿä¸€è§£å†³</h4><blockquote>
<p>ä¸ºä»€ä¹ˆæ€»æ˜¯äº§ç”Ÿä¹±ç ï¼Ÿä¸ºä»€ä¹ˆå¯¼å‡ºéƒ½æœ‰ä¹±ç ï¼Ÿä¸ºä»€ä¹ˆæœ‰è¿™ä¹ˆå¤šè§£å†³ä¹±ç çš„æ–¹å¼ï¼ŸServlet ä¸­çš„ request å’Œ responseï¼ŒSpring è¿‡æ»¤å™¨ï¼ŒJSONâ€¦â€¦</p>
<p>å°±æ²¡æœ‰ç»Ÿä¸€çš„è§£å†³æ–¹æ³•å—ï¼Ÿ</p>
</blockquote>
<p>åœ¨ Spring MVC é…ç½®æ–‡ä»¶ä¸­åŠ å…¥ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:message-converters</span> <span class="attr">register-defaults</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;objectMapper&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;failOnEmptyBeans&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="4-2-è¿”å›-json-å­—ç¬¦ä¸²ç»Ÿä¸€è§£å†³"><a href="#4-2-è¿”å›-json-å­—ç¬¦ä¸²ç»Ÿä¸€è§£å†³" class="headerlink" title="4.2 è¿”å› json å­—ç¬¦ä¸²ç»Ÿä¸€è§£å†³"></a>4.2 è¿”å› json å­—ç¬¦ä¸²ç»Ÿä¸€è§£å†³</h4><p>åœ¨ç±»ä¸Šç›´æ¥ä½¿ç”¨ <code>@RestController</code> ï¼Œé‡Œé¢æ‰€æœ‰çš„æ–¹æ³•éƒ½åªä¼šè¿”å› json å­—ç¬¦ä¸²äº†ï¼Œä¸ç”¨å†æ¯ä¸€ä¸ªéƒ½æ·»åŠ <code>@ResponseBody </code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/j1&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">json1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User(<span class="string">&quot;lhx&quot;</span>,<span class="number">3</span>,<span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">        <span class="comment">// å°† Java å¯¹è±¡è½¬æ¢ä¸º JSON æ ¼å¼</span></span><br><span class="line">        String str = JSON.toJSONString(user);</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="5-æµ‹è¯•é›†åˆè¾“å‡º"><a href="#5-æµ‹è¯•é›†åˆè¾“å‡º" class="headerlink" title="5. æµ‹è¯•é›†åˆè¾“å‡º"></a>5. æµ‹è¯•é›†åˆè¾“å‡º</h3><p>ä¼šç”¨<code>[]</code>å°†åˆ—è¡¨é¡¹åŒ…å›´èµ·æ¥</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/j2&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">json2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;User&gt; userList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    User user1 = <span class="keyword">new</span> User(<span class="string">&quot;lhx1&quot;</span>, <span class="number">3</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">    User user2 = <span class="keyword">new</span> User(<span class="string">&quot;lhx2&quot;</span>, <span class="number">3</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">    User user3 = <span class="keyword">new</span> User(<span class="string">&quot;lhx3&quot;</span>, <span class="number">3</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">    userList.add(user1);</span><br><span class="line">    userList.add(user2);</span><br><span class="line">    userList.add(user3);</span><br><span class="line">    <span class="comment">// å°† Java å¯¹è±¡è½¬æ¢ä¸º JSON æ ¼å¼</span></span><br><span class="line">    String str = JSON.toJSONString(userList);</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="6-è¾“å‡ºæ—¶é—´å¯¹è±¡"><a href="#6-è¾“å‡ºæ—¶é—´å¯¹è±¡" class="headerlink" title="6. è¾“å‡ºæ—¶é—´å¯¹è±¡"></a>6. è¾“å‡ºæ—¶é—´å¯¹è±¡</h3><p>é»˜è®¤æ ¼å¼ä¸º Timestamp æ—¶é—´æˆ³</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/j3&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">json3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Date date = <span class="keyword">new</span> Date();</span><br><span class="line">    String str = JSON.toJSONString(date);</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è®¾ç½®æ—¶é—´æ ¼å¼ï¼ˆJavaåŸºç¡€çŸ¥è¯†ï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/j3&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">json3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Date date = <span class="keyword">new</span> Date();</span><br><span class="line">    SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">    String str = JSON.toJSONString(sdf.format(date));</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Spring MVC</category>
      </categories>
      <tags>
        <tag>Spring MVC</tag>
        <tag>JSON</tag>
      </tags>
  </entry>
  <entry>
    <title>09_Ajax æŠ€æœ¯</title>
    <url>/posts/7e9d5aeb.html</url>
    <content><![CDATA[<h3 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1. ç®€ä»‹"></a>1. ç®€ä»‹</h3><ul>
<li><p>Asynchronous JavaScript and XMLï¼ˆå¼‚æ­¥çš„ JavaScript å’Œ XMLï¼‰</p>
</li>
<li><p>æ˜¯ä¸€ç§åœ¨æ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿæ›´æ–°éƒ¨åˆ†ç½‘é¡µçš„æŠ€æœ¯ã€‚</p>
</li>
<li><p>ä¼ ç»Ÿçš„ç½‘é¡µï¼ˆå³ä¸ç”¨ajaxæŠ€æœ¯çš„ç½‘é¡µï¼‰ï¼Œæƒ³è¦æ›´æ–°å†…å®¹æˆ–è€…æäº¤ä¸€ä¸ªè¡¨å•ï¼Œéƒ½éœ€è¦é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µã€‚</p>
</li>
<li><p>ä½¿ç”¨ Ajax æŠ€æœ¯çš„ç½‘é¡µï¼Œé€šè¿‡åœ¨åå°æœåŠ¡å™¨è¿›è¡Œå°‘é‡çš„æ•°æ®äº¤æ¢ï¼Œå°±å¯ä»¥å®ç°å¼‚æ­¥å±€éƒ¨æ›´æ–°ã€‚</p>
</li>
<li><p>ä½¿ç”¨ Ajaxï¼Œç”¨æˆ·å¯ä»¥åˆ›å»ºæ¥è¿‘æœ¬åœ°æ¡Œé¢åº”ç”¨çš„ç›´æ¥ã€é«˜å¯ç”¨ã€æ›´ä¸°å¯Œã€æ›´åŠ¨æ€çš„Webç”¨æˆ·ç•Œé¢ã€‚</p>
</li>
</ul>
<hr>
<p>åˆ©ç”¨ Ajax å¯ä»¥ï¼š</p>
<ul>
<li>æ³¨å†Œæ—¶ï¼Œè¾“å…¥ç”¨æˆ·åè‡ªåŠ¨æ£€æµ‹ç”¨æˆ·æ˜¯å¦å·²ç»å­˜åœ¨ã€‚</li>
<li>ç™»é™†æ—¶ï¼Œæç¤ºç”¨æˆ·åå¯†ç é”™è¯¯ã€‚</li>
<li>åˆ é™¤æ•°æ®è¡Œæ—¶ï¼Œå°†è¡ŒIDå‘é€åˆ°åå°ï¼Œåå°åœ¨æ•°æ®åº“ä¸­åˆ é™¤ï¼Œæ•°æ®åº“åˆ é™¤æˆåŠŸåï¼Œåœ¨é¡µé¢DOMä¸­å°†æ•°æ®è¡Œä¹Ÿåˆ é™¤ã€‚</li>
<li>â€¦â€¦</li>
</ul>
<a id="more"></a>



<h3 id="2-jQuery-ajax"><a href="#2-jQuery-ajax" class="headerlink" title="2. jQuery.ajax"></a>2. jQuery.ajax</h3><ol>
<li><p>å‰ç«¯è§†å›¾</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;$Title$&lt;/title&gt;</span><br><span class="line">    &lt;script src=&quot;$&#123;pageContext.request.contextPath&#125;/statics/js/jquery-3.5.1.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        <span class="function">function <span class="title">a</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            $.post(&#123;</span><br><span class="line">                url: <span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/a1&quot;</span>,</span><br><span class="line">                data: &#123;<span class="string">&quot;name&quot;</span>: $(<span class="string">&quot;#username&quot;</span>).val()&#125;,</span><br><span class="line">                success: function (data, state) &#123;</span><br><span class="line">                    alert(data);</span><br><span class="line">                    alert(state);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;%-- å¤±å»ç„¦ç‚¹çš„æ—¶å€™, å‘èµ·ä¸€ä¸ªè¯·æ±‚(æºå¸¦ä¿¡æ¯)åˆ°åå° --%&gt;</span><br><span class="line">ç”¨æˆ·å: &lt;input type=<span class="string">&quot;text&quot;</span> id=<span class="string">&quot;username&quot;</span> onblur=<span class="string">&quot;a()&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>åç«¯æ§åˆ¶å™¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AjaxController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/a1&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">a1</span><span class="params">(String name, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;a1:param =&gt; &quot;</span> + name);</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;lhx&quot;</span>.equals(name)) &#123;</span><br><span class="line">            response.getWriter().println(<span class="string">&quot;true&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            response.getWriter().println(<span class="string">&quot;false&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="3-Spring-MVC-å®ç°"><a href="#3-Spring-MVC-å®ç°" class="headerlink" title="3. Spring MVC å®ç°"></a>3. Spring MVC å®ç°</h3><ol>
<li><p>å®ä½“ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">   <span class="keyword">private</span> String sex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>åç«¯å‡†å¤‡å¥½è¦æ˜¾ç¤ºçš„æ•°æ®</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/a2&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">a2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;User&gt; userList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="comment">// æ·»åŠ æ•°æ®</span></span><br><span class="line">    userList.add(<span class="keyword">new</span> User(<span class="string">&quot;lhx&quot;</span>, <span class="number">1</span>, <span class="string">&quot;ç”·&quot;</span>));</span><br><span class="line">    userList.add(<span class="keyword">new</span> User(<span class="string">&quot;å‰ç«¯&quot;</span>, <span class="number">1</span>, <span class="string">&quot;å¥³&quot;</span>));</span><br><span class="line">    userList.add(<span class="keyword">new</span> User(<span class="string">&quot;è¿ç»´&quot;</span>, <span class="number">1</span>, <span class="string">&quot;ç”·&quot;</span>));</span><br><span class="line">    <span class="keyword">return</span> userList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å‰ç«¯</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;&lt;/title&gt;</span><br><span class="line">    &lt;script src=&quot;$&#123;pageContext.request.contextPath&#125;/statics/js/jquery-3.5.1.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        $(function () &#123;</span><br><span class="line">            $(<span class="string">&quot;#btn&quot;</span>).click(function () &#123;</span><br><span class="line">                $.post(<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/a2&quot;</span>, function (data) &#123;</span><br><span class="line">                    <span class="keyword">var</span> html=<span class="string">&quot;&quot;</span></span><br><span class="line">                    <span class="keyword">for</span> (let i = <span class="number">0</span>; i &lt; data.length; i++) &#123;</span><br><span class="line">                        html+=<span class="string">&quot;&lt;tr&gt;&quot;</span></span><br><span class="line">                            +<span class="string">&quot;&lt;td&gt;&quot;</span>+data[i].name+<span class="string">&quot;&lt;td&gt;&quot;</span></span><br><span class="line">                            +<span class="string">&quot;&lt;td&gt;&quot;</span>+data[i].age+<span class="string">&quot;&lt;td&gt;&quot;</span></span><br><span class="line">                            +<span class="string">&quot;&lt;td&gt;&quot;</span>+data[i].sex +<span class="string">&quot;&lt;td&gt;&quot;</span></span><br><span class="line">                            +<span class="string">&quot;&lt;tr&gt;&quot;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    $(<span class="string">&quot;#content&quot;</span>).html(html)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;åŠ è½½æ•°æ®&quot;</span> id=<span class="string">&quot;btn&quot;</span>&gt;</span><br><span class="line">&lt;table&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;å§“å&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;å¹´é¾„&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;æ€§åˆ«&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;tbody id=<span class="string">&quot;content&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/tbody&gt;</span><br><span class="line">&lt;/table&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="4-æ³¨å†Œæç¤ºæ•ˆæœ"><a href="#4-æ³¨å†Œæç¤ºæ•ˆæœ" class="headerlink" title="4. æ³¨å†Œæç¤ºæ•ˆæœ"></a>4. æ³¨å†Œæç¤ºæ•ˆæœ</h3><img src="/posts/7e9d5aeb/image-20200810184532251.png" class>

<ol>
<li><p>å‰ç«¯</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;script src=&quot;$&#123;pageContext.request.contextPath&#125;/statics/js/jquery-3.5.1.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        <span class="function">function <span class="title">a1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            $.post(&#123;</span><br><span class="line">                url: <span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/a3&quot;</span>,</span><br><span class="line">                data: &#123;<span class="string">&quot;name&quot;</span>: $(<span class="string">&quot;#name&quot;</span>).val()&#125;,</span><br><span class="line">                success: function (data) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (data.toString() === <span class="string">&quot;OK&quot;</span>) &#123;</span><br><span class="line">                        $(<span class="string">&quot;#userInfo&quot;</span>).css(<span class="string">&quot;color&quot;</span>, <span class="string">&quot;green&quot;</span>);</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        $(<span class="string">&quot;#userInfo&quot;</span>).css(<span class="string">&quot;color&quot;</span>, <span class="string">&quot;red&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    $(<span class="string">&quot;#userInfo&quot;</span>).html(data);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function">function <span class="title">a2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            $.post(&#123;</span><br><span class="line">                url: <span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/a3&quot;</span>,</span><br><span class="line">                data: &#123;<span class="string">&quot;pwd&quot;</span>: $(<span class="string">&quot;#pwd&quot;</span>).val()&#125;,</span><br><span class="line">                success: function (data) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (data.toString() === <span class="string">&quot;OK&quot;</span>) &#123;</span><br><span class="line">                        $(<span class="string">&quot;#pwdInfo&quot;</span>).css(<span class="string">&quot;color&quot;</span>, <span class="string">&quot;green&quot;</span>);</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        $(<span class="string">&quot;#pwdInfo&quot;</span>).css(<span class="string">&quot;color&quot;</span>, <span class="string">&quot;red&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    $(<span class="string">&quot;#pwdInfo&quot;</span>).html(data);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;</span><br><span class="line">    ç”¨æˆ·å: &lt;input type=<span class="string">&quot;text&quot;</span> id=<span class="string">&quot;name&quot;</span> onblur=<span class="string">&quot;a1()&quot;</span>&gt;</span><br><span class="line">    &lt;span id=&quot;userInfo&quot;&gt;&lt;/span&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    å¯†ç : &lt;input type=<span class="string">&quot;password&quot;</span> id=<span class="string">&quot;pwd&quot;</span> onblur=<span class="string">&quot;a2()&quot;</span>&gt;</span><br><span class="line">    &lt;span id=&quot;pwdInfo&quot;&gt;&lt;/span&gt;</span><br><span class="line">&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>åç«¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/a3&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">a3</span><span class="params">(String name, String pwd)</span> </span>&#123;</span><br><span class="line">    String msg = <span class="string">&quot;ä¸å¯ä¸ºç©º&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (name != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;admin&quot;</span>.equals(name)) &#123;</span><br><span class="line">            msg = <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            msg = <span class="string">&quot;ç”¨æˆ·åæœ‰è¯¯&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (pwd != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;123456&quot;</span>.equals(pwd)) &#123;</span><br><span class="line">            msg = <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            msg = <span class="string">&quot;å¯†ç æœ‰è¯¯&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> msg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Spring MVC</category>
      </categories>
      <tags>
        <tag>Spring MVC</tag>
        <tag>Ajax</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>10_æ‹¦æˆªå™¨</title>
    <url>/posts/43d05f0b.html</url>
    <content><![CDATA[<h3 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1. æ¦‚è¿°"></a>1. æ¦‚è¿°</h3><p>Spring MVC çš„å¤„ç†å™¨æ‹¦æˆªå™¨ç±»ä¼¼äº Servlet å¼€å‘ä¸­çš„è¿‡æ»¤å™¨ Filterï¼Œç”¨äºå¯¹å¤„ç†å™¨è¿›è¡Œé¢„å¤„ç†å’Œåå¤„ç†ã€‚å¼€å‘è€…å¯ä»¥è‡ªå·±å®šä¹‰ä¸€äº›æ‹¦æˆªå™¨æ¥å®ç°ç‰¹å®šçš„åŠŸèƒ½ã€‚</p>
<p>==æ‹¦æˆªå™¨æ˜¯ AOP æ€æƒ³çš„å…·ä½“åº”ç”¨==</p>
<p><strong>è¿‡æ»¤å™¨</strong></p>
<ul>
<li>æ˜¯ Servlet è§„èŒƒä¸­çš„ä¸€éƒ¨åˆ†ï¼Œä»»ä½• Java Web å·¥ç¨‹éƒ½å¯ä»¥ä½¿ç”¨</li>
<li>åœ¨<code>url-pattern</code>ä¸­é…ç½®äº†è¿‡æ»¤å™¨ä¹‹åï¼Œå¯ä»¥å¯¹æ‰€æœ‰è¦è®¿é—®çš„èµ„æºè¿›è¡Œæ‹¦æˆª</li>
</ul>
<p><strong>æ‹¦æˆªå™¨</strong></p>
<ul>
<li><p>æ˜¯ Spring MVC æ¡†æ¶è‡ªå·±çš„ï¼Œåªæœ‰ä½¿ç”¨äº† Spring MVC æ¡†æ¶çš„å·¥ç¨‹æ‰èƒ½ä½¿ç”¨</p>
</li>
<li><p>æ‹¦æˆªå™¨åªä¼šæ‹¦æˆªè®¿é—®çš„æ§åˆ¶å™¨æ–¹æ³•ï¼Œ å¦‚æœè®¿é—®çš„æ˜¯ jsp/html/css/image/js æ˜¯ä¸ä¼šè¿›è¡Œæ‹¦æˆªçš„</p>
</li>
</ul>
<a id="more"></a>



<h3 id="2-è‡ªå®šä¹‰æ‹¦æˆªå™¨"><a href="#2-è‡ªå®šä¹‰æ‹¦æˆªå™¨" class="headerlink" title="2. è‡ªå®šä¹‰æ‹¦æˆªå™¨"></a>2. è‡ªå®šä¹‰æ‹¦æˆªå™¨</h3><p>å¿…é¡»å®ç°<code>HandlerInterceptor</code>æ¥å£</p>
<ol>
<li><p>æ‹¦æˆªå™¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åœ¨è¯·æ±‚çš„æ–¹æ³•ä¹‹å‰æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true æ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨(æ”¾è¡Œ) false ä¸æ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;========å¤„ç†å‰========&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åœ¨è¯·æ±‚çš„æ–¹æ³•ä¹‹åæ‰§è¡Œ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;========å¤„ç†å========&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åœ¨DispatcherServletå¤„ç†åæ‰§è¡Œ, åšæ¸…ç†å·¥ä½œ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;========æ¸…ç†========&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨ applicationContext.xml é‡Œæ³¨å†Œæ‹¦æˆªå™¨</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ‹¦æˆªå™¨é…ç½® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">            /** è¡¨ç¤ºåŒ…å«è·¯å¾„åŠå…¶å­è·¯å¾„</span></span><br><span class="line"><span class="comment">            /admin/* æ‹¦æˆªçš„æ˜¯/admin/addç­‰ç­‰è¿™ç§ /admin/add/userä¸ä¼šè¢«æ‹¦æˆª</span></span><br><span class="line"><span class="comment">            /admin/** æ‹¦æˆªçš„æ˜¯/admin/ä¸‹çš„æ‰€æœ‰</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.config.MyInterceptor&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™ Controller æ¥å—è¯·æ±‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/t1&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œäº†&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="3-éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½•ï¼ˆè®¤è¯ç”¨æˆ·ï¼‰"><a href="#3-éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½•ï¼ˆè®¤è¯ç”¨æˆ·ï¼‰" class="headerlink" title="3. éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½•ï¼ˆè®¤è¯ç”¨æˆ·ï¼‰"></a>3. éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½•ï¼ˆè®¤è¯ç”¨æˆ·ï¼‰</h3><ol>
<li><p>ç¼–å†™åˆè¯†é¡µ index.jsp</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;$Title$&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">  &lt;a href=&quot;$&#123;pageContext.request.contextPath&#125;/user/toLogin&quot;&gt;ç™»å½•é¡µé¢&lt;/a&gt;</span><br><span class="line">  &lt;a href=&quot;$&#123;pageContext.request.contextPath&#125;/user/toMain&quot;&gt;é¦–é¡µ&lt;/a&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™ç™»å½•é¡µé¢ login.jsp</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;ç™»å½•é¡µé¢&lt;/h1&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/login&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    ç”¨æˆ·å: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>&gt;</span><br><span class="line">    å¯†ç : &lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;æäº¤&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™é¦–é¡µ main.jsp</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;é¦–é¡µ&lt;/h1&gt;</span><br><span class="line">&lt;a href=&quot;$&#123;pageContext.request.contextPath&#125;/user/logout&quot;&gt;é€€å‡ºç™»å½•&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™æ§åˆ¶å™¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginController</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è·³è½¬åˆ°ç™»é™†é¡µé¢</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/toLogin&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toLogin</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·³è½¬åˆ°é¦–é¡µ</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/toMain&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toMain</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;main&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/login&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">login</span><span class="params">(HttpSession session, String username, String password)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æŠŠç”¨æˆ·çš„ä¿¡æ¯å­˜åœ¨sessionä¸­</span></span><br><span class="line">        session.setAttribute(<span class="string">&quot;userLoginInfo&quot;</span>, username);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/user/toMain&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€€å‡ºç™»å½•</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/logout&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">logout</span><span class="params">(HttpSession session)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ³¨é”€session</span></span><br><span class="line">        session.invalidate();</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™è¿‡æ»¤å™¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        HttpSession session = request.getSession();</span><br><span class="line">        <span class="comment">// åœ¨ç™»å½•é¡µé¢æ—¶æ”¾è¡Œ</span></span><br><span class="line">        <span class="keyword">if</span> (request.getRequestURI().contains(<span class="string">&quot;login&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æœ‰ç™»å½•ä¿¡æ¯ä¹Ÿæ”¾è¡Œ</span></span><br><span class="line">        <span class="keyword">if</span> (session.getAttribute(<span class="string">&quot;userLoginInfo&quot;</span>) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// éƒ½ä¸æ»¡è¶³å°±è·³åˆ°ç™»å½•é¡µé¢</span></span><br><span class="line">        request.getRequestDispatcher(<span class="string">&quot;/WEB-INF/jsp/login.jsp&quot;</span>).forward(request, response);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>é…ç½®è¿‡æ»¤å™¨</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/user/**&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.config.LoginInterceptor&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Spring MVC</category>
      </categories>
      <tags>
        <tag>Spring MVC</tag>
        <tag>æ‹¦æˆªå™¨</tag>
      </tags>
  </entry>
  <entry>
    <title>11_æ–‡ä»¶ä¸Šä¼ ä¸‹è½½</title>
    <url>/posts/a0418ed7.html</url>
    <content><![CDATA[<h3 id="1-å‡†å¤‡å·¥ä½œ"><a href="#1-å‡†å¤‡å·¥ä½œ" class="headerlink" title="1. å‡†å¤‡å·¥ä½œ"></a>1. å‡†å¤‡å·¥ä½œ</h3><p>æ–‡ä»¶ä¸Šä¼ æ˜¯é¡¹ç›®å¼€å‘ä¸­æœ€å¸¸è§çš„åŠŸèƒ½ä¹‹ä¸€ï¼ŒSpring MVC å¯ä»¥å¾ˆå¥½çš„æ”¯æŒæ–‡ä»¶ä¸Šä¼ ï¼Œä½†æ˜¯Spring MVC ä¸Šä¸‹æ–‡ä¸­é»˜è®¤æ²¡æœ‰è£…é…<code>MultipartResolver</code>ï¼Œå› æ­¤é»˜è®¤æƒ…å†µä¸‹å…¶ä¸èƒ½å¤„ç†æ–‡ä»¶ä¸Šä¼ å·¥ä½œã€‚å¦‚æœæƒ³ä½¿ç”¨ Spring çš„æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œåˆ™éœ€è¦åœ¨ä¸Šä¸‹æ–‡ä¸­é…ç½®<code> MultipartResolver</code>ã€‚</p>
<p>å‰ç«¯è¡¨å•è¦æ±‚ï¼šä¸ºäº†èƒ½ä¸Šä¼ æ–‡ä»¶ï¼Œå¿…é¡»å°†è¡¨å•çš„<code>method</code>è®¾ç½®ä¸º<code>post</code>ï¼Œå¹¶å°†<code>enctype</code>è®¾ç½®ä¸º<code>multipart/form-data</code>ã€‚åªæœ‰åœ¨è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨æ‰ä¼šæŠŠç”¨æˆ·é€‰æ‹©çš„æ–‡ä»¶ä»¥äºŒè¿›åˆ¶æ•°æ®å‘é€ç»™æœåŠ¡å™¨ï¼›</p>
<p><strong>å¯¹è¡¨å•ä¸­çš„<code>enctype</code>å±æ€§åšä¸ªè¯¦ç»†çš„è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>application/x-www=form-urlencoded</code>ï¼šé»˜è®¤æ–¹å¼ï¼Œåªå¤„ç†è¡¨å•åŸŸä¸­çš„ value å±æ€§å€¼ï¼Œé‡‡ç”¨è¿™ç§ç¼–ç æ–¹å¼çš„è¡¨å•ä¼šå°†è¡¨å•åŸŸä¸­çš„å€¼å¤„ç†æˆ URL ç¼–ç æ–¹å¼ã€‚</li>
<li><code>multipart/form-data</code>ï¼šè¿™ç§ç¼–ç æ–¹å¼ä¼šä»¥äºŒè¿›åˆ¶æµçš„æ–¹å¼æ¥å¤„ç†è¡¨å•æ•°æ®ï¼Œè¿™ç§ç¼–ç æ–¹å¼ä¼šæŠŠæ–‡ä»¶åŸŸæŒ‡å®šæ–‡ä»¶çš„å†…å®¹ä¹Ÿå°è£…åˆ°è¯·æ±‚å‚æ•°ä¸­ï¼Œä¸ä¼šå¯¹å­—ç¬¦ç¼–ç ã€‚</li>
<li><code>text/plain</code>ï¼šé™¤äº†æŠŠç©ºæ ¼è½¬æ¢ä¸º<code>+</code>å¤–ï¼Œå…¶ä»–å­—ç¬¦éƒ½ä¸åšç¼–ç å¤„ç†ï¼Œè¿™ç§æ–¹å¼é€‚ç”¨ç›´æ¥é€šè¿‡è¡¨å•å‘é€é‚®ä»¶ã€‚</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä¸€æ—¦è®¾ç½®äº†<code>enctype</code>ä¸º<code>multipart/form-data</code>ï¼Œæµè§ˆå™¨å³ä¼šé‡‡ç”¨<strong>äºŒè¿›åˆ¶æµ</strong>çš„æ–¹å¼æ¥å¤„ç†è¡¨å•æ•°æ®ï¼Œè€Œå¯¹äºæ–‡ä»¶ä¸Šä¼ çš„å¤„ç†åˆ™æ¶‰åŠåœ¨æœåŠ¡å™¨ç«¯è§£æåŸå§‹çš„ HTTP å“åº”ã€‚</p>
<ul>
<li>Servlet3.0 è§„èŒƒå·²ç»æä¾›æ–¹æ³•æ¥å¤„ç†æ–‡ä»¶ä¸Šä¼ ï¼Œä½†è¿™ç§ä¸Šä¼ éœ€è¦åœ¨ Servlet ä¸­å®Œæˆã€‚</li>
<li>è€Œ Spring MVC åˆ™æä¾›äº†æ›´ç®€å•çš„å°è£…ã€‚</li>
<li>Spring MVC ä¸ºæ–‡ä»¶ä¸Šä¼ æä¾›äº†ç›´æ¥çš„æ”¯æŒï¼Œè¿™ç§æ”¯æŒæ˜¯ç”¨å³æ’å³ç”¨çš„<code>MultipartResolver</code>å®ç°çš„ã€‚</li>
<li>Spring MVCä½¿ç”¨<code>Apache Commons FileUpload</code>æŠ€æœ¯å®ç°äº†ä¸€ä¸ª<code>MultipartResolver</code>å®ç°ç±»<code>CommonsMultipartResolver</code>ã€‚å› æ­¤ï¼ŒSpring MVC çš„æ–‡ä»¶ä¸Šä¼ è¿˜éœ€è¦ä¾èµ–<code>Apache Commons FileUpload</code>çš„ç»„ä»¶ã€‚</li>
</ul>
<a id="more"></a>



<h3 id="2-æ–‡ä»¶ä¸Šä¼ "><a href="#2-æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="2. æ–‡ä»¶ä¸Šä¼ "></a>2. æ–‡ä»¶ä¸Šä¼ </h3><ol>
<li><p>å¯¼å…¥ jar åŒ…</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>é…ç½® beanï¼ˆå›ºå®šæ ¼å¼ï¼‰</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ–‡ä»¶ä¸Šä¼ é…ç½® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span>  <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è¯·æ±‚çš„ç¼–ç æ ¼å¼ï¼Œå¿…é¡»å’Œjspçš„pageEncodingå±æ€§ä¸€è‡´ï¼Œä»¥ä¾¿æ­£ç¡®è¯»å–è¡¨å•çš„å†…å®¹ï¼Œé»˜è®¤ä¸ºISO-8859-1 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;utf-8&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä¸Šä¼ æ–‡ä»¶å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼ˆ10485760=10Mï¼‰ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxUploadSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10485760&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxInMemorySize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;40960&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>CommonsMultipartFile</code>çš„å¸¸ç”¨æ–¹æ³•ï¼š</p>
<ul>
<li><code>String getOriginalFilename()</code>ï¼šè·å–ä¸Šä¼ æ–‡ä»¶çš„åŸå</li>
<li><code>InputStream getInputStream()</code>ï¼šè·å–æ–‡ä»¶æµ</li>
<li><code>void transferTo(File dest)</code>ï¼šå°†ä¸Šä¼ æ–‡ä»¶ä¿å­˜åˆ°ä¸€ä¸ªç›®å½•æ–‡ä»¶ä¸­</li>
</ul>
</li>
<li><p>ç¼–å†™é¡µé¢</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/upload&quot;</span> enctype=<span class="string">&quot;multipart/form-data&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">  &lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;file&quot;</span>/&gt;</span><br><span class="line">  &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;upload&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™æ§åˆ¶å™¨ï¼ˆå›ºå®šæ ¼å¼ï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.horsen.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.commons.CommonsMultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileController</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†name=fileæ§ä»¶å¾—åˆ°çš„æ–‡ä»¶å°è£…æˆCommonsMultipartFileå¯¹è±¡</span></span><br><span class="line"><span class="comment">     * æ‰¹é‡ä¸Šä¼ CommonsMultipartFileåˆ™ä¸ºæ•°ç»„å³å¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/upload&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">fileUpload</span><span class="params">(<span class="meta">@RequestParam(&quot;file&quot;)</span> CommonsMultipartFile file, HttpServletRequest request)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//è·å–æ–‡ä»¶å: file.getOriginalFilename();</span></span><br><span class="line">        String uploadFileName = file.getOriginalFilename();</span><br><span class="line">        <span class="comment">//å¦‚æœæ–‡ä»¶åä¸ºç©º, ç›´æ¥å›åˆ°é¦–é¡µ</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;&quot;</span>.equals(uploadFileName)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;redirect:/index.jsp&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸Šä¼ æ–‡ä»¶å: &quot;</span> + uploadFileName);</span><br><span class="line">        <span class="comment">//ä¸Šä¼ è·¯å¾„ä¿å­˜è®¾ç½®</span></span><br><span class="line">        String path = request.getServletContext().getRealPath(<span class="string">&quot;/upload&quot;</span>);</span><br><span class="line">        <span class="comment">//å¦‚æœè·¯å¾„ä¸å­˜åœ¨ï¼Œåˆ›å»ºä¸€ä¸ª</span></span><br><span class="line">        File realPath = <span class="keyword">new</span> File(path);</span><br><span class="line">        <span class="keyword">if</span> (!realPath.exists()) &#123;</span><br><span class="line">            realPath.mkdir();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸Šä¼ æ–‡ä»¶ä¿å­˜åœ°å€: &quot;</span> + realPath);</span><br><span class="line">        <span class="comment">//æ–‡ä»¶è¾“å…¥æµ</span></span><br><span class="line">        InputStream is = file.getInputStream();</span><br><span class="line">        <span class="comment">//æ–‡ä»¶è¾“å‡ºæµ</span></span><br><span class="line">        OutputStream os = <span class="keyword">new</span> FileOutputStream(<span class="keyword">new</span> File(realPath, uploadFileName));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¯»å–å†™å‡º</span></span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">while</span> ((len = is.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            os.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">            os.flush();</span><br><span class="line">        &#125;</span><br><span class="line">        os.close();</span><br><span class="line">        is.close();</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/index.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é‡‡ç”¨file.Transtoæ¥ä¿å­˜ä¸Šä¼ çš„æ–‡ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/upload2&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">fileUpload2</span><span class="params">(<span class="meta">@RequestParam(&quot;file&quot;)</span> CommonsMultipartFile file, HttpServletRequest request)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¸Šä¼ è·¯å¾„ä¿å­˜è®¾ç½®</span></span><br><span class="line">        String path = request.getServletContext().getRealPath(<span class="string">&quot;/upload&quot;</span>);</span><br><span class="line">        File realPath = <span class="keyword">new</span> File(path);</span><br><span class="line">        <span class="keyword">if</span> (!realPath.exists()) &#123;</span><br><span class="line">            realPath.mkdir();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//ä¸Šä¼ æ–‡ä»¶åœ°å€</span></span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸Šä¼ æ–‡ä»¶ä¿å­˜åœ°å€: &quot;</span> + realPath);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é€šè¿‡CommonsMultipartFileçš„æ–¹æ³•ç›´æ¥å†™æ–‡ä»¶ï¼ˆæ³¨æ„è¿™ä¸ªæ—¶å€™ï¼‰</span></span><br><span class="line">        file.transferTo(<span class="keyword">new</span> File(realPath + <span class="string">&quot;/&quot;</span> + file.getOriginalFilename()));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/index.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




</li>
</ol>
<h3 id="3-æ–‡ä»¶ä¸‹è½½"><a href="#3-æ–‡ä»¶ä¸‹è½½" class="headerlink" title="3. æ–‡ä»¶ä¸‹è½½"></a>3. æ–‡ä»¶ä¸‹è½½</h3><ol>
<li>è®¾ç½® response å“åº”å¤´</li>
<li>è¯»å–æ–‡ä»¶ â€“ InputStream</li>
<li>å†™å‡ºæ–‡ä»¶ â€“ OutputStream</li>
<li>æ‰§è¡Œæ“ä½œ</li>
<li>å…³é—­æµ ï¼ˆå…ˆå¼€åå…³ï¼‰</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/download&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">downloads</span><span class="params">(HttpServletResponse response , HttpServletRequest request)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    <span class="comment">// è¦ä¸‹è½½çš„å›¾ç‰‡åœ°å€</span></span><br><span class="line">    String  path = request.getServletContext().getRealPath(<span class="string">&quot;/upload&quot;</span>);</span><br><span class="line">    String  fileName = <span class="string">&quot;test.png&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1. è®¾ç½®responseå“åº”å¤´</span></span><br><span class="line">    <span class="comment">// è®¾ç½®é¡µé¢ä¸ç¼“å­˜, æ¸…ç©ºbuffer</span></span><br><span class="line">    response.reset();</span><br><span class="line">    <span class="comment">// å­—ç¬¦ç¼–ç </span></span><br><span class="line">    response.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    <span class="comment">// äºŒè¿›åˆ¶ä¼ è¾“æ•°æ®</span></span><br><span class="line">    response.setContentType(<span class="string">&quot;multipart/form-data&quot;</span>); </span><br><span class="line">    <span class="comment">// è®¾ç½®å“åº”å¤´</span></span><br><span class="line">    response.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>,</span><br><span class="line">                       <span class="string">&quot;attachment;fileName=&quot;</span>+ URLEncoder.encode(fileName, <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">    File file = <span class="keyword">new</span> File(path,fileName);</span><br><span class="line">    <span class="comment">// 2. è¯»å–æ–‡ä»¶--è¾“å…¥æµ</span></span><br><span class="line">    InputStream input=<span class="keyword">new</span> FileInputStream(file);</span><br><span class="line">    <span class="comment">// 3. å†™å‡ºæ–‡ä»¶--è¾“å‡ºæµ</span></span><br><span class="line">    OutputStream out = response.getOutputStream();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">byte</span>[] buff =<span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="keyword">int</span> index=<span class="number">0</span>;</span><br><span class="line">    <span class="comment">// 4. æ‰§è¡Œå†™å‡ºæ“ä½œ</span></span><br><span class="line">    <span class="keyword">while</span>((index= input.read(buff))!= -<span class="number">1</span>)&#123;</span><br><span class="line">        out.write(buff, <span class="number">0</span>, index);</span><br><span class="line">        out.flush();</span><br><span class="line">    &#125;</span><br><span class="line">    out.close();</span><br><span class="line">    input.close();</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;a href=&quot;$&#123;pageContext.request.contextPath&#125;/download&quot;&gt;ç‚¹å‡»ä¸‹è½½&lt;/a&gt;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Spring MVC</category>
      </categories>
      <tags>
        <tag>Spring MVC</tag>
        <tag>IO</tag>
      </tags>
  </entry>
  <entry>
    <title>åå°„</title>
    <url>/posts/7af799fd.html</url>
    <content><![CDATA[<h3 id="1-æ¦‚å¿µ"><a href="#1-æ¦‚å¿µ" class="headerlink" title="1. æ¦‚å¿µ"></a>1. æ¦‚å¿µ</h3><ul>
<li>åå°„æœºåˆ¶å…è®¸ç¨‹åºåœ¨æ‰§è¡ŒæœŸå€ŸåŠ©äº Reflection API è·å–ä»»ä½•ç±»çš„å†…éƒ¨ä¿¡æ¯ï¼Œå¹¶èƒ½ç›´æ¥æ“ä½œä»»æ„å¯¹è±¡çš„å†…éƒ¨å±æ€§åŠæ–¹æ³•ã€‚</li>
</ul>
<img src="/posts/7af799fd/image-20200723135607184.png" class>

<a id="more"></a>

<ul>
<li>åå°„æœºåˆ¶æä¾›çš„åŠŸèƒ½ï¼ˆåœ¨è¿è¡Œæ—¶ï¼‰<ul>
<li>åˆ¤æ–­ä»»æ„ä¸€ä¸ªå¯¹è±¡æ‰€å±çš„ç±»</li>
<li>æ„é€ ä»»æ„ä¸€ä¸ªç±»çš„å¯¹è±¡</li>
<li>åˆ¤æ–­ä»»æ„ä¸€ä¸ªç±»æ‰€å…·æœ‰çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•</li>
<li>è·å–æ³›å‹ä¿¡æ¯</li>
<li>è°ƒç”¨ä»»æ„ä¸€ä¸ªå¯¹è±¡çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•</li>
<li>å¤„ç†æ³¨è§£</li>
<li>ç”ŸæˆåŠ¨æ€ä»£ç†</li>
<li>â€¦â€¦</li>
</ul>
</li>
</ul>
<h3 id="2-Class-ç±»"><a href="#2-Class-ç±»" class="headerlink" title="2. Class ç±»"></a>2. Class ç±»</h3><ul>
<li>Class å¯¹è±¡åªèƒ½ç”±ç³»ç»Ÿå»ºç«‹</li>
<li>ä¸€ä¸ªç±»åœ¨ JVM ä¸­åªæœ‰ä¸€ä¸ª Class å¯¹è±¡</li>
<li>ä¸€ä¸ªç±»è¢«åŠ è½½åï¼Œç±»çš„æ•´ä¸ªç»“æ„éƒ½ä¼šè¢«å°è£…åœ¨ Class å¯¹è±¡ä¸­</li>
<li>Class ç±»æ˜¯ Reflection çš„æ ¹æºï¼Œé’ˆå¯¹ä»»ä½•æƒ³è¦åŠ¨æ€åŠ è½½ã€è¿è¡Œçš„ç±»ï¼Œå”¯æœ‰å…ˆè·å¾—ç›¸åº”çš„ Class å¯¹è±¡</li>
</ul>
<h3 id="3-è·å–-Class-ç±»çš„å®ä¾‹"><a href="#3-è·å–-Class-ç±»çš„å®ä¾‹" class="headerlink" title="3. è·å– Class ç±»çš„å®ä¾‹"></a>3. è·å– Class ç±»çš„å®ä¾‹</h3><ol>
<li><p>å·²çŸ¥å…·ä½“çš„ç±»ï¼Œé€šè¿‡ç±»çš„ class å±æ€§è·å–ï¼Œè¯¥æ–¹æ³•æœ€å®‰å…¨å¯é </p>
<p><code>Class clazz = Person.class;</code></p>
</li>
<li><p>å·²çŸ¥æŸä¸ªç±»çš„å®ä¾‹ï¼Œè°ƒç”¨è¯¥å®ä¾‹çš„ getClass() æ–¹æ³•è·å– Class å¯¹è±¡</p>
<p><code>Class clazz = person.getClass();</code></p>
</li>
<li><p>å·²çŸ¥ä¸€ä¸ªç±»çš„å…¨ç±»åï¼Œä¸”è¯¥ç±»åœ¨ç±»è·¯å¾„ä¸‹ï¼Œé€šè¿‡ Class ç±»çš„é™æ€æ–¹æ³• forName() è·å–</p>
<p><code>Class class = Class.forName(&quot;demo01.Student&quot;);</code></p>
</li>
<li><p>å†…ç½®åŸºæœ¬æ•°æ®ç±»å‹å¯ä»¥ç›´æ¥ç”¨ç±»å.TYPE</p>
</li>
<li><p>åˆ©ç”¨ ClassLoader</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException </span>&#123;</span><br><span class="line">        Person person = <span class="keyword">new</span> Student();</span><br><span class="line">        System.out.println(<span class="string">&quot;è¿™ä¸ªäººæ˜¯: &quot;</span> + person.name);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ–¹å¼ä¸€: é€šè¿‡å¯¹è±¡è·å¾—</span></span><br><span class="line">        Class c1 = person.getClass();</span><br><span class="line">        System.out.println(c1.hashCode());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ–¹å¼äºŒ: forNameè·å¾—</span></span><br><span class="line">        Class c2 = Class.forName(<span class="string">&quot;com.horsen.reflection.Student&quot;</span>);</span><br><span class="line">        System.out.println(c2.hashCode());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ–¹å¼ä¸‰: é€šè¿‡ç±»å.class</span></span><br><span class="line">        Class c3 = Student.class;</span><br><span class="line">        System.out.println(c3.hashCode());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ–¹å¼å››: åŸºæœ¬å†…ç½®ç±»å‹çš„åŒ…è£…ç±»éƒ½æœ‰ä¸€ä¸ªTYPEå±æ€§</span></span><br><span class="line">        Class c4 = Integer.TYPE;</span><br><span class="line">        System.out.println(c4);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å¾—çˆ¶ç±»çš„ç±»å‹</span></span><br><span class="line">        Class c5 = c1.getSuperclass();</span><br><span class="line">        System.out.println(c5);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Persion&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = <span class="string">&quot;å­¦ç”Ÿ&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>æ³¨è§£å’Œåå°„</category>
      </categories>
      <tags>
        <tag>åå°„</tag>
      </tags>
  </entry>
  <entry>
    <title>01_Maven é…ç½®</title>
    <url>/posts/40682306.html</url>
    <content><![CDATA[<h3 id="1-ä¸‹è½½å‹ç¼©åŒ…"><a href="#1-ä¸‹è½½å‹ç¼©åŒ…" class="headerlink" title="1. ä¸‹è½½å‹ç¼©åŒ…"></a>1. ä¸‹è½½å‹ç¼©åŒ…</h3><p><a href="http://maven.apache.org/download.cgi">http://maven.apache.org/download.cgi</a></p>
<img src="/posts/40682306/1.png" class>



<h3 id="2-é…ç½®ç¯å¢ƒå˜é‡"><a href="#2-é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="2. é…ç½®ç¯å¢ƒå˜é‡"></a>2. é…ç½®ç¯å¢ƒå˜é‡</h3><table>
<thead>
<tr>
<th align="left">å˜é‡å</th>
<th align="left">å˜é‡å€¼</th>
</tr>
</thead>
<tbody><tr>
<td align="left">MAVEN_HOME</td>
<td align="left">D:\Environment\apache-maven-3.6.3</td>
</tr>
<tr>
<td align="left">M2_HOME</td>
<td align="left">D:\Environment\apache-maven-3.6.3\bin</td>
</tr>
<tr>
<td align="left">Pathä¸­æ·»åŠ </td>
<td align="left">%MAVEN_HOME%\bin</td>
</tr>
</tbody></table>
<h3 id="3-éªŒè¯å®‰è£…"><a href="#3-éªŒè¯å®‰è£…" class="headerlink" title="3. éªŒè¯å®‰è£…"></a>3. éªŒè¯å®‰è£…</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mvn -version</span><br></pre></td></tr></table></figure>

<a id="more"></a>



<h3 id="4-ä¿®æ”¹é•œåƒæº"><a href="#4-ä¿®æ”¹é•œåƒæº" class="headerlink" title="4. ä¿®æ”¹é•œåƒæº"></a>4. ä¿®æ”¹é•œåƒæº</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-aliyun<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*,!jeecg,!jeecg-snapshots<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>Nexus aliyun<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="5-å»ºç«‹æœ¬åœ°ä»“åº“"><a href="#5-å»ºç«‹æœ¬åœ°ä»“åº“" class="headerlink" title="5. å»ºç«‹æœ¬åœ°ä»“åº“"></a>5. å»ºç«‹æœ¬åœ°ä»“åº“</h3><ul>
<li>maven ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶å¤¹ maven-repo</li>
</ul>
<img src="/posts/40682306/image-20200704225515234.png" class>

<ul>
<li>é…ç½®æ–‡ä»¶ <settings> æ ‡ç­¾ä¸­æ·»åŠ </settings></li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">localRepository</span>&gt;</span>D:\Environment\apache-maven-3.6.3\maven-repo<span class="tag">&lt;/<span class="name">localRepository</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="6-åœ¨-IDEA-ä¸­ä½¿ç”¨"><a href="#6-åœ¨-IDEA-ä¸­ä½¿ç”¨" class="headerlink" title="6. åœ¨ IDEA ä¸­ä½¿ç”¨"></a>6. åœ¨ IDEA ä¸­ä½¿ç”¨</h3><h4 id="6-1-åˆ›å»º-MavenWeb-é¡¹ç›®"><a href="#6-1-åˆ›å»º-MavenWeb-é¡¹ç›®" class="headerlink" title="6.1 åˆ›å»º MavenWeb é¡¹ç›®"></a>6.1 åˆ›å»º MavenWeb é¡¹ç›®</h4><img src="/posts/40682306/image-20200704230404473.png" class>

<img src="/posts/40682306/image-20200704230944123.png" class>

<img src="/posts/40682306/image-20200705003522875.png" class>



<h4 id="6-2-è®¾ç½®-Maven"><a href="#6-2-è®¾ç½®-Maven" class="headerlink" title="6.2 è®¾ç½® Maven"></a>6.2 è®¾ç½® Maven</h4><p><em>æ¯æ¬¡æ–°å»ºé¡¹ç›®éƒ½æ£€æŸ¥ä¸€ä¸‹è¿™éƒ¨åˆ†</em></p>
<img src="/posts/40682306/image-20200705002910260.png" class>



<h4 id="6-3-è¡¥å…¨é¡¹ç›®æ–‡ä»¶"><a href="#6-3-è¡¥å…¨é¡¹ç›®æ–‡ä»¶" class="headerlink" title="6.3 è¡¥å…¨é¡¹ç›®æ–‡ä»¶"></a>6.3 è¡¥å…¨é¡¹ç›®æ–‡ä»¶</h4><ul>
<li>åœ¨ main æ–‡ä»¶å¤¹ä¸­æ–°å»ºä¸¤ä¸ªæ–‡ä»¶å¤¹</li>
</ul>
<img src="/posts/40682306/image-20200704233517122.png" class>

<ul>
<li>æ ‡è®° java æ–‡ä»¶å¤¹</li>
</ul>
<img src="/posts/40682306/image-20200704233654214.png" class>



<h4 id="6-4-é…ç½®-Tomcat"><a href="#6-4-é…ç½®-Tomcat" class="headerlink" title="6.4 é…ç½® Tomcat"></a>6.4 é…ç½® Tomcat</h4><img src="/posts/40682306/image-20200704234448579.png" class>

<img src="/posts/40682306/image-20200704234427105.png" class>

<img src="/posts/40682306/image-20200705005555056.png" class>

<img src="/posts/40682306/image-20200705005420950.png" class>



<h3 id="7-pom-xml"><a href="#7-pom-xml" class="headerlink" title="7. pom.xml"></a>7. pom.xml</h3><ul>
<li><p>æ–‡ä»¶è¯¦è§£</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Mavenç‰ˆæœ¬å’Œå¤´æ–‡ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è‡ªå·±é…ç½®çš„GAV --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.horsen<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>JavaWeb_01_Maven<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Package: é¡¹ç›®çš„æ‰“åŒ…æ–¹å¼</span></span><br><span class="line"><span class="comment">    java: Javaåº”ç”¨</span></span><br><span class="line"><span class="comment">    war: JavaWebåº”ç”¨</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é¡¹ç›®çš„é»˜è®¤æ„å»ºç¼–ç  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ç¼–ç ç‰ˆæœ¬ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é¡¹ç›®ä¾èµ– --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å…·ä½“ä¾èµ–çš„jaråŒ… --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é¡¹ç›®æ„å»ºç”¨çš„ä¸œè¥¿ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>JavaWeb_01_Maven<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">pluginManagement</span>&gt;</span><span class="comment">&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-clean-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_war_packaging --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-resources-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.22.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-war-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-install-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-deploy-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">pluginManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨ build ä¸­é…ç½® resourcesï¼Œæ¥é˜²æ­¢æˆ‘ä»¬èµ„æºå¯¼å‡ºå¤±è´¥çš„é—®é¢˜</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Java Web</category>
      </categories>
      <tags>
        <tag>ç¯å¢ƒæ­å»º</tag>
        <tag>Java Web</tag>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title>æ³¨è§£</title>
    <url>/posts/a70f4376.html</url>
    <content><![CDATA[<h3 id="1-å†…ç½®æ³¨è§£"><a href="#1-å†…ç½®æ³¨è§£" class="headerlink" title="1. å†…ç½®æ³¨è§£"></a>1. å†…ç½®æ³¨è§£</h3><table>
<thead>
<tr>
<th><strong>æ³¨è§£</strong></th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td>@Override</td>
<td>é‡å†™çˆ¶ç±»æ–¹æ³•</td>
</tr>
<tr>
<td>@Deprecated</td>
<td>ä¸æ¨èä½¿ç”¨çš„æ–¹æ³•</td>
</tr>
<tr>
<td>@SuppressWarnings</td>
<td>æŠ‘åˆ¶è­¦å‘Šä¿¡æ¯</td>
</tr>
</tbody></table>
<a id="more"></a>



<h3 id="2-å…ƒæ³¨è§£"><a href="#2-å…ƒæ³¨è§£" class="headerlink" title="2. å…ƒæ³¨è§£"></a>2. å…ƒæ³¨è§£</h3><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td>@Target</td>
<td>æè¿°æ³¨è§£çš„é€‚ç”¨èŒƒå›´</td>
</tr>
<tr>
<td>@Retention</td>
<td>æè¿°æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸ</td>
</tr>
<tr>
<td>@Documented</td>
<td>è¯´æ˜å°†æ”¹æ³¨è§£åŒ…å«åœ¨JavaDocä¸­</td>
</tr>
<tr>
<td>@Inherited</td>
<td>è¯´æ˜å­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»ä¸­çš„è¯¥æ³¨è§£</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test01</span> </span>&#123;</span><br><span class="line">    <span class="meta">@MyAnnotation</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªæ³¨è§£</span></span><br><span class="line"><span class="comment">// Targetè¡¨ç¤ºæ³¨è§£å¯ä»¥ç”¨åœ¨å“ªäº›åœ°æ–¹</span></span><br><span class="line"><span class="meta">@Target(value = &#123;ElementType.METHOD, ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="comment">// Retentionè¡¨ç¤ºæ³¨è§£åœ¨ä»€ä¹ˆåœ°æ–¹æœ‰æ•ˆ</span></span><br><span class="line"><span class="comment">// runtime &gt; class &gt; sources</span></span><br><span class="line"><span class="meta">@Retention(value = RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="comment">// Ducomented è¡¨ç¤ºæ˜¯å¦å°†æ³¨è§£ç”Ÿæˆåœ¨JavaDocä¸­</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="comment">// Inherited è¡¨ç¤ºå­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„æ³¨è§£</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@interface</span> MyAnnotation &#123;&#125;</span><br></pre></td></tr></table></figure>



<h3 id="3-è‡ªå®šä¹‰æ³¨è§£"><a href="#3-è‡ªå®šä¹‰æ³¨è§£" class="headerlink" title="3. è‡ªå®šä¹‰æ³¨è§£"></a>3. è‡ªå®šä¹‰æ³¨è§£</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test02</span> </span>&#123;</span><br><span class="line">    <span class="meta">@MyAnnotation2(name = &quot;lhx&quot;, schools = &#123;&quot;njit&quot;&#125;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœå‚æ•°åä¸ºvalue å¯ä»¥çœç•¥ä¸å†™</span></span><br><span class="line">    <span class="meta">@MyAnnotation3(&quot;lhx&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.TYPE, ElementType.METHOD&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@interface</span> MyAnnotation2 &#123;</span><br><span class="line">    <span class="comment">// æ³¨è§£çš„å‚æ•°: å‚æ•°ç±»å‹ + å‚æ•°å()</span></span><br><span class="line">    <span class="function">String <span class="title">name</span><span class="params">()</span> <span class="keyword">default</span> &quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">age</span><span class="params">()</span> <span class="keyword">default</span> 0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœé»˜è®¤å€¼ä¸º-1 ä»£è¡¨ä¸å­˜åœ¨</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">id</span><span class="params">()</span> <span class="keyword">default</span> -1</span>;</span><br><span class="line"></span><br><span class="line">    String[] schools();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.TYPE, ElementType.METHOD&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@interface</span> MyAnnotation3 &#123;</span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>æ³¨è§£å’Œåå°„</category>
      </categories>
      <tags>
        <tag>æ³¨è§£</tag>
      </tags>
  </entry>
  <entry>
    <title>02_Tomcat é…ç½®</title>
    <url>/posts/d111b2f.html</url>
    <content><![CDATA[<h3 id="1-ä¸‹è½½å‹ç¼©åŒ…"><a href="#1-ä¸‹è½½å‹ç¼©åŒ…" class="headerlink" title="1. ä¸‹è½½å‹ç¼©åŒ…"></a>1. ä¸‹è½½å‹ç¼©åŒ…</h3><p><a href="https://tomcat.apache.org/">https://tomcat.apache.org/</a></p>
<img src="/posts/d111b2f/image-20200704235009423.png" class>



<h3 id="2-é‡åˆ°çš„é—®é¢˜"><a href="#2-é‡åˆ°çš„é—®é¢˜" class="headerlink" title="2. é‡åˆ°çš„é—®é¢˜"></a>2. é‡åˆ°çš„é—®é¢˜</h3><h4 id="2-1-å¯åŠ¨æ—¶ä¹±ç "><a href="#2-1-å¯åŠ¨æ—¶ä¹±ç " class="headerlink" title="2.1 å¯åŠ¨æ—¶ä¹±ç "></a>2.1 å¯åŠ¨æ—¶ä¹±ç </h4><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ D:\Environment\apache-tomcat-9.0.36\conf\logging.properties</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">java.util.logging.ConsoleHandler.encoding = GBK</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Java Web</category>
      </categories>
      <tags>
        <tag>ç¯å¢ƒæ­å»º</tag>
        <tag>Tomcat</tag>
        <tag>Java Web</tag>
      </tags>
  </entry>
  <entry>
    <title>03_åˆè¯† Servlet</title>
    <url>/posts/d139c628.html</url>
    <content><![CDATA[<h3 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1. ç®€ä»‹"></a>1. ç®€ä»‹</h3><p>å¼€å‘ Servlet ç¨‹åºæ­¥éª¤</p>
<ul>
<li><p>ç¼–å†™ä¸€ä¸ªç±»ï¼Œå®ç° Servlet æ¥å£</p>
</li>
<li><p>æŠŠå¼€å‘å¥½çš„ Java ç±»éƒ¨ç½²åˆ° web æœåŠ¡å™¨ä¸­</p>
</li>
</ul>
<a id="more"></a>



<h3 id="2-æ–°å»º-Servlet-é¡¹ç›®"><a href="#2-æ–°å»º-Servlet-é¡¹ç›®" class="headerlink" title="2. æ–°å»º Servlet é¡¹ç›®"></a>2. æ–°å»º Servlet é¡¹ç›®</h3><ul>
<li><p>æ–°å»ºä¸€ä¸ªæ™®é€šçš„ Maven é¡¹ç›®</p>
</li>
<li><p>åˆ æ‰é‡Œé¢çš„srcç›®å½•ï¼Œä»¥åçš„å­¦ä¹ å°±åœ¨è¿™ä¸ªé¡¹ç›®ä¸­å»ºç«‹ Moudelï¼Œè¿™ä¸ªç©ºçš„å·¥ç¨‹å°±æ˜¯ Maven ä¸»å·¥ç¨‹</p>
</li>
<li><p>å¯¼å…¥ä¾èµ–</p>
<p>ä»å®˜æ–¹ Maven ä»“åº“æ‰¾ <a href="https://mvnrepository.com/">https://mvnrepository.com/</a></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/javax.servlet.jsp/javax.servlet.jsp-api --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
<h3 id="3-æ–°å»ºä¸€ä¸ª-Model"><a href="#3-æ–°å»ºä¸€ä¸ª-Model" class="headerlink" title="3. æ–°å»ºä¸€ä¸ª Model"></a>3. æ–°å»ºä¸€ä¸ª Model</h3><img src="/posts/d139c628/image-20200705115303339.png" class> 

<ul>
<li><p>å…³äº Maven çˆ¶å­å·¥ç¨‹çš„ç†è§£ï¼š</p>
<ul>
<li><p>çˆ¶é¡¹ç›® pom.xml ä¸­ä¼šæœ‰</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span>&gt;</span>Servlet_01<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å­é¡¹ç›® pom.xml ä¸­æ·»åŠ </p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>JavaWeb_02_Servlet<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.horsen<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>çˆ¶é¡¹ç›®ä¸­çš„ java å­é¡¹ç›®å¯ä»¥ç›´æ¥ä½¿ç”¨çˆ¶é¡¹ç›®ä¸­çš„ä¾èµ–</p>
</li>
</ul>
</li>
<li><p>ä¿®æ”¹ src\main\webapp\WEB-INF\web.xml çš„å¤´æ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee</span></span></span><br><span class="line"><span class="tag"><span class="string">                         http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">metadata-complete</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥ç›´æ¥ä¿®æ”¹æ¨¡æ¿ï¼Œä¸€åŠ³æ°¸é€¸</p>
<img src="/posts/d139c628/image-20200705121416451.png" class>


</li>
</ul>
<ul>
<li><p>åœ¨ main æ–‡ä»¶å¤¹ä¸­æ·»åŠ  java å’Œ resource ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼ˆè¯¦è§Mavené…ç½®ï¼‰</p>
</li>
<li><p>æ–°å»ºåŒ… com.horsen.servlet</p>
</li>
</ul>
<h3 id="4-ç¼–å†™-Servlet-ç¨‹åº"><a href="#4-ç¼–å†™-Servlet-ç¨‹åº" class="headerlink" title="4. ç¼–å†™ Servlet ç¨‹åº"></a>4. ç¼–å†™ Servlet ç¨‹åº</h3><ul>
<li><p>ç¼–å†™ä¸€ä¸ªæ™®é€šç±»</p>
</li>
<li><p>å®ç° Servlet æ¥å£ï¼Œè¿™é‡Œç›´æ¥ç»§æ‰¿HttpServletï¼Œé‡å†™æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ç”±äºgetæˆ–postçŸ¥è¯†è¯·æ±‚å®ç°çš„ä¸åŒæ–¹å¼, å¯ä»¥äº’ç›¸è°ƒç”¨, ä¸šåŠ¡é€»è¾‘éƒ½ä¸€æ ·</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// å“åº”æµ</span></span><br><span class="line">        PrintWriter writer = resp.getWriter();</span><br><span class="line">        writer.println(<span class="string">&quot;Hello, Servlet&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™ Servlet çš„æ˜ å°„</p>
<p>ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºæˆ‘ä»¬å†™çš„æ˜¯ Java ç¨‹åºï¼Œä½†æ˜¯è¦é€šè¿‡æµè§ˆå™¨è®¿é—®ï¼Œè€Œæµè§ˆå™¨éœ€è¦è¿æ¥ web æœåŠ¡å™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ web æœåŠ¡ä¸­æ³¨å†Œæˆ‘ä»¬å†™çš„ Servletï¼Œè¿˜éœ€è¦ç»™å®ƒä¸€ä¸ªæµè§ˆå™¨èƒ½å¤Ÿè®¿é—®çš„è·¯å¾„ã€‚</p>
<p>åœ¨ web.xml ä¸­æ·»åŠ </p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ³¨å†ŒServlet --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.horsen.servlet.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Servletçš„è¯·æ±‚è·¯å¾„ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>é…ç½® Tomcatï¼ˆè¯¦è§ Maven é…ç½®ï¼‰</p>
</li>
<li><p>å¯åŠ¨ Tomcat</p>
</li>
</ul>
<h3 id="5-Mapping-é—®é¢˜"><a href="#5-Mapping-é—®é¢˜" class="headerlink" title="5. Mapping é—®é¢˜"></a>5. Mapping é—®é¢˜</h3><ul>
<li><p>ä¸€ä¸ª Servlet å¯ä»¥æŒ‡å®šä¸€ä¸ªæ˜ å°„è·¯å¾„</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¸€ä¸ª Servlet å¯ä»¥æŒ‡å®šå¤šä¸ªæ˜ å°„è·¯å¾„</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello1<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello2<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello3<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¸€ä¸ª Servlet å¯ä»¥æŒ‡å®šé€šç”¨æ˜ å°„è·¯å¾„</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¼˜å…ˆçº§é—®é¢˜</p>
<p>æŒ‡å®šäº†å›ºæœ‰çš„æ˜ å°„è·¯å¾„ä¼˜å…ˆçº§æœ€é«˜ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±ä¼šèµ°é»˜è®¤çš„å¤„ç†è¯·æ±‚ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œè‡ªå·±å®šä¹‰ä¸€ä¸ªé”™è¯¯é¡µé¢ï¼Œä½œä¸ºé»˜è®¤çš„æ˜ å°„è·¯å¾„ã€‚å½“æ‰¾ä¸åˆ°æŒ‡å®šçš„æ˜ å°„è·¯å¾„æ—¶ï¼Œå®ƒå°±ä¼šæ´¾ä¸Šç”¨åœºã€‚</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 404 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>error<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.horsen.servlet.ErrorServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Servletçš„è¯·æ±‚è·¯å¾„ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>error<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Java Web</category>
      </categories>
      <tags>
        <tag>Java Web</tag>
        <tag>Servlet</tag>
      </tags>
  </entry>
  <entry>
    <title>05_HttpServletResponse åº”ç”¨</title>
    <url>/posts/9f3b37e7.html</url>
    <content><![CDATA[<p>web æœåŠ¡å™¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„ http è¯·æ±‚ï¼Œé’ˆå¯¹è¿™ä¸ªè¯·æ±‚ï¼Œåˆ†åˆ«åˆ›å»ºä¸€ä¸ªä»£è¡¨è¯·æ±‚çš„HttpServletRequest å¯¹è±¡ï¼Œå’Œä¸€ä¸ªä»£è¡¨å“åº”çš„ HttpServletResponce å¯¹è±¡</p>
<ul>
<li>å¦‚æœè¦è·å–å®¢æˆ·ç«¯è¯·æ±‚çš„å‚æ•°ï¼Œæ‰¾HttpServletRequest</li>
<li>å¦‚æœè¦ç»™å®¢æˆ·ç«¯å“åº”ä¸€äº›ä¿¡æ¯ï¼Œæ‰¾ HttpServletResponce</li>
</ul>
<h3 id="1-ç®€å•åˆ†ç±»"><a href="#1-ç®€å•åˆ†ç±»" class="headerlink" title="1. ç®€å•åˆ†ç±»"></a>1. ç®€å•åˆ†ç±»</h3><ul>
<li><p>è´Ÿè´£å‘æµè§ˆå™¨å‘é€æ•°æ®çš„æ–¹æ³•</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function">ServletOutputStream <span class="title">getOutputStream</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>;</span><br><span class="line"></span><br><span class="line"><span class="function">PrintWriter <span class="title">getWriter</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<a id="more"></a>

<ul>
<li><p>è´Ÿè´£å‘æµè§ˆå™¨å‘é€å“åº”å¤´çš„æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setCharacterEncoding</span><span class="params">(String var1)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setContentLength</span><span class="params">(<span class="keyword">int</span> var1)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setContentLengthLong</span><span class="params">(<span class="keyword">long</span> var1)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setContentType</span><span class="params">(String var1)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setDateHeader</span><span class="params">(String var1, <span class="keyword">long</span> var2)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addDateHeader</span><span class="params">(String var1, <span class="keyword">long</span> var2)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setHeader</span><span class="params">(String var1, String var2)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addHeader</span><span class="params">(String var1, String var2)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setIntHeader</span><span class="params">(String var1, <span class="keyword">int</span> var2)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addIntHeader</span><span class="params">(String var1, <span class="keyword">int</span> var2)</span></span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å“åº”çš„çŠ¶æ€ç </p>
<table>
<thead>
<tr>
<th>çŠ¶æ€ç </th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td>200</td>
<td>è¯·æ±‚å“åº”æˆåŠŸ</td>
</tr>
<tr>
<td>302</td>
<td>è¯·æ±‚é‡å®šå‘ï¼ˆurlä¼šå‘ç”Ÿå˜åŒ–ï¼‰</td>
</tr>
<tr>
<td>307</td>
<td>è¯·æ±‚è½¬å‘ï¼ˆurlä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼‰</td>
</tr>
<tr>
<td>4xx</td>
<td>æ‰¾ä¸åˆ°èµ„æº</td>
</tr>
<tr>
<td>5xx</td>
<td>æœåŠ¡å™¨ä»£ç é”™è¯¯</td>
</tr>
</tbody></table>
</li>
</ul>
<h3 id="2-å¸¸è§åº”ç”¨"><a href="#2-å¸¸è§åº”ç”¨" class="headerlink" title="2. å¸¸è§åº”ç”¨"></a>2. å¸¸è§åº”ç”¨</h3><ul>
<li><p>å‘æµè§ˆå™¨è¾“å‡ºæ¶ˆæ¯</p>
</li>
<li><p>ä¸‹è½½æ–‡ä»¶</p>
<ol>
<li><p>è¦è·å–ä¸‹è½½æ–‡ä»¶çš„è·¯å¾„</p>
</li>
<li><p>è·å–ä¸‹è½½çš„æ–‡ä»¶å</p>
</li>
<li><p>æƒ³åŠæ³•è®©æµè§ˆå™¨èƒ½å¤Ÿæ”¯æŒä¸‹è½½ï¼ˆé‡åˆ°ä¸­æ–‡æ–‡ä»¶åï¼Œéœ€è¦è½¬æ¢ç¼–ç æ ¼å¼ï¼‰</p>
</li>
<li><p>è·å–ä¸‹è½½æ–‡ä»¶çš„è¾“å…¥æµ</p>
</li>
<li><p>åˆ›å»ºç¼“å†²åŒº</p>
</li>
<li><p>è·å– OutputStream å¯¹è±¡</p>
</li>
<li><p>å°† FileOutputStream å†™å…¥åˆ° buffer ç¼“å†²åŒº</p>
</li>
<li><p>ä½¿ç”¨ OutputStream å°†ç¼“å†²åŒºä¸­çš„æ•°æ®è¾“å‡ºåˆ°å®¢æˆ·ç«¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 1. è¦è·å–ä¸‹è½½æ–‡ä»¶çš„è·¯å¾„</span></span><br><span class="line">        String realPath = <span class="string">&quot;E:\\Proj_Java\\JavaWeb_02_Servlet\\Response\\src\\main\\resources\\img.jpg&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–‡ä»¶è·¯å¾„: &quot;</span> + realPath);</span><br><span class="line">        <span class="comment">// 2. è·å–ä¸‹è½½çš„æ–‡ä»¶å</span></span><br><span class="line">        String fileName = realPath.substring(realPath.lastIndexOf(<span class="string">&quot;\\&quot;</span>) + <span class="number">1</span>);</span><br><span class="line">        <span class="comment">// 3. æƒ³åŠæ³•è®©æµè§ˆå™¨èƒ½å¤Ÿæ”¯æŒä¸‹è½½</span></span><br><span class="line">        resp.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment;filename=&quot;</span> + fileName);</span><br><span class="line">        <span class="comment">// 4. è·å–ä¸‹è½½æ–‡ä»¶çš„è¾“å…¥æµ</span></span><br><span class="line">        FileInputStream in = <span class="keyword">new</span> FileInputStream(realPath);</span><br><span class="line">        <span class="comment">// 5. åˆ›å»ºç¼“å†²åŒº</span></span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="comment">// 6. è·å– OutputStream å¯¹è±¡</span></span><br><span class="line">        ServletOutputStream out = resp.getOutputStream();</span><br><span class="line">        <span class="comment">// 7. å°† FileOutputStream å†™å…¥åˆ° buffer ç¼“å†²åŒº  8. ä½¿ç”¨ OutputStream å°†ç¼“å†²åŒºä¸­çš„æ•°æ®è¾“å‡ºåˆ°å®¢æˆ·ç«¯</span></span><br><span class="line">        <span class="keyword">while</span> ((len = in.read(buffer)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            out.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line">        in.close();</span><br><span class="line">        out.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
</li>
</ul>
<h3 id="3-éªŒè¯ç åŠŸèƒ½"><a href="#3-éªŒè¯ç åŠŸèƒ½" class="headerlink" title="3. éªŒè¯ç åŠŸèƒ½"></a>3. éªŒè¯ç åŠŸèƒ½</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ImageServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// å¦‚ä½•è®©æµè§ˆå™¨3ç§’åˆ·æ–°ä¸€æ¬¡</span></span><br><span class="line">        resp.setHeader(<span class="string">&quot;refresh&quot;</span>, <span class="string">&quot;3&quot;</span>);</span><br><span class="line">        <span class="comment">// åœ¨å†…å­˜ä¸­åˆ›å»ºå›¾ç‰‡</span></span><br><span class="line">        BufferedImage image = <span class="keyword">new</span> BufferedImage(<span class="number">45</span>, <span class="number">20</span>, BufferedImage.TYPE_INT_RGB);</span><br><span class="line">        <span class="comment">// å¾—åˆ°ä¸€æ”¯ç¬”</span></span><br><span class="line">        Graphics2D pen = (Graphics2D) image.getGraphics();</span><br><span class="line">        <span class="comment">//è®¾ç½®å›¾ç‰‡èƒŒæ™¯é¢œè‰² ä»(0,0)å¡«å……åˆ°(80,20)</span></span><br><span class="line">        pen.setColor(Color.white);</span><br><span class="line">        pen.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">45</span>, <span class="number">20</span>);</span><br><span class="line">        <span class="comment">// ç»™å›¾ç‰‡å†™æ•°æ® ç”»éšæœºæ•°</span></span><br><span class="line">        pen.setColor(Color.blue);</span><br><span class="line">        pen.setFont(<span class="keyword">new</span> Font(<span class="keyword">null</span>, Font.BOLD, <span class="number">20</span>));</span><br><span class="line">        pen.drawString(makeRandomNumber(), <span class="number">0</span>, <span class="number">17</span>);</span><br><span class="line">        <span class="comment">// å‘Šè¯‰æµè§ˆå™¨è¿™ä¸ªè¯·æ±‚ç”¨å›¾ç‰‡çš„æ–¹å¼æ‰“å¼€</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;image/jpeg&quot;</span>);</span><br><span class="line">        <span class="comment">// ç½‘ç«™å­˜åœ¨ç¼“å­˜ æ‰€ä»¥è¦ç¦æ­¢æµè§ˆå™¨ç¼“å­˜</span></span><br><span class="line">        resp.setDateHeader(<span class="string">&quot;expires&quot;</span>, -<span class="number">1</span>);</span><br><span class="line">        resp.setHeader(<span class="string">&quot;Cache-Control&quot;</span>, <span class="string">&quot;no-cache&quot;</span>);</span><br><span class="line">        resp.setHeader(<span class="string">&quot;Pragma&quot;</span>, <span class="string">&quot;no-cache&quot;</span>);</span><br><span class="line">        <span class="comment">// æŠŠå›¾ç‰‡å†™ç»™æµè§ˆå™¨</span></span><br><span class="line">        <span class="keyword">boolean</span> write = ImageIO.write(image, <span class="string">&quot;jpg&quot;</span>, resp.getOutputStream());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆéšæœºæ•°</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> éšæœºæ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">makeRandomNumber</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Random random = <span class="keyword">new</span> Random();</span><br><span class="line">        <span class="comment">// ç”Ÿæˆä¸€ä¸ª0-9999çš„éšæœºæ•°</span></span><br><span class="line">        String num = random.nextInt(<span class="number">9999</span>) + <span class="string">&quot;&quot;</span>;</span><br><span class="line">        StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        <span class="comment">// å‰é¢è¡¥0 è¡¥æˆå››ä½æ•°</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span> - num.length(); i++) &#123;</span><br><span class="line">            sb.append(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sb.toString() + num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="4-å®ç°é‡å®šå‘"><a href="#4-å®ç°é‡å®šå‘" class="headerlink" title="4. å®ç°é‡å®šå‘"></a>4. å®ç°é‡å®šå‘</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedirectServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        resp.setHeader(&quot;Location&quot;,&quot;/Response/img&quot;);</span></span><br><span class="line"><span class="comment">        resp.setStatus(HttpServletResponse.SC_MOVED_TEMPORARILY);</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        resp.sendRedirect(<span class="string">&quot;/Response/img&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é¢è¯•é¢˜ï¼šè¯·ä½ èŠèŠé‡å®šå‘å’Œè½¬å‘çš„åŒºåˆ«</p>
<ul>
<li><p>ç›¸åŒç‚¹</p>
<ul>
<li>é¡µé¢éƒ½ä¼šå®ç°è·³è½¬</li>
</ul>
</li>
<li><p>ä¸åŒç‚¹</p>
<ul>
<li>è¯·æ±‚è½¬å‘çš„æ—¶å€™ï¼Œurl åœ°å€æ ä¸ä¼šå‘ç”Ÿå˜åŒ–</li>
<li>é‡å®šå‘çš„æ—¶å€™ï¼Œurl åœ°å€æ ä¼šå‘ç”Ÿå˜åŒ–</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Java Web</category>
      </categories>
      <tags>
        <tag>Java Web</tag>
        <tag>Servlet</tag>
        <tag>Response</tag>
      </tags>
  </entry>
  <entry>
    <title>04_ServletContext åº”ç”¨</title>
    <url>/posts/f32ab6ae.html</url>
    <content><![CDATA[<p>web å®¹å™¨åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œå®ƒä¼šä¸ºæ¯ä¸ª web ç¨‹åºéƒ½åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„ ServletContext å¯¹è±¡ï¼Œå®ƒä»£è¡¨äº†å½“å‰çš„ web åº”ç”¨ã€‚</p>
<h3 id="1-å…±äº«æ•°æ®"><a href="#1-å…±äº«æ•°æ®" class="headerlink" title="1. å…±äº«æ•°æ®"></a>1. å…±äº«æ•°æ®</h3><p>åœ¨ä¸€ä¸ª Servlet ä¸­ä¿å­˜çš„æ•°æ®ï¼Œå¯ä»¥åœ¨å¦ä¸€ä¸ª Servlet ä¸­æ‹¿åˆ°ã€‚ä¸¾ä¾‹ï¼š</p>
<ul>
<li><p>ç¬¬ä¸€ä¸ª Servlet</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        ServletContext context = <span class="keyword">this</span>.getServletContext();</span><br><span class="line">        String username = <span class="string">&quot;Horsen&quot;</span>;</span><br><span class="line">        context.setAttribute(<span class="string">&quot;username&quot;</span>, username);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<a id="more"></a>

<ul>
<li><p>ç¬¬äºŒä¸ª Servlet</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        ServletContext context = <span class="keyword">this</span>.getServletContext();</span><br><span class="line">        String username = (String) context.getAttribute(<span class="string">&quot;username&quot;</span>);</span><br><span class="line"></span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html; charset=UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        resp.getWriter().println(<span class="string">&quot;ç”¨æˆ·å: &quot;</span> + username);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>web.xml</p>
  <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.horsen.servlet.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>getc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.horsen.servlet.GetServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>getc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/getc<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
<h3 id="2-è·å–åˆå§‹åŒ–å‚æ•°"><a href="#2-è·å–åˆå§‹åŒ–å‚æ•°" class="headerlink" title="2. è·å–åˆå§‹åŒ–å‚æ•°"></a>2. è·å–åˆå§‹åŒ–å‚æ•°</h3><ul>
<li><p>web.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®ä¸€äº›webåº”ç”¨åˆå§‹åŒ–å‚æ•° --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>url<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>jdbc:mysql://localhost:3306/mybatis<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Servlet</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo03</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        ServletContext context = <span class="keyword">this</span>.getServletContext();</span><br><span class="line">        String url = context.getInitParameter(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        resp.getWriter().println(url);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h3 id="3-è¯·æ±‚è½¬å‘"><a href="#3-è¯·æ±‚è½¬å‘" class="headerlink" title="3. è¯·æ±‚è½¬å‘"></a>3. è¯·æ±‚è½¬å‘</h3><ul>
<li><p>Servlet</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo04</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        ServletContext context = <span class="keyword">this</span>.getServletContext();</span><br><span class="line">        <span class="comment">// getRequestDispatcher è·å–è¯·æ±‚è½¬å‘ è°ƒç”¨forwardå®ç°è¯·æ±‚è½¬å‘</span></span><br><span class="line">        context.getRequestDispatcher(<span class="string">&quot;/gp&quot;</span>).forward(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h3 id="4-è·å–èµ„æºæ–‡ä»¶"><a href="#4-è·å–èµ„æºæ–‡ä»¶" class="headerlink" title="4. è·å–èµ„æºæ–‡ä»¶"></a>4. è·å–èµ„æºæ–‡ä»¶</h3><p>åœ¨ java ç›®å½•ä¸‹æ–°å»º properties æˆ–åœ¨ resources ç›®å½•ä¸‹æ–°å»º propertiesï¼Œéƒ½ä¼šè¢«æ‰“åŒ…åˆ°åŒä¸€ä¸ªè·¯å¾„ classes ä¸‹ï¼Œä¿—ç§°è¿™ä¸ªè·¯å¾„ä¸º classpath</p>
<ul>
<li><p>db.properties</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">1234356</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Servlet</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo05</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        InputStream is = <span class="keyword">this</span>.getServletContext().getResourceAsStream(<span class="string">&quot;/WEB-INF/classes/db.properties&quot;</span>);</span><br><span class="line">        Properties prop = <span class="keyword">new</span> Properties();</span><br><span class="line">        prop.load(is);</span><br><span class="line">        String user = prop.getProperty(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        String pwd = prop.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        resp.getWriter().println(user + <span class="string">&quot;: &quot;</span> + pwd);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Java Web</category>
      </categories>
      <tags>
        <tag>Java Web</tag>
        <tag>Servlet</tag>
      </tags>
  </entry>
  <entry>
    <title>å®ç°å¤šçº¿ç¨‹çš„æ–¹æ³•</title>
    <url>/posts/f2deaf54.html</url>
    <content><![CDATA[<h3 id="1-ç»§æ‰¿-Thread-ç±»"><a href="#1-ç»§æ‰¿-Thread-ç±»" class="headerlink" title="1. ç»§æ‰¿ Thread ç±»"></a>1. ç»§æ‰¿ Thread ç±»</h3><ol>
<li>çº¿ç¨‹ç±»ç»§æ‰¿ Thread ç±»</li>
<li>é‡å†™ run() æ–¹æ³•</li>
<li>å£°æ˜çº¿ç¨‹ç±»å¯¹è±¡</li>
<li>å¯¹è±¡è°ƒç”¨ start() æ–¹æ³•</li>
</ol>
<p><em>ä½¿ç”¨ commons.io åŒ…ä¸‹è½½ç½‘ç»œå›¾ç‰‡</em></p>
<a id="more"></a>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadTest</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="keyword">private</span> String fileName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        WebDownloader webDownloader = <span class="keyword">new</span> WebDownloader();</span><br><span class="line">        webDownloader.downloader(url, fileName);</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸‹è½½æ–‡ä»¶: &quot;</span> + fileName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ThreadTest threadTest1</span><br><span class="line">                = <span class="keyword">new</span> ThreadTest(<span class="string">&quot;http://i0.hdslb.com/bfs/archive/22650682fd25a4a5aa96dd9ef53190c6b8d54912.png&quot;</span>, <span class="string">&quot;bilibili1.png&quot;</span>);</span><br><span class="line">        ThreadTest threadTest2</span><br><span class="line">                = <span class="keyword">new</span> ThreadTest(<span class="string">&quot;http://i0.hdslb.com/bfs/archive/22650682fd25a4a5aa96dd9ef53190c6b8d54912.png&quot;</span>, <span class="string">&quot;bilibili2.png&quot;</span>);</span><br><span class="line">        ThreadTest threadTest3</span><br><span class="line">                = <span class="keyword">new</span> ThreadTest(<span class="string">&quot;http://i0.hdslb.com/bfs/archive/22650682fd25a4a5aa96dd9ef53190c6b8d54912.png&quot;</span>, <span class="string">&quot;bilibili3.png&quot;</span>);</span><br><span class="line">        threadTest1.start();</span><br><span class="line">        threadTest2.start();</span><br><span class="line">        threadTest3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸‹è½½å™¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WebDownloader</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">downloader</span><span class="params">(String url, String fileName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            FileUtils.copyURLToFile(<span class="keyword">new</span> URL(url), <span class="keyword">new</span> File(fileName));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="1-2-å®ç°-Runnable-æ¥å£ï¼ˆæ¨èï¼‰"><a href="#1-2-å®ç°-Runnable-æ¥å£ï¼ˆæ¨èï¼‰" class="headerlink" title="1.2 å®ç° Runnable æ¥å£ï¼ˆæ¨èï¼‰"></a>1.2 å®ç° Runnable æ¥å£ï¼ˆæ¨èï¼‰</h4><ol>
<li>çº¿ç¨‹ç±»ç»§æ‰¿ Runnable æ¥å£</li>
<li>å®ç° run() æ–¹æ³•</li>
<li>å£°æ˜çº¿ç¨‹ç±»å¯¹è±¡</li>
<li>åˆ›å»º Thread å¯¹è±¡ï¼Œå‚æ•°ä¼ å…¥çº¿ç¨‹ç±»å¯¹è±¡</li>
<li>è°ƒç”¨ start() æ–¹æ³•</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RunnableTest</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">200</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;runæ–¹æ³•---&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºRunnableæ¥å£çš„å®ç°ç±»å¯¹è±¡</span></span><br><span class="line">        RunnableTest runnableTest = <span class="keyword">new</span> RunnableTest();</span><br><span class="line">        <span class="comment">// åˆ›å»ºçº¿ç¨‹å¯¹è±¡, é€šè¿‡çº¿ç¨‹å¯¹è±¡å¼€å¯çº¿ç¨‹(ä»£ç†)</span></span><br><span class="line">        <span class="keyword">new</span> Thread(runnableTest).start();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ä¸»çº¿ç¨‹---&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="2-é¾Ÿå…”èµ›è·‘"><a href="#2-é¾Ÿå…”èµ›è·‘" class="headerlink" title="2. é¾Ÿå…”èµ›è·‘"></a>2. é¾Ÿå…”èµ›è·‘</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Race</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String winner;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="comment">// æ¨¡æ‹Ÿå…”å­ä¼‘æ¯</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&quot;å…”å­&quot;</span>.equals(Thread.currentThread().getName()) &amp;&amp; i % <span class="number">10</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;å…”å­ç¡è§‰äº†&quot;</span>);</span><br><span class="line">                    Thread.sleep(<span class="number">1</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// åˆ¤æ–­æ¯”èµ›æ˜¯å¦ç»“æŸ</span></span><br><span class="line">            <span class="keyword">boolean</span> flag = gameOver(i);</span><br><span class="line">            <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;--&gt;è·‘äº†&quot;</span> + i + <span class="string">&quot;æ­¥&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­æ¯”èµ›æ˜¯å¦ç»“æŸ</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> steps æ­¥æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">gameOver</span><span class="params">(<span class="keyword">int</span> steps)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å¦‚æœå­˜åœ¨èƒœåˆ©è€…</span></span><br><span class="line">        <span class="keyword">if</span> (winner != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (steps &gt;= <span class="number">100</span>) &#123;</span><br><span class="line">            winner = Thread.currentThread().getName();</span><br><span class="line">            System.out.println(<span class="string">&quot;Winner is &quot;</span> + winner);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Race race = <span class="keyword">new</span> Race();</span><br><span class="line">        <span class="keyword">new</span> Thread(race, <span class="string">&quot;å…”å­&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(race, <span class="string">&quot;ä¹Œé¾Ÿ&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>å¤šçº¿ç¨‹</category>
      </categories>
      <tags>
        <tag>å¤šçº¿ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>06_HttpServletRequest åº”ç”¨</title>
    <url>/posts/355bc455.html</url>
    <content><![CDATA[<h3 id="1-è·å–å‰ç«¯ä¼ é€’çš„å‚æ•°"><a href="#1-è·å–å‰ç«¯ä¼ é€’çš„å‚æ•°" class="headerlink" title="1. è·å–å‰ç«¯ä¼ é€’çš„å‚æ•°"></a>1. è·å–å‰ç«¯ä¼ é€’çš„å‚æ•°</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é¿å…åå°æ¥æ”¶å‡ºç°ä¸­æ–‡ä¹±ç </span></span><br><span class="line">req.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line"><span class="comment">// é¿å…æµè§ˆå™¨å‡ºç°ä¸­æ–‡ä¹±ç </span></span><br><span class="line">resp.setContentType(<span class="string">&quot;text/html; charset=UTF-8&quot;</span>);</span><br><span class="line">String username = req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">String password = req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">String[] hobbies = req.getParameterValues(<span class="string">&quot;hobbies&quot;</span>);</span><br></pre></td></tr></table></figure>

<a id="more"></a>



<h3 id="2-è¯·æ±‚è½¬å‘"><a href="#2-è¯·æ±‚è½¬å‘" class="headerlink" title="2. è¯·æ±‚è½¬å‘"></a>2. è¯·æ±‚è½¬å‘</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é€šè¿‡è¯·æ±‚è½¬å‘ (è¯·æ±‚è½¬å‘æ˜¯é¡¹ç›®å†…éƒ¨èµ„æºçš„äº‹æƒ… ä¸éœ€è¦åŠ ä¸Šä¸‹æ–‡æˆ–é¡¹ç›®çš„è·¯å¾„)</span></span><br><span class="line">req.getRequestDispatcher(<span class="string">&quot;/success.jsp&quot;</span>).forward(req, resp);</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Java Web</category>
      </categories>
      <tags>
        <tag>Java Web</tag>
        <tag>Servlet</tag>
        <tag>Request</tag>
      </tags>
  </entry>
  <entry>
    <title>07_Session å’Œ Cookie</title>
    <url>/posts/d1747fc.html</url>
    <content><![CDATA[<h3 id="1-ä»€ä¹ˆæ˜¯-Session"><a href="#1-ä»€ä¹ˆæ˜¯-Session" class="headerlink" title="1. ä»€ä¹ˆæ˜¯ Session"></a>1. ä»€ä¹ˆæ˜¯ Session</h3><ul>
<li><p><strong>Sessionï¼ˆä¼šè¯ï¼‰</strong>ï¼šç”¨æˆ·æ‰“å¼€äº†ä¸€ä¸ªæµè§ˆå™¨ï¼Œç‚¹å‡»äº†å¾ˆå¤šè¶…é“¾æ¥ï¼Œè®¿é—®å¤šä¸ª web èµ„æºï¼Œå…³é—­æµè§ˆå™¨ã€‚</p>
</li>
<li><p><strong>æœ‰çŠ¶æ€ä¼šè¯</strong>ï¼šä¸€ä¸ªåŒå­¦æ¥è¿‡æ•™å®¤ï¼Œä¸‹æ¬¡å†æ¥æ•™å®¤ï¼Œæˆ‘ä»¬ä¼šçŸ¥é“è¿™ä¸ªåŒå­¦æ›¾ç»æ¥è¿‡ã€‚</p>
</li>
</ul>
<h3 id="2-ä¿å­˜ä¼šè¯çš„ä¸¤ç§æŠ€æœ¯"><a href="#2-ä¿å­˜ä¼šè¯çš„ä¸¤ç§æŠ€æœ¯" class="headerlink" title="2. ä¿å­˜ä¼šè¯çš„ä¸¤ç§æŠ€æœ¯"></a>2. ä¿å­˜ä¼šè¯çš„ä¸¤ç§æŠ€æœ¯</h3><ul>
<li><strong>Cookie</strong>ï¼šå®¢æˆ·ç«¯æŠ€æœ¯ï¼ˆå“åº”ã€è¯·æ±‚ï¼‰</li>
<li><strong>Session</strong> ï¼šæœåŠ¡å™¨æŠ€æœ¯ã€‚åˆ©ç”¨è¿™ä¸ªæŠ€æœ¯ï¼Œå¯ä»¥ä¿å­˜ç”¨æˆ·çš„ä¼šè¯ä¿¡æ¯ã€‚æˆ‘ä»¬å¯ä»¥æŠŠä¿¡æ¯æˆ–æ•°æ®æ”¾åœ¨Sessionä¸­</li>
</ul>
<a id="more"></a>



<h3 id="3-Cookie"><a href="#3-Cookie" class="headerlink" title="3. Cookie"></a>3. Cookie</h3><ol>
<li><p>ä»è¯·æ±‚ä¸­æ‹¿åˆ° Cookie ä¿¡æ¯</p>
</li>
<li><p>æœåŠ¡å™¨å“åº”ç»™å®¢æˆ·ç«¯</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æœåŠ¡å™¨ç«¯ä»å®¢æˆ·ç«¯è·å–Cookie</span></span><br><span class="line">Cookie[] cookies = req.getCookies();</span><br><span class="line"><span class="comment">// è·å–Cookieçš„åå­—</span></span><br><span class="line">cookie.getName();</span><br><span class="line"><span class="comment">// è·å–Cookieçš„å€¼</span></span><br><span class="line">cookie.getValue()</span><br><span class="line"><span class="comment">// æœåŠ¡å™¨ç»™å®¢æˆ·ç«¯å“åº”ä¸€ä¸ªCookie</span></span><br><span class="line">Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">&quot;lastLoginTime&quot;</span>, System.currentTimeMillis() + <span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="comment">// è®¾ç½®Cookieæœ‰æ•ˆæœŸä¸º1å¤©</span></span><br><span class="line">cookie.setMaxAge(<span class="number">24</span>*<span class="number">60</span>*<span class="number">60</span>);</span><br><span class="line"><span class="comment">// å“åº”ç»™å®¢æˆ·ç«¯ä¸€ä¸ªCookie</span></span><br><span class="line">resp.addCookie(cookie);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>åˆ é™¤ Cookieï¼šè®¾ç½®æœ‰æ•ˆæœŸä¸º0</p>
</li>
<li><p>ä¼ é€’ä¸­æ–‡æ•°æ®æ—¶ï¼Œä¸ºäº†é˜²æ­¢ä¹±ç ï¼Œæœ€å¥½å­˜å…¥æ—¶ç¼–ç ï¼Œå–å‡ºæ—¶è§£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç¼–ç </span></span><br><span class="line">Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">&quot;name&quot;</span>, URLEncoder.encode(<span class="string">&quot;ä½ å¥½&quot;</span>, <span class="string">&quot;utf-8&quot;</span>));</span><br><span class="line"><span class="comment">// è§£ç </span></span><br><span class="line"> out.println(URLDecoder.decode(cookies[i].getValue(), <span class="string">&quot;utf-8&quot;</span>));</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h3 id="4-Session"><a href="#4-Session" class="headerlink" title="4. Session"></a>4. Session</h3><ul>
<li>æœåŠ¡å™¨ç»™æ¯ä¸€ä¸ªç”¨æˆ·ï¼ˆæµè§ˆå™¨ï¼‰åˆ›å»ºä¸€ä¸ª Session å¯¹è±¡</li>
<li>ä¸€ä¸ª Session ç‹¬å ä¸€ä¸ªæµè§ˆå™¨ï¼Œåªè¦æµè§ˆå™¨æ²¡æœ‰å…³é—­ï¼Œè¿™ä¸ª Session å°±å­˜åœ¨</li>
<li>ä½¿ç”¨åœºæ™¯<ul>
<li>ä¿å­˜ä¸€ä¸ªç”¨æˆ·çš„ç™»å½•ä¿¡æ¯</li>
<li>è´­ç‰©è½¦ä¿¡æ¯</li>
<li>ä¿å­˜åœ¨æ•´ä¸ªç½‘ç«™ä¸­ç»å¸¸ä¼šä½¿ç”¨å¤šä¸ªæ•°æ®</li>
</ul>
</li>
</ul>
<ol>
<li><p>å‘ Session ä¸­å­˜</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SessionDemo_01</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// è§£å†³ä¹±ç é—®é¢˜</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html; charset=UTF-8&quot;</span>);</span><br><span class="line">        resp.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        req.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="comment">// å¾—åˆ°Session</span></span><br><span class="line">        HttpSession session = req.getSession();</span><br><span class="line">        <span class="comment">// ç»™Sessionä¸­å­˜ä¸œè¥¿</span></span><br><span class="line">        session.setAttribute(<span class="string">&quot;person&quot;</span>, <span class="keyword">new</span> Person(<span class="string">&quot;åˆ˜æ˜Šé‘«&quot;</span>, <span class="number">100</span>));</span><br><span class="line">        <span class="comment">// è·å–Sessionçš„ID</span></span><br><span class="line">        String id = session.getId();</span><br><span class="line">        <span class="comment">// åˆ¤æ–­Sessionæ˜¯ä¸æ˜¯æ–°åˆ›å»ºçš„</span></span><br><span class="line">        <span class="keyword">if</span> (session.isNew()) &#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;sessionåˆ›å»ºæˆåŠŸ, ID: &quot;</span> + id);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;sessionå·²ç»åœ¨æœåŠ¡å™¨ä¸­, ID: &quot;</span> + id);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä» Session ä¸­è·å¾—</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SessionDemo_02</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// è§£å†³ä¹±ç é—®é¢˜</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html; charset=UTF-8&quot;</span>);</span><br><span class="line">        resp.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        req.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="comment">// å¾—åˆ°Session</span></span><br><span class="line">        HttpSession session = req.getSession();</span><br><span class="line">        <span class="comment">// è·å–Sessionä¸­å­˜çš„ä¸œè¥¿</span></span><br><span class="line">        Person person = (Person) session.getAttribute(<span class="string">&quot;person&quot;</span>);</span><br><span class="line">        System.out.println(person.toString());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ³¨é”€ Session</p>
<p>3.1 æ‰‹åŠ¨æ³¨é”€</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SessionDemo_03</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// å¾—åˆ°Session</span></span><br><span class="line">        HttpSession session = req.getSession();</span><br><span class="line">        session.removeAttribute(<span class="string">&quot;person&quot;</span>);</span><br><span class="line">        <span class="comment">// æ‰‹åŠ¨æ³¨é”€Session</span></span><br><span class="line">        session.invalidate();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        doGet(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.2 è®¾ç½®å¤±æ•ˆæ—¶é—´</p>
<p>åœ¨ web.xml ä¸­</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è®¾ç½®Sessioné»˜è®¤çš„å¤±æ•ˆæ—¶é—´ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- xåˆ†é’ŸåSessionè‡ªåŠ¨å¤±æ•ˆ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>1<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="5-åŒºåˆ«"><a href="#5-åŒºåˆ«" class="headerlink" title="5. åŒºåˆ«"></a>5. åŒºåˆ«</h3><ul>
<li>Cookie æŠŠç”¨æˆ·çš„æ•°æ®å†™ç»™ç”¨æˆ·çš„æµè§ˆå™¨ï¼Œæµè§ˆå™¨ä¿å­˜ï¼ˆå¯ä»¥ä¿å­˜å¤šä¸ªï¼‰ã€‚</li>
<li>Session æŠŠç”¨æˆ·çš„æ•°æ®å†™åˆ°ç”¨æˆ·ç‹¬å çš„ Session ä¸­ï¼ŒæœåŠ¡å™¨ä¿å­˜ï¼ˆåªä¿å­˜é‡è¦çš„ä¿¡æ¯ï¼Œå‡å°‘æœåŠ¡å™¨èµ„æºçš„æµªè´¹ï¼‰ã€‚</li>
</ul>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>Java Web</category>
      </categories>
      <tags>
        <tag>Java Web</tag>
        <tag>Session</tag>
        <tag>Cookie</tag>
      </tags>
  </entry>
  <entry>
    <title>çº¿ç¨‹åŒæ­¥</title>
    <url>/posts/895e9db.html</url>
    <content><![CDATA[<h3 id="1-ä¸‰å¤§çº¿ç¨‹ä¸å®‰å…¨æ¡ˆä¾‹"><a href="#1-ä¸‰å¤§çº¿ç¨‹ä¸å®‰å…¨æ¡ˆä¾‹" class="headerlink" title="1. ä¸‰å¤§çº¿ç¨‹ä¸å®‰å…¨æ¡ˆä¾‹"></a>1. ä¸‰å¤§çº¿ç¨‹ä¸å®‰å…¨æ¡ˆä¾‹</h3><h4 id="1-1-ä¸å®‰å…¨çš„è´­ç¥¨"><a href="#1-1-ä¸å®‰å…¨çš„è´­ç¥¨" class="headerlink" title="1.1 ä¸å®‰å…¨çš„è´­ç¥¨"></a>1.1 ä¸å®‰å…¨çš„è´­ç¥¨</h4><ul>
<li><p>ä¸€å¼ ç¥¨åŒæ—¶è¢«å¤šäººä¹°åˆ°</p>
</li>
<li><p>å‡ºç°ä¹°åˆ°æ— ä¸­ç”Ÿæœ‰çš„ç¥¨çš„æƒ…å†µ</p>
</li>
</ul>
<a id="more"></a>

   <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UnsafeBuyTicket</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        BuyTicket station = <span class="keyword">new</span> BuyTicket();</span><br><span class="line">        <span class="keyword">new</span> Thread(station, <span class="string">&quot;æˆ‘&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(station, <span class="string">&quot;ä½ &quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(station, <span class="string">&quot;é»„ç‰›&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BuyTicket</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> ticketNums = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ä¹°ç¥¨</span></span><br><span class="line">        <span class="keyword">while</span> (flag) &#123;</span><br><span class="line">            buy();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">buy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­æ˜¯å¦æœ‰ç¥¨</span></span><br><span class="line">        <span class="keyword">if</span> (ticketNums &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            flag = <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">100</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot; æ‹¿åˆ°äº† &quot;</span> + ticketNums--);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="1-2-ä¸å®‰å…¨çš„å–é’±"><a href="#1-2-ä¸å®‰å…¨çš„å–é’±" class="headerlink" title="1.2 ä¸å®‰å…¨çš„å–é’±"></a>1.2 ä¸å®‰å…¨çš„å–é’±</h4><ul>
<li><p>å–å‡ºæ— ä¸­ç”Ÿæœ‰çš„é’±ï¼Œé“¶è¡Œè¡€äº</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UnsafeBank</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Account account = <span class="keyword">new</span> Account(<span class="number">100</span>, <span class="string">&quot;åŸºé‡‘&quot;</span>);</span><br><span class="line">        Drawing you = <span class="keyword">new</span> Drawing(account, <span class="number">50</span>, <span class="string">&quot;ä½ &quot;</span>);</span><br><span class="line">        Drawing girlFriend = <span class="keyword">new</span> Drawing(account, <span class="number">100</span>, <span class="string">&quot;å¥³æœ‹å‹&quot;</span>);</span><br><span class="line">        you.start();</span><br><span class="line">        girlFriend.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Account</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * money    ä½™é¢</span></span><br><span class="line"><span class="comment">     * name     å¡å</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">int</span> money;</span><br><span class="line">    String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Account</span><span class="params">(<span class="keyword">int</span> money, String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.money = money;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Drawing</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    Account account;</span><br><span class="line">    <span class="keyword">int</span> drawingMoney;</span><br><span class="line">    <span class="keyword">int</span> nowMoney;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Drawing</span><span class="params">(Account account, <span class="keyword">int</span> drawingMoney, String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(name);</span><br><span class="line">        <span class="keyword">this</span>.account = account;</span><br><span class="line">        <span class="keyword">this</span>.drawingMoney = drawingMoney;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­æœ‰æ²¡æœ‰é’±</span></span><br><span class="line">        <span class="keyword">if</span> (account.money - drawingMoney &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;é’±ä¸å¤Ÿ æ— æ³•å–é’±&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¡å†…ä½™é¢</span></span><br><span class="line">        account.money -= drawingMoney;</span><br><span class="line">        <span class="comment">// æ‰‹é‡Œçš„é’±</span></span><br><span class="line">        nowMoney += drawingMoney;</span><br><span class="line">        System.out.println(account.name + <span class="string">&quot;ä½™é¢ä¸º: &quot;</span> + account.money);</span><br><span class="line">        System.out.println(<span class="keyword">this</span>.getName() + <span class="string">&quot;æ‰‹é‡Œçš„é’±: &quot;</span> + nowMoney);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h4 id="1-3-ä¸å®‰å…¨çš„é›†åˆ"><a href="#1-3-ä¸å®‰å…¨çš„é›†åˆ" class="headerlink" title="1.3 ä¸å®‰å…¨çš„é›†åˆ"></a>1.3 ä¸å®‰å…¨çš„é›†åˆ</h4><ul>
<li><p>å¤šä¸ªçº¿ç¨‹åŒæ—¶å‘é›†åˆä¸­æ·»åŠ å…ƒç´ ï¼Œæ·»åŠ åœ¨åŒä¸€ä½ç½®ï¼Œå¯¼è‡´æ•°ç»„å®é™…å¤§å°ä¸é¢„æœŸä¸ç¬¦</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UnsafeList</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; list=<span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> Thread(()-&gt;&#123;</span><br><span class="line">                list.add(Thread.currentThread().getName());</span><br><span class="line">            &#125;).start();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(list.size());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h3 id="2-åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥å—"><a href="#2-åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥å—" class="headerlink" title="2. åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥å—"></a>2. åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥å—</h3><p>ç”¨ synchronized é”ä½å…¬å…±èµ„æº</p>
<h4 id="2-1-å®‰å…¨çš„è´­ç¥¨"><a href="#2-1-å®‰å…¨çš„è´­ç¥¨" class="headerlink" title="2.1 å®‰å…¨çš„è´­ç¥¨"></a>2.1 å®‰å…¨çš„è´­ç¥¨</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">buy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯å¦æœ‰ç¥¨</span></span><br><span class="line">    <span class="keyword">if</span> (ticketNums &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        flag = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(Thread.currentThread().getName() + <span class="string">&quot; æ‹¿åˆ°äº† &quot;</span> + ticketNums--);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="2-2-å®‰å…¨çš„å–é’±"><a href="#2-2-å®‰å…¨çš„å–é’±" class="headerlink" title="2.2 å®‰å…¨çš„å–é’±"></a>2.2 å®‰å…¨çš„å–é’±</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">synchronized</span> (account)&#123;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­æœ‰æ²¡æœ‰é’±</span></span><br><span class="line">        <span class="keyword">if</span> (account.money - drawingMoney &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;é’±ä¸å¤Ÿ æ— æ³•å–é’±&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¡å†…ä½™é¢</span></span><br><span class="line">        account.money -= drawingMoney;</span><br><span class="line">        <span class="comment">// æ‰‹é‡Œçš„é’±</span></span><br><span class="line">        nowMoney += drawingMoney;</span><br><span class="line">        System.out.println(account.name + <span class="string">&quot;ä½™é¢ä¸º: &quot;</span> + account.money);</span><br><span class="line">        System.out.println(<span class="keyword">this</span>.getName() + <span class="string">&quot;æ‰‹é‡Œçš„é’±: &quot;</span> + nowMoney);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="2-3-å®‰å…¨çš„é›†åˆ"><a href="#2-3-å®‰å…¨çš„é›†åˆ" class="headerlink" title="2.3 å®‰å…¨çš„é›†åˆ"></a>2.3 å®‰å…¨çš„é›†åˆ</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> Thread(()-&gt;&#123;</span><br><span class="line">    <span class="keyword">synchronized</span> (list) &#123;</span><br><span class="line">        list.add(Thread.currentThread().getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).start();</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>å¤šçº¿ç¨‹</category>
      </categories>
      <tags>
        <tag>å¤šçº¿ç¨‹</tag>
        <tag>synchronized</tag>
      </tags>
  </entry>
  <entry>
    <title>çº¿ç¨‹çŠ¶æ€</title>
    <url>/posts/ecb26108.html</url>
    <content><![CDATA[<h3 id="0-ç»¼è¿°"><a href="#0-ç»¼è¿°" class="headerlink" title="0. ç»¼è¿°"></a>0. ç»¼è¿°</h3><img src="/posts/ecb26108/image-20200719163614163.png" class>



<h3 id="1-çº¿ç¨‹åœæ­¢-Stop"><a href="#1-çº¿ç¨‹åœæ­¢-Stop" class="headerlink" title="1. çº¿ç¨‹åœæ­¢ Stop"></a>1. çº¿ç¨‹åœæ­¢ Stop</h3><ul>
<li>å»ºè®®çº¿ç¨‹æ­£å¸¸åœæ­¢ï¼šåˆ©ç”¨æ¬¡æ•°ï¼Œä¸å»ºè®®æ­»å¾ªç¯</li>
<li>å»ºè®®ä½¿ç”¨æ ‡å¿—ä½</li>
<li>ä¸è¦ä½¿ç”¨ stop() æˆ– destroy() ç­‰è¿‡æ—¶æˆ–è€… JDK ä¸å»ºè®®ä½¿ç”¨çš„æ–¹æ³•</li>
</ul>
<a id="more"></a>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StopTest</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 1. è®¾ç½®ä¸€ä¸ªæ ‡å¿—ä½</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (flag) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;run...Thread&quot;</span> + i++);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 2. è®¾ç½®ä¸€ä¸ªå…¬å¼€çš„æ–¹æ³•è½¬æ¢æ ‡å¿—ä½ åœæ­¢çº¿ç¨‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.flag = <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        StopTest stopTest = <span class="keyword">new</span> StopTest();</span><br><span class="line">        <span class="keyword">new</span> Thread(stopTest).start();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;main&quot;</span> + i);</span><br><span class="line">            <span class="keyword">if</span> (i == <span class="number">900</span>) &#123;</span><br><span class="line">                <span class="comment">// è°ƒç”¨stop()åœæ­¢çº¿ç¨‹</span></span><br><span class="line">                stopTest.stop();</span><br><span class="line">                System.out.println(<span class="string">&quot;çº¿ç¨‹è¯¥åœæ­¢äº†&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="2-çº¿ç¨‹ä¼‘çœ -Sleep"><a href="#2-çº¿ç¨‹ä¼‘çœ -Sleep" class="headerlink" title="2. çº¿ç¨‹ä¼‘çœ  Sleep"></a>2. çº¿ç¨‹ä¼‘çœ  Sleep</h3><ul>
<li>sleep() æ–¹æ³•ä½¿çº¿ç¨‹é˜»å¡ï¼Œæ—¶é—´åˆ°åè¿›å…¥å°±ç»ªçŠ¶æ€</li>
<li>æ¯ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªé”ï¼Œsleep() ä¸ä¼šé‡Šæ”¾é”</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SleepTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Date date = <span class="keyword">new</span> Date(System.currentTimeMillis());</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                System.out.println(<span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;HH:mm:ss&quot;</span>).format(date));</span><br><span class="line">                date = <span class="keyword">new</span> Date(System.currentTimeMillis());</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="3-çº¿ç¨‹ç¤¼è®©-Yield"><a href="#3-çº¿ç¨‹ç¤¼è®©-Yield" class="headerlink" title="3. çº¿ç¨‹ç¤¼è®© Yield"></a>3. çº¿ç¨‹ç¤¼è®© Yield</h3><ul>
<li>è®©å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹æš‚åœï¼Œä½†ä¸é˜»å¡</li>
<li>å°†çº¿ç¨‹è½¬ä¸ºå°±ç»ªçŠ¶æ€</li>
<li>è®© CPU é‡æ–°è°ƒåº¦ï¼Œä½†ç¤¼è®©ä¸ä¸€å®šæˆåŠŸ</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">YieldTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MyYield myYield = <span class="keyword">new</span> MyYield();</span><br><span class="line">        <span class="keyword">new</span> Thread(myYield, <span class="string">&quot;a&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(myYield, <span class="string">&quot;b&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyYield</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;çº¿ç¨‹å¼€å§‹æ‰§è¡Œ&quot;</span>);</span><br><span class="line">        Thread.yield();</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;çº¿ç¨‹åœæ­¢æ‰§è¡Œ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="4-çº¿ç¨‹å¼ºåˆ¶æ‰§è¡Œ-Join"><a href="#4-çº¿ç¨‹å¼ºåˆ¶æ‰§è¡Œ-Join" class="headerlink" title="4. çº¿ç¨‹å¼ºåˆ¶æ‰§è¡Œ Join"></a>4. çº¿ç¨‹å¼ºåˆ¶æ‰§è¡Œ Join</h3><ul>
<li>æƒ³è±¡æˆæ’é˜Ÿ</li>
<li>æ’é˜Ÿçš„çº¿ç¨‹æ‰§è¡Œæ—¶é˜»å¡å…¶ä»–çº¿ç¨‹ï¼Œè¯¥çº¿ç¨‹æ‰§è¡Œå®Œæ¯•å†æ‰§è¡Œå…¶ä»–çº¿ç¨‹ </li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JoinTest</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;vipçº¿ç¨‹æ¥äº†&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        JoinTest joinTest = <span class="keyword">new</span> JoinTest();</span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(joinTest);</span><br><span class="line">        thread.start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">500</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i == <span class="number">200</span>) &#123;</span><br><span class="line">                thread.join();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;main&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="5-è§‚æµ‹çº¿ç¨‹çŠ¶æ€"><a href="#5-è§‚æµ‹çº¿ç¨‹çŠ¶æ€" class="headerlink" title="5. è§‚æµ‹çº¿ç¨‹çŠ¶æ€"></a>5. è§‚æµ‹çº¿ç¨‹çŠ¶æ€</h3><p><em>æ³¨æ„ï¼šæ­»æ‰çš„çº¿ç¨‹ä¸èƒ½å†å¯åŠ¨</em></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadState</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            <span class="comment">// çº¿ç¨‹å€’è®¡æ—¶5ç§’åç»“æŸ</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;----çº¿ç¨‹ç»“æŸäº†----&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è§‚å¯ŸçŠ¶æ€</span></span><br><span class="line">        <span class="comment">// new</span></span><br><span class="line">        Thread.State state = thread.getState();</span><br><span class="line">        System.out.println(state);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¯åŠ¨</span></span><br><span class="line">        thread.start();</span><br><span class="line">        state = thread.getState();</span><br><span class="line">        System.out.println(state);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åªè¦çº¿ç¨‹ä¸ç»ˆæ­¢ å°±ä¸€ç›´è¾“å‡ºçŠ¶æ€ æ¯500msè¾“å‡ºä¸€æ¬¡</span></span><br><span class="line">        <span class="keyword">while</span> (state != Thread.State.TERMINATED) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">500</span>);</span><br><span class="line">                <span class="comment">// æ›´æ–°çº¿ç¨‹çŠ¶æ€</span></span><br><span class="line">                state = thread.getState();</span><br><span class="line">                System.out.println(state);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="6-çº¿ç¨‹ä¼˜å…ˆçº§"><a href="#6-çº¿ç¨‹ä¼˜å…ˆçº§" class="headerlink" title="6. çº¿ç¨‹ä¼˜å…ˆçº§"></a>6. çº¿ç¨‹ä¼˜å…ˆçº§</h3><ul>
<li>èŒƒå›´ 1~10</li>
<li>å…ˆè®¾ç½®ä¼˜å…ˆçº§ï¼Œå†å¯åŠ¨çº¿ç¨‹</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PriorityTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MyPriority myPriority = <span class="keyword">new</span> MyPriority();</span><br><span class="line"></span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(myPriority);</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread(myPriority);</span><br><span class="line">        Thread t3 = <span class="keyword">new</span> Thread(myPriority);</span><br><span class="line">        Thread t4 = <span class="keyword">new</span> Thread(myPriority);</span><br><span class="line">        Thread t5 = <span class="keyword">new</span> Thread(myPriority);</span><br><span class="line">        Thread t6 = <span class="keyword">new</span> Thread(myPriority);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å…ˆè®¾ç½®ä¼˜å…ˆçº§ å†å¯åŠ¨</span></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.setPriority(<span class="number">1</span>);</span><br><span class="line">        t2.start();</span><br><span class="line">        t3.setPriority(<span class="number">4</span>);</span><br><span class="line">        t3.start();</span><br><span class="line">        t4.setPriority(Thread.MAX_PRIORITY);</span><br><span class="line">        t4.start();</span><br><span class="line"></span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;--&gt;&quot;</span> + Thread.currentThread().getPriority());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyPriority</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;--&gt;&quot;</span> + Thread.currentThread().getPriority());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="7-å®ˆæŠ¤çº¿ç¨‹"><a href="#7-å®ˆæŠ¤çº¿ç¨‹" class="headerlink" title="7. å®ˆæŠ¤çº¿ç¨‹"></a>7. å®ˆæŠ¤çº¿ç¨‹</h3><ul>
<li>çº¿ç¨‹åˆ†ä¸ºç”¨æˆ·çº¿ç¨‹å’Œå®ˆæŠ¤çº¿ç¨‹</li>
<li>è™šæ‹Ÿæœºä¸ç”¨ç­‰å¾…å®ˆæŠ¤çº¿ç¨‹æ‰§è¡Œå®Œæ¯•</li>
<li>è™šæ‹Ÿæœºå¿…é¡»ç­‰å¾…ç”¨æˆ·çº¿ç¨‹æ‰§è¡Œå®Œæ¯•</li>
<li>åº”ç”¨ï¼šåå°è®°å½•æ“ä½œæ—¥å¿—ã€ç›‘æ§å†…å­˜ã€åƒåœ¾å›æ”¶ç­‰ç­‰</li>
</ul>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>å¤šçº¿ç¨‹</category>
      </categories>
      <tags>
        <tag>å¤šçº¿ç¨‹</tag>
        <tag>çº¿ç¨‹çŠ¶æ€</tag>
      </tags>
  </entry>
  <entry>
    <title>çº¿ç¨‹è¿›é˜¶</title>
    <url>/posts/1787e9a3.html</url>
    <content><![CDATA[<h3 id="1-æ­»é”æ¦‚å¿µ"><a href="#1-æ­»é”æ¦‚å¿µ" class="headerlink" title="1. æ­»é”æ¦‚å¿µ"></a>1. æ­»é”æ¦‚å¿µ</h3><p>å¤šä¸ªçº¿ç¨‹äº’ç›¸æŠ±ç€å¯¹æ–¹éœ€è¦çš„èµ„æºï¼Œç„¶åå½¢æˆåƒµæŒ</p>
<a id="more"></a>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DeadLock</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Makeup girl1 = <span class="keyword">new</span> Makeup(<span class="number">0</span>, <span class="string">&quot;ç°å§‘å¨˜&quot;</span>);</span><br><span class="line">        Makeup girl2 = <span class="keyword">new</span> Makeup(<span class="number">1</span>, <span class="string">&quot;ç™½é›ªå…¬ä¸»&quot;</span>);</span><br><span class="line">        girl1.start();</span><br><span class="line">        girl2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Lipstick</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mirror</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Makeup</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="comment">// éœ€è¦çš„èµ„æºåªæœ‰ä¸€ä»½ ç”¨staticæ¥ä¿è¯åªæœ‰ä¸€ä»½</span></span><br><span class="line">    <span class="keyword">static</span> Lipstick lipstick = <span class="keyword">new</span> Lipstick();</span><br><span class="line">    <span class="keyword">static</span> Mirror mirror = <span class="keyword">new</span> Mirror();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> choice;</span><br><span class="line">    String girlName;</span><br><span class="line"></span><br><span class="line">    Makeup(<span class="keyword">int</span> choice, String girlName) &#123;</span><br><span class="line">        <span class="keyword">this</span>.choice = choice;</span><br><span class="line">        <span class="keyword">this</span>.girlName = girlName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åŒ–å¦†</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            DoMakeup();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åŒ–å¦†</span></span><br><span class="line"><span class="comment">     * äº’ç›¸æŒæœ‰å¯¹æ–¹çš„æ‰€ å°±æ˜¯éœ€è¦æ‹¿åˆ°å¯¹æ–¹çš„èµ„æº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DoMakeup</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (choice == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// è·å¾—å£çº¢</span></span><br><span class="line">            <span class="keyword">synchronized</span> (lipstick) &#123;</span><br><span class="line">                System.out.println(<span class="keyword">this</span>.girlName + <span class="string">&quot;è·å¾—å£çº¢çš„é”&quot;</span>);</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ä¸€ç§’é’Ÿåæƒ³è·å¾—é•œå­</span></span><br><span class="line">            <span class="keyword">synchronized</span> (mirror) &#123;</span><br><span class="line">                System.out.println(<span class="keyword">this</span>.girlName + <span class="string">&quot;è·å¾—é•œå­çš„é”&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// è·å¾—é•œå­</span></span><br><span class="line">            <span class="keyword">synchronized</span> (mirror) &#123;</span><br><span class="line">                System.out.println(<span class="keyword">this</span>.girlName + <span class="string">&quot;è·å¾—é•œå­çš„é”&quot;</span>);</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ä¸€ç§’é’Ÿåæƒ³è·å¾—å£çº¢</span></span><br><span class="line">            <span class="keyword">synchronized</span> (lipstick) &#123;</span><br><span class="line">                System.out.println(<span class="keyword">this</span>.girlName + <span class="string">&quot;è·å¾—å£çº¢çš„é”&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="2-äº§ç”Ÿæ­»é”çš„å¿…è¦æ¡ä»¶"><a href="#2-äº§ç”Ÿæ­»é”çš„å¿…è¦æ¡ä»¶" class="headerlink" title="2. äº§ç”Ÿæ­»é”çš„å¿…è¦æ¡ä»¶"></a>2. äº§ç”Ÿæ­»é”çš„å¿…è¦æ¡ä»¶</h3><ol>
<li>äº’æ–¥æ¡ä»¶ï¼šä¸€ä¸ªèµ„æºæ¯æ¬¡åªèƒ½è¢«ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨ã€‚</li>
<li>è¯·æ±‚ä¸ä¿æŒæ¡ä»¶ï¼šä¸€ä¸ªè¿›ç¨‹å› è¯·æ±‚èµ„æºè€Œé˜»å¡æ—¶ï¼Œå¯¹ä»¥è·å¾—çš„èµ„æºä¿æŒä¸æ”¾ã€‚</li>
<li>ä¸å‰¥å¤ºæ¡ä»¶ï¼šè¿›ç¨‹å·²è·å¾—çš„èµ„æºï¼Œåœ¨æœªä½¿ç”¨å®Œä¹‹å‰ï¼Œä¸å¼ºè¡Œå‰¥å¤ºã€‚</li>
<li>å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼šè‹¥å¹²çº¿ç¨‹ä¹‹é—´å½¢æˆä¸€ç§å¤´å°¾ç›¸æ¥çš„å¾ªç¯ç­‰å¾…èµ„æºå…³ç³»ã€‚</li>
</ol>
<h3 id="3-Lock-é”"><a href="#3-Lock-é”" class="headerlink" title="3. Lock é”"></a>3. Lock é”</h3><table>
<thead>
<tr>
<th>Lock</th>
<th>synchronized</th>
</tr>
</thead>
<tbody><tr>
<td>æ˜¾å¼é”ï¼ˆéœ€è¦æ‰‹åŠ¨xå¼€å¯å’Œå…³é—­ï¼‰</td>
<td>éšå¼é”ï¼Œç¦»å¼€ä½œç”¨åŸŸè‡ªåŠ¨é‡Šæ”¾</td>
</tr>
<tr>
<td>åªæœ‰ä»£ç å—é”</td>
<td>æœ‰ä»£ç å—é”å’Œæ–¹æ³•é”</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LockTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        LockTest2 lockTest2 = <span class="keyword">new</span> LockTest2();</span><br><span class="line">        <span class="keyword">new</span> Thread(lockTest2).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(lockTest2).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(lockTest2).start();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LockTest2</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> tickNums = <span class="number">10</span>;</span><br><span class="line">    <span class="comment">// å®šä¹‰Locké”</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ReentrantLock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="comment">// åŠ é”</span></span><br><span class="line">            lock.lock();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (tickNums &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(tickNums--);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                <span class="comment">// è§£é”</span></span><br><span class="line">                lock.unlock();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="4-ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜"><a href="#4-ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜" class="headerlink" title="4. ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜"></a>4. ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜</h3><h4 id="4-1-ç®¡ç¨‹æ³•"><a href="#4-1-ç®¡ç¨‹æ³•" class="headerlink" title="4.1 ç®¡ç¨‹æ³•"></a>4.1 ç®¡ç¨‹æ³•</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PCTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        BufferZone bufferZone = <span class="keyword">new</span> BufferZone();</span><br><span class="line">        <span class="keyword">new</span> Producer(bufferZone).start();</span><br><span class="line">        <span class="keyword">new</span> Consumer(bufferZone).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”Ÿäº§è€…</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Producer</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    BufferZone bufferZone;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Producer</span><span class="params">(BufferZone bufferZone)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.bufferZone = bufferZone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”Ÿäº§</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">            bufferZone.push(<span class="keyword">new</span> Product(i));</span><br><span class="line">            System.out.println(<span class="string">&quot;ç”Ÿäº§äº†&quot;</span> + i + <span class="string">&quot;ä¸ªäº§å“&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¶ˆè´¹è€…</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Consumer</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    BufferZone bufferZone;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Consumer</span><span class="params">(BufferZone bufferZone)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.bufferZone = bufferZone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¶ˆè´¹</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ¶ˆè´¹äº†ç¬¬&quot;</span> + bufferZone.pop().id + <span class="string">&quot;ä¸ªäº§å“&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * äº§å“</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Product</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç¼“å†²åŒº</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BufferZone</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> MAX_SIZE = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">private</span> LinkedList&lt;Product&gt; products = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”Ÿäº§è€…æ”¾å…¥äº§å“</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(Product product)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å¦‚æœå®¹å™¨æ»¡äº† å°±éœ€è¦ç­‰å¾…æ¶ˆè´¹è€…æ¶ˆè´¹</span></span><br><span class="line">        <span class="keyword">if</span> (products.size() + <span class="number">1</span> &gt; MAX_SIZE) &#123;</span><br><span class="line">            <span class="comment">// é€šçŸ¥æ¶ˆè´¹è€…æ¶ˆè´¹ ç”Ÿäº§ç­‰å¾…</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>.wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¦‚æœæ²¡æœ‰æ»¡ å°±æ”¾å…¥äº§å“</span></span><br><span class="line">        products.add(product);</span><br><span class="line">        <span class="comment">// é€šçŸ¥æ¶ˆè´¹è€…æ¶ˆè´¹</span></span><br><span class="line">        <span class="keyword">this</span>.notifyAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¶ˆè´¹è€…æ¶ˆè´¹äº§å“</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> Product <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­èƒ½å¦æ¶ˆè´¹</span></span><br><span class="line">        <span class="keyword">if</span> (products.size() == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// ç­‰å¾…ç”Ÿäº§è€…ç”Ÿäº§ æ¶ˆè´¹ç­‰å¾…</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>.wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¦‚æœå¯ä»¥æ¶ˆè´¹</span></span><br><span class="line">        Product product = products.pop();</span><br><span class="line">        <span class="comment">// é€šçŸ¥ç”Ÿäº§è€…ç”Ÿäº§</span></span><br><span class="line">        <span class="keyword">this</span>.notifyAll();</span><br><span class="line">        <span class="keyword">return</span> product;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="4-2-ä¿¡å·ç¯æ³•"><a href="#4-2-ä¿¡å·ç¯æ³•" class="headerlink" title="4.2 ä¿¡å·ç¯æ³•"></a>4.2 ä¿¡å·ç¯æ³•</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PCTest2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        TV tv= <span class="keyword">new</span> TV();</span><br><span class="line">        <span class="keyword">new</span> Actor(tv).start();</span><br><span class="line">        <span class="keyword">new</span> Audience(tv).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”Ÿäº§è€…</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Actor</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    TV tv;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Actor</span><span class="params">(TV tv)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.tv = tv;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">this</span>.tv.play(<span class="string">&quot;å¿«ä¹å¤§æœ¬è¥&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>.tv.play(<span class="string">&quot;å¹¿å‘Š&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¶ˆè´¹è€…</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Audience</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    TV tv;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Audience</span><span class="params">(TV tv)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.tv = tv;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">           <span class="keyword">this</span>.tv.watch();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * äº§å“</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TV</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ¼”å‘˜è¡¨æ¼” è§‚ä¼—ç­‰å¾…</span></span><br><span class="line">    <span class="comment">// è§‚ä¼—è§‚çœ‹ æ¼”å‘˜ç­‰å¾…</span></span><br><span class="line">    String program;</span><br><span class="line">    <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¡¨æ¼”</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">play</span><span class="params">(String program)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!flag) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>.wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ¼”å‘˜è¡¨æ¼”äº†&quot;</span> + program);</span><br><span class="line">        <span class="comment">// é€šçŸ¥è§‚ä¼—è§‚çœ‹</span></span><br><span class="line">        <span class="keyword">this</span>.notifyAll();</span><br><span class="line">        <span class="keyword">this</span>.program = program;</span><br><span class="line">        <span class="keyword">this</span>.flag = !<span class="keyword">this</span>.flag;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è§‚çœ‹</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">watch</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>.wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;è§‚ä¼—è§‚çœ‹äº†&quot;</span> + program);</span><br><span class="line">        <span class="comment">// é€šçŸ¥æ¼”å‘˜è¡¨æ¼”</span></span><br><span class="line">        <span class="keyword">this</span>.notifyAll();</span><br><span class="line">        <span class="keyword">this</span>.flag = !<span class="keyword">this</span>.flag;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="5-çº¿ç¨‹æ± "><a href="#5-çº¿ç¨‹æ± " class="headerlink" title="5. çº¿ç¨‹æ± "></a>5. çº¿ç¨‹æ± </h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PoolTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºæœåŠ¡ åˆ›å»ºçº¿ç¨‹æ±  å‚æ•°ä¸ºçº¿ç¨‹æ± å¤§å°</span></span><br><span class="line">        ExecutorService service = Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line">        <span class="comment">// æ‰§è¡Œ</span></span><br><span class="line">        service.execute(<span class="keyword">new</span> MyThread());</span><br><span class="line">        service.execute(<span class="keyword">new</span> MyThread());</span><br><span class="line">        service.execute(<span class="keyword">new</span> MyThread());</span><br><span class="line">        service.execute(<span class="keyword">new</span> MyThread());</span><br><span class="line">        <span class="comment">// å…³é—­è¿æ¥</span></span><br><span class="line">        service.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>å¤šçº¿ç¨‹</category>
      </categories>
      <tags>
        <tag>å¤šçº¿ç¨‹</tag>
        <tag>æ­»é”</tag>
        <tag>ç”Ÿäº§è€…æ¶ˆè´¹è€…</tag>
        <tag>çº¿ç¨‹æ± </tag>
      </tags>
  </entry>
  <entry>
    <title>02_å‡½æ•°åŠé¢å‘å¯¹è±¡</title>
    <url>/posts/2dfe39b3.html</url>
    <content><![CDATA[<h3 id="1-å®šä¹‰å‡½æ•°"><a href="#1-å®šä¹‰å‡½æ•°" class="headerlink" title="1. å®šä¹‰å‡½æ•°"></a>1. å®šä¹‰å‡½æ•°</h3><ol>
<li><p>æ–¹å¼ä¸€</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">abs</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> -x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–¹å¼äºŒ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> abs = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> -x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<a id="more"></a>



<h3 id="2-è°ƒç”¨å‡½æ•°"><a href="#2-è°ƒç”¨å‡½æ•°" class="headerlink" title="2. è°ƒç”¨å‡½æ•°"></a>2. è°ƒç”¨å‡½æ•°</h3><p>å‚æ•°é—®é¢˜ï¼šJavaScript å¯ä»¥ä¼ é€’ä»»æ„ä¸ªå‚æ•°ï¼Œä¹Ÿå¯ä»¥ä¸ä¼ å‚æ•°ã€‚æ‰€ä»¥å¦‚æœå‚æ•°ä¸å­˜åœ¨ï¼Œå¦‚ä½•é¿å…å‡ºç°é—®é¢˜ï¼Ÿ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">abs</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x !== <span class="string">&#x27;number&#x27;</span>)&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="string">&#x27;Not a number&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (x &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> -x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="3-arguments"><a href="#3-arguments" class="headerlink" title="3. arguments"></a>3. <code>arguments</code></h3><p>æ˜¯ä¸€ä¸ª JavaScript å…è´¹èµ é€çš„å…³é”®è¯ï¼Œä»£è¡¨ä¼ è¿›å‡½æ•°çš„æ‰€æœ‰å‚æ•°ï¼Œæ˜¯ä¸€ä¸ªæ•°ç»„</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">abs</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="built_in">arguments</span>.length; i++) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[i])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (x &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> -x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é—®é¢˜ï¼š<code>arguments</code>åŒ…å«æ‰€æœ‰çš„å‚æ•°ï¼Œå¦‚æœæƒ³ä½¿ç”¨å¤šä½™çš„å‚æ•°è¿›è¡Œé™„åŠ æ“ä½œï¼Œéœ€è¦æ’é™¤å·²æœ‰çš„å‚æ•°ã€‚</p>
<p>è§£å†³æ–¹æ³•ï¼šä½¿ç”¨<code>rest</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">a, b, ...rest</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;a-&gt;&quot;</span>+a);</span><br><span class="line">    <span class="built_in">console</span>.log(rest);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="4-å˜é‡çš„ä½œç”¨åŸŸ"><a href="#4-å˜é‡çš„ä½œç”¨åŸŸ" class="headerlink" title="4. å˜é‡çš„ä½œç”¨åŸŸ"></a>4. å˜é‡çš„ä½œç”¨åŸŸ</h3><ol>
<li>var åœ¨å‡½æ•°ä½“ä¸­å£°æ˜ï¼Œåˆ™æ— æ³•å†å‡½æ•°ä½“å¤–ä½¿ç”¨</li>
<li>å†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°çš„æˆå‘˜ï¼Œåä¹‹ä¸å¯ä»¥</li>
<li>å‡å¦‚ï¼Œå†…éƒ¨å‡½æ•°å˜é‡å’Œå¤–éƒ¨å‡½æ•°å˜é‡é‡åï¼Œåˆ™å†…éƒ¨å‡½æ•°ä¼šå±è”½å¤–éƒ¨å‡½æ•°çš„å˜é‡</li>
<li>æ‰€æœ‰å˜é‡åœ¨ä¸€å¼€å§‹å°±å£°æ˜å¥½ï¼Œä¸è¦å†™ç€å†™ç€éœ€è¦äº†ï¼Œå°±åœ¨ä¸­é€”å£°æ˜</li>
</ol>
<h3 id="5-è§„èŒƒ"><a href="#5-è§„èŒƒ" class="headerlink" title="5. è§„èŒƒ"></a>5. è§„èŒƒ</h3><p>ä¸ºäº†é¿å…æ‰€æœ‰çš„å…¨å±€å˜é‡ç»‘å®šåˆ°<code>window</code>ä¸Šï¼Œå¯¼è‡´å¼•ç”¨ä¸åŒçš„ js æ–‡ä»¶ï¼Œç›¸åŒçš„å…¨å±€å˜é‡å‘ç”Ÿå†²çªï¼Œå¿…é¡»è®¾å®šå”¯ä¸€å…¨å±€å˜é‡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰å”¯ä¸€å…¨å±€å˜é‡</span></span><br><span class="line"><span class="keyword">var</span> horsen = &#123;&#125;;</span><br><span class="line"><span class="comment">// å®šä¹‰å…¨å±€å˜é‡</span></span><br><span class="line">horsen.name = <span class="string">&quot;lhx&quot;</span>;</span><br><span class="line">horsen.add = <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="6-æ–¹æ³•"><a href="#6-æ–¹æ³•" class="headerlink" title="6. æ–¹æ³•"></a>6. æ–¹æ³•</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> horsen = &#123;</span><br><span class="line">    name: <span class="string">&quot;lhx&quot;</span>,</span><br><span class="line">    birth: <span class="number">1999</span>,</span><br><span class="line">    <span class="comment">// æ–¹æ³•</span></span><br><span class="line">    age: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear();</span><br><span class="line">        <span class="comment">// è°è°ƒç”¨è¿™ä¸ªæ–¹æ³•, è°å°±æ˜¯this</span></span><br><span class="line">        <span class="keyword">return</span> now - <span class="built_in">this</span>.birth;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è°ƒç”¨æ—¶è¦åŠ æ‹¬å·</span></span><br><span class="line">horsen.age()</span><br></pre></td></tr></table></figure>



<h3 id="7-apply"><a href="#7-apply" class="headerlink" title="7. apply()"></a>7. <code>apply()</code></h3><p>æ‰€æœ‰æ–¹æ³•éƒ½æœ‰è¿™ä¸ªå‡½æ•°</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¡¨ç¤ºthisæŒ‡å‘horsenå¯¹è±¡, å‚æ•°ä¸ºç©º</span></span><br><span class="line">getAge.apply(horsen,[]);</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>å‰ç«¯å­¦ä¹ ç¬”è®°</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>01_JavaScript å…¥é—¨</title>
    <url>/posts/ca9d276f.html</url>
    <content><![CDATA[<h3 id="1-æ•°æ®ç±»å‹å’Œè¿ç®—ç¬¦"><a href="#1-æ•°æ®ç±»å‹å’Œè¿ç®—ç¬¦" class="headerlink" title="1. æ•°æ®ç±»å‹å’Œè¿ç®—ç¬¦"></a>1. æ•°æ®ç±»å‹å’Œè¿ç®—ç¬¦</h3><ol>
<li><p>number</p>
<p>JavaScript ä¸åŒºåˆ†å°æ•°å’Œæ•´æ•°</p>
<ul>
<li><code>NaN</code>ä¸æ˜¯æ•°å­—</li>
<li><code>Infinity</code>æ— é™å¤§</li>
</ul>
</li>
<li><p>å­—ç¬¦ä¸²</p>
<ul>
<li><code>â€˜abcâ€™</code></li>
<li><code>&quot;abc&quot;</code></li>
</ul>
</li>
<li><p>å¸ƒå°”å€¼</p>
</li>
<li><p>é€»è¾‘è¿ç®—ç¬¦</p>
<ul>
<li>&amp;&amp;</li>
<li>||</li>
<li>!</li>
</ul>
</li>
<li><p>æ¯”è¾ƒè¿ç®—ç¬¦</p>
<ul>
<li>==     ç±»å‹ä¸ä¸€æ ·ï¼Œå€¼ä¸€æ ·ï¼Œä¸º true</li>
<li>===   ç±»å‹ä¸€æ ·ï¼Œå€¼ä¸€æ ·ï¼Œä¸º true</li>
</ul>
</li>
</ol>
<a id="more"></a>

<p>æ³¨æ„ï¼šå°½é‡ä¸è¦ä½¿ç”¨æµ®ç‚¹æ•°è¿›è¡Œè¿ç®—ï¼Œæœ‰ç²¾åº¦é—®é¢˜ã€‚å¦‚æœæƒ³è¦æ¯”è¾ƒä¸¤ä¸ªæµ®ç‚¹æ•°æ˜¯å¦ç›¸ç­‰ï¼Œä¸èƒ½ä½¿ç”¨</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">(<span class="number">1</span>/<span class="number">3</span>) === (<span class="number">1</span><span class="number">-2</span>/<span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>è€Œè¦ä½¿ç”¨</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">((<span class="number">1</span>/<span class="number">3</span>) - (<span class="number">1</span><span class="number">-2</span>/<span class="number">3</span>)) &lt; <span class="number">0.000000001</span></span><br></pre></td></tr></table></figure>

<ol start="6">
<li><p>æ•°ç»„</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="string">&quot;hello&quot;</span>,<span class="literal">false</span>];</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¯¹è±¡</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    name: <span class="string">&quot;horsen&quot;</span>,</span><br><span class="line">    age: <span class="number">3</span>,</span><br><span class="line">    tags: [<span class="string">&#x27;JavaScript&#x27;</span>,<span class="string">&#x27;java&#x27;</span>,<span class="string">&#x27;web&#x27;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="2-å˜é‡"><a href="#2-å˜é‡" class="headerlink" title="2. å˜é‡"></a>2. å˜é‡</h3><ol>
<li>å˜é‡åå¯ä»¥ç”¨<code>_</code>æˆ–<code>$</code>å¼€å¤´</li>
<li><code>var</code>å…¨å±€å˜é‡</li>
<li><code>let</code>å±€éƒ¨å˜é‡</li>
<li><code>const</code>å¸¸é‡</li>
</ol>
<h3 id="3-ä¸¥æ ¼æ£€æŸ¥æ¨¡å¼"><a href="#3-ä¸¥æ ¼æ£€æŸ¥æ¨¡å¼" class="headerlink" title="3. ä¸¥æ ¼æ£€æŸ¥æ¨¡å¼"></a>3. ä¸¥æ ¼æ£€æŸ¥æ¨¡å¼</h3><p>IDEA éœ€è¦è®¾ç½®æ”¯æŒ ES6 è¯­æ³•</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;user strict&#x27;</span>;<span class="comment">// å¿…é¡»å†™åœ¨ç¬¬ä¸€è¡Œ</span></span><br><span class="line"><span class="keyword">let</span> i = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(i);</span><br></pre></td></tr></table></figure>



<h3 id="4-æ•°æ®ç±»å‹è¯¦è§£"><a href="#4-æ•°æ®ç±»å‹è¯¦è§£" class="headerlink" title="4. æ•°æ®ç±»å‹è¯¦è§£"></a>4. æ•°æ®ç±»å‹è¯¦è§£</h3><h4 id="4-1-å­—ç¬¦ä¸²"><a href="#4-1-å­—ç¬¦ä¸²" class="headerlink" title="4.1 å­—ç¬¦ä¸²"></a>4.1 å­—ç¬¦ä¸²</h4><ol>
<li><p>è½¬ä¹‰å­—ç¬¦</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">\<span class="string">&#x27;</span></span><br><span class="line"><span class="string">\n</span></span><br><span class="line"><span class="string">\t</span></span><br><span class="line"><span class="string">\u4e2d Unicodeå­—ç¬¦</span></span><br><span class="line"><span class="string">\x41   Asciiå­—ç¬¦</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å¤šè¡Œå­—ç¬¦ä¸²</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> msg =</span><br><span class="line">    <span class="string">`hello</span></span><br><span class="line"><span class="string">world</span></span><br><span class="line"><span class="string">ä½ å¥½</span></span><br><span class="line"><span class="string">hhhhhh`</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æ¨¡æ¿å­—ç¬¦ä¸²</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;horsen&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> msg = <span class="string">`ä½ å¥½å•Š, <span class="subst">$&#123;name&#125;</span>`</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å¸¸ç”¨æ–¹æ³•</p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> student = <span class="string">&quot;student&quot;</span>;</span><br><span class="line"><span class="comment">// å­—ç¬¦ä¸²é•¿åº¦</span></span><br><span class="line">student.length</span><br><span class="line"><span class="comment">// å¤§å°å†™è½¬æ¢</span></span><br><span class="line">student.toUpperCase()</span><br><span class="line">student.toLowerCase()</span><br><span class="line"><span class="comment">// è¿”å›ä¸‹æ ‡</span></span><br><span class="line">student.indexOf(<span class="string">&#x27;t&#x27;</span>)</span><br><span class="line"><span class="comment">// æˆªå–å­—ç¬¦ä¸²</span></span><br><span class="line">student.substring(<span class="number">1</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h4 id="4-2-æ•°ç»„"><a href="#4-2-æ•°ç»„" class="headerlink" title="4.2 æ•°ç»„"></a>4.2 æ•°ç»„</h4><p><strong>å¯ä»¥åŒ…å«ä»»æ„çš„æ•°æ®ç±»å‹</strong></p>
<ol>
<li><p>é•¿åº¦</p>
<p> ç»™é•¿åº¦èµ‹å€¼ï¼Œæ•°ç»„å¤§å°å°±ä¼šå˜åŒ–ï¼Œå¦‚æœè¿‡å°ï¼Œå…ƒç´ å°±ä¼šä¸¢å¤±</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">arr.length = <span class="number">10</span>;</span><br><span class="line"><span class="built_in">console</span>.log(arr.length);<span class="comment">// ç»“æœæ˜¯10</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¸‹æ ‡ç´¢å¼•</p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arr.indexOf(<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>slice()</p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arr.slice(<span class="number">3</span>)<span class="comment">// ä»ç¬¬3ä¸ªå¼€å§‹æˆªå–</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>push() å’Œ pop()</p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arr.push(<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>)<span class="comment">// æ·»åŠ åœ¨æœ«å°¾</span></span><br><span class="line">arr.pop()<span class="comment">// å¼¹å‡ºå°¾éƒ¨å…ƒç´ </span></span><br></pre></td></tr></table></figure>
</li>
<li><p>unshift() å’Œ shift()</p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arr.unshift(<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>)<span class="comment">// æ·»åŠ åœ¨å¤´éƒ¨</span></span><br><span class="line">arr.shift()<span class="comment">// å¼¹å‡ºå¤´éƒ¨å…ƒç´ </span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æ’åº sort()</p>
</li>
<li><p>å…ƒç´ åè½¬ reverse()</p>
</li>
<li><p>æ‹¼æ¥ concat() ï¼ˆå¹¶ä¸ä¼šä¿®æ”¹æ•°ç»„ï¼Œä¼šè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼‰</p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arr.concat([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨ç‰¹å®šçš„å­—ç¬¦ä¸²è¿æ¥ join()</p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arr.join(<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line"><span class="comment">// ç»“æœ â€œ1-2-3â€</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å¤šç»´æ•°ç»„</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">arr = [[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>],[<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>]];</span><br><span class="line"><span class="built_in">console</span>.log(arr[<span class="number">1</span>][<span class="number">2</span>])</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h4 id="4-3-å¯¹è±¡"><a href="#4-3-å¯¹è±¡" class="headerlink" title="4.3 å¯¹è±¡"></a>4.3 å¯¹è±¡</h4><ol>
<li><p>åŠ¨æ€çš„åˆ å‡å±æ€§</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">delete</span> person.name</span><br></pre></td></tr></table></figure>
</li>
<li><p>åŠ¨æ€çš„æ·»åŠ å±æ€§</p>
<p>æœ¬æ¥æ²¡æœ‰ sex å±æ€§ï¼Œèµ‹å€¼å°±æœ‰äº†</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">person.sex = <span class="string">&#x27;ç”·&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ¤æ–­å±æ€§æ˜¯å¦åœ¨å¯¹è±¡ä¸­</p>
<p>æ³¨æ„ï¼šJavaScript ä¸­çš„é”®å€¼å¯¹ï¼Œæ‰€æœ‰é”®éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€æœ‰å€¼éƒ½æ˜¯ä»»æ„å¯¹è±¡</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;age&#x27;</span> <span class="keyword">in</span> person</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ¤æ–­ä¸€ä¸ªå±æ€§æ˜¯å¦æ˜¯è¿™ä¸ªå¯¹è±¡è‡ªèº«æ‹¥æœ‰çš„</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">person.hasOwnProperty(<span class="string">&#x27;age&#x27;</span>)</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="5-å¾ªç¯éå†"><a href="#5-å¾ªç¯éå†" class="headerlink" title="5. å¾ªç¯éå†"></a>5. å¾ªç¯éå†</h3><ol>
<li><p>forEach</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> age = [<span class="number">12</span>,<span class="number">13</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">10</span>,<span class="number">14</span>];</span><br><span class="line">age.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>forâ€¦in</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// for(var index in object)&#123;&#125;</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> num <span class="keyword">in</span> age)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(age[num])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>forâ€¦of</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> num <span class="keyword">of</span> age)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(num)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="6-Map-å’Œ-Set"><a href="#6-Map-å’Œ-Set" class="headerlink" title="6. Map å’Œ Set"></a>6. Map å’Œ Set</h3><ol>
<li><p>Map</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">    [<span class="string">&#x27;tom&#x27;</span>, <span class="number">100</span>],</span><br><span class="line">    [<span class="string">&#x27;jerry&#x27;</span>, <span class="number">20</span>],</span><br><span class="line">    [<span class="string">&#x27;rose&#x27;</span>, <span class="number">80</span>]</span><br><span class="line">]);</span><br><span class="line"><span class="comment">// é€šè¿‡é”®è·å¾—å€¼</span></span><br><span class="line"><span class="keyword">var</span> score = map.get(<span class="string">&#x27;tom&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(score);</span><br><span class="line"><span class="comment">// æ–°å¢æˆ–ä¿®æ”¹</span></span><br><span class="line">map.set(<span class="string">&#x27;admin&#x27;</span>,<span class="number">90</span>);</span><br><span class="line"><span class="comment">// åˆ é™¤</span></span><br><span class="line">map.delete(<span class="string">&#x27;tom&#x27;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>Setï¼ˆæ— åºä¸é‡å¤é›†åˆï¼‰</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>]);</span><br><span class="line">set.add(<span class="number">4</span>);</span><br><span class="line">set.delete(<span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(set.has(<span class="number">4</span>));</span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>å‰ç«¯å­¦ä¹ ç¬”è®°</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>03_å†…éƒ¨å¯¹è±¡</title>
    <url>/posts/bd684e05.html</url>
    <content><![CDATA[<h3 id="1-æ ‡å‡†å¯¹è±¡"><a href="#1-æ ‡å‡†å¯¹è±¡" class="headerlink" title="1. æ ‡å‡†å¯¹è±¡"></a>1. æ ‡å‡†å¯¹è±¡</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="number">123</span></span><br><span class="line"><span class="string">&quot;number&quot;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="string">&#x27;123&#x27;</span></span><br><span class="line"><span class="string">&quot;string&quot;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">true</span></span><br><span class="line"><span class="string">&quot;boolean&quot;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">NaN</span></span><br><span class="line"><span class="string">&quot;number&quot;</span></span><br><span class="line"><span class="keyword">typeof</span> []</span><br><span class="line"><span class="string">&quot;object&quot;</span></span><br><span class="line"><span class="keyword">typeof</span> &#123;&#125;</span><br><span class="line"><span class="string">&quot;object&quot;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">Math</span>.abs</span><br><span class="line"><span class="string">&quot;functi on&#x27;</span></span><br><span class="line"><span class="string">typeof undefined</span></span><br><span class="line"><span class="string">&quot;</span><span class="literal">undefined</span><span class="string">&quot;</span></span><br></pre></td></tr></table></figure>

<a id="more"></a>



<h3 id="2-Date"><a href="#2-Date" class="headerlink" title="2. Date"></a>2. Date</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line"><span class="comment">// å¹´</span></span><br><span class="line">now.getFullYear();</span><br><span class="line"><span class="comment">// æœˆ</span></span><br><span class="line">now.getMonth() + <span class="number">1</span>;</span><br><span class="line"><span class="comment">// æ—¥</span></span><br><span class="line">now.getDate();</span><br><span class="line"><span class="comment">// æ˜ŸæœŸ</span></span><br><span class="line">now.getDay();</span><br><span class="line"><span class="comment">// æ—¶</span></span><br><span class="line">now.getHours();</span><br><span class="line"><span class="comment">// åˆ†</span></span><br><span class="line">now.getMinutes();</span><br><span class="line"><span class="comment">// ç§’</span></span><br><span class="line">now.getSeconds();</span><br><span class="line"><span class="comment">// æ—¶é—´æˆ³</span></span><br><span class="line">now.getTime();</span><br></pre></td></tr></table></figure>



<h3 id="3-JSON"><a href="#3-JSON" class="headerlink" title="3. JSON"></a>3. JSON</h3><blockquote>
<p>Spring MVC é‡Œé¢æœ‰ï¼Œè¿™é‡Œå°±ä¸å†™äº†</p>
</blockquote>
]]></content>
      <categories>
        <category>å‰ç«¯å­¦ä¹ ç¬”è®°</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>04_é¢å‘å¯¹è±¡ç¼–ç¨‹</title>
    <url>/posts/a9f638ce.html</url>
    <content><![CDATA[<h3 id="1-åŸå‹ç»§æ‰¿"><a href="#1-åŸå‹ç»§æ‰¿" class="headerlink" title="1. åŸå‹ç»§æ‰¿"></a>1. åŸå‹ç»§æ‰¿</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> Student = &#123;</span><br><span class="line">    name: <span class="string">&quot;horsen&quot;</span>,</span><br><span class="line">    age: <span class="number">3</span>,</span><br><span class="line">    run: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name + <span class="string">&quot; run....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> Bird = &#123;</span><br><span class="line">    fly: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name + <span class="string">&quot; fly...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> xiaoming = &#123;</span><br><span class="line">    name: <span class="string">&quot;xiaoming&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°æ˜çš„åŸå‹æŒ‡å‘Student</span></span><br><span class="line">xiaoming.__proto__ = Student;</span><br></pre></td></tr></table></figure>

<a id="more"></a>



<h3 id="2-class-ç»§æ‰¿"><a href="#2-class-ç»§æ‰¿" class="headerlink" title="2. class ç»§æ‰¿"></a>2. class ç»§æ‰¿</h3><ol>
<li><p>å®šä¹‰ä¸€ä¸ªç±»</p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    hello() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> xiaoming = <span class="keyword">new</span> Student(<span class="string">&#x27;xiaoming&#x27;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç»§æ‰¿</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pupil</span> <span class="keyword">extends</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name, grade) &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">        <span class="built_in">this</span>.grade = grade;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    myGrade() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;hahaha&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> xiaohong = <span class="keyword">new</span> Pupil(<span class="string">&#x27;xiaohong&#x27;</span>, <span class="number">1</span>);</span><br></pre></td></tr></table></figure>

</li>
</ol>
]]></content>
      <categories>
        <category>å‰ç«¯å­¦ä¹ ç¬”è®°</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>05_æ“ä½œ BOM å¯¹è±¡</title>
    <url>/posts/37b1a18.html</url>
    <content><![CDATA[<h3 id="1-window"><a href="#1-window" class="headerlink" title="1. window"></a>1. <code>window</code></h3><p>ä»£è¡¨æµè§ˆå™¨çª—å£</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–å¤–éƒ¨é«˜åº¦</span></span><br><span class="line"><span class="built_in">window</span>.innerHeight</span><br><span class="line"><span class="comment">// è·å–å¤–éƒ¨å®½åº¦</span></span><br><span class="line"><span class="built_in">window</span>.innerWidth</span><br><span class="line"><span class="comment">// è·å–å†…éƒ¨é«˜åº¦</span></span><br><span class="line"><span class="built_in">window</span>.outerHeight</span><br><span class="line"><span class="comment">// è·å–å†…éƒ¨å®½åº¦</span></span><br><span class="line"><span class="built_in">window</span>.outerWidth</span><br></pre></td></tr></table></figure>



<h3 id="2-naigator"><a href="#2-naigator" class="headerlink" title="2. naigator"></a>2. <code>naigator</code></h3><p>å°è£…äº†æµè§ˆå™¨çš„ä¿¡æ¯</p>
<p>ä¸€èˆ¬ä¸ä¼šä½¿ç”¨ï¼Œå› ä¸ºä¼šè¢«äººä¸ºä¿®æ”¹</p>
<h3 id="3-screen"><a href="#3-screen" class="headerlink" title="3. screen"></a>3. <code>screen</code></h3><p>ä»£è¡¨å±å¹•</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">screen.width</span><br><span class="line">screen.height</span><br></pre></td></tr></table></figure>

<a id="more"></a>



<h3 id="4-location"><a href="#4-location" class="headerlink" title="4. location"></a>4. <code>location</code></h3><p>ä»£è¡¨å½“å‰é¡µé¢çš„ URL ä¿¡æ¯</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸»æœº</span></span><br><span class="line">host: <span class="string">&quot;www.baidu.com&quot;</span></span><br><span class="line"><span class="comment">// å½“å‰ä½ç½®</span></span><br><span class="line">href: <span class="string">&quot;https://www.baidu.com&quot;</span></span><br><span class="line"><span class="comment">// åè®®</span></span><br><span class="line">protocol: <span class="string">&quot;https:&quot;</span></span><br><span class="line"><span class="comment">// é‡æ–°åŠ è½½</span></span><br><span class="line">reload: Æ’ reload()</span><br><span class="line"><span class="comment">// è®¾ç½®æ–°çš„åœ°å€</span></span><br><span class="line">location.assign(<span class="string">&#x27;https://xxx.com&#x27;</span>)</span><br></pre></td></tr></table></figure>



<h3 id="5-document"><a href="#5-document" class="headerlink" title="5. document"></a>5. <code>document</code></h3><p>ä»£è¡¨å½“å‰çš„é¡µé¢</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–å…·ä½“çš„æ–‡æ¡£æ ‘èŠ‚ç‚¹</span></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="comment">// è·å–cookie</span></span><br><span class="line"><span class="built_in">document</span>.cookie</span><br></pre></td></tr></table></figure>



<h3 id="6-history"><a href="#6-history" class="headerlink" title="6. history"></a>6. <code>history</code></h3><p>ä»£è¡¨æµè§ˆå™¨çš„å†å²è®°å½•ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åé€€</span></span><br><span class="line">history.back()</span><br><span class="line"><span class="comment">// å‰è¿›</span></span><br><span class="line">history.forward()</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>å‰ç«¯å­¦ä¹ ç¬”è®°</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>BOM</tag>
      </tags>
  </entry>
  <entry>
    <title>06_æ“ä½œ DOM å¯¹è±¡</title>
    <url>/posts/ad33ecf6.html</url>
    <content><![CDATA[<p>æ•´ä¸ªæµè§ˆå™¨ç½‘é¡µå°±æ˜¯ä¸€ä¸ª DOM æ ‘å½¢ç»“æ„</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Title_1<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;p1&quot;</span>&gt;</span>p1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;p2&quot;</span>&gt;</span>p2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> h1 = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;h1&#x27;</span>)</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> p1 = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;p1&#x27;</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> p2 = <span class="built_in">document</span>.getElementsByClassName(<span class="string">&#x27;p2&#x27;</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> father = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;father&#x27;</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> children = father.children;</span></span><br><span class="line">    father.firstChild</span><br><span class="line">    father.lastChild</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="1-æ›´æ–°èŠ‚ç‚¹"><a href="#1-æ›´æ–°èŠ‚ç‚¹" class="headerlink" title="1. æ›´æ–°èŠ‚ç‚¹"></a>1. æ›´æ–°èŠ‚ç‚¹</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;id1&quot;</span>&gt;</span></span><br><span class="line">    111</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> id1 = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;id1&#x27;</span>);</span></span><br><span class="line"><span class="javascript">    <span class="comment">// è®¾ç½®æ–‡æœ¬</span></span></span><br><span class="line"><span class="javascript">    id1.innerText=<span class="string">&#x27;123&#x27;</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// è®¾ç½®htmlä»£ç </span></span></span><br><span class="line"><span class="handlebars"><span class="xml">    id1.innerHTML = &#x27;<span class="tag">&lt;<span class="name">strong</span>&gt;</span>456<span class="tag">&lt;/<span class="name">strong</span>&gt;</span>&#x27;</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// è®¾ç½®css</span></span></span><br><span class="line"><span class="javascript">    id1.style.color=<span class="string">&#x27;red&#x27;</span></span></span><br><span class="line"><span class="javascript">    id1.style.background=<span class="string">&#x27;blue&#x27;</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// æ³¨æ„ å±æ€§åä¸ºé©¼å³°å‘½å, å±æ€§æ˜¯å­—ç¬¦ä¸²</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<a id="more"></a>



<h3 id="2-åˆ é™¤èŠ‚ç‚¹"><a href="#2-åˆ é™¤èŠ‚ç‚¹" class="headerlink" title="2. åˆ é™¤èŠ‚ç‚¹"></a>2. åˆ é™¤èŠ‚ç‚¹</h3><p>å…ˆè·å–è¯¥èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Œç”¨çˆ¶èŠ‚ç‚¹åˆ é™¤è¯¥èŠ‚ç‚¹</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Title_1<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;p1&quot;</span>&gt;</span>p1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;p2&quot;</span>&gt;</span>p2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> self = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;p1&#x27;</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> father = self.parentElement;</span></span><br><span class="line">    father.removeChild(self);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼šåˆ é™¤æ˜¯ä¸€ä¸ªåŠ¨æ€çš„è¿‡ç¨‹ï¼Œåˆ é™¤ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„æ—¶å€™ï¼Œç¬¬äºŒä¸ªèŠ‚ç‚¹å°±æˆäº†ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</p>
<h3 id="3-æ’å…¥èŠ‚ç‚¹"><a href="#3-æ’å…¥èŠ‚ç‚¹" class="headerlink" title="3. æ’å…¥èŠ‚ç‚¹"></a>3. æ’å…¥èŠ‚ç‚¹</h3><p>è·å¾—æŸä¸ª DOM èŠ‚ç‚¹ä¹‹åï¼Œå¦‚æœè¿™ä¸ªèŠ‚ç‚¹æ˜¯ç©ºçš„ï¼Œé€šè¿‡<code>innerHtml</code>å¢åŠ ä¸€ä¸ªå…ƒç´ ï¼›å¦‚æœèŠ‚ç‚¹å·²ç»å­˜åœ¨å…ƒç´ ï¼Œ<code>innerHtml</code>å°±ä¼šè¦†ç›–ï¼Œå¯ä»¥ç”¨<code>append</code>è¿½åŠ </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;js&quot;</span>&gt;</span>JavaScript<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;ee&quot;</span>&gt;</span>JavaEE<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;se&quot;</span>&gt;</span>JavaSE<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;me&quot;</span>&gt;</span>JavaME<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> list = <span class="built_in">document</span>.getElementById(<span class="string">&quot;list&quot;</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> js = <span class="built_in">document</span>.getElementById(<span class="string">&quot;js&quot;</span>);</span></span><br><span class="line">    list.append(js)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿½åŠ ä¹‹åçš„ html ä¸º</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;ee&quot;</span>&gt;</span>JavaEE<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;se&quot;</span>&gt;</span>JavaSE<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;me&quot;</span>&gt;</span>JavaME<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;js&quot;</span>&gt;</span>JavaScript<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºæ–°çš„èŠ‚ç‚¹ ç›¸å½“äº&lt;p id=&quot;newP&quot;&gt;hello&lt;/p&gt;</span></span><br><span class="line"><span class="keyword">let</span> newP = <span class="built_in">document</span>.createElement(<span class="string">&#x27;p&#x27;</span>);</span><br><span class="line">newP.id = <span class="string">&quot;newP&quot;</span>;</span><br><span class="line">newP.innerText = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line">list.append(newP)</span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªæ ‡ç­¾èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">let</span> myScript = <span class="built_in">document</span>.createElement(<span class="string">&quot;script&quot;</span>);</span><br><span class="line">myScript.setAttribute(<span class="string">&#x27;type&#x27;</span>,<span class="string">&#x27;text/javascript&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨<code>insertBefore</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> list = <span class="built_in">document</span>.getElementById(<span class="string">&quot;list&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> js = <span class="built_in">document</span>.getElementById(<span class="string">&quot;js&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> se = <span class="built_in">document</span>.getElementById(<span class="string">&quot;se&quot;</span>);</span><br><span class="line"><span class="comment">// æŠŠjsæ’å…¥åˆ°seå‰é¢</span></span><br><span class="line">list.insertBefore(js, se)</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>å‰ç«¯å­¦ä¹ ç¬”è®°</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>DOM</tag>
      </tags>
  </entry>
  <entry>
    <title>07_æ“ä½œè¡¨å•</title>
    <url>/posts/939c9f96.html</url>
    <content><![CDATA[<h3 id="1-è¡¨å•åŒ…å«çš„å¸¸ç”¨å…ƒç´ "><a href="#1-è¡¨å•åŒ…å«çš„å¸¸ç”¨å…ƒç´ " class="headerlink" title="1. è¡¨å•åŒ…å«çš„å¸¸ç”¨å…ƒç´ "></a>1. è¡¨å•åŒ…å«çš„å¸¸ç”¨å…ƒç´ </h3><ul>
<li>æ–‡æœ¬æ¡† text</li>
<li>ä¸‹æ‹‰æ¡† select + option</li>
<li>å•é€‰æ¡† radio</li>
<li>å¤šé€‰æ¡† checkbox</li>
<li>éšè—åŸŸ hidden</li>
<li>å¯†ç æ¡† password</li>
</ul>
<h3 id="2-è·å¾—è¦æäº¤çš„ä¿¡æ¯"><a href="#2-è·å¾—è¦æäº¤çš„ä¿¡æ¯" class="headerlink" title="2. è·å¾—è¦æäº¤çš„ä¿¡æ¯"></a>2. è·å¾—è¦æäº¤çš„ä¿¡æ¯</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>ç”¨æˆ·å: <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¤šé€‰æ¡†çš„å€¼å°±æ˜¯è®¾å®šå¥½çš„value --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>æ€§åˆ«: <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;male&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;male&quot;</span>&gt;</span>ç”·</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;female&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;female&quot;</span>&gt;</span>å¥³</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> inputText = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;username&#x27;</span>);</span></span><br><span class="line"><span class="javascript">    inputText.value = <span class="string">&#x27;123&#x27;</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> male = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;male&#x27;</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> female = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;female&#x27;</span>);</span></span><br><span class="line"><span class="javascript">    <span class="comment">// è¿”å›é€‰ä¸­çŠ¶æ€</span></span></span><br><span class="line"><span class="javascript">    male.checked = <span class="literal">true</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<a id="more"></a>



<h3 id="3-æäº¤è¡¨å•"><a href="#3-æäº¤è¡¨å•" class="headerlink" title="3. æäº¤è¡¨å•"></a>3. æäº¤è¡¨å•</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- MD5å·¥å…·ç±» --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;#&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">onsubmit</span>=<span class="string">&quot;return aaa()&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>ç”¨æˆ·å: <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>å¯†ç : <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">id</span>=<span class="string">&quot;input_password&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">id</span>=<span class="string">&quot;md5_password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¤šé€‰æ¡†çš„å€¼å°±æ˜¯è®¾å®šå¥½çš„value --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>æ€§åˆ«: <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;male&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;male&quot;</span>&gt;</span>ç”·</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;female&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;female&quot;</span>&gt;</span>å¥³</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>æäº¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">aaa</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> username = <span class="built_in">document</span>.getElementById(<span class="string">&quot;username&quot;</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> input_pwd = <span class="built_in">document</span>.getElementById(<span class="string">&quot;input_password&quot;</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> md5_pwd = <span class="built_in">document</span>.getElementById(<span class="string">&quot;md5_password&quot;</span>);</span></span><br><span class="line"><span class="javascript">        <span class="comment">// å°†å¯†ç åŠ å¯†</span></span></span><br><span class="line">        md5_pwd.value = md5(input_pwd.value)</span><br><span class="line"><span class="javascript">        <span class="comment">// éªŒè¯å¯†ç æˆåŠŸ</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="literal">true</span>;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// å¯†ç å¤±è´¥</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>å‰ç«¯å­¦ä¹ ç¬”è®°</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>08_jQuery</title>
    <url>/posts/c1bc4424.html</url>
    <content><![CDATA[<blockquote>
<p>å®˜ç½‘ï¼š<a href="https://jquery.com/download/">https://jquery.com/download/</a></p>
<p>æ–‡æ¡£å·¥å…·ç«™ï¼š<a href="https://jquery.cuishifeng.cn/index.html">https://jquery.cuishifeng.cn/index.html</a></p>
</blockquote>
<h3 id="1-å…¬å¼ï¼š-selector-action"><a href="#1-å…¬å¼ï¼š-selector-action" class="headerlink" title="1. å…¬å¼ï¼š$(selector).action()"></a>1. å…¬å¼ï¼š<code>$(selector).action()</code></h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;lib/jquery-3.5.1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å…¬å¼:</span></span><br><span class="line"><span class="comment"> $(selector).action()</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;test_jquery&quot;</span>&gt;</span>ç‚¹æˆ‘<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// å°±æ˜¯cssçš„é€‰æ‹©å™¨</span></span></span><br><span class="line"><span class="javascript">    $(<span class="string">&#x27;#test_jquery&#x27;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        alert(<span class="string">&#x27;hello&#x27;</span>)</span></span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<a id="more"></a>



<h3 id="2-é€‰æ‹©å™¨"><a href="#2-é€‰æ‹©å™¨" class="headerlink" title="2. é€‰æ‹©å™¨"></a>2. é€‰æ‹©å™¨</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;test_jquery&quot;</span>&gt;</span>ç‚¹æˆ‘<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;test_jquery&quot;</span>&gt;</span>ç‚¹æˆ‘<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>ç‚¹æˆ‘<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// æ ‡ç­¾é€‰æ‹©å™¨</span></span></span><br><span class="line"><span class="javascript">    $(<span class="string">&#x27;p&#x27;</span>).click()</span></span><br><span class="line"><span class="javascript">    <span class="comment">// idé€‰æ‹©å™¨</span></span></span><br><span class="line"><span class="javascript">    $(<span class="string">&#x27;#test_jquery&#x27;</span>).click()</span></span><br><span class="line"><span class="javascript">    <span class="comment">// ç±»é€‰æ‹©å™¨</span></span></span><br><span class="line"><span class="javascript">    $(<span class="string">&#x27;.test_jquery&#x27;</span>).click()</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="3-äº‹ä»¶"><a href="#3-äº‹ä»¶" class="headerlink" title="3. äº‹ä»¶"></a>3. äº‹ä»¶</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;lib/jquery-3.5.1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-id">#divMove</span> &#123;</span></span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line">            border: 1px solid red;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å…¬å¼:</span></span><br><span class="line"><span class="comment"> $(selector).action()</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">mouse: <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;mouseMove&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;divMove&quot;</span>&gt;</span></span><br><span class="line">    hhhhhhh</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// å½“ç½‘é¡µå…ƒç´ åŠ è½½å®Œæ¯•ä¹‹åå“åº”äº‹ä»¶</span></span></span><br><span class="line"><span class="javascript">    $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;#divMove&#x27;</span>).mousemove(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $(<span class="string">&#x27;#mouseMove&#x27;</span>).text(<span class="string">&#x27;x: &#x27;</span> + e.pageX + <span class="string">&quot; - y: &quot;</span> + e.pageY);</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="4-æ“ä½œ-DOM-å¯¹è±¡"><a href="#4-æ“ä½œ-DOM-å¯¹è±¡" class="headerlink" title="4. æ“ä½œ DOM å¯¹è±¡"></a>4. æ“ä½œ DOM å¯¹è±¡</h3><ol>
<li><p>èŠ‚ç‚¹æ–‡æœ¬æ“ä½œ</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;js&quot;</span>&gt;</span>JavaScript<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">name</span>=<span class="string">&quot;py&quot;</span>&gt;</span>Python<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// è·å¾—å€¼</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> text = $(<span class="string">&#x27;#list li[name=py]&#x27;</span>).text();</span></span><br><span class="line"><span class="javascript">    <span class="comment">// è®¾ç½®å€¼</span></span></span><br><span class="line"><span class="javascript">    $(<span class="string">&#x27;#list li[name=py]&#x27;</span>).text(<span class="string">&quot;123123&quot;</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">    $(<span class="string">&#x27;#list&#x27;</span>).html(<span class="string">&#x27;&lt;strong&gt;123&lt;/strong&gt;&#x27;</span>)</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>css æ“ä½œ</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;#list li[class=js]&#x27;</span>).css(<span class="string">&quot;color&quot;</span>,<span class="string">&quot;red&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>å…ƒç´ çš„æ˜¾ç¤ºå’Œéšè—</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;#list li[class=js]&#x27;</span>).show()</span><br><span class="line">$(<span class="string">&#x27;#list li[class=js]&#x27;</span>).hide()</span><br><span class="line">$(<span class="string">&#x27;#list li[class=js]&#x27;</span>).toggle()</span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>å‰ç«¯å­¦ä¹ ç¬”è®°</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>DOM</tag>
      </tags>
  </entry>
  <entry>
    <title>01_MVVM æ¨¡å¼</title>
    <url>/posts/d41587f9.html</url>
    <content><![CDATA[<h3 id="1-ä»€ä¹ˆæ˜¯-MVVM-æ¨¡å¼"><a href="#1-ä»€ä¹ˆæ˜¯-MVVM-æ¨¡å¼" class="headerlink" title="1. ä»€ä¹ˆæ˜¯ MVVM æ¨¡å¼"></a>1. ä»€ä¹ˆæ˜¯ MVVM æ¨¡å¼</h3><p>MVVMï¼ˆModel-View-ViewModelï¼‰æ˜¯ä¸€ç§è½¯ä»¶æ¶æ„è®¾è®¡æ¨¡å¼ï¼Œç”±å¾®è½¯ WPFï¼ˆç”¨äºæ›¿ä»£ WinFormï¼Œä»¥å‰å°±æ˜¯ç”¨è¿™ä¸ªæŠ€æœ¯å¼€å‘æ¡Œé¢åº”ç”¨ç¨‹åºçš„ï¼‰å’Œ Silverlightï¼ˆç±»ä¼¼äº Java Appletï¼Œç®€å•ç‚¹è¯´å°±æ˜¯åœ¨æµè§ˆå™¨ä¸Š è¿è¡Œçš„ WPFï¼‰çš„æ¶æ„å¸ˆ Ken Cooper å’Œ Ted Peters å¼€å‘ï¼Œæ˜¯ä¸€ç§ç®€åŒ–ç”¨æˆ·ç•Œé¢çš„<strong>äº‹ä»¶é©±åŠ¨ç¼–ç¨‹æ–¹å¼</strong>ã€‚ ç”± John Gossmanï¼ˆåŒæ ·ä¹Ÿæ˜¯ WPF å’Œ Silverlight çš„æ¶æ„å¸ˆï¼‰äº 2005 å¹´åœ¨ä»–çš„åšå®¢ä¸Šå‘è¡¨ã€‚</p>
<p>MVVM æºè‡ªäºç»å…¸çš„ MVCï¼ˆModel-View-Controllerï¼‰æ¨¡å¼ã€‚MVVM çš„æ ¸å¿ƒæ˜¯ ViewModel å±‚ï¼Œè´Ÿè´£è½¬ æ¢ Model ä¸­çš„æ•°æ®å¯¹è±¡æ¥è®©æ•°æ®å˜å¾—æ›´å®¹æ˜“ç®¡ç†å’Œä½¿ç”¨ï¼Œå…¶ä½œç”¨å¦‚ä¸‹ï¼š</p>
<ul>
<li><p>è¯¥å±‚å‘ä¸Šä¸è§†å›¾å±‚è¿›è¡ŒåŒå‘æ•°æ®ç»‘å®š</p>
</li>
<li><p>å‘ä¸‹ä¸ Model å±‚é€šè¿‡æ¥å£è¯·æ±‚è¿›è¡Œæ•°æ®äº¤äº’</p>
</li>
</ul>


<p>MVVM å·²ç»ç›¸å½“æˆç†Ÿäº†ï¼Œå½“ä¸‹æµè¡Œçš„ MVVM æ¡†æ¶æœ‰<code>Vue.js</code>ï¼Œ<code>AngularJS</code>ç­‰ã€‚</p>
<a id="more"></a>



<h3 id="2-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-MVVM"><a href="#2-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-MVVM" class="headerlink" title="2. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ MVVM"></a>2. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ MVVM</h3><p>MVVM æ¨¡å¼å’Œ MVC æ¨¡å¼ä¸€æ ·ï¼Œä¸»è¦ç›®çš„æ˜¯åˆ†ç¦»è§†å›¾ï¼ˆViewï¼‰å’Œæ¨¡å‹ï¼ˆModelï¼‰ï¼Œæœ‰å‡ å¤§å¥½å¤„ï¼š</p>
<ul>
<li><strong>ä½è€¦åˆ</strong>ï¼š è§†å›¾ï¼ˆViewï¼‰å¯ä»¥ç‹¬ç«‹äº Model å˜åŒ–å’Œä¿®æ”¹ï¼Œä¸€ä¸ª ViewModel å¯ä»¥ç»‘å®šåˆ°ä¸åŒçš„ View ä¸Šï¼Œå½“ View å˜åŒ–çš„æ—¶å€™ Model å¯ä»¥ä¸å˜ï¼Œå½“ Model å˜åŒ–çš„æ—¶å€™ View ä¹Ÿå¯ä»¥ä¸å˜ã€‚ </li>
<li><strong>å¯å¤ç”¨</strong>ï¼š ä½ å¯ä»¥æŠŠä¸€äº›è§†å›¾é€»è¾‘æ”¾åœ¨ä¸€ä¸ª ViewModel é‡Œé¢ï¼Œè®©å¾ˆå¤š View é‡ç”¨è¿™æ®µè§†å›¾é€»è¾‘ã€‚</li>
<li><strong>ç‹¬ç«‹å¼€å‘</strong>ï¼š å¼€å‘äººå‘˜å¯ä»¥ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘å’Œæ•°æ®çš„å¼€å‘ï¼ˆViewModelï¼‰ï¼Œè®¾è®¡äººå‘˜å¯ä»¥ä¸“æ³¨äºé¡µ é¢è®¾è®¡ã€‚</li>
<li><strong>å¯æµ‹è¯•</strong>ï¼š ç•Œé¢ç´ æ¥æ˜¯æ¯”è¾ƒéš¾äºæµ‹è¯•çš„ï¼Œè€Œç°åœ¨æµ‹è¯•å¯ä»¥é’ˆå¯¹ ViewModel æ¥å†™ã€‚</li>
</ul>
<h3 id="3-MVVM-çš„ç»„æˆéƒ¨åˆ†"><a href="#3-MVVM-çš„ç»„æˆéƒ¨åˆ†" class="headerlink" title="3. MVVM çš„ç»„æˆéƒ¨åˆ†"></a>3. MVVM çš„ç»„æˆéƒ¨åˆ†</h3>

<p><strong>View</strong>ï¼š<br>View æ˜¯è§†å›¾å±‚ï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·ç•Œé¢ã€‚å‰ç«¯ä¸»è¦ç”± HTML å’Œ CSS æ¥æ„å»ºï¼Œä¸ºäº†æ›´æ–¹ä¾¿åœ°å±•ç° ViewModel æˆ–è€… Modelå±‚çš„æ•°æ®ï¼Œå·²ç»äº§ç”Ÿäº†å„ç§å„æ ·çš„å‰åç«¯æ¨¡æ¿è¯­è¨€ï¼Œæ¯”å¦‚ FreeMarkerã€ Thymeleaf ç­‰ç­‰ï¼Œå„å¤§ MVVM æ¡†æ¶å¦‚ Vue.jsï¼ŒAngularJSï¼ŒEJS ç­‰ä¹Ÿéƒ½æœ‰è‡ªå·±ç”¨æ¥æ„å»ºç”¨æˆ·ç•Œé¢çš„å†…ç½®æ¨¡æ¿è¯­è¨€ã€‚ </p>
<hr>
<p><strong>Model</strong>ï¼š </p>
<p>Model æ˜¯æŒ‡æ•°æ®æ¨¡å‹ï¼Œæ³›æŒ‡åç«¯è¿›è¡Œçš„å„ç§ä¸šåŠ¡é€»è¾‘å¤„ç†å’Œæ•°æ®æ“æ§ï¼Œä¸»è¦å›´ç»•æ•°æ®åº“ç³»ç»Ÿå±•å¼€ã€‚è¿™é‡Œçš„éš¾ç‚¹ä¸»è¦åœ¨äºéœ€è¦å’Œå‰ç«¯çº¦å®šç»Ÿä¸€çš„<strong>æ¥å£è§„åˆ™</strong> </p>
<hr>
<p><strong>ViewModel</strong>ï¼š </p>
<p>ViewModel æ˜¯ç”±å‰ç«¯å¼€å‘äººå‘˜ç»„ç»‡ç”Ÿæˆå’Œç»´æŠ¤çš„è§†å›¾æ•°æ®å±‚ã€‚åœ¨è¿™ä¸€å±‚ï¼Œå‰ç«¯å¼€å‘è€…å¯¹ä»åç«¯è·å–çš„ Model æ•°æ®è¿›è¡Œè½¬æ¢å¤„ç†ï¼ŒåšäºŒæ¬¡å°è£…ï¼Œä»¥ç”Ÿæˆç¬¦åˆ View å±‚ä½¿ç”¨é¢„æœŸçš„è§†å›¾æ•°æ®æ¨¡å‹ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ ViewModel æ‰€å°è£…å‡ºæ¥çš„æ•°æ®æ¨¡å‹åŒ…æ‹¬è§†å›¾çš„çŠ¶æ€å’Œè¡Œä¸ºä¸¤éƒ¨åˆ†ï¼Œè€Œ Model å±‚çš„æ•°æ®æ¨¡å‹æ˜¯åªåŒ…å«çŠ¶æ€çš„ã€‚</p>
<ul>
<li>æ¯”å¦‚é¡µé¢çš„è¿™ä¸€å—å±•ç¤ºä»€ä¹ˆï¼Œé‚£ä¸€å—å±•ç¤ºä»€ä¹ˆè¿™äº›éƒ½å±äºè§†å›¾çŠ¶æ€ï¼ˆå±•ç¤ºï¼‰</li>
<li>é¡µé¢åŠ è½½è¿›æ¥æ—¶å‘ç”Ÿä»€ä¹ˆï¼Œç‚¹å‡»è¿™ä¸€å—å‘ç”Ÿä»€ä¹ˆï¼Œè¿™ä¸€å—æ»šåŠ¨æ—¶å‘ç”Ÿä»€ä¹ˆè¿™äº›éƒ½å±äºè§†å›¾è¡Œä¸ºï¼ˆäº¤ äº’ï¼‰</li>
</ul>
<p>è§†å›¾çŠ¶æ€å’Œè¡Œä¸ºéƒ½å°è£…åœ¨äº† ViewModel é‡Œã€‚è¿™æ ·çš„å°è£…ä½¿å¾— ViewModel å¯ä»¥å®Œæ•´åœ°å»æè¿° View å±‚ã€‚ ç”±äºå®ç°äº†åŒå‘ç»‘å®šï¼ŒViewModel çš„å†…å®¹ä¼šå®æ—¶å±•ç°åœ¨ View å±‚ï¼Œè¿™æ˜¯æ¿€åŠ¨äººå¿ƒçš„ï¼Œå› ä¸ºå‰ç«¯å¼€å‘è€…å† ä¹Ÿä¸å¿…ä½æ•ˆåˆéº»çƒ¦åœ°é€šè¿‡æ“çºµ DOM å»æ›´æ–°è§†å›¾ã€‚</p>
<p>MVVM æ¡†æ¶å·²ç»æŠŠæœ€è„æœ€ç´¯çš„ä¸€å—åšå¥½äº†ï¼Œæˆ‘ä»¬å¼€å‘è€…åªéœ€è¦å¤„ç†å’Œç»´æŠ¤ ViewModelï¼Œæ›´æ–°æ•°æ®è§†å›¾å°± ä¼šè‡ªåŠ¨å¾—åˆ°ç›¸åº”æ›´æ–°ï¼ŒçœŸæ­£å®ç°<strong>äº‹ä»¶é©±åŠ¨ç¼–ç¨‹</strong> ã€‚ </p>
<p><code>View</code>å±‚å±•ç°çš„ä¸æ˜¯<code>Model</code>å±‚çš„æ•°æ®ï¼Œè€Œæ˜¯<code>ViewModel</code>çš„æ•°æ®ï¼Œç”±<code>ViewModel</code>è´Ÿè´£ä¸ <code>Model</code>å±‚äº¤äº’ï¼Œè¿™å°±<strong>å®Œå…¨è§£è€¦äº† View å±‚å’Œ Model å±‚</strong>ï¼Œè¿™ä¸ªè§£è€¦æ˜¯è‡³å…³é‡è¦çš„ï¼Œå®ƒæ˜¯å‰åç«¯åˆ†ç¦»æ–¹æ¡ˆå®æ–½çš„é‡è¦ä¸€ç¯ã€‚</p>
]]></content>
      <categories>
        <category>å‰ç«¯å­¦ä¹ ç¬”è®°</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>MVVM</tag>
      </tags>
  </entry>
  <entry>
    <title>02_ç¬¬ä¸€ä¸ª Vue ç¨‹åº</title>
    <url>/posts/aabb5833.html</url>
    <content><![CDATA[<h3 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1. ç®€ä»‹"></a>1. ç®€ä»‹</h3><p>Vue (è¯»éŸ³ /vjuË/ï¼Œç±»ä¼¼äº view) æ˜¯ä¸€å¥—ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼æ¡†æ¶ï¼Œå‘å¸ƒäº 2014 å¹´ 2 æœˆã€‚ä¸å…¶å®ƒå¤§å‹æ¡†æ¶ä¸åŒçš„æ˜¯ï¼ŒVue è¢«è®¾è®¡ä¸ºå¯ä»¥è‡ªåº•å‘ä¸Šé€å±‚åº”ç”¨ã€‚Vue çš„æ ¸å¿ƒåº“åªå…³æ³¨è§†å›¾å±‚ï¼Œä¸ä»…æ˜“äºä¸Š æ‰‹ï¼Œè¿˜ä¾¿äºä¸ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚ï¼švue-routerï¼Œvue-resourceï¼Œvuexï¼‰æˆ–æ—¢æœ‰é¡¹ç›®æ•´åˆã€‚ </p>
<h3 id="2-MVVM-æ¨¡å¼çš„å®ç°è€…"><a href="#2-MVVM-æ¨¡å¼çš„å®ç°è€…" class="headerlink" title="2. MVVM æ¨¡å¼çš„å®ç°è€…"></a>2. MVVM æ¨¡å¼çš„å®ç°è€…</h3><ul>
<li>Modelï¼šæ¨¡å‹å±‚ï¼Œåœ¨è¿™é‡Œè¡¨ç¤º JavaScript å¯¹è±¡</li>
<li>Viewï¼šè§†å›¾å±‚ï¼Œåœ¨è¿™é‡Œè¡¨ç¤º DOMï¼ˆHTML æ“ä½œçš„å…ƒç´ ï¼‰</li>
<li>ViewModelï¼šè¿æ¥è§†å›¾å’Œæ•°æ®çš„ä¸­é—´ä»¶ï¼ŒVue.js å°±æ˜¯ MVVM ä¸­çš„ ViewModel å±‚çš„å®ç°è€…</li>
</ul>
<p>åœ¨ MVVM æ¶æ„ä¸­ï¼Œæ˜¯ä¸å…è®¸æ•°æ®å’Œè§†å›¾ç›´æ¥é€šä¿¡çš„ï¼Œåªèƒ½é€šè¿‡ ViewModel æ¥é€šä¿¡ï¼Œè€Œ ViewModel å°±æ˜¯å®šä¹‰äº†ä¸€ä¸ª Observer è§‚å¯Ÿè€…ã€‚</p>
<ul>
<li>ViewModel èƒ½å¤Ÿè§‚å¯Ÿåˆ°æ•°æ®çš„å˜åŒ–ï¼Œå¹¶å¯¹è§†å›¾å¯¹åº”çš„å†…å®¹è¿›è¡Œæ›´æ–°</li>
<li>ViewModel èƒ½å¤Ÿç›‘å¬åˆ°è§†å›¾çš„å˜åŒ–ï¼Œå¹¶èƒ½å¤Ÿé€šçŸ¥æ•°æ®å‘ç”Ÿæ”¹å˜</li>
</ul>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±æ˜ç™½äº†ï¼ŒVue.js å°±æ˜¯ä¸€ä¸ª MVVM çš„å®ç°è€…ï¼Œä»–çš„æ ¸å¿ƒå°±æ˜¯å®ç°äº† <strong>DOM ç›‘å¬</strong>ä¸<strong>æ•°æ®ç»‘å®š</strong> </p>
<a id="more"></a>



<h3 id="3-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-Vue-js"><a href="#3-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-Vue-js" class="headerlink" title="3. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Vue.js"></a>3. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Vue.js</h3><ul>
<li>è½»é‡çº§ï¼Œä½“ç§¯å°æ˜¯ä¸€ä¸ªé‡è¦æŒ‡æ ‡ã€‚Vue.js å‹ç¼©åæœ‰åªæœ‰ 20å¤škb ï¼ˆAngular å‹ç¼©å 56kb+ï¼ŒReact å‹ç¼©å 44kb+ï¼‰</li>
<li>ç§»åŠ¨ä¼˜å…ˆã€‚æ›´é€‚åˆç§»åŠ¨ç«¯ï¼Œæ¯”å¦‚ç§»åŠ¨ç«¯çš„ Touch äº‹ä»¶</li>
<li>æ˜“ä¸Šæ‰‹ï¼Œå­¦ä¹ æ›²çº¿å¹³ç¨³ï¼Œæ–‡æ¡£é½å…¨ å¸å–äº† Angularï¼ˆæ¨¡å—åŒ–ï¼‰å’Œ Reactï¼ˆè™šæ‹Ÿ DOMï¼‰çš„é•¿å¤„ï¼Œå¹¶æ‹¥æœ‰è‡ªå·±ç‹¬ç‰¹çš„åŠŸèƒ½ï¼Œå¦‚ï¼šè®¡ç®—å±æ€§</li>
<li>å¼€æºï¼Œç¤¾åŒºæ´»è·ƒåº¦é«˜</li>
<li>â€¦â€¦</li>
</ul>
<h3 id="4-Hello-vue"><a href="#4-Hello-vue" class="headerlink" title="4. Hello, vue."></a>4. Hello, vue.</h3><ol>
<li><p>IDEA å®‰è£…æ’ä»¶ Vue.js</p>
</li>
<li><p>æ–°å»º html æ–‡ä»¶</p>
</li>
<li><p>å¼•å…¥ vue.js</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">æˆ–è€…</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ›å»ºä¸€ä¸ª vue å®ä¾‹</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- viewå±‚ æ¨¡æ¿ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;message&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¯¼å…¥vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// modelå±‚ æ•°æ®</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el: <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line">        data: &#123;</span><br><span class="line"><span class="javascript">            message: <span class="string">&quot;hello, vue&quot;</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
]]></content>
      <categories>
        <category>å‰ç«¯å­¦ä¹ ç¬”è®°</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>03_Vue åŸºç¡€è¯­æ³•</title>
    <url>/posts/903f0fb.html</url>
    <content><![CDATA[<h3 id="1-v-bind"><a href="#1-v-bind" class="headerlink" title="1. v-bind"></a>1. v-bind</h3><p>é™¤äº†ä½¿ç”¨æ’å€¼è¡¨è¾¾å¼<code>&#123;&#123;&#125;&#125;</code>è¿›è¡Œæ•°æ®æ¸²æŸ“ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>v-bind</code>æŒ‡ä»¤ï¼Œå®ƒçš„ç®€å†™çš„å½¢å¼å°±æ˜¯ä¸€ä¸ªå†’å·<code>:</code></p>
<p>è¯¥æŒ‡ä»¤çš„æ„æ€æ˜¯ï¼šå°†è¿™ä¸ªå…ƒç´ èŠ‚ç‚¹çš„<code>title</code>å±æ€§å’Œ Vue å®ä¾‹çš„<code>message</code>çš„å€¼ä¿æŒä¸€è‡´</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    å¦‚æœè¦å°†æ¨¡å‹æ•°æ®ç»‘å®šåœ¨htmlå±æ€§ä¸­</span></span><br><span class="line"><span class="comment">    åˆ™ä½¿ç”¨ v-bind æŒ‡ä»¤,æ­¤æ—¶titleä¸­æ˜¾ç¤ºçš„æ˜¯æ¨¡å‹æ•°æ®</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-bind:title</span>=<span class="string">&quot;message&quot;</span>&gt;</span>é¼ æ ‡æ‚¬åœå‡ ç§’é’ŸæŸ¥çœ‹æ­¤å¤„åŠ¨æ€ç»‘å®šçš„æç¤ºä¿¡æ¯ï¼<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- v-bind æŒ‡ä»¤çš„ç®€å†™å½¢å¼ï¼š å†’å·ï¼ˆ:ï¼‰ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">:title</span>=<span class="string">&quot;message&quot;</span>&gt;</span>æˆ‘æ˜¯æ ‡é¢˜<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line">        data: &#123;</span><br><span class="line"><span class="javascript">            message: <span class="string">&#x27;é¡µé¢åŠ è½½äº &#x27;</span> + <span class="keyword">new</span> <span class="built_in">Date</span>().toLocaleString()</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<a id="more"></a>



<h3 id="2-v-ifã€v-elseã€v-else-if"><a href="#2-v-ifã€v-elseã€v-else-if" class="headerlink" title="2. v-ifã€v-elseã€v-else-if"></a>2. v-ifã€v-elseã€v-else-if</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-if</span>=<span class="string">&quot;type === &#x27;A&#x27;&quot;</span>&gt;</span>A<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-else-if</span>=<span class="string">&quot;type === &#x27;B&#x27;&quot;</span>&gt;</span>B<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-else-if</span>=<span class="string">&quot;type === &#x27;C&#x27;&quot;</span>&gt;</span>C<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-else</span>&gt;</span>who<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line">        data: &#123;</span><br><span class="line"><span class="javascript">            type: <span class="string">&#x27;A&#x27;</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="3-v-for"><a href="#3-v-for" class="headerlink" title="3. v-for"></a>3. v-for</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;item in items&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123;item.message&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line">        data: &#123;</span><br><span class="line">            items: [</span><br><span class="line"><span class="javascript">                &#123;<span class="attr">message</span>: <span class="string">&#x27;lhx&#x27;</span>&#125;,</span></span><br><span class="line"><span class="javascript">                &#123;<span class="attr">message</span>: <span class="string">&#x27;horsen&#x27;</span>&#125;,</span></span><br><span class="line"><span class="javascript">                &#123;<span class="attr">message</span>: <span class="string">&#x27;hahahaha&#x27;</span>&#125;</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>åœ¨æ§åˆ¶å°è¾“å…¥<code>vm.items.push(&#123;message: &#39;123123&#39;&#125;)</code>ä¼šå¢åŠ ä¸€æ¡æ•°æ®</p>
<h3 id="4-v-on"><a href="#4-v-on" class="headerlink" title="4. v-on"></a>4. v-on</h3><p>ç”¨äºå°† Vue ä¸­å®šä¹‰çš„äº‹ä»¶ï¼Œç»‘å®šåˆ°å‰ç«¯é¡µé¢çš„äº‹ä»¶ä¸Šã€‚</p>
<p>ä¾‹å¦‚ï¼Œç»‘å®š<code>â€œsayHiâ€</code>äº‹ä»¶åˆ°æŒ‰é’®çš„<code>click</code>æ–¹æ³•ä¸Šï¼Œåœ¨ç‚¹å‡»æŒ‰é’®è§¦å‘<code>click</code>äº‹ä»¶æ—¶ï¼Œå¯¹åº”åœ°å»åš<code>â€œsayHiâ€</code>ä¸­çš„äº‹æƒ…ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;sayHi&quot;</span>&gt;</span>ç‚¹å‡»<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç®€å†™ä¸º@click --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sayHi&quot;</span>&gt;</span>ç‚¹å‡»<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line">        data: &#123;</span><br><span class="line"><span class="javascript">            message: <span class="string">&#x27;lhxlhx&#x27;</span></span></span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line"><span class="javascript">            <span class="comment">// æ–¹æ³•å¿…é¡»å®šä¹‰åœ¨vueçš„methodså¯¹è±¡ä¸­</span></span></span><br><span class="line"><span class="javascript">            sayHi: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">// thisæŒ‡å‘å½“å‰vueå®ä¾‹</span></span></span><br><span class="line"><span class="javascript">                alert(<span class="built_in">this</span>.message);</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="5-v-model"><a href="#5-v-model" class="headerlink" title="5. v-model"></a>5. v-model</h3><p>Vue.js æ˜¯ä¸€ä¸ª MVVM æ¡†æ¶ï¼Œå³<strong>æ•°æ®åŒå‘ç»‘å®š</strong>ï¼Œå³å½“æ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œè§†å›¾ä¹Ÿå°±å‘ç”Ÿå˜åŒ–ï¼Œå½“è§†å›¾å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œæ•°æ®ä¹Ÿä¼šè·Ÿç€åŒæ­¥å˜åŒ–ã€‚è¿™ä¹Ÿç®—æ˜¯ Vue.js çš„ç²¾é«“ä¹‹å¤„äº†ã€‚</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬æ‰€è¯´çš„æ•°æ®åŒå‘ç»‘å®šï¼Œä¸€å®šæ˜¯å¯¹äº UI æ§ä»¶æ¥è¯´çš„ï¼Œé UI æ§ä»¶ä¸ä¼šæ¶‰åŠåˆ°æ•°æ®åŒå‘ç»‘å®šã€‚å¯¹äºæˆ‘ä»¬å¤„ç†è¡¨å•ï¼ŒVue.js çš„åŒå‘æ•°æ®ç»‘å®šç”¨èµ·æ¥å°±ç‰¹åˆ«èˆ’æœäº†ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ç”¨<code>v-model</code>æŒ‡ä»¤åœ¨è¡¨å•<code>&lt; input&gt;</code>ã€<code>&lt; textarea&gt;</code>åŠ<code>&lt; select&gt;</code>å…ƒå…ƒç´ ä¸Šåˆ›å»ºåŒå‘æ•°æ®ç»‘å®šã€‚å®ƒä¼šæ ¹æ®æ§ä»¶ç±»å‹è‡ªåŠ¨é€‰å–æ­£ç¡®çš„æ–¹æ³•æ¥æ›´æ–°å…ƒç´ ã€‚å°½ç®¡æœ‰äº›ç¥å¥‡ï¼Œä½†<code>v-model</code>æœ¬è´¨ä¸Šä¸è¿‡æ˜¯è¯­æ³•ç³–ã€‚å®ƒè´Ÿè´£ç›‘å¬ç”¨æˆ·çš„è¾“å…¥äº‹ä»¶ä»¥æ›´æ–°æ•°æ®ï¼Œå¹¶å¯¹ä¸€äº›æç«¯åœºæ™¯è¿›è¡Œä¸€äº›ç‰¹æ®Šå¤„ç†ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è¾“å…¥æ¡† --&gt;</span></span><br><span class="line">    Input something:</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;message&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å•é€‰æ¡†(ç»‘å®šçš„æ˜¯value)--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç”·&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;sex&quot;</span>&gt;</span>ç”·</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å¥³&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;sex&quot;</span>&gt;</span>å¥³</span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ€§åˆ«: &#123;&#123;sex&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¤šé€‰æ¡† --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">value</span>=<span class="string">&quot;åƒé¥­&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobby&quot;</span>&gt;</span>åƒé¥­</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç¡è§‰&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobby&quot;</span>&gt;</span>ç¡è§‰</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å­¦ä¹ &quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobby&quot;</span>&gt;</span>å­¦ä¹ </span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>çˆ±å¥½: &#123;&#123;hobby&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä¸‹æ‹‰æ¡† --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">v-model</span>=<span class="string">&quot;area&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">disabled</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>è¯·é€‰æ‹©<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;A&quot;</span>&gt;</span>A<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;B&quot;</span>&gt;</span>B<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;C&quot;</span>&gt;</span>C<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>åœ°åŒº: &#123;&#123;area&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line">        data: &#123;</span><br><span class="line"><span class="javascript">            message: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            sex: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line">            hobby: [],</span><br><span class="line"><span class="javascript">            area: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>å‰ç«¯å­¦ä¹ ç¬”è®°</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>04_ç»„ä»¶</title>
    <url>/posts/99973a40.html</url>
    <content><![CDATA[<h3 id="1-ä»€ä¹ˆæ˜¯ç»„ä»¶"><a href="#1-ä»€ä¹ˆæ˜¯ç»„ä»¶" class="headerlink" title="1. ä»€ä¹ˆæ˜¯ç»„ä»¶"></a>1. ä»€ä¹ˆæ˜¯ç»„ä»¶</h3><p>ç»„ä»¶æ˜¯å¯å¤ç”¨çš„<code>Vue</code>å®ä¾‹ï¼Œè¯´ç™½äº†å°±æ˜¯ä¸€ç»„å¯ä»¥é‡å¤ä½¿ç”¨çš„æ¨¡æ¿ï¼Œè·Ÿ JSTL çš„è‡ªå®šä¹‰æ ‡ç­¾ã€ Thymeleaf çš„<code>th:fragment</code>ç­‰æ¡†æ¶æœ‰ç€å¼‚æ›²åŒå·¥ä¹‹å¦™ã€‚é€šå¸¸ä¸€ä¸ªåº”ç”¨ä¼šä»¥ä¸€æ£µåµŒå¥—çš„ç»„ä»¶æ ‘çš„å½¢å¼æ¥ç»„ç»‡ï¼š</p>


<a id="more"></a>



<h3 id="2-ä»£ç "><a href="#2-ä»£ç " class="headerlink" title="2. ä»£ç "></a>2. ä»£ç </h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">my-com</span> <span class="attr">v-for</span>=<span class="string">&quot;item in items&quot;</span> <span class="attr">v-bind:item</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-com</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    Vue.component(<span class="string">&quot;my-com&quot;</span>, &#123;</span></span><br><span class="line"><span class="javascript">        props: [<span class="string">&#x27;item&#x27;</span>],</span></span><br><span class="line"><span class="handlebars"><span class="xml">        template: &#x27;<span class="tag">&lt;<span class="name">li</span>&gt;</span>Hello, </span><span class="template-variable">&#123;&#123;<span class="name">item</span>&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span>&#x27;</span></span></span><br><span class="line">    &#125;);</span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line">        data: &#123;</span><br><span class="line"><span class="javascript">            items: [<span class="string">&quot;Java&quot;</span>, <span class="string">&quot;Linux&quot;</span>, <span class="string">&quot;Vue&quot;</span>]</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>v-for=&quot;item in items&quot;</code>ï¼šéå†<code>Vue</code>å®ä¾‹ç§å®šä¹‰çš„åä¸º<code>items</code>çš„æ•°ç»„ï¼Œå¹¶åˆ›å»ºåŒç­‰æ•°é‡çš„ç»„ä»¶</li>
<li><code>v-bind:item=&quot;item&quot;</code>ï¼šå°†<code>props</code>ä¸­å®šä¹‰çš„åä¸º<code>item</code>çš„å±æ€§ï¼ˆç­‰å·å·¦è¾¹ï¼‰å’Œ<code>item in items</code>ä¸­éå†çš„<code>item</code>é¡¹çš„å€¼ï¼ˆç­‰å·å³è¾¹ï¼‰ä¿æŒä¸€è‡´</li>
</ul>
<p><strong>æ³¨æ„ï¼šé»˜è®¤è§„åˆ™ä¸‹ props å±æ€§é‡Œçš„å€¼ä¸èƒ½ä¸ºå¤§å†™</strong></p>
<hr>
<p>å¦‚æœä½ è§‰å¾—è¿™äº›ä¸€æ ·çš„å±æ€§åæ ¹æœ¬æ— æ³•åŒºåˆ†ï¼Œè¿™é‡Œç»™å‡ºäº†ä¸€ä¸ªè·¯çº¿å¸®åŠ©ç†è§£ï¼š</p>
<ol>
<li>ç»„ä»¶è¦æ˜¾ç¤º item</li>
<li>ç»™ç»„ä»¶è®¾å®šå‚æ•° itemï¼Œä¸è¦æ˜¾ç¤ºçš„å†…å®¹å…³è”</li>
<li>å°†ç»„ä»¶çš„å±æ€§</li>
<li>å’Œ data ä¸­çš„æ•°æ®ç»‘å®š</li>
<li>è¯¥æ•°æ®ä» for å¾ªç¯ä¸­å¾—åˆ°</li>
<li>å…·ä½“çš„å€¼ä» items æ•°ç»„ä¸­æ¥</li>
<li>æ•°ç»„å°±æ˜¯ data ä¸­çš„æ•°ç»„ </li>
</ol>
<img src="/posts/99973a40/image-20200814214545313.png" class>]]></content>
      <categories>
        <category>å‰ç«¯å­¦ä¹ ç¬”è®°</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>component</tag>
      </tags>
  </entry>
  <entry>
    <title>05_è®¡ç®—å±æ€§</title>
    <url>/posts/92e38122.html</url>
    <content><![CDATA[<p>è®¡ç®—å±æ€§çš„é‡ç‚¹çªå‡ºåœ¨==å±æ€§==ä¸¤ä¸ªå­—ä¸Šï¼ˆå±æ€§æ˜¯åè¯ï¼‰ï¼Œé¦–å…ˆå®ƒæ˜¯ä¸ª==å±æ€§==ï¼Œå…¶æ¬¡è¿™ä¸ªå±æ€§æœ‰==è®¡ç®—==çš„èƒ½åŠ›ï¼ˆè®¡ç®—æ˜¯åŠ¨è¯ï¼‰ï¼Œè¿™é‡Œçš„==è®¡ç®—==å°±æ˜¯ä¸ªå‡½æ•°ã€‚ç®€å•ç‚¹è¯´ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªèƒ½å¤Ÿå°†è®¡ç®—ç»“æœç¼“å­˜èµ·æ¥çš„å±æ€§ï¼ˆå°†è¡Œä¸ºè½¬åŒ–æˆäº†é™æ€çš„å±æ€§ï¼‰ã€‚</p>
<a id="more"></a>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ³¨æ„, ä¸€ä¸ªæ˜¯æ–¹æ³•, ä¸€ä¸ªæ˜¯å±æ€§ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>è°ƒç”¨å½“å‰æ—¶é—´çš„æ–¹æ³•ï¼š&#123;&#123;currentTime1()&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>å½“å‰æ—¶é—´çš„è®¡ç®—å±æ€§ï¼š&#123;&#123;currentTime2&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line">        data: &#123;</span><br><span class="line"><span class="javascript">            message: <span class="string">&quot;hello, horsen&quot;</span></span></span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line"><span class="javascript">            currentTime1: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">// è¿”å›ä¸€ä¸ªæ—¶é—´æˆ³</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> <span class="built_in">Date</span>.now()</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line"><span class="javascript">        <span class="comment">// è®¡ç®—å±æ€§ è¿™æ˜¯ä¸€ä¸ªå±æ€§, ä¸æ˜¯ä¸€ä¸ªæ–¹æ³•</span></span></span><br><span class="line">        computed: &#123;</span><br><span class="line"><span class="javascript">            currentTime2: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">this</span>.message;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> <span class="built_in">Date</span>.now();</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼š<code>methods</code>å’Œ<code>computed</code>é‡Œçš„ä¸œè¥¿ä¸èƒ½é‡å</p>
<ul>
<li><code>methods</code>ï¼šå®šä¹‰æ–¹æ³•ï¼Œè°ƒç”¨æ–¹æ³•ä½¿ç”¨<code>currentTime1()</code>ï¼Œéœ€è¦å¸¦æ‹¬å·</li>
<li><code> computed</code>ï¼šå®šä¹‰è®¡ç®—å±æ€§ï¼Œè°ƒç”¨å±æ€§ä½¿ç”¨<code>currentTime2</code>ï¼Œä¸éœ€è¦å¸¦æ‹¬å·</li>
<li><code>this.message</code>æ˜¯ä¸ºäº†èƒ½å¤Ÿè®©<code>currentTime2</code>è§‚å¯Ÿåˆ°æ•°æ®å˜åŒ–è€Œå˜åŒ–ã€‚å¦‚æœåœ¨æ–¹æ³•ä¸­çš„å€¼å‘ç”Ÿäº†å˜åŒ–ï¼Œåˆ™ç¼“å­˜å°±ä¼šåˆ·æ–°ï¼Œå¯ä»¥åœ¨æ§åˆ¶å°ä½¿ç”¨<code>vm.message=&quot;123&quot;</code>æ”¹å˜ä¸‹æ•°æ®çš„å€¼ï¼Œå†æ¬¡æµ‹è¯•è§‚å¯Ÿæ•ˆæœ</li>
</ul>
<p><strong>ç»“è®º</strong>ï¼š</p>
<p>è°ƒç”¨æ–¹æ³•æ—¶ï¼Œæ¯æ¬¡éƒ½éœ€è¦è¿›è¡Œè®¡ç®—ï¼Œæ—¢ç„¶æœ‰è®¡ç®—è¿‡ç¨‹åˆ™å¿…å®šäº§ç”Ÿç³»ç»Ÿå¼€é”€ï¼Œé‚£å¦‚æœè¿™ä¸ªç»“æœæ˜¯ä¸ç»å¸¸å˜åŒ–çš„å‘¢ï¼Ÿæ­¤æ—¶å°±å¯ä»¥è€ƒè™‘å°†è¿™ä¸ªç»“æœç¼“å­˜èµ·æ¥ï¼Œé‡‡ç”¨è®¡ç®—å±æ€§å¯ä»¥å¾ˆæ–¹ä¾¿çš„åšåˆ°è¿™ä¸€ç‚¹ï¼Œè®¡ç®—å±æ€§çš„ä¸» è¦ç‰¹æ€§å°±æ˜¯ä¸ºäº†å°†ä¸ç»å¸¸å˜åŒ–çš„è®¡ç®—ç»“æœè¿›è¡Œç¼“å­˜ï¼Œä»¥èŠ‚çº¦æˆ‘ä»¬çš„ç³»ç»Ÿå¼€é”€&gt;</p>
]]></content>
      <categories>
        <category>å‰ç«¯å­¦ä¹ ç¬”è®°</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>compute</tag>
      </tags>
  </entry>
  <entry>
    <title>06_æ’æ§½</title>
    <url>/posts/431ca826.html</url>
    <content><![CDATA[<p>åœ¨ Vue ä¸­ä½¿ç”¨ <code>&lt;slot&gt;</code>å…ƒç´ ï¼Œä½œä¸ºæ‰¿è½½åˆ†å‘å†…å®¹çš„å‡ºå£ï¼Œä½œè€…ç§°å…¶ä¸ºæ’æ§½ï¼Œå¯ä»¥åº”ç”¨åœ¨ç»„åˆç»„ä»¶çš„åœºæ™¯ä¸­ã€‚</p>
<p>æ¯”å¦‚å‡†å¤‡åˆ¶ä½œä¸€ä¸ªå¾…åŠäº‹é¡¹ç»„ä»¶ï¼ˆtodoï¼‰ï¼Œè¯¥ç»„ä»¶ç”±å¾…åŠæ ‡é¢˜ï¼ˆtodo-titleï¼‰å’Œå¾…åŠå†…å®¹ï¼ˆtodo-itemsï¼‰ ç»„æˆï¼Œä½†è¿™ä¸‰ä¸ªç»„ä»¶åˆæ˜¯ç›¸äº’ç‹¬ç«‹çš„ã€‚</p>
<ol>
<li><p>å®šä¹‰ä¸€ä¸ªå¾…åŠäº‹é¡¹çš„ç»„ä»¶</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Vue.component(<span class="string">&#x27;todo&#x27;</span>, &#123;</span><br><span class="line">    template:</span><br><span class="line">        <span class="string">&#x27;&lt;div&gt;\</span></span><br><span class="line"><span class="string">            &lt;div&gt;å¾…åŠäº‹é¡¹&lt;/div&gt;\</span></span><br><span class="line"><span class="string">            &lt;ul&gt;\</span></span><br><span class="line"><span class="string">                &lt;li&gt;&gt;å­¦ä¹ Java&lt;/li&gt;\</span></span><br><span class="line"><span class="string">            &lt;/ul&gt;\</span></span><br><span class="line"><span class="string">        &lt;/div&gt;&#x27;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç»™éœ€è¦åŠ¨æ€ç»‘å®šçš„ä»£ç ç•™å‡ºæ’æ§½ï¼Œå¹¶å‘½å</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Vue.component(<span class="string">&#x27;todo&#x27;</span>, &#123;</span><br><span class="line">    template:</span><br><span class="line">        <span class="string">&#x27;&lt;div&gt;\</span></span><br><span class="line"><span class="string">            &lt;slot name=&quot;todo-title&quot;&gt;&lt;/slot&gt;\</span></span><br><span class="line"><span class="string">            &lt;ul&gt;\</span></span><br><span class="line"><span class="string">                &lt;slot name=&quot;todo-items&quot;&gt;&lt;/slot&gt;\</span></span><br><span class="line"><span class="string">            &lt;/ul&gt;\</span></span><br><span class="line"><span class="string">        &lt;/div&gt;&#x27;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<a id="more"></a>
</li>
<li><p>å®šä¹‰å¯¹åº”æ’æ§½çš„ç»„ä»¶ï¼ˆå¾…åŠæ ‡é¢˜å’Œå¾…åŠå†…å®¹ï¼‰</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Vue.component(<span class="string">&quot;todo-title&quot;</span>, &#123;</span><br><span class="line">    props: [<span class="string">&#x27;title&#x27;</span>],</span><br><span class="line">    template: <span class="string">&#x27;&lt;div&gt;&#123;&#123;title&#125;&#125;&lt;/div&gt;&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">Vue.component(<span class="string">&quot;todo-items&quot;</span>, &#123;</span><br><span class="line">    props: [<span class="string">&#x27;item&#x27;</span>, <span class="string">&#x27;index&#x27;</span>],</span><br><span class="line">    template: <span class="string">&#x27;&lt;li&gt;&#123;&#123;index+1&#125;&#125;. &#123;&#123;item&#125;&#125;&lt;/li&gt;&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®ä¾‹åŒ– Vue å¹¶åˆå§‹åŒ–æ•°æ®</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">&quot;#app&quot;</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">        todoTitle: <span class="string">&#x27;å¾…åŠäº‹é¡¹&#x27;</span>,</span><br><span class="line">        todoItems: [<span class="string">&#x27;å­¦ä¹ Java&#x27;</span>, <span class="string">&#x27;å­¦ä¹ Linux&#x27;</span>, <span class="string">&#x27;å­¦ä¹ Vue&#x27;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç»‘å®šè§†å›¾</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">todo</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">todo-title</span> <span class="attr">slot</span>=<span class="string">&quot;todo-title&quot;</span> <span class="attr">:title</span>=<span class="string">&quot;todoTitle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">todo-title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">todo-items</span> <span class="attr">slot</span>=<span class="string">&quot;todo-items&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item,index) in todoItems&quot;</span> </span></span><br><span class="line"><span class="tag">                    <span class="attr">:item</span>=<span class="string">&quot;item&quot;</span> <span class="attr">:index</span>=<span class="string">&quot;index&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">todo-items</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">todo</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>æ•ˆæœå›¾å¦‚ä¸‹ï¼š</p>
<img src="/posts/431ca826/image-20200815013638063.png" class>

<p>ç»™å‡ºå±æ€§ä¹‹é—´çš„å…³è”ï¼Œæ–¹ä¾¿ç†è§£ï¼š</p>
<img src="/posts/431ca826/image-20200815012723340.png" class>

]]></content>
      <categories>
        <category>å‰ç«¯å­¦ä¹ ç¬”è®°</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>slot</tag>
      </tags>
  </entry>
  <entry>
    <title>07_è‡ªå®šä¹‰å†…å®¹äº‹ä»¶åˆ†å‘</title>
    <url>/posts/73604753.html</url>
    <content><![CDATA[<p>ç»“åˆä¸Šä¸€ç¯‡åšå®¢ï¼Œå¦‚æœæƒ³è¦åˆ é™¤ä¸€ä¸ªç»„ä»¶ï¼Œéœ€è¦åœ¨ç»„ä»¶ä¸­æ·»åŠ åˆ é™¤æŒ‰é’®ï¼Œä½†ç»„ä»¶ç›¸å…³çš„æ•°æ®é¡¹åœ¨ Vue å®ä¾‹ä¸­ï¼Œä¸ºäº†å®ç°ç‚¹å‡»ç»„ä»¶ï¼Œå¯¹åº”åœ°åˆ é™¤ Vue å®ä¾‹ä¸­çš„æ•°æ®ï¼Œéœ€è¦ç”¨åˆ°å‚æ•°ä¼ é€’å’Œäº‹ä»¶åˆ†å‘ã€‚</p>
<p>è‡ªå®šä¹‰äº‹ä»¶çš„å…¬å¼å¦‚ä¸‹ï¼š<code>this.$emit(&#39;è‡ªå®šä¹‰äº‹ä»¶å&#39;, &#39;å‚æ•°&#39;)</code></p>
<a id="more"></a>

<h3 id="1-ä»£ç å®ç°"><a href="#1-ä»£ç å®ç°" class="headerlink" title="1. ä»£ç å®ç°"></a>1. ä»£ç å®ç°</h3><ol>
<li><p>åœ¨ Vue å®ä¾‹ä¸­æ·»åŠ  methods å¯¹è±¡ï¼Œå¹¶å®šä¹‰ä¸€ä¸ªåˆ é™¤æ–¹æ³•ï¼Œç”¨äºåˆ é™¤ items ä¸­çš„é¡¹ï¼ˆæ³¨æ„<code>splice()</code>æ–¹æ³•çš„ä½¿ç”¨ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">&quot;#app&quot;</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">        todoTitle: <span class="string">&#x27;å¾…åŠäº‹é¡¹&#x27;</span>,</span><br><span class="line">        todoItems: [<span class="string">&#x27;å­¦ä¹ Java&#x27;</span>, <span class="string">&#x27;å­¦ä¹ Linux&#x27;</span>, <span class="string">&#x27;å­¦ä¹ Vue&#x27;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        removeItems: <span class="function"><span class="keyword">function</span> (<span class="params">index</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&quot;åˆ é™¤äº†=&gt;&quot;</span> + <span class="built_in">this</span>.todoItems[index]);</span><br><span class="line">            <span class="comment">// splice() æ–¹æ³•ä»æ•°ç»„ä¸­åˆ é™¤(æˆ–å‘æ•°ç»„ä¸­æ·»åŠ )é¡¹ç›®ï¼Œç„¶åè¿”å›è¢«(æ·»åŠ )åˆ é™¤çš„é¡¹ç›®</span></span><br><span class="line">            <span class="comment">// indexè¡¨ç¤ºä½ç½®, 1è¡¨ç¤ºæ•°é‡</span></span><br><span class="line">            <span class="built_in">this</span>.todoItems.splice(index, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸­å¢åŠ åˆ é™¤æŒ‰é’®ï¼Œå¹¶ä¸”ç»‘å®šäº‹ä»¶ï¼Œè¿™ä¸ªäº‹ä»¶è¦åšçš„äº‹å°±æ˜¯å®ç°è‡ªå®šä¹‰äº‹ä»¶ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Vue.component(<span class="string">&quot;todo-items&quot;</span>, &#123;</span><br><span class="line">    props: [<span class="string">&#x27;item&#x27;</span>, <span class="string">&#x27;index&#x27;</span>],</span><br><span class="line">    template: <span class="string">&#x27;&lt;li&gt;&#123;&#123;index+1&#125;&#125;. &#123;&#123;item&#125;&#125; &lt;button @click=&quot;removeComponent&quot;&gt;åˆ é™¤&lt;/button&gt;&lt;/li&gt;&#x27;</span>,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        removeComponent: <span class="function"><span class="keyword">function</span> (<span class="params">index</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// è¿™é‡Œçš„removeæ˜¯è‡ªå®šä¹‰äº‹ä»¶çš„åç§°, éœ€è¦åœ¨HTMLä¸­ä½¿ç”¨v-on:removeçš„æ–¹å¼æŒ‡æ´¾</span></span><br><span class="line">            <span class="built_in">this</span>.$emit(<span class="string">&#x27;remove&#x27;</span>, index);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿®æ”¹ HTMLï¼Œä½¿ç”¨<code>v-on</code>å°†å‰ç«¯é¡µé¢çš„è‡ªå®šä¹‰äº‹ä»¶<code>remove</code>å’Œåˆ é™¤ Vue å®ä¾‹ä¸­ item çš„æ–¹æ³•ç»‘å®šèµ·æ¥ï¼ˆæ³¨æ„ä¼ å‚ï¼‰ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">todo-items</span> <span class="attr">slot</span>=<span class="string">&quot;todo-items&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item,index) in todoItems&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:item</span>=<span class="string">&quot;item&quot;</span> <span class="attr">:index</span>=<span class="string">&quot;index&quot;</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">remove</span>=<span class="string">&quot;removeItems(index)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">todo-items</span>&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="2-é€»è¾‘ç†è§£"><a href="#2-é€»è¾‘ç†è§£" class="headerlink" title="2. é€»è¾‘ç†è§£"></a>2. é€»è¾‘ç†è§£</h3><p>ç»„ä»¶æ— æ³•ç›´æ¥ä½¿ç”¨ Vue å®ä¾‹ä¸­çš„æ–¹æ³•ï¼Œç»„ä»¶åªèƒ½è°ƒç”¨è‡ªèº«çš„æ–¹æ³•ã€‚æ‰€ä»¥è¦é€šè¿‡ç»„ä»¶è°ƒç”¨è‡ªèº«æ–¹æ³•ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶çš„åç§°ï¼Œåœ¨å°†è‡ªå®šä¹‰äº‹ä»¶ç»‘å®š Vue å®ä¾‹ç”¨çš„æ–¹æ³•ã€‚</p>




]]></content>
      <categories>
        <category>å‰ç«¯å­¦ä¹ ç¬”è®°</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>è‡ªå®šä¹‰äº‹ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title>08_Axios</title>
    <url>/posts/21cc83c8.html</url>
    <content><![CDATA[<h3 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1. ç®€ä»‹"></a>1. ç®€ä»‹</h3><p>Axios æ˜¯ä¸€ä¸ªå¼€æºçš„å¯ä»¥ç”¨åœ¨æµè§ˆå™¨ç«¯å’Œ NodeJS çš„å¼‚æ­¥é€šä¿¡æ¡†æ¶ï¼Œå¥¹çš„ä¸»è¦ä½œç”¨å°±æ˜¯å®ç° AJAX å¼‚ æ­¥é€šä¿¡ï¼Œå…¶åŠŸèƒ½ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>ä»æµè§ˆå™¨ä¸­åˆ›å»º<code>XMLHttpRequests</code></li>
<li>ä» node.js åˆ›å»º http è¯·æ±‚</li>
<li>æ”¯æŒ Promise API [ JSä¸­é“¾å¼ç¼–ç¨‹ ]</li>
<li>æ‹¦æˆªè¯·æ±‚å’Œå“åº”</li>
<li>è½¬æ¢è¯·æ±‚æ•°æ®å’Œå“åº”æ•°æ® </li>
<li>å–æ¶ˆè¯·æ±‚ </li>
<li>è‡ªåŠ¨è½¬æ¢ JSON æ•°æ® </li>
<li>å®¢æˆ·ç«¯æ”¯æŒé˜²å¾¡ XSRFï¼ˆè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰</li>
</ul>
<blockquote>
<p>GitHubï¼š<a href="https://github.com/axios/axios">https://github.com/axios/axios</a></p>
<p>ä¸­æ–‡æ–‡æ¡£ï¼š<a href="http://www.axios-js.com/">http://www.axios-js.com/</a></p>
</blockquote>
<a id="more"></a>



<h3 id="2-ä¸ºä»€ä¹ˆè¦ç”¨-Axios"><a href="#2-ä¸ºä»€ä¹ˆè¦ç”¨-Axios" class="headerlink" title="2. ä¸ºä»€ä¹ˆè¦ç”¨ Axios"></a>2. ä¸ºä»€ä¹ˆè¦ç”¨ Axios</h3><p>ç”±äº<code>Vue.js</code>æ˜¯ä¸€ä¸ª è§†å›¾å±‚æ¡†æ¶ å¹¶ä¸”ä½œè€…ï¼ˆå°¤é›¨æºªï¼‰ä¸¥æ ¼å‡†å®ˆ SoC ï¼ˆå…³æ³¨åº¦åˆ†ç¦»åŸåˆ™ï¼‰ï¼Œæ‰€ä»¥<code>Vue.js</code>å¹¶ä¸åŒ…å« AJAX çš„é€šä¿¡åŠŸèƒ½ï¼Œä¸ºäº†è§£å†³é€šä¿¡é—®é¢˜ï¼Œä½œè€…å•ç‹¬å¼€å‘äº†ä¸€ä¸ªåä¸º<code>vue-resource</code>çš„æ’ä»¶ï¼Œä¸è¿‡åœ¨è¿›å…¥ 2.0 ç‰ˆæœ¬ä»¥ååœæ­¢äº†å¯¹è¯¥æ’ä»¶çš„ç»´æŠ¤å¹¶æ¨èäº†<code>Axios</code>æ¡†æ¶ã€‚å°‘ç”¨ jQueryï¼Œå› ä¸ºå®ƒæ“ä½œ Dom å¤ªé¢‘ç¹ï¼</p>
<h3 id="3-ç¬¬ä¸€ä¸ª-Axios-ç¨‹åº"><a href="#3-ç¬¬ä¸€ä¸ª-Axios-ç¨‹åº" class="headerlink" title="3. ç¬¬ä¸€ä¸ª Axios ç¨‹åº"></a>3. ç¬¬ä¸€ä¸ª Axios ç¨‹åº</h3><blockquote>
<p>CDNï¼š<a href="https://unpkg.com/axios/dist/axios.min.js">https://unpkg.com/axios/dist/axios.min.js</a></p>
</blockquote>
<ol>
<li><p>å‡†å¤‡ä¸€ä¸ª JSON æ–‡ä»¶ï¼Œdata.json</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Horsen Liu&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;https://horsenliu.github.io&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;page&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">&quot;address&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;street&quot;</span>: <span class="string">&quot;å¼˜æ™¯å¤§é“1å·&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;city&quot;</span>: <span class="string">&quot;æ±Ÿè‹çœå—äº¬å¸‚&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;country&quot;</span>: <span class="string">&quot;ä¸­å›½&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æµ‹è¯•ä»£ç </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- v-cloak è§£å†³é—ªçƒé—®é¢˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-attr">[v-cloak]</span> &#123;</span></span><br><span class="line">            display: none;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span> <span class="attr">v-cloak</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>å§“åï¼š&#123;&#123;info.name&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>åœ°å€ï¼š&#123;&#123;info.address.country&#125;&#125;-&#123;&#123;info.address.city&#125;&#125;-&#123;&#123;info.address.street&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        é“¾æ¥ï¼š<span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:href</span>=<span class="string">&quot;info.url&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>&#123;&#123;info.url&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/axios/dist/axios.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line">        data: &#123;</span><br><span class="line">            info: &#123;</span><br><span class="line"><span class="javascript">                name: <span class="literal">null</span>,</span></span><br><span class="line">                address: &#123;</span><br><span class="line"><span class="javascript">                    country: <span class="literal">null</span>,</span></span><br><span class="line"><span class="javascript">                    city: <span class="literal">null</span>,</span></span><br><span class="line"><span class="javascript">                    street: <span class="literal">null</span></span></span><br><span class="line">                &#125;,</span><br><span class="line"><span class="javascript">                url: <span class="literal">null</span></span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line"><span class="javascript">        <span class="comment">// é’©å­å‡½æ•°</span></span></span><br><span class="line">        mounted() &#123;</span><br><span class="line"><span class="javascript">            axios.get(<span class="string">&#x27;data.json&#x27;</span>).then(<span class="function"><span class="params">response</span> =&gt;</span> (<span class="built_in">this</span>.info = response.data));</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„</strong> :</p>
<ul>
<li>ä½¿ç”¨äº† v-bind å°† a:href çš„å±æ€§å€¼ä¸ Vue å®ä¾‹ä¸­çš„æ•°æ®è¿›è¡Œç»‘å®š </li>
<li>ä½¿ç”¨ axios æ¡†æ¶çš„ get æ–¹æ³•è¯·æ±‚ Ajax å¹¶è‡ªåŠ¨å°†æ•°æ®å°è£…è¿›äº† Vue å®ä¾‹çš„æ•°æ®å¯¹è±¡ä¸­ </li>
<li>åœ¨ data ä¸­çš„æ•°æ®ç»“æ„å¿…é¡»è¦å’Œ Ajax å“åº”å›æ¥çš„æ•°æ®æ ¼å¼åŒ¹é…</li>
</ul>
</li>
</ol>
]]></content>
      <categories>
        <category>å‰ç«¯å­¦ä¹ ç¬”è®°</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>Axios</tag>
      </tags>
  </entry>
  <entry>
    <title>09_vue-cli</title>
    <url>/posts/e587033e.html</url>
    <content><![CDATA[<h3 id="1-ä»€ä¹ˆæ˜¯-vue-cli"><a href="#1-ä»€ä¹ˆæ˜¯-vue-cli" class="headerlink" title="1. ä»€ä¹ˆæ˜¯ vue-cli"></a>1. ä»€ä¹ˆæ˜¯ vue-cli</h3><p>vue-cli å®˜æ–¹æä¾›çš„ä¸€ä¸ªè„šæ‰‹æ¶ï¼Œç”¨äºå¿«é€Ÿç”Ÿæˆä¸€ä¸ª vue çš„é¡¹ç›®æ¨¡æ¿ï¼Œé¢„å…ˆå®šä¹‰å¥½çš„ç›®å½•ç»“æ„åŠåŸºç¡€ä»£ç ï¼Œå°±å¥½æ¯”åœ¨åˆ›å»º Maven é¡¹ç›®æ—¶å¯ä»¥é€‰æ‹©åˆ›å»ºä¸€ä¸ªéª¨æ¶é¡¹ç›®ï¼Œè¿™ä¸ªéª¨æ¶é¡¹ç›®å°±æ˜¯è„šæ‰‹æ¶ã€‚</p>
<p>ä¸»è¦çš„åŠŸèƒ½ :</p>
<ul>
<li>ç»Ÿä¸€çš„ç›®å½•ç»“æ„</li>
<li>æœ¬åœ°è°ƒè¯•</li>
<li>çƒ­éƒ¨ç½²</li>
<li>å•å…ƒæµ‹è¯•</li>
<li>é›†æˆæ‰“åŒ…ä¸Šçº¿</li>
</ul>
<a id="more"></a>



<h3 id="2-éœ€è¦çš„ç¯å¢ƒ"><a href="#2-éœ€è¦çš„ç¯å¢ƒ" class="headerlink" title="2. éœ€è¦çš„ç¯å¢ƒ"></a>2. éœ€è¦çš„ç¯å¢ƒ</h3><ol>
<li><p>Node.js</p>
<blockquote>
<p>ä¸­æ–‡å®˜ç½‘ï¼š<a href="http://nodejs.cn/">http://nodejs.cn/</a></p>
<p>è‹±æ–‡å®˜ç½‘ï¼š<a href="https://nodejs.org/en/">https://nodejs.org/en/</a></p>
</blockquote>
</li>
<li><p>Gitï¼ˆéå¿…é¡»ï¼Œä½†æ˜¯å“ªä¸ªç¨‹åºå‘˜ç”µè„‘é‡Œæ²¡æœ‰ Git å‘¢ï¼‰</p>
<blockquote>
<p>å®˜ç½‘ï¼š<a href="https://git-scm.com/downloads">https://git-scm.com/downloads</a></p>
</blockquote>
</li>
<li><p>å®‰è£… vue-cli</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å…ˆå®‰è£… cnmp</span></span><br><span class="line">npm install cnpm -g</span><br><span class="line">npm install vue-cli -g # æ–°ç‰ˆç”¨ npm install -g @vue/cli</span><br><span class="line"><span class="meta">#</span><span class="bash"> æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹å¯ä»¥åŸºäºå“ªäº›æ¨¡æ¿åˆ›å»ºvueåº”ç”¨ç¨‹åºï¼Œé€šå¸¸æˆ‘ä»¬é€‰æ‹©webpack</span></span><br><span class="line">vue list</span><br></pre></td></tr></table></figure>





</li>
</ol>
<h3 id="3-ç¬¬ä¸€ä¸ª-vue-cli-ç¨‹åº"><a href="#3-ç¬¬ä¸€ä¸ª-vue-cli-ç¨‹åº" class="headerlink" title="3. ç¬¬ä¸€ä¸ª vue-cli ç¨‹åº"></a>3. ç¬¬ä¸€ä¸ª vue-cli ç¨‹åº</h3><ol>
<li><p>æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ vue-cli</p>
</li>
<li><p>åœ¨æ–‡ä»¶å¤¹ä¸‹æ‰“å¼€ Git Bash</p>
</li>
<li><p>åˆ›å»ºä¸€ä¸ªåŸºäº webpack æ¨¡æ¿çš„ vue åº”ç”¨ç¨‹åº</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> myvue æ˜¯é¡¹ç›®å</span></span><br><span class="line">vue init webpack myvue # æ–°ç‰ˆç”¨ vue create myvue</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¸€è·¯éƒ½é€‰æ‹©no</span></span><br></pre></td></tr></table></figure>

<p><strong>è¯´æ˜ï¼š</strong></p>
<ul>
<li>Project nameï¼šé¡¹ç›®åç§°ï¼Œé»˜è®¤å›è½¦</li>
<li>Project descriptionï¼šé¡¹ç›®æè¿°ï¼Œé»˜è®¤å›è½¦</li>
<li>Authorï¼šé¡¹ç›®ä½œè€…ï¼Œé»˜è®¤å›è½¦</li>
<li>Install vue-routerï¼šæ˜¯å¦å®‰è£… vue-routerï¼Œé€‰æ‹© n ä¸å®‰è£…ï¼ˆåæœŸéœ€è¦å†æ‰‹åŠ¨æ·»åŠ ï¼‰ </li>
<li>Use ESLint to lint your codeï¼šæ˜¯å¦ä½¿ç”¨ ESLint åšä»£ç æ£€æŸ¥ï¼Œé€‰æ‹© n ä¸å®‰è£…ï¼ˆåæœŸéœ€è¦å†æ‰‹åŠ¨æ·» åŠ ï¼‰</li>
<li>Set up unit testsï¼šå•å…ƒæµ‹è¯•ç›¸å…³ï¼Œé€‰æ‹© n ä¸å®‰è£…ï¼ˆåæœŸéœ€è¦å†æ‰‹åŠ¨æ·»åŠ ï¼‰ </li>
<li>Setup e2e tests with Nightwatchï¼šå•å…ƒæµ‹è¯•ç›¸å…³ï¼Œé€‰æ‹© n ä¸å®‰è£…ï¼ˆåæœŸéœ€è¦å†æ‰‹åŠ¨æ·»åŠ ï¼‰ </li>
<li>Should we run npm install for you after the project has been createdï¼šåˆ›å»ºå®Œæˆåç›´æ¥åˆå§‹åŒ–ï¼Œé€‰æ‹© nï¼Œæ‰‹åŠ¨æ‰§è¡Œ</li>
</ul>
</li>
<li><p>åˆå§‹åŒ–å¹¶è¿è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd myvue </span><br><span class="line">npm install </span><br><span class="line">npm run dev # æ–°ç‰ˆç”¨ npm run serve</span><br></pre></td></tr></table></figure>
</li>
<li><p>è®¿é—® localhost:8080</p>




</li>
</ol>
<h3 id="4-é¡¹ç›®ç»“æ„"><a href="#4-é¡¹ç›®ç»“æ„" class="headerlink" title="4. é¡¹ç›®ç»“æ„"></a>4. é¡¹ç›®ç»“æ„</h3><img src="/posts/e587033e/image-20200815163752607.png" class>

<ul>
<li><p>build å’Œ configï¼šWebPack é…ç½®æ–‡ä»¶ </p>
</li>
<li><p>node_modulesï¼šç”¨äºå­˜æ”¾ npm install å®‰è£…çš„ä¾èµ–æ–‡ä»¶ </p>
</li>
<li><p>srcï¼š é¡¹ç›®æºç ç›®å½• </p>
</li>
<li><p>staticï¼šé™æ€èµ„æºæ–‡ä»¶ </p>
</li>
<li><p>.babelrcï¼šBabel é…ç½®æ–‡ä»¶ï¼Œä¸»è¦ä½œç”¨æ˜¯å°† ES6 è½¬æ¢ä¸º ES5 </p>
</li>
<li><p>.editorconfigï¼šç¼–è¾‘å™¨é…ç½® </p>
</li>
<li><p>eslintignoreï¼šéœ€è¦å¿½ç•¥çš„è¯­æ³•æ£€æŸ¥é…ç½®æ–‡ä»¶ </p>
</li>
<li><p>.gitignoreï¼šgit å¿½ç•¥çš„é…ç½®æ–‡ä»¶ </p>
</li>
<li><p>.postcssrc.jsï¼šcss ç›¸å…³é…ç½®æ–‡ä»¶ï¼Œå…¶ä¸­å†…éƒ¨çš„ module.exports æ˜¯ NodeJS æ¨¡å—åŒ–è¯­æ³• </p>
</li>
<li><p>index.htmlï¼šé¦–é¡µï¼Œä»…ä½œä¸ºæ¨¡æ¿é¡µï¼Œå®é™…å¼€å‘æ—¶ä¸ä½¿ç”¨ </p>
</li>
<li><p>package.jsonï¼šé¡¹ç›®çš„é…ç½®æ–‡ä»¶ </p>
<ul>
<li>nameï¼šé¡¹ç›®åç§° </li>
<li>versionï¼šé¡¹ç›®ç‰ˆæœ¬</li>
<li>descriptionï¼šé¡¹ç›®æè¿° </li>
<li>authorï¼šé¡¹ç›®ä½œè€… </li>
<li>scriptsï¼šå°è£…å¸¸ç”¨å‘½ä»¤ </li>
<li>dependenciesï¼šç”Ÿäº§ç¯å¢ƒä¾èµ– </li>
<li>devDependenciesï¼šå¼€å‘ç¯å¢ƒä¾èµ–</li>
</ul>
</li>
</ul>
<h4 id="4-1-src-ç›®å½•"><a href="#4-1-src-ç›®å½•" class="headerlink" title="4.1 src ç›®å½•"></a>4.1 src ç›®å½•</h4><p>é¡¹ç›®çš„æºç ç›®å½•ï¼Œæ‰€æœ‰çš„ä»£ç éƒ½åœ¨è¿™é‡Œå†™ï¼Œåˆšæ‰é‚£ä¸ªé¡µé¢çš„ä»£ç å°±åœ¨ App.vue æ–‡ä»¶ä¸­</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class="line">    &lt;img src&#x3D;&quot;.&#x2F;assets&#x2F;logo.png&quot;&gt;</span><br><span class="line">    &lt;HelloWorld&#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import HelloWorld from &#39;.&#x2F;components&#x2F;HelloWorld&#39;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#39;App&#39;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    HelloWorld</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">#app &#123;</span><br><span class="line">  font-family: &#39;Avenir&#39;, Helvetica, Arial, sans-serif;</span><br><span class="line">  -webkit-font-smoothing: antialiased;</span><br><span class="line">  -moz-osx-font-smoothing: grayscale;</span><br><span class="line">  text-align: center;</span><br><span class="line">  color: #2c3e50;</span><br><span class="line">  margin-top: 60px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>



<h4 id="4-2-main-js"><a href="#4-2-main-js" class="headerlink" title="4.2 main.js"></a>4.2 main.js</h4><p>é¡¹ç›®çš„å…¥å£æ–‡ä»¶</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// The Vue build version to load with the `import` command</span></span><br><span class="line"><span class="comment">// (runtime-only or standalone) has been set in webpack.base.conf with an alias.</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* eslint-disable no-new */</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  components: &#123; App &#125;,</span><br><span class="line">  template: <span class="string">&#x27;&lt;App/&gt;&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li><code>import Vue from &#39;vue&#39;</code>ï¼šES6 å†™æ³•ï¼Œä¼šè¢«è½¬æ¢æˆ<code>require(&quot;vue&quot;);</code> ï¼ˆrequire æ˜¯ NodeJS æä¾› çš„æ¨¡å—åŠ è½½å™¨ï¼‰ </li>
<li><code>import App from &#39;./App&#39;</code>ï¼šæ„æ€åŒä¸Šï¼Œä½†æ˜¯æŒ‡å®šäº†æŸ¥æ‰¾è·¯å¾„ï¼Œ./ ä¸ºå½“å‰ç›®å½• </li>
<li><code>Vue.config.productionTip = false</code>ï¼šå…³é—­æµè§ˆå™¨æ§åˆ¶å°å…³äºç¯å¢ƒçš„ç›¸å…³æç¤º </li>
<li><code>new Vue(&#123;...&#125;)</code>ï¼šå®ä¾‹åŒ– Vue <ul>
<li><code>el: &#39;#app&#39;</code>ï¼šæŸ¥æ‰¾ index.html ä¸­ id ä¸º app çš„å…ƒç´  </li>
<li><code>template: &#39;&#39;</code>ï¼šæ¨¡æ¿ï¼Œä¼šå°† index.html ä¸­ æ›¿æ¢ä¸º<code>components: &#123; App &#125;</code></li>
<li><code>components: &#123; App &#125;</code>ï¼šå¼•å…¥ç»„ä»¶ï¼Œä½¿ç”¨çš„æ˜¯ import App from â€˜./Appâ€™ å®šä¹‰çš„ App ç»„ä»¶</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>å‰ç«¯å­¦ä¹ ç¬”è®°</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>vue-cli</tag>
      </tags>
  </entry>
  <entry>
    <title>10_Webpack å­¦ä¹ </title>
    <url>/posts/c51055b5.html</url>
    <content><![CDATA[<h3 id="1-ä»€ä¹ˆæ˜¯-Webpack"><a href="#1-ä»€ä¹ˆæ˜¯-Webpack" class="headerlink" title="1. ä»€ä¹ˆæ˜¯ Webpack"></a>1. ä»€ä¹ˆæ˜¯ Webpack</h3><p>æœ¬è´¨ä¸Šï¼ŒWebpack æ˜¯ä¸€ä¸ªç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨ï¼ˆmodule bundlerï¼‰ã€‚å½“<br>webpackå¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šé€’å½’åœ°æ„å»ºä¸€ä¸ªä¾èµ–å…³ç³»å›¾ï¼ˆdependency graphï¼‰,å…¶ä¸­åŒ…å«åº”ç”¨ç¨‹åºéœ€è¦çš„æ¯ä¸ªæ¨¡å—,ç„¶åå°†æ‰€æœ‰è¿™äº›æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ª bundleã€‚</p>
<p>Webpack æ˜¯å½“ä¸‹æœ€çƒ­é—¨çš„å‰ç«¯èµ„æºæ¨¡å—åŒ–ç®¡ç†å’Œæ‰“åŒ…å·¥å…·ï¼Œå®ƒå¯ä»¥å°†è®¸å¤šæ¾æ•£è€¦åˆçš„æ¨¡å—æŒ‰ç…§ä¾èµ–å’Œè§„åˆ™æ‰“åŒ…æˆç¬¦åˆç”Ÿäº§ç¯å¢ƒéƒ¨ç½²çš„å‰ç«¯èµ„æºã€‚è¿˜å¯ä»¥å°†æŒ‰éœ€åŠ è½½çš„æ¨¡å—è¿›è¡Œä»£ç åˆ†ç¦»ï¼Œç­‰åˆ°å®é™…éœ€è¦æ—¶å†å¼‚æ­¥åŠ è½½ã€‚é€šè¿‡ loader è½¬æ¢ï¼Œä»»ä½•å½¢å¼çš„èµ„æºéƒ½å¯ä»¥å½“åšæ¨¡å—ï¼Œæ¯”å¦‚CommonsJSã€AMDã€ES6ã€ CSS. JSONã€CoffeeScriptã€ LESSç­‰ã€‚</p>
<h3 id="2-å®‰è£…-Webpck"><a href="#2-å®‰è£…-Webpck" class="headerlink" title="2. å®‰è£… Webpck"></a>2. å®‰è£… Webpck</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install webpack -g</span><br><span class="line">npm install webpack-cli -g</span><br></pre></td></tr></table></figure>

<a id="more"></a>



<h3 id="3-ä½¿ç”¨-webpack"><a href="#3-ä½¿ç”¨-webpack" class="headerlink" title="3. ä½¿ç”¨ webpack"></a>3. ä½¿ç”¨ webpack</h3><ol>
<li><p>åˆ›å»ºé¡¹ç›®</p>
</li>
<li><p>åˆ›å»ºä¸€ä¸ªåä¸º modules çš„ç›®å½•ï¼Œç”¨äºæ”¾ç½® JS æ¨¡å—ç­‰èµ„æºæ–‡ä»¶</p>
</li>
<li><p>åœ¨ modules ä¸‹åˆ›å»ºæ¨¡å—æ–‡ä»¶ï¼Œå¦‚ hello.jsï¼Œç”¨äºç¼–å†™ JS æ¨¡å—ç›¸å…³ä»£ç </p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æš´éœ²ä¸€ä¸ªæ–¹æ³•</span></span><br><span class="line"><span class="built_in">exports</span>.sayHi = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.write(<span class="string">&quot;&lt;h1&gt;Hello, webpack&lt;/h1&gt;&quot;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨ modules ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º main.js çš„å…¥å£æ–‡ä»¶ï¼Œç”¨äºæ‰“åŒ…æ—¶è®¾ç½® entry å±æ€§</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// require å¯¼å…¥ä¸€ä¸ªæ¨¡å—, å°±å¯ä»¥è°ƒç”¨è¿™ä¸ªæ¨¡å—ä¸­çš„æ–¹æ³•äº†</span></span><br><span class="line"><span class="keyword">let</span> hello = <span class="built_in">require</span>(<span class="string">&quot;./hello&quot;</span>);</span><br><span class="line">hello.sayHi();</span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨é¡¹ç›®ç›®å½•ä¸‹åˆ›å»º webpack.config.js é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨ webpack å‘½ä»¤æ‰“åŒ…</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports=&#123;</span><br><span class="line">    entry: <span class="string">&quot;./modules/main.js&quot;</span>,</span><br><span class="line">    output:&#123;</span><br><span class="line">        filename:<span class="string">&quot;./js/bundle.js&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p><strong>æ³¨æ„ï¼Œè¿™é‡Œé‡åˆ°äº†ä¸€ä¸ªå¤§å‘ï¼š</strong></p>
<p>æ‰§è¡Œ<code>webpack</code>å‘½ä»¤çš„æ—¶å€™æŠ¥é”™äº†</p>
<blockquote>
<p>ERROR in Entry module not found: Error: Canâ€™t resolve â€˜./srcâ€™ in â€˜E:\Proj_Vue\Vue_Study\webpack-studyâ€™</p>
</blockquote>
<p>ç™¾åº¦äº†ä¸€ä¸‹ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªçœ‹èµ·æ¥é è°±çš„è§£å†³æ–¹æ³•ï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰çœ‹æ‡‚</p>
<blockquote>
<p><a href="https://www.cnblogs.com/windowsxpxp/p/12950466.html">https://www.cnblogs.com/windowsxpxp/p/12950466.html</a></p>
</blockquote>
<p>ç‹‚ç¥åœ¨ç¾¤é‡Œçš„ç¬”è®°ä¸­å¹¶æ²¡æœ‰å…³äº webpack å­¦ä¹ çš„å¯¹åº”ç« èŠ‚ï¼Œä½†æ˜¯bç«™çš„è§†é¢‘æœ‰è¿™ä¸ªæ•™ç¨‹ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯å› ä¸ºç‰ˆæœ¬æ›´æ–°ä¹‹åï¼Œç‹‚ç¥åˆ é™¤äº†å…³äºè¿™æ–¹é¢çš„æ•™å­¦ã€‚</p>
<p>åæ­£è¿™ä¸ªåšå®¢å…ˆæ”¾åœ¨è¿™é‡Œï¼Œåé¢å¯èƒ½å¹¶ä¸ä¼šç”¨åˆ°ã€‚</p>
<p>ï¼ˆæˆ‘å­¦å‰ç«¯å­¦åˆ°è¦å‘ç–¯äº†ï¼‰</p>
]]></content>
      <categories>
        <category>å‰ç«¯å­¦ä¹ ç¬”è®°</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>Webpack</tag>
      </tags>
  </entry>
  <entry>
    <title>11_è·¯ç”±</title>
    <url>/posts/ba7441b.html</url>
    <content><![CDATA[<h3 id="1-è¯´æ˜"><a href="#1-è¯´æ˜" class="headerlink" title="1. è¯´æ˜"></a>1. è¯´æ˜</h3><p>Vue Router æ˜¯ Vue.js å®˜æ–¹çš„è·¯ç”±ç®¡ç†å™¨ã€‚å®ƒå’Œ Vue.js çš„æ ¸å¿ƒæ·±åº¦é›†æˆï¼Œè®©æ„å»ºå•é¡µé¢åº”ç”¨å˜å¾—æ˜“å¦‚åæŒã€‚åŒ…å«çš„åŠŸèƒ½æœ‰ï¼š</p>
<ul>
<li>åµŒå¥—çš„è·¯ç”±/è§†å›¾è¡¨</li>
<li>æ¨¡å—åŒ–çš„ã€åŸºäºç»„ä»¶çš„è·¯ç”±é…ç½®</li>
<li>è·¯ç”±å‚æ•°ã€æŸ¥è¯¢ã€é€šé…ç¬¦</li>
<li>åŸºäº Vue.js è¿‡æ¸¡ç³»ç»Ÿçš„è§†å›¾è¿‡æ¸¡æ•ˆæœ</li>
<li>ç»†ç²’åº¦çš„å¯¼èˆªæ§åˆ¶</li>
<li>å¸¦æœ‰è‡ªåŠ¨æ¿€æ´»çš„ CSS class çš„é“¾æ¥</li>
<li>HTML5 å†å²æ¨¡å¼æˆ– hash æ¨¡å¼ï¼Œåœ¨ IE9 ä¸­è‡ªåŠ¨é™çº§</li>
<li>è‡ªå®šä¹‰çš„æ»šåŠ¨æ¡è¡Œä¸º</li>
</ul>
<h3 id="2-å®‰è£…"><a href="#2-å®‰è£…" class="headerlink" title="2. å®‰è£…"></a>2. å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install vue-router --save-dev</span><br></pre></td></tr></table></figure>

<p>å¦‚æœåœ¨ä¸€ä¸ªæ¨¡å—åŒ–å·¥ç¨‹ä¸­ä½¿ç”¨å®ƒï¼Œå¿…é¡»è¦é€šè¿‡<code>Vue.use()</code>æ˜ç¡®åœ°å®‰è£…è·¯ç”±åŠŸèƒ½ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="comment">// æ˜¾ç¤ºçš„ä½¿ç”¨</span></span><br><span class="line">vue.use(VueRouter);</span><br></pre></td></tr></table></figure>

<a id="more"></a>



<h3 id="3-æµ‹è¯•"><a href="#3-æµ‹è¯•" class="headerlink" title="3. æµ‹è¯•"></a>3. æµ‹è¯•</h3><ol>
<li><p>åœ¨ components ç›®å½•ä¸‹è‡ªå®šä¹‰ä¸€ä¸ªç»„ä»¶ Content.vueï¼Œè¡¨ç¤ºå†…å®¹é¡µ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;å†…å®¹é¡µ&lt;&#x2F;h1&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;Content&quot;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å†å®šä¹‰ä¸€ä¸ªMain.vueï¼Œè¡¨ç¤ºé¦–é¡µ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;é¦–é¡µ&lt;&#x2F;h1&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;Main&quot;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®‰è£…è·¯ç”±ï¼Œåœ¨ src ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶å¤¹ router ç”¨æ¥å­˜æ”¾è·¯ç”±ã€‚æ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ index.js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">// å¯¼å…¥è·¯ç”±æ’ä»¶</span></span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="comment">// å¯¼å…¥è‡ªå®šä¹‰çš„ç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> Content <span class="keyword">from</span> <span class="string">&quot;../components/Content&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> Main <span class="keyword">from</span> <span class="string">&quot;../components/Main&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®‰è£…è·¯ç”±</span></span><br><span class="line">Vue.use(Router);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é…ç½®å¯¼å‡ºè·¯ç”±</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">// è·¯ç”±è·¯å¾„</span></span><br><span class="line">      path: <span class="string">&#x27;/content&#x27;</span>,</span><br><span class="line">      <span class="comment">// è·¯ç”±åç§°</span></span><br><span class="line">      name:<span class="string">&#x27;content&#x27;</span>,</span><br><span class="line">      <span class="comment">// è·³è½¬çš„ç»„ä»¶</span></span><br><span class="line">      component: Content</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&#x27;/main&#x27;</span>,</span><br><span class="line">      name:<span class="string">&#x27;main&#x27;</span>,</span><br><span class="line">      component: Main</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨ main.js ä¸­é…ç½®è·¯ç”±</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span></span><br><span class="line"><span class="comment">// å¯¼å…¥åˆšæ‰åˆ›å»ºçš„è·¯ç”±ç›®å½•, ä¼šè‡ªåŠ¨å¯¼å…¥é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="comment">// é…ç½®è·¯ç”±</span></span><br><span class="line">  router,</span><br><span class="line">  components: &#123;App&#125;,</span><br><span class="line">  template: <span class="string">&#x27;&lt;App/&gt;&#x27;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨ App.vue ä¸­ä½¿ç”¨è·¯ç”±</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class="line">    &lt;h1&gt;Vue-router&lt;&#x2F;h1&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">      router-link: é»˜è®¤ä¼šè¢«æ¸²æŸ“æˆä¸€ä¸ª&lt;a&gt;æ ‡ç­¾, </span><br><span class="line">        toç›¸å½“äºhref, æŒ‡å‘é…ç½®æ–‡ä»¶é‡Œçš„è·¯ç”±åç§°, ç›¸å½“äºè¯·æ±‚</span><br><span class="line">      router-view: ç”¨äºæ¸²æŸ“è·¯ç”±åŒ¹é…åˆ°çš„ç»„ä»¶</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;router-link to&#x3D;&quot;&#x2F;main&quot;&gt;é¦–é¡µ&lt;&#x2F;router-link&gt;</span><br><span class="line">    &lt;router-link to&#x3D;&quot;&#x2F;content&quot;&gt;å†…å®¹é¡µ&lt;&#x2F;router-link&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;&#x2F;router-view&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¯åŠ¨<code>npm run dev</code></p>
</li>
</ol>
]]></content>
      <categories>
        <category>å‰ç«¯å­¦ä¹ ç¬”è®°</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>vue-router</tag>
      </tags>
  </entry>
  <entry>
    <title>12_Element-ui</title>
    <url>/posts/bab42f0d.html</url>
    <content><![CDATA[<h3 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1. ç®€ä»‹"></a>1. ç®€ä»‹</h3><p>Element-ui æ˜¯é¥¿äº†ä¹ˆå‰ç«¯å‡ºå“çš„åŸºäº Vue.jsçš„ åå°ç»„ä»¶åº“ï¼Œæ–¹ä¾¿ç¨‹åºå‘˜è¿›è¡Œé¡µé¢å¿«é€Ÿå¸ƒå±€å’Œæ„å»º</p>
<blockquote>
<p>å®˜ç½‘ï¼š<a href="http://element-cn.eleme.io/#/zh-CN">http://element-cn.eleme.io/#/zh-CN</a></p>
</blockquote>
<a id="more"></a>



<h3 id="2-å…¥é—¨"><a href="#2-å…¥é—¨" class="headerlink" title="2. å…¥é—¨"></a>2. å…¥é—¨</h3><p><strong>é¡ºä¾¿æ‹ä¸€ä¸‹æ–°å»ºé¡¹ç›®çš„æ­¥éª¤</strong></p>
<ol>
<li><p>æ–°å»ºä¸€ä¸ªé¡¹ç›®<code>vue create hello-element-ui</code></p>
</li>
<li><p>npm å®‰è£…ä¾èµ–</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> è¿›å…¥é¡¹ç›®ç›®å½•</span></span><br><span class="line">cd hello-element-ui</span><br><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…vue-router</span></span><br><span class="line">npm i vue-router -D</span><br><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…element-ui</span></span><br><span class="line">npm i element-ui -S</span><br><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…ä¾èµ–</span></span><br><span class="line">npm install</span><br><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£… SASS åŠ è½½å™¨</span></span><br><span class="line">cnpm i sass-loader node-sass -D</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ æ‰ä¸éœ€è¦çš„æ–‡ä»¶å’Œä»£ç </p>
</li>
<li><p>æ–°å»ºæ–‡ä»¶å¤¹ routerï¼Œviews ï¼Œstatic</p>


<p><strong>æ³¨æ„ï¼š</strong></p>
<ul>
<li><p><strong>static æ”¾ä¸ä¼šå˜åŠ¨çš„æ–‡ä»¶</strong></p>
<p>static ç›®å½•ä¸‹çš„æ–‡ä»¶å¹¶ä¸ä¼šè¢« Webpack å¤„ç†ï¼šå®ƒä»¬ä¼šç›´æ¥è¢«å¤åˆ¶åˆ°æœ€ç»ˆçš„æ‰“åŒ…ç›®å½•ï¼ˆé»˜è®¤æ˜¯dist/staticï¼‰ä¸‹ã€‚å¿…é¡»ä½¿ç”¨ç»å¯¹è·¯å¾„å¼•ç”¨è¿™äº›æ–‡ä»¶ï¼Œè¿™æ˜¯é€šè¿‡åœ¨ config.js æ–‡ä»¶ä¸­çš„ <code>build.assetsPublicPath</code> å’Œ <code>build.assetsSubDirectory</code> è¿æ¥æ¥ç¡®å®šçš„ã€‚</p>
</li>
</ul>
<ul>
<li><p><strong>assets æ”¾å¯èƒ½ä¼šå˜åŠ¨çš„æ–‡ä»¶</strong></p>
<p>assetsç›®å½•ä¸­çš„æ–‡ä»¶ä¼šè¢«webpackå¤„ç†è§£æä¸ºæ¨¡å—ä¾èµ–ï¼Œåªæ”¯æŒç›¸å¯¹è·¯å¾„å½¢å¼ã€‚ä¾‹å¦‚ï¼Œåœ¨ <code>&lt;img src=&quot;./logo.png&quot;&gt;</code>å’Œ <code>background: url(./logo.png)</code>ä¸­ï¼Œ<code>./logo.png</code>æ˜¯ç›¸å¯¹çš„èµ„æºè·¯å¾„ï¼Œå°†ç”±Webpackè§£æä¸ºæ¨¡å—ä¾èµ–ã€‚<br>å› ä¸º logo.png ä¸æ˜¯ JavaScriptï¼Œå½“è¢«è§†ä¸ºæ¨¡å—ä¾èµ–æ—¶ï¼Œéœ€è¦ä½¿ç”¨ url-loader å’Œ file-loaderå¤„ç†å®ƒã€‚vue-cli çš„ webpack è„šæ‰‹æ¶å·²ç»é…ç½®äº†è¿™äº› loaderï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¼•ç”¨ã€‚</p>
</li>
</ul>
</li>
<li><p>æ–°å»º Main.vueï¼ŒLogin.vue</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;el-form ref&#x3D;&quot;loginForm&quot; :model&#x3D;&quot;form&quot; :rules&#x3D;&quot;rules&quot; label-width&#x3D;&quot;80px&quot; class&#x3D;&quot;logon-box&quot;&gt;</span><br><span class="line">      &lt;h3 class&#x3D;&quot;login-title&quot;&gt;æ¬¢è¿ç™»é™†&lt;&#x2F;h3&gt;</span><br><span class="line">      &lt;el-form-item label&#x3D;&quot;è´¦å·&quot; prop&#x3D;&quot;username&quot;&gt;</span><br><span class="line">        &lt;el-input type&#x3D;&quot;text&quot; placeholder&#x3D;&quot;è¯·è¾“å…¥è´¦å·&quot; v-model&#x3D;&quot;form.username&quot;&gt;&lt;&#x2F;el-input&gt;</span><br><span class="line">      &lt;&#x2F;el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label&#x3D;&quot;å¯†ç &quot; prop&#x3D;&quot;password&quot;&gt;</span><br><span class="line">        &lt;el-input type&#x3D;&quot;password&quot; placeholder&#x3D;&quot;è¯·è¾“å…¥å¯†ç &quot; v-model&#x3D;&quot;form.password&quot;&gt;&lt;&#x2F;el-input&gt;</span><br><span class="line">      &lt;&#x2F;el-form-item&gt;</span><br><span class="line">      &lt;el-form-item&gt;</span><br><span class="line">        &lt;el-button type&#x3D;&quot;primary&quot; @click&#x3D;&quot;onSubmit(&#39;loginForm&#39;)&quot;&gt;ç™»å½•&lt;&#x2F;el-button&gt;</span><br><span class="line">        &lt;el-button&gt;å–æ¶ˆ&lt;&#x2F;el-button&gt;</span><br><span class="line">      &lt;&#x2F;el-form-item&gt;</span><br><span class="line">    &lt;&#x2F;el-form&gt;</span><br><span class="line"></span><br><span class="line">    &lt;el-dialog</span><br><span class="line">        title&#x3D;&quot;æ¸©é¦¨æç¤º&quot;</span><br><span class="line">        :visible. sync&#x3D;&quot;dialogVisible&quot;</span><br><span class="line">        width&#x3D;&quot;30%&quot;</span><br><span class="line">        :before-close&#x3D;&quot;handleClose&quot;&gt;</span><br><span class="line">      &lt;span&gt;è¯·è¾“å…¥è´¦å·å’Œå¯†ç &lt;&#x2F;span&gt;</span><br><span class="line">      &lt;span slot&#x3D;&quot;footer&quot; class&#x3D;&quot;dialog- footer&quot;&gt;</span><br><span class="line">        &lt;el-button type&#x3D;&quot; primary&quot; @click&#x3D;&quot;dialogVisible &#x3D; false&quot;&gt;ç¡® å®š&lt;&#x2F;el-button&gt;</span><br><span class="line">      &lt;&#x2F;span&gt;</span><br><span class="line">    &lt;&#x2F;el-dialog&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;Login&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      form: &#123;</span><br><span class="line">        username: &#39;&#39;,</span><br><span class="line">        password: &#39;&#39;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#x2F;&#x2F; è¡¨å•éªŒè¯ï¼Œéœ€è¦åœ¨el-form-itemå…ƒç´ ä¸­å¢åŠ propå±æ€§</span><br><span class="line">      rules: &#123;</span><br><span class="line">        username: [</span><br><span class="line">          &#123;required: true, message: &#39;è´¦å·ä¸å¯ä¸ºç©º&#39;, trigger: &#39;blur&#39;&#125;</span><br><span class="line">        ],</span><br><span class="line">        password: [</span><br><span class="line">          &#123;required: true, message: &#39; å¯†ç ä¸å¯ä¸ºç©º&#39;, trigger: &#39;blur&#39;&#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#x2F;&#x2F;å¯¹è¯æ¡†æ˜¾ç¤ºå’Œéšè—</span><br><span class="line">      dialogVisible: false</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    onSubmit(formName) &#123;</span><br><span class="line">      &#x2F;&#x2F; ä¸ºè¡¨å•ç»‘å®šéªŒè¯åŠŸèƒ½</span><br><span class="line">      this.$refs [formName].validate((valid) &#x3D;&gt; &#123;</span><br><span class="line">        if (valid) &#123;</span><br><span class="line">          &#x2F;&#x2F; ä½¿ç”¨vue-routerè·¯ç”±åˆ°æŒ‡å®šé¡µé¢ï¼Œè¯¥æ–¹å¼ç§°ä¹‹ä¸ºç¼–ç¨‹å¼å¯¼èˆª</span><br><span class="line">          this.$router.push(&quot;&#x2F;main&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          this.dialogVisible &#x3D; true;</span><br><span class="line">          return false;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;</span><br><span class="line">  .login-box &#123;</span><br><span class="line">    border: 1px solid #DCDFE6;</span><br><span class="line">    width: 350px;</span><br><span class="line">    margin: 180px auto;</span><br><span class="line">    padding: 35px 35px 15px 35px;</span><br><span class="line">    border-radius: 5px;</span><br><span class="line">    -webkit-border-radius: 5px;</span><br><span class="line">    -moz-border-radius: 5px;</span><br><span class="line">    box-shadow:0 0 25px #909399;</span><br><span class="line">  &#125;</span><br><span class="line">  .login-title &#123;</span><br><span class="line">    text-align: center;</span><br><span class="line">    margin:0 auto 40px auto;</span><br><span class="line">    color: #303133;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>é…ç½®è·¯ç”± index.js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Main <span class="keyword">from</span> <span class="string">&quot;@/views/Main&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> Login <span class="keyword">from</span> <span class="string">&quot;@/views/Login&quot;</span>;</span><br><span class="line"></span><br><span class="line">Vue.use(Router);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">    routes: [</span><br><span class="line">        &#123;</span><br><span class="line">            path: <span class="string">&#x27;/main&#x27;</span>,</span><br><span class="line">            component: Main</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            path: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">            component: Login</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>é…ç½® main.js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;./router&quot;</span></span><br><span class="line"><span class="keyword">import</span> Element <span class="keyword">from</span> <span class="string">&quot;element-ui&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line">Vue.use(Element)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">&quot;#app&quot;</span>,</span><br><span class="line">    router,</span><br><span class="line">    render: <span class="function"><span class="params">h</span> =&gt;</span> h(App) <span class="comment">//ElementUI</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿®æ”¹ App.vue</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;&#x2F;router-view&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#39;App&#39;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>è¿è¡Œ<code>npm run serve</code></p>
</li>
</ol>
<h3 id="3-æ³¨æ„"><a href="#3-æ³¨æ„" class="headerlink" title="3. æ³¨æ„"></a>3. æ³¨æ„</h3><p>å¹¶æ²¡æœ‰æˆåŠŸï¼ŒæŠ¥é”™å†…å®¹ï¼š</p>
<blockquote>
<p>The value for a v-bind expression cannot be empty. Found in â€œv-bind:visible.â€</p>
</blockquote>
<p>ç™¾åº¦æ— æœï¼Œå¼¹å¹•å’Œè¯„è®ºåŒºä¹Ÿæ²¡æœ‰ç›¸å…³åé¦ˆï¼Œè€Œä¸”å¼¹å¹•ä¹Ÿå‡ºç°äº†å„ç§å„æ ·çš„é—®é¢˜</p>
<p>æœ‰ä¸€è¯´ä¸€ï¼Œç‹‚ç¥å‰ç«¯è¿™äº›è®²çš„ç¡®å®ä¸æ¸…æ™°ï¼Œè€Œä¸”ç¬”è®°å’Œè§†é¢‘çš„å¯¹åº”å¾ˆå·®ï¼Œä»–ä¹‹å‰çš„åšå®¢ä¹Ÿæ‰¾ä¸åˆ°ï¼Œå…¬ä¼—å·ä¹Ÿæ²¡æœ‰ç›¸å…³æ–‡ç« ã€‚</p>
<p>è®²çš„å¤ªä¹±äº†ï¼Œä¸å¦‚çœ‹ vue å®˜ç½‘çš„æ–‡æ¡£å­¦ä¹ ï¼Œå°±åˆ°è¿™é‡Œäº†ï¼Œå»å­¦ Spring Boot äº†ã€‚</p>
]]></content>
      <categories>
        <category>å‰ç«¯å­¦ä¹ ç¬”è®°</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>ç¯å¢ƒæ­å»º</tag>
        <tag>Vue</tag>
        <tag>element-ui</tag>
      </tags>
  </entry>
  <entry>
    <title>é…ç½®åœ°ç‹±</title>
    <url>/posts/38256918.html</url>
    <content><![CDATA[<h3 id="1-åˆ›å»ºä¸€ä¸ªå­˜æ”¾ä¹¦ç±æ•°æ®çš„æ•°æ®åº“è¡¨"><a href="#1-åˆ›å»ºä¸€ä¸ªå­˜æ”¾ä¹¦ç±æ•°æ®çš„æ•°æ®åº“è¡¨" class="headerlink" title="1. åˆ›å»ºä¸€ä¸ªå­˜æ”¾ä¹¦ç±æ•°æ®çš„æ•°æ®åº“è¡¨"></a>1. åˆ›å»ºä¸€ä¸ªå­˜æ”¾ä¹¦ç±æ•°æ®çš„æ•°æ®åº“è¡¨</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> <span class="string">`ssmbuild`</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">USE</span> <span class="string">`ssmbuild`</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`books`</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`books`</span> (</span><br><span class="line">  <span class="string">`bookID`</span> <span class="built_in">INT</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">&#x27;ä¹¦id&#x27;</span>,</span><br><span class="line">  <span class="string">`bookName`</span> <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;ä¹¦å&#x27;</span>,</span><br><span class="line">  <span class="string">`bookCounts`</span> <span class="built_in">INT</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;æ•°é‡&#x27;</span>,</span><br><span class="line">  <span class="string">`detail`</span> <span class="built_in">VARCHAR</span>(<span class="number">200</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;æè¿°&#x27;</span>,</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`bookID`</span> (<span class="string">`bookID`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">INNODB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">INSERT</span>  <span class="keyword">INTO</span> <span class="string">`books`</span>(<span class="string">`bookID`</span>,<span class="string">`bookName`</span>,<span class="string">`bookCounts`</span>,<span class="string">`detail`</span>)<span class="keyword">VALUES</span> </span><br><span class="line">(<span class="number">1</span>,<span class="string">&#x27;Java&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;ä»å…¥é—¨åˆ°æ”¾å¼ƒ&#x27;</span>),</span><br><span class="line">(<span class="number">2</span>,<span class="string">&#x27;MySQL&#x27;</span>,<span class="number">10</span>,<span class="string">&#x27;ä»åˆ åº“åˆ°è·‘è·¯&#x27;</span>),</span><br><span class="line">(<span class="number">3</span>,<span class="string">&#x27;Linux&#x27;</span>,<span class="number">5</span>,<span class="string">&#x27;ä»è¿›é—¨åˆ°è¿›ç‰¢&#x27;</span>);</span><br></pre></td></tr></table></figure>

<a id="more"></a>



<h3 id="2-åŸºæœ¬ç¯å¢ƒæ­å»ºï¼ˆé€šç”¨ï¼‰"><a href="#2-åŸºæœ¬ç¯å¢ƒæ­å»ºï¼ˆé€šç”¨ï¼‰" class="headerlink" title="2. åŸºæœ¬ç¯å¢ƒæ­å»ºï¼ˆé€šç”¨ï¼‰"></a>2. åŸºæœ¬ç¯å¢ƒæ­å»ºï¼ˆé€šç”¨ï¼‰</h3><ol>
<li><p>æ–°å»ºä¸€ä¸ªæ™®é€š Maven é¡¹ç›®ï¼Œæ·»åŠ  web æ”¯æŒ</p>
</li>
<li><p>ç¼–å†™<code>pom.xml</code></p>
<ul>
<li><p>å¯¼å…¥ç›¸å…³ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- JUnit --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ•°æ®åº“é©±åŠ¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.49<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ•°æ®åº“è¿æ¥æ±  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mchange<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.5.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Servletå’ŒJSP --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Mybatis --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Spring --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Lombok --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Fastjson --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.73<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>è§£å†³èµ„æºå¯¼å‡ºé—®é¢˜</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è§£å†³èµ„æºå¯¼å‡ºé—®é¢˜ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>åœ¨é¡¹ç›®ç»“æ„ â€“&gt; æ„å»ºä¸­åŠ å…¥ lib ç›®å½•åŠæ‰€æœ‰ jar åŒ…</p>
</li>
<li><p>å»ºç«‹åŸºæœ¬ç»“æ„å’Œé…ç½®æ¡†æ¶<strong>ï¼ˆjava æ–‡ä»¶å¤¹å»ºåŒ…ï¼Œresources æ–‡ä»¶å¤¹å»ºé…ç½®æ–‡ä»¶ï¼‰</strong></p>
<ul>
<li><p>å®ä½“ç±»<code>com.horsen.model</code></p>
</li>
<li><p>Daoæ¥å£<code>com.horsen.mapper</code></p>
</li>
<li><p>æœåŠ¡å±‚<code>com.horsen.service</code></p>
</li>
<li><p>æ§åˆ¶å±‚<code>com.horsen.controller</code></p>
</li>
<li><p>è¿‡æ»¤å™¨<code>com.horsen.filter</code></p>
</li>
<li><p>å·¥å…·ç±»<code>com.horsen.utils</code></p>
</li>
<li><p>Mybatis æ ¸å¿ƒé…ç½®æ–‡ä»¶<code>mybatis-config.xml</code></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Spring æ ¸å¿ƒé…ç½®æ–‡ä»¶<code>applicationContext.xml</code></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
</li>
</ol>
<h3 id="3-Mybatis-å±‚ç¼–å†™"><a href="#3-Mybatis-å±‚ç¼–å†™" class="headerlink" title="3. Mybatis å±‚ç¼–å†™"></a>3. Mybatis å±‚ç¼–å†™</h3><ol>
<li><p>æ•°æ®åº“é…ç½®æ–‡ä»¶ <code>database.properties</code></p>
<p>æ³¨æ„ï¼šå¦‚æœæ˜¯ MySQL 8.0+ï¼Œéœ€è¦å¢åŠ <code>&amp;serverTimezone=Asia/Shanghai</code></p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="meta">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/ssmbuild?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf8</span></span><br><span class="line"><span class="meta">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">jdbc.password</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>IDEA è¿æ¥ MySQLï¼Œé€‰æ‹©ç›¸å…³æ•°æ®åº“</p>
</li>
<li><p>Mybatis æ ¸å¿ƒé…ç½®æ–‡ä»¶<code>mybatis-config.xml</code>ï¼Œå…³è”æ‰€æœ‰å®ä½“ç±»å’Œ Mapper æ¥å£</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;STDOUT_LOGGING&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.horsen.model&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.horsen.mapper&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™å®ä½“ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Books</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> bookID;</span><br><span class="line">    <span class="keyword">private</span> String bookName;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> bookCounts;</span><br><span class="line">    <span class="keyword">private</span> String detail;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™ Mapper æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BookMapper</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¢åŠ ä¸€æœ¬ä¹¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">addBook</span><span class="params">(Books book)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤ä¸€æœ¬ä¹¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">deleteBookById</span><span class="params">(<span class="meta">@Param(&quot;bookID&quot;)</span> <span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ›´æ–°ä¸€æœ¬ä¹¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">updateBook</span><span class="params">(Books book)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢ä¸€æœ¬ä¹¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">Books <span class="title">queryBookById</span><span class="params">(<span class="meta">@Param(&quot;bookID&quot;)</span> <span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢å…¨éƒ¨çš„ä¹¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List&lt;Books&gt; <span class="title">queryAllBooks</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™ Mapper.xml å®ç°æ¥å£</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.horsen.mapper.BookMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¢åŠ ä¸€æœ¬ä¹¦ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addBook&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Books&quot;</span>&gt;</span></span><br><span class="line">        insert into ssmbuild.books(bookName, bookCounts, detail)</span><br><span class="line">        values (#&#123;bookName&#125;, #&#123;bookCounts&#125;, #&#123;detail&#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åˆ é™¤ä¸€æœ¬ä¹¦ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteBookById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;_int&quot;</span>&gt;</span></span><br><span class="line">        delete</span><br><span class="line">        from ssmbuild.books</span><br><span class="line">        where bookID = #&#123;bookID&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ›´æ–°ä¸€æœ¬ä¹¦ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateBook&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Books&quot;</span>&gt;</span></span><br><span class="line">        update ssmbuild.books</span><br><span class="line">        set bookName   = #&#123;bookName&#125;,</span><br><span class="line">            bookCounts = #&#123;bookCounts&#125;,</span><br><span class="line">            detail     = #&#123;detail&#125;</span><br><span class="line">        where bookID = #&#123;bookID&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æŸ¥è¯¢ä¸€æœ¬ä¹¦ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBookById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Books&quot;</span>&gt;</span></span><br><span class="line">        select *</span><br><span class="line">        from ssmbuild.books</span><br><span class="line">        where bookID = #&#123;bookID&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æŸ¥è¯¢å…¨éƒ¨çš„ä¹¦ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryAllBooks&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Books&quot;</span>&gt;</span></span><br><span class="line">        select *</span><br><span class="line">        from ssmbuild.books;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Service å±‚æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BookService</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¢åŠ ä¸€æœ¬ä¹¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">addBook</span><span class="params">(Books book)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤ä¸€æœ¬ä¹¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">deleteBookById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ›´æ–°ä¸€æœ¬ä¹¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">updateBook</span><span class="params">(Books book)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢ä¸€æœ¬ä¹¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">Books <span class="title">queryBookById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢å…¨éƒ¨çš„ä¹¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List&lt;Books&gt; <span class="title">queryAllBooks</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Service å±‚å®ç°ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title">BookService</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Serviceå±‚è°ƒç”¨Daoå±‚</span></span><br><span class="line">    <span class="keyword">private</span> BookMapper bookMapper;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBookMapper</span><span class="params">(BookMapper bookMapper)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.bookMapper = bookMapper;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">addBook</span><span class="params">(Books book)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> bookMapper.addBook(book);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">deleteBookById</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> bookMapper.deleteBookById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">updateBook</span><span class="params">(Books book)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> bookMapper.updateBook(book);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Books <span class="title">queryBookById</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> bookMapper.queryBookById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Books&gt; <span class="title">queryAllBooks</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> bookMapper.queryAllBooks();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




</li>
</ol>
<h3 id="4-Spring-å±‚ç¼–å†™ï¼ˆé€šç”¨ï¼‰"><a href="#4-Spring-å±‚ç¼–å†™ï¼ˆé€šç”¨ï¼‰" class="headerlink" title="4. Spring å±‚ç¼–å†™ï¼ˆé€šç”¨ï¼‰"></a>4. Spring å±‚ç¼–å†™ï¼ˆé€šç”¨ï¼‰</h3><ol>
<li><p>ç¼–å†™ Spring æ•´åˆ Mybatisï¼ˆMapper å±‚ï¼‰çš„é…ç½®æ–‡ä»¶<code>spring-mapper.xml</code></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å…³è”æ•°æ®åº“é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:database.properties&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è¿æ¥æ± </span></span><br><span class="line"><span class="comment">        dbcp: åŠè‡ªåŠ¨åŒ–æ“ä½œ, ä¸èƒ½è‡ªåŠ¨è¿æ¥</span></span><br><span class="line"><span class="comment">        c3p0: è‡ªåŠ¨åŒ–æ“ä½œ(è‡ªåŠ¨åŒ–çš„åŠ è½½é…ç½®æ–‡ä»¶, å¹¶ä¸”å¯ä»¥è®¾ç½®åˆ°å¯¹è±¡ä¸­)</span></span><br><span class="line"><span class="comment">        druid/hikari: åé¢å†è¯´</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- c3p0è¿æ¥æ± çš„ç§æœ‰å±æ€§ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxPoolSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;30&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;minPoolSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å…³é—­è¿æ¥åä¸è‡ªåŠ¨commit --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;autoCommitOnClose&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è·å–è¿æ¥è¶…æ—¶æ—¶é—´ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;checkoutTimeout&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10000&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å½“è·å–è¿æ¥å¤±è´¥é‡è¯•æ¬¡æ•° --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;acquireRetryAttempts&quot;</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- SqlSessionFactory --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ç»‘å®šMybatisçš„é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®Mapperæ¥å£æ‰«æåŒ…, åŠ¨æ€å®ç°Mapperæ¥å£, å°†å…¶æ³¨å…¥åˆ°Springå®¹å™¨ä¸­ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ³¨å…¥sqlSessionFactory --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactoryBeanName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;sqlSessionFactory&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ‰«æMapperæ¥å£çš„åŒ… --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.horsen.mapper&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™ Spring æ•´åˆ Service å±‚çš„é…ç½®æ–‡ä»¶<code>spring-service.xml</code></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ‰«æServiceçš„åŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.horsen.service&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å°†æ‰€æœ‰ä¸šåŠ¡éƒ½æ³¨å…¥åˆ°Spring --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bookService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.horsen.service.BookServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bookMapper&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookMapper&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ³¨å…¥æ•°æ®æº --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="5-Spring-MVC-å±‚ç¼–å†™ï¼ˆé€šç”¨ï¼‰"><a href="#5-Spring-MVC-å±‚ç¼–å†™ï¼ˆé€šç”¨ï¼‰" class="headerlink" title="5. Spring MVC å±‚ç¼–å†™ï¼ˆé€šç”¨ï¼‰"></a>5. Spring MVC å±‚ç¼–å†™ï¼ˆé€šç”¨ï¼‰</h3><ol>
<li><p>ç¼–å†™ <code>web.xml</code></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- DispatcherServlet --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è§£å†³ä¹±ç é—®é¢˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encodeingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encodeingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Sessionè¿‡æœŸæ—¶é—´ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>15<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™ Spring æ•´åˆ MVC é…ç½®æ–‡ä»¶<code>spring-mvc.xml</code></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ³¨è§£é©±åŠ¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é™æ€èµ„æºè¿‡æ»¤ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ‰«æControllerçš„åŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.horsen.controller&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>é¡ºä¾¿æŠŠ jsp è¿™ä¸ªç›®å½•æ–°å»ºäº†</p>
</li>
<li><p>åœ¨<code>applicationContext.xml</code>é‡Œå°†ä¸‰ä¸ªé…ç½®æ–‡ä»¶å¯¼å…¥</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;spring-mapper.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;spring-service.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;spring-mvc.xml&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="6-å°ç»“"><a href="#6-å°ç»“" class="headerlink" title="6. å°ç»“"></a>6. å°ç»“</h3><blockquote>
<p>åˆšæ‰çš„ä¸€é¡¿æ“ä½œéƒ½åšäº†ä»€ä¹ˆï¼Ÿ</p>
</blockquote>
<ul>
<li>å‡†å¤‡æ•°æ®åº“</li>
<li>æ–°å»ºé¡¹ç›®ï¼Œæ·»åŠ  web æ”¯æŒ</li>
<li>ç¼–å†™<code>pom.xml</code><ul>
<li>å¯¼å…¥ä¾èµ–</li>
<li>è§£å†³èµ„æºå¯¼å‡ºé—®é¢˜</li>
</ul>
</li>
<li>æ–°å»ºå„ç§åŒ…</li>
<li>Mybatis å±‚<ul>
<li>æ•°æ®åº“<code>database.properties</code></li>
<li>æ ¸å¿ƒé…ç½®æ–‡ä»¶<code>mybatis-config.xml</code><ul>
<li>å…³è”æ‰€æœ‰å®ä½“ç±»å’Œ Mapper æ¥å£</li>
</ul>
</li>
<li>ç¼–å†™å®ä½“ç±»</li>
<li>ç¼–å†™ Mapper æ¥å£</li>
<li>ç¼–å†™ Mapper.xml</li>
<li>ç¼–å†™ Service æ¥å£</li>
<li>ç¼–å†™ Service å®ç°ç±»ï¼ˆè°ƒç”¨ Mapperï¼‰</li>
</ul>
</li>
<li>Spring å±‚<ul>
<li>æ•´åˆ Mybatis<code>spring-mapper.xml</code><ul>
<li>å…³è”æ•°æ®åº“é…ç½®æ–‡ä»¶</li>
<li>è¿æ¥æ± </li>
<li>SqlSessionFactory</li>
<li>æ‰«æ Mapper åŒ…</li>
</ul>
</li>
<li>æ•´åˆ Service<code>spring-service.xml</code><ul>
<li>æ‰«æ Service åŒ…</li>
<li>æ³¨å…¥ä¸šåŠ¡</li>
<li>é…ç½®äº‹åŠ¡ç®¡ç†å™¨</li>
</ul>
</li>
</ul>
</li>
<li>Spring MVC å±‚<ul>
<li>ç¼–å†™<code>web.xml</code><ul>
<li>DispacherServlet</li>
<li>è§£å†³ä¹±ç é—®é¢˜</li>
<li>Session è¿‡æœŸæ—¶é—´</li>
</ul>
</li>
<li>æ•´åˆ MVC<code>spring-mvc.xml</code><ul>
<li>æ³¨è§£é©±åŠ¨</li>
<li>é™æ€èµ„æºè¿‡æ»¤</li>
<li>è§†å›¾è§£æå™¨</li>
<li>æ‰«æ Cotroller åŒ…</li>
</ul>
</li>
<li>é…ç½®æ–‡ä»¶å¯¼å…¥<code>applicationContext.xml</code></li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>Java å­¦ä¹ ç¬”è®°</category>
        <category>SSM æ¡†æ¶æ•´åˆ</category>
      </categories>
      <tags>
        <tag>Mybatis</tag>
        <tag>ç¯å¢ƒæ­å»º</tag>
        <tag>Spring</tag>
        <tag>Spring MVC</tag>
      </tags>
  </entry>
</search>
